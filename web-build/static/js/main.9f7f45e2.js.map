{"version":3,"file":"static/js/main.9f7f45e2.js","mappings":"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","sources":["node_modules/moment/locale|sync|/^/.//.*$","src/config/firebase.ts","src/services/firebaseSync.ts","src/state/aggregateLibraryStore.ts","src/state/admixLibraryStore.ts","src/state/contactsStore.ts","src/services/firebaseAuth.ts","src/services/firebaseUsers.ts","src/state/authStore.ts","src/services/firebaseImport.ts","src/screens/DataImportScreen.tsx","src/screens/DashboardScreen.tsx","src/state/calculatorStore.ts","src/utils/camber-calculations.ts","src/state/strandPatternStore.ts","src/state/productLibraryStore.ts","src/utils/cn.ts","src/state/projectLibraryStore.ts","src/utils/jobAutocomplete.ts","src/screens/CalculatorScreen.tsx","src/utils/strand-patterns.ts","src/screens/ResultsScreen.tsx","src/components/ConfirmModal.tsx","src/screens/HistoryScreen.tsx","src/screens/StrandPatternsScreen.tsx","src/screens/ProductDetailsScreen.tsx","src/components/CrossSection8048.tsx","src/components/CrossSection1048.tsx","src/components/CrossSection1247.tsx","src/components/CrossSection1250.tsx","src/components/CrossSection1648.tsx","src/components/CrossSection1650.tsx","src/screens/SlippageIdentifierScreen.tsx","src/state/slippageHistoryStore.ts","src/utils/pdfGenerator.ts","src/screens/SlippageSummaryScreen.tsx","src/screens/SlippageHistoryScreen.tsx","src/api/microsoft-graph.ts","src/screens/EmailComposerScreen.tsx","src/state/strandLibraryStore.ts","src/screens/StressingCalculatorScreen.tsx","src/utils/stressing-calculations.ts","src/screens/StressingResultsScreen.tsx","src/screens/StrandLibraryScreen.tsx","src/utils/aggregate-gradation-constants.ts","src/state/aggregateGradationStore.ts","src/screens/AggregateGradationScreen.tsx","src/screens/GradationTestScreen.tsx","src/utils/aggregate-gradation-calculations.ts","src/components/GradationChart.tsx","src/screens/GradationResultsScreen.tsx","src/screens/GradationHistoryScreen.tsx","src/screens/GradationAdminScreen.tsx","src/screens/GradationAddEditAggregateScreen.tsx","src/screens/AggregateLibraryScreen.tsx","src/screens/AggregateLibraryDetailScreen.tsx","src/api/transcribe-audio.ts","src/components/VoiceInputButton.tsx","src/components/VoiceTextInput.tsx","src/components/ValidationWarnings.tsx","src/screens/AggregateLibraryAddEditScreen.tsx","src/utils/dataValidation.ts","src/screens/AdmixLibraryScreen.tsx","src/screens/AdmixLibraryDetailScreen.tsx","src/utils/phoneFormatter.ts","src/utils/specificGravityParser.ts","src/components/PhotoAttachments.tsx","src/screens/AdmixLibraryAddEditScreen.tsx","src/screens/ContactsScreen.tsx","src/screens/ContactDetailScreen.tsx","src/screens/ContactAddEditScreen.tsx","src/state/qualityLogStore.ts","src/screens/QualityLogDashboardScreen.tsx","src/screens/QualityLogListScreen.tsx","src/screens/QualityLogDetailScreen.tsx","src/screens/QualityLogAddEditScreen.tsx","src/screens/QualityLogMetricsScreen.tsx","src/screens/QualityLogSearchScreen.tsx","src/screens/IssueCodeLibraryScreen.tsx","src/screens/ProductLibraryScreen.tsx","src/screens/ProjectLibraryScreen.tsx","src/screens/ProjectLibraryDetailScreen.tsx","src/utils/jobNumberValidation.ts","src/screens/ProjectLibraryAddEditScreen.tsx","src/screens/ProjectLibraryExportImportScreen.tsx","src/types/pour-schedule.ts","src/api/eliplan.ts","src/state/pourScheduleStore.ts","src/components/JobAutocompleteInput.tsx","src/screens/DailyPourScheduleScreen.tsx","src/screens/ScheduleSearchScreen.tsx","src/screens/ScheduleScannerScreen.tsx","src/api/schedule-scanner.ts","src/screens/ScheduleReviewScreen.tsx","src/api/product-tag-scanner.ts","src/screens/ProductTagScannerScreen.tsx","src/screens/LoginScreen.tsx","src/screens/RegistrationScreen.tsx","src/utils/passwordValidation.ts","src/screens/AdminApprovalScreen.tsx","src/screens/ChangePasswordScreen.tsx","src/state/yardLocationStore.ts","src/screens/YardMapScreen.tsx","src/screens/YardDepartmentScreen.tsx","src/screens/YardProductSelectionScreen.tsx","src/screens/YardSearchScreen.tsx","App.tsx","index.ts","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/node module decorator","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var map = {\n\t\"./af\": 17582,\n\t\"./af.js\": 17582,\n\t\"./ar\": 93042,\n\t\"./ar-dz\": 54265,\n\t\"./ar-dz.js\": 54265,\n\t\"./ar-kw\": 92553,\n\t\"./ar-kw.js\": 92553,\n\t\"./ar-ly\": 85352,\n\t\"./ar-ly.js\": 85352,\n\t\"./ar-ma\": 67097,\n\t\"./ar-ma.js\": 67097,\n\t\"./ar-ps\": 76150,\n\t\"./ar-ps.js\": 76150,\n\t\"./ar-sa\": 84427,\n\t\"./ar-sa.js\": 84427,\n\t\"./ar-tn\": 7221,\n\t\"./ar-tn.js\": 7221,\n\t\"./ar.js\": 93042,\n\t\"./az\": 60458,\n\t\"./az.js\": 60458,\n\t\"./be\": 17596,\n\t\"./be.js\": 17596,\n\t\"./bg\": 93830,\n\t\"./bg.js\": 93830,\n\t\"./bm\": 27044,\n\t\"./bm.js\": 27044,\n\t\"./bn\": 58573,\n\t\"./bn-bd\": 13296,\n\t\"./bn-bd.js\": 13296,\n\t\"./bn.js\": 58573,\n\t\"./bo\": 25614,\n\t\"./bo.js\": 25614,\n\t\"./br\": 62041,\n\t\"./br.js\": 62041,\n\t\"./bs\": 91786,\n\t\"./bs.js\": 91786,\n\t\"./ca\": 75833,\n\t\"./ca.js\": 75833,\n\t\"./cs\": 52711,\n\t\"./cs.js\": 52711,\n\t\"./cv\": 71036,\n\t\"./cv.js\": 71036,\n\t\"./cy\": 84977,\n\t\"./cy.js\": 84977,\n\t\"./da\": 8770,\n\t\"./da.js\": 8770,\n\t\"./de\": 67342,\n\t\"./de-at\": 81566,\n\t\"./de-at.js\": 81566,\n\t\"./de-ch\": 87544,\n\t\"./de-ch.js\": 87544,\n\t\"./de.js\": 67342,\n\t\"./dv\": 82875,\n\t\"./dv.js\": 82875,\n\t\"./el\": 78536,\n\t\"./el.js\": 78536,\n\t\"./en-au\": 38617,\n\t\"./en-au.js\": 38617,\n\t\"./en-ca\": 79227,\n\t\"./en-ca.js\": 79227,\n\t\"./en-gb\": 59754,\n\t\"./en-gb.js\": 59754,\n\t\"./en-ie\": 37217,\n\t\"./en-ie.js\": 37217,\n\t\"./en-il\": 85418,\n\t\"./en-il.js\": 85418,\n\t\"./en-in\": 80800,\n\t\"./en-in.js\": 80800,\n\t\"./en-nz\": 67299,\n\t\"./en-nz.js\": 67299,\n\t\"./en-sg\": 76305,\n\t\"./en-sg.js\": 76305,\n\t\"./eo\": 8673,\n\t\"./eo.js\": 8673,\n\t\"./es\": 71301,\n\t\"./es-do\": 3187,\n\t\"./es-do.js\": 3187,\n\t\"./es-mx\": 48223,\n\t\"./es-mx.js\": 48223,\n\t\"./es-us\": 37634,\n\t\"./es-us.js\": 37634,\n\t\"./es.js\": 71301,\n\t\"./et\": 4976,\n\t\"./et.js\": 4976,\n\t\"./eu\": 11847,\n\t\"./eu.js\": 11847,\n\t\"./fa\": 74372,\n\t\"./fa.js\": 74372,\n\t\"./fi\": 41628,\n\t\"./fi.js\": 41628,\n\t\"./fil\": 56802,\n\t\"./fil.js\": 56802,\n\t\"./fo\": 42874,\n\t\"./fo.js\": 42874,\n\t\"./fr\": 9853,\n\t\"./fr-ca\": 87170,\n\t\"./fr-ca.js\": 87170,\n\t\"./fr-ch\": 22825,\n\t\"./fr-ch.js\": 22825,\n\t\"./fr.js\": 9853,\n\t\"./fy\": 68876,\n\t\"./fy.js\": 68876,\n\t\"./ga\": 93533,\n\t\"./ga.js\": 93533,\n\t\"./gd\": 82770,\n\t\"./gd.js\": 82770,\n\t\"./gl\": 98602,\n\t\"./gl.js\": 98602,\n\t\"./gom-deva\": 63059,\n\t\"./gom-deva.js\": 63059,\n\t\"./gom-latn\": 48212,\n\t\"./gom-latn.js\": 48212,\n\t\"./gu\": 23409,\n\t\"./gu.js\": 23409,\n\t\"./he\": 17210,\n\t\"./he.js\": 17210,\n\t\"./hi\": 4750,\n\t\"./hi.js\": 4750,\n\t\"./hr\": 51315,\n\t\"./hr.js\": 51315,\n\t\"./hu\": 47626,\n\t\"./hu.js\": 47626,\n\t\"./hy-am\": 91317,\n\t\"./hy-am.js\": 91317,\n\t\"./id\": 26892,\n\t\"./id.js\": 26892,\n\t\"./is\": 97577,\n\t\"./is.js\": 97577,\n\t\"./it\": 57628,\n\t\"./it-ch\": 3046,\n\t\"./it-ch.js\": 3046,\n\t\"./it.js\": 57628,\n\t\"./ja\": 92504,\n\t\"./ja.js\": 92504,\n\t\"./jv\": 25917,\n\t\"./jv.js\": 25917,\n\t\"./ka\": 64513,\n\t\"./ka.js\": 64513,\n\t\"./kk\": 94935,\n\t\"./kk.js\": 94935,\n\t\"./km\": 96661,\n\t\"./km.js\": 96661,\n\t\"./kn\": 89964,\n\t\"./kn.js\": 89964,\n\t\"./ko\": 98067,\n\t\"./ko.js\": 98067,\n\t\"./ku\": 61165,\n\t\"./ku-kmr\": 85158,\n\t\"./ku-kmr.js\": 85158,\n\t\"./ku.js\": 61165,\n\t\"./ky\": 11177,\n\t\"./ky.js\": 11177,\n\t\"./lb\": 2967,\n\t\"./lb.js\": 2967,\n\t\"./lo\": 81972,\n\t\"./lo.js\": 81972,\n\t\"./lt\": 58469,\n\t\"./lt.js\": 58469,\n\t\"./lv\": 33155,\n\t\"./lv.js\": 33155,\n\t\"./me\": 87935,\n\t\"./me.js\": 87935,\n\t\"./mi\": 74483,\n\t\"./mi.js\": 74483,\n\t\"./mk\": 32501,\n\t\"./mk.js\": 32501,\n\t\"./ml\": 73120,\n\t\"./ml.js\": 73120,\n\t\"./mn\": 20266,\n\t\"./mn.js\": 20266,\n\t\"./mr\": 19406,\n\t\"./mr.js\": 19406,\n\t\"./ms\": 80109,\n\t\"./ms-my\": 90864,\n\t\"./ms-my.js\": 90864,\n\t\"./ms.js\": 80109,\n\t\"./mt\": 22904,\n\t\"./mt.js\": 22904,\n\t\"./my\": 44067,\n\t\"./my.js\": 44067,\n\t\"./nb\": 21301,\n\t\"./nb.js\": 21301,\n\t\"./ne\": 81152,\n\t\"./ne.js\": 81152,\n\t\"./nl\": 76735,\n\t\"./nl-be\": 97761,\n\t\"./nl-be.js\": 97761,\n\t\"./nl.js\": 76735,\n\t\"./nn\": 37569,\n\t\"./nn.js\": 37569,\n\t\"./oc-lnc\": 20833,\n\t\"./oc-lnc.js\": 20833,\n\t\"./pa-in\": 3044,\n\t\"./pa-in.js\": 3044,\n\t\"./pl\": 34249,\n\t\"./pl.js\": 34249,\n\t\"./pt\": 87585,\n\t\"./pt-br\": 26826,\n\t\"./pt-br.js\": 26826,\n\t\"./pt.js\": 87585,\n\t\"./ro\": 62526,\n\t\"./ro.js\": 62526,\n\t\"./ru\": 62204,\n\t\"./ru.js\": 62204,\n\t\"./sd\": 43270,\n\t\"./sd.js\": 43270,\n\t\"./se\": 61541,\n\t\"./se.js\": 61541,\n\t\"./si\": 71921,\n\t\"./si.js\": 71921,\n\t\"./sk\": 49935,\n\t\"./sk.js\": 49935,\n\t\"./sl\": 46254,\n\t\"./sl.js\": 46254,\n\t\"./sq\": 59897,\n\t\"./sq.js\": 59897,\n\t\"./sr\": 42496,\n\t\"./sr-cyrl\": 11135,\n\t\"./sr-cyrl.js\": 11135,\n\t\"./sr.js\": 42496,\n\t\"./ss\": 32215,\n\t\"./ss.js\": 32215,\n\t\"./sv\": 84716,\n\t\"./sv.js\": 84716,\n\t\"./sw\": 50803,\n\t\"./sw.js\": 50803,\n\t\"./ta\": 31538,\n\t\"./ta.js\": 31538,\n\t\"./te\": 2302,\n\t\"./te.js\": 2302,\n\t\"./tet\": 25280,\n\t\"./tet.js\": 25280,\n\t\"./tg\": 14100,\n\t\"./tg.js\": 14100,\n\t\"./th\": 95385,\n\t\"./th.js\": 95385,\n\t\"./tk\": 736,\n\t\"./tk.js\": 736,\n\t\"./tl-ph\": 79726,\n\t\"./tl-ph.js\": 79726,\n\t\"./tlh\": 41873,\n\t\"./tlh.js\": 41873,\n\t\"./tr\": 36463,\n\t\"./tr.js\": 36463,\n\t\"./tzl\": 27491,\n\t\"./tzl.js\": 27491,\n\t\"./tzm\": 29500,\n\t\"./tzm-latn\": 80196,\n\t\"./tzm-latn.js\": 80196,\n\t\"./tzm.js\": 29500,\n\t\"./ug-cn\": 91287,\n\t\"./ug-cn.js\": 91287,\n\t\"./uk\": 35341,\n\t\"./uk.js\": 35341,\n\t\"./ur\": 36246,\n\t\"./ur.js\": 36246,\n\t\"./uz\": 55550,\n\t\"./uz-latn\": 77254,\n\t\"./uz-latn.js\": 77254,\n\t\"./uz.js\": 55550,\n\t\"./vi\": 78796,\n\t\"./vi.js\": 78796,\n\t\"./x-pseudo\": 22736,\n\t\"./x-pseudo.js\": 22736,\n\t\"./yo\": 28621,\n\t\"./yo.js\": 28621,\n\t\"./zh-cn\": 67601,\n\t\"./zh-cn.js\": 67601,\n\t\"./zh-hk\": 39053,\n\t\"./zh-hk.js\": 39053,\n\t\"./zh-mo\": 71248,\n\t\"./zh-mo.js\": 71248,\n\t\"./zh-tw\": 74725,\n\t\"./zh-tw.js\": 74725\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;","import { initializeApp, getApps, getApp, FirebaseApp } from 'firebase/app';\nimport { getAuth, initializeAuth, Auth } from 'firebase/auth';\nimport { getFirestore, initializeFirestore, Firestore, persistentLocalCache, persistentMultipleTabManager } from 'firebase/firestore';\nimport { getStorage, FirebaseStorage } from 'firebase/storage';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Platform } from 'react-native';\n\n// Suppress console errors for transient network/SSL errors\nconst originalConsoleError = console.error;\nconsole.error = (...args) => {\n  const message = args.join(' ');\n  // Suppress known transient Firebase/network errors\n  if (\n    message.includes('NSURLErrorDomain') ||\n    message.includes('error -1013') ||\n    message.includes('The operation couldn\\'t be completed') ||\n    (message.includes('API ERROR') && message.includes('Network error'))\n  ) {\n    // Log to console.log instead for debugging, but don't show error toast\n    console.log('[Firebase] Transient network error suppressed:', message);\n    return;\n  }\n  originalConsoleError(...args);\n};\n\n// Firebase configuration\n// All values should come from environment variables\nconst firebaseConfig = {\n  apiKey: process.env.EXPO_PUBLIC_FIREBASE_API_KEY || \"\",\n  authDomain: process.env.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN || \"\",\n  projectId: process.env.EXPO_PUBLIC_FIREBASE_PROJECT_ID || \"\",\n  storageBucket: process.env.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET || \"\",\n  messagingSenderId: process.env.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"\",\n  appId: process.env.EXPO_PUBLIC_FIREBASE_APP_ID || \"\",\n};\n\n// Initialize Firebase\nlet app: FirebaseApp;\nif (getApps().length === 0) {\n  app = initializeApp(firebaseConfig);\n} else {\n  app = getApp();\n}\n\n// Initialize Auth\n// For React Native, we need to use initializeAuth with AsyncStorage for persistence\nlet auth: Auth;\nif (Platform.OS !== 'web') {\n  try {\n    // Import getReactNativePersistence from the correct path\n    // This is available in firebase/auth for React Native\n    const { getReactNativePersistence }: any = require('firebase/auth');\n    auth = initializeAuth(app, {\n      persistence: getReactNativePersistence(AsyncStorage)\n    });\n  } catch (error: any) {\n    // Fallback: if already initialized or import fails, just get the auth instance\n    console.warn('Failed to initialize auth with persistence:', error.message);\n    auth = getAuth(app);\n  }\n} else {\n  // For web, use getAuth (persistence is automatic via IndexedDB)\n  auth = getAuth(app);\n}\n\n// Initialize Firestore\nlet firestore: Firestore;\nif (Platform.OS === 'web') {\n  // For web, use the new cache API with persistent local cache\n  try {\n    firestore = initializeFirestore(app, {\n      localCache: persistentLocalCache({\n        tabManager: persistentMultipleTabManager()\n      })\n    });\n  } catch (error: any) {\n    // If already initialized, get the existing instance\n    console.warn('Firestore already initialized:', error.message);\n    firestore = getFirestore(app);\n  }\n} else {\n  // For React Native, use custom settings for better offline support\n  try {\n    firestore = initializeFirestore(app, {\n      cacheSizeBytes: 50 * 1024 * 1024, // 50 MB cache\n      experimentalForceLongPolling: true, // Help with connection issues\n    });\n  } catch (error: any) {\n    // If already initialized, get the existing instance\n    console.warn('Firestore already initialized:', error.message);\n    firestore = getFirestore(app);\n  }\n}\n\n// Initialize Storage\nconst storage: FirebaseStorage = getStorage(app);\n\nexport { app, auth, firestore, storage };\n","import {\n  collection,\n  doc,\n  getDocs,\n  onSnapshot,\n  setDoc,\n  deleteDoc,\n  serverTimestamp,\n  query,\n  Unsubscribe,\n} from 'firebase/firestore';\nimport { firestore } from '../config/firebase';\n\n/**\n * Generic Firebase sync helper for Zustand stores\n */\nexport class FirebaseSync<T extends { id: string }> {\n  private collectionName: string;\n  private unsubscribe: Unsubscribe | null = null;\n\n  constructor(collectionName: string) {\n    this.collectionName = collectionName;\n  }\n\n  /**\n   * Fetch all documents from collection\n   */\n  async fetchAll(): Promise<T[]> {\n    try {\n      const q = query(collection(firestore, this.collectionName));\n      const querySnapshot = await getDocs(q);\n\n      return querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n      } as T));\n    } catch (error) {\n      console.error(`Error fetching ${this.collectionName}:`, error);\n      return [];\n    }\n  }\n\n  /**\n   * Subscribe to real-time updates\n   */\n  subscribe(onUpdate: (items: T[]) => void): () => void {\n    const q = query(collection(firestore, this.collectionName));\n\n    this.unsubscribe = onSnapshot(\n      q,\n      (querySnapshot) => {\n        const items = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data(),\n        } as T));\n        onUpdate(items);\n      },\n      (error) => {\n        console.error(`Error subscribing to ${this.collectionName}:`, error);\n      }\n    );\n\n    return () => this.unsubscribe?.();\n  }\n\n  /**\n   * Add or update a document\n   */\n  async set(id: string, data: Partial<T>): Promise<void> {\n    try {\n      // Remove undefined values to prevent Firebase errors\n      const cleanData = this.removeUndefinedFields(data);\n\n      const docRef = doc(firestore, this.collectionName, id);\n      await setDoc(docRef, {\n        ...cleanData,\n        updatedAt: serverTimestamp(),\n      }, { merge: true });\n    } catch (error) {\n      console.error(`Error setting document in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Recursively remove undefined fields from an object\n   */\n  private removeUndefinedFields<T>(obj: T): T {\n    if (obj === null || obj === undefined) {\n      return obj;\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(item => this.removeUndefinedFields(item)) as T;\n    }\n\n    if (typeof obj === 'object') {\n      const cleaned: any = {};\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          const value = obj[key];\n          if (value !== undefined) {\n            cleaned[key] = this.removeUndefinedFields(value);\n          }\n        }\n      }\n      return cleaned as T;\n    }\n\n    return obj;\n  }\n\n  /**\n   * Delete a document\n   */\n  async delete(id: string): Promise<void> {\n    try {\n      const docRef = doc(firestore, this.collectionName, id);\n      await deleteDoc(docRef);\n    } catch (error) {\n      console.error(`Error deleting document from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Cleanup subscriptions\n   */\n  cleanup() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n      this.unsubscribe = null;\n    }\n  }\n}\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { AggregateLibraryItem } from '../types/aggregate-library';\n\ninterface AggregateLibraryState {\n  aggregates: Record<string, AggregateLibraryItem>;\n  loading: boolean;\n  initialized: boolean;\n\n  // CRUD operations\n  addAggregate: (aggregate: AggregateLibraryItem) => Promise<void>;\n  updateAggregate: (id: string, updates: Partial<AggregateLibraryItem>) => Promise<void>;\n  deleteAggregate: (id: string) => Promise<void>;\n  getAggregate: (id: string) => AggregateLibraryItem | undefined;\n\n  // Utility functions\n  getAllAggregates: () => AggregateLibraryItem[];\n  searchAggregates: (query: string) => AggregateLibraryItem[];\n  isAggregateComplete: (id: string) => boolean;\n\n  // Favorites & Recently Used\n  toggleFavorite: (id: string) => Promise<void>;\n  getFavorites: () => AggregateLibraryItem[];\n  trackAccess: (id: string) => Promise<void>;\n  getRecentlyUsed: (limit?: number) => AggregateLibraryItem[];\n\n  // Duplicate\n  duplicateAggregate: (id: string) => Promise<AggregateLibraryItem | undefined>;\n\n  // Initialize\n  initialize: () => Promise<void>;\n}\n\n// Helper function to check if aggregate has all required fields\nconst checkAggregateComplete = (aggregate: AggregateLibraryItem): boolean => {\n  const hasBasicInfo = !!(\n    aggregate.name &&\n    aggregate.type &&\n    aggregate.dryRoddedUnitWeight !== undefined &&\n    aggregate.percentVoids !== undefined &&\n    aggregate.absorption !== undefined &&\n    aggregate.specificGravityBulkSSD !== undefined &&\n    aggregate.specificGravityBulkDry !== undefined &&\n    aggregate.specificGravityApparent !== undefined\n  );\n\n  if (aggregate.type === 'Fine') {\n    return hasBasicInfo && aggregate.finenessModulus !== undefined;\n  }\n\n  return hasBasicInfo;\n};\n\nconst firebaseSync = new FirebaseSync<AggregateLibraryItem>('aggregateLibrary');\n\nexport const useAggregateLibraryStore = create<AggregateLibraryState>()((set, get) => ({\n  aggregates: {},\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const items = await firebaseSync.fetchAll();\n      const aggregates = items.reduce((acc, item) => {\n        acc[item.id] = item;\n        return acc;\n      }, {} as Record<string, AggregateLibraryItem>);\n\n      set({ aggregates, loading: false, initialized: true });\n\n      // Subscribe to real-time updates\n      firebaseSync.subscribe((updatedItems) => {\n        const updatedAggregates = updatedItems.reduce((acc, item) => {\n          acc[item.id] = item;\n          return acc;\n        }, {} as Record<string, AggregateLibraryItem>);\n        set({ aggregates: updatedAggregates });\n      });\n    } catch (error) {\n      console.error('Failed to initialize aggregates:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addAggregate: async (aggregate) => {\n    const newAggregate = {\n      ...aggregate,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      aggregates: {\n        ...state.aggregates,\n        [aggregate.id]: newAggregate,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(aggregate.id, newAggregate);\n    } catch (error) {\n      // Revert on error\n      set((state) => {\n        const { [aggregate.id]: deleted, ...remaining } = state.aggregates;\n        return { aggregates: remaining };\n      });\n      throw error;\n    }\n  },\n\n  updateAggregate: async (id, updates) => {\n    const existing = get().aggregates[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      ...updates,\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      aggregates: {\n        ...state.aggregates,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        aggregates: {\n          ...state.aggregates,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  deleteAggregate: async (id) => {\n    const existing = get().aggregates[id];\n\n    // Optimistically update UI\n    set((state) => {\n      const { [id]: deleted, ...remaining } = state.aggregates;\n      return { aggregates: remaining };\n    });\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      // Revert on error\n      if (existing) {\n        set((state) => ({\n          aggregates: {\n            ...state.aggregates,\n            [id]: existing,\n          },\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getAggregate: (id) => get().aggregates[id],\n\n  getAllAggregates: () => {\n    const aggregates = get().aggregates;\n    return Object.values(aggregates).sort((a, b) =>\n      a.name.localeCompare(b.name)\n    );\n  },\n\n  searchAggregates: (query) => {\n    const allAggregates = get().getAllAggregates();\n    const lowerQuery = query.toLowerCase();\n\n    return allAggregates.filter(agg =>\n      agg.name.toLowerCase().includes(lowerQuery) ||\n      agg.source?.toLowerCase().includes(lowerQuery) ||\n      agg.stockpileNumber?.toLowerCase().includes(lowerQuery) ||\n      agg.colorFamily?.toLowerCase().includes(lowerQuery)\n    );\n  },\n\n  isAggregateComplete: (id) => {\n    const aggregate = get().aggregates[id];\n    if (!aggregate) return false;\n    return checkAggregateComplete(aggregate);\n  },\n\n  toggleFavorite: async (id) => {\n    const existing = get().aggregates[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      isFavorite: !existing.isFavorite,\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      aggregates: {\n        ...state.aggregates,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        aggregates: {\n          ...state.aggregates,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  getFavorites: () => {\n    const allAggregates = get().getAllAggregates();\n    return allAggregates.filter(agg => agg.isFavorite);\n  },\n\n  trackAccess: async (id) => {\n    const existing = get().aggregates[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      lastAccessedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      aggregates: {\n        ...state.aggregates,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      // Revert on error - but this is less critical\n      console.error('Failed to track access:', error);\n    }\n  },\n\n  getRecentlyUsed: (limit = 5) => {\n    const allAggregates = get().getAllAggregates();\n    return allAggregates\n      .filter(agg => agg.lastAccessedAt)\n      .sort((a, b) => (b.lastAccessedAt || 0) - (a.lastAccessedAt || 0))\n      .slice(0, limit);\n  },\n\n  duplicateAggregate: async (id) => {\n    const existing = get().aggregates[id];\n    if (!existing) return undefined;\n\n    const newAggregate: AggregateLibraryItem = {\n      ...existing,\n      id: Date.now().toString(),\n      name: `${existing.name} (Copy)`,\n      isFavorite: false,\n      lastAccessedAt: undefined,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    await get().addAggregate(newAggregate);\n    return newAggregate;\n  },\n}));\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { AdmixLibraryItem } from '../types/admix-library';\n\ninterface AdmixLibraryState {\n  admixes: Record<string, AdmixLibraryItem>;\n  loading: boolean;\n  initialized: boolean;\n\n  // CRUD operations\n  addAdmix: (admix: AdmixLibraryItem) => Promise<void>;\n  updateAdmix: (id: string, updates: Partial<AdmixLibraryItem>) => Promise<void>;\n  deleteAdmix: (id: string) => Promise<void>;\n  getAdmix: (id: string) => AdmixLibraryItem | undefined;\n\n  // Utility functions\n  getAllAdmixes: () => AdmixLibraryItem[];\n  searchAdmixes: (query: string) => AdmixLibraryItem[];\n  isAdmixComplete: (id: string) => boolean;\n\n  // Favorites & Recently Used\n  toggleFavorite: (id: string) => Promise<void>;\n  getFavorites: () => AdmixLibraryItem[];\n  trackAccess: (id: string) => Promise<void>;\n  getRecentlyUsed: (limit?: number) => AdmixLibraryItem[];\n\n  // Duplicate\n  duplicateAdmix: (id: string) => Promise<AdmixLibraryItem | undefined>;\n\n  // Initialize\n  initialize: () => Promise<void>;\n}\n\n// Helper function to check if admix has all required fields\nconst checkAdmixComplete = (admix: AdmixLibraryItem): boolean => {\n  return !!(\n    admix.name &&\n    admix.manufacturer &&\n    admix.class &&\n    admix.specificGravity !== undefined\n  );\n};\n\nconst firebaseSync = new FirebaseSync<AdmixLibraryItem>('admixLibrary');\n\nexport const useAdmixLibraryStore = create<AdmixLibraryState>()((set, get) => ({\n  admixes: {},\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const items = await firebaseSync.fetchAll();\n      const admixes = items.reduce((acc, item) => {\n        acc[item.id] = item;\n        return acc;\n      }, {} as Record<string, AdmixLibraryItem>);\n\n      set({ admixes, loading: false, initialized: true });\n\n      firebaseSync.subscribe((updatedItems) => {\n        const updatedAdmixes = updatedItems.reduce((acc, item) => {\n          acc[item.id] = item;\n          return acc;\n        }, {} as Record<string, AdmixLibraryItem>);\n        set({ admixes: updatedAdmixes });\n      });\n    } catch (error) {\n      console.error('Failed to initialize admixes:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addAdmix: async (admix) => {\n    const newAdmix = {\n      ...admix,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      admixes: {\n        ...state.admixes,\n        [admix.id]: newAdmix,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(admix.id, newAdmix);\n    } catch (error) {\n      set((state) => {\n        const { [admix.id]: deleted, ...remaining } = state.admixes;\n        return { admixes: remaining };\n      });\n      throw error;\n    }\n  },\n\n  updateAdmix: async (id, updates) => {\n    const existing = get().admixes[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      ...updates,\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      admixes: {\n        ...state.admixes,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      set((state) => ({\n        admixes: {\n          ...state.admixes,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  deleteAdmix: async (id) => {\n    const existing = get().admixes[id];\n\n    set((state) => {\n      const { [id]: deleted, ...remaining } = state.admixes;\n      return { admixes: remaining };\n    });\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      if (existing) {\n        set((state) => ({\n          admixes: {\n            ...state.admixes,\n            [id]: existing,\n          },\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getAdmix: (id) => get().admixes[id],\n\n  getAllAdmixes: () => {\n    const admixes = get().admixes;\n    return Object.values(admixes).sort((a, b) =>\n      a.name.localeCompare(b.name)\n    );\n  },\n\n  searchAdmixes: (query) => {\n    const allAdmixes = get().getAllAdmixes();\n    const lowerQuery = query.toLowerCase();\n\n    return allAdmixes.filter(admix =>\n      admix.name.toLowerCase().includes(lowerQuery) ||\n      admix.manufacturer.toLowerCase().includes(lowerQuery) ||\n      admix.class.toLowerCase().includes(lowerQuery) ||\n      admix.salesRepName?.toLowerCase().includes(lowerQuery)\n    );\n  },\n\n  isAdmixComplete: (id) => {\n    const admix = get().admixes[id];\n    if (!admix) return false;\n    return checkAdmixComplete(admix);\n  },\n\n  toggleFavorite: async (id) => {\n    const existing = get().admixes[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      isFavorite: !existing.isFavorite,\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      admixes: {\n        ...state.admixes,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      set((state) => ({\n        admixes: {\n          ...state.admixes,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  getFavorites: () => {\n    const allAdmixes = get().getAllAdmixes();\n    return allAdmixes.filter(admix => admix.isFavorite);\n  },\n\n  trackAccess: async (id) => {\n    const existing = get().admixes[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      lastAccessedAt: Date.now(),\n    };\n\n    set((state) => ({\n      admixes: {\n        ...state.admixes,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      console.error('Failed to track access:', error);\n    }\n  },\n\n  getRecentlyUsed: (limit = 5) => {\n    const allAdmixes = get().getAllAdmixes();\n    return allAdmixes\n      .filter(admix => admix.lastAccessedAt)\n      .sort((a, b) => (b.lastAccessedAt || 0) - (a.lastAccessedAt || 0))\n      .slice(0, limit);\n  },\n\n  duplicateAdmix: async (id) => {\n    const existing = get().admixes[id];\n    if (!existing) return undefined;\n\n    const newAdmix: AdmixLibraryItem = {\n      ...existing,\n      id: Date.now().toString(),\n      name: `${existing.name} (Copy)`,\n      isFavorite: false,\n      lastAccessedAt: undefined,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    await get().addAdmix(newAdmix);\n    return newAdmix;\n  },\n}));\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { ContactItem } from '../types/contacts';\n\ninterface ContactsState {\n  contacts: Record<string, ContactItem>;\n  loading: boolean;\n  initialized: boolean;\n\n  // CRUD operations\n  addContact: (contact: ContactItem) => Promise<void>;\n  updateContact: (id: string, updates: Partial<ContactItem>) => Promise<void>;\n  deleteContact: (id: string) => Promise<void>;\n  getContact: (id: string) => ContactItem | undefined;\n\n  // Utility functions\n  getAllContacts: () => ContactItem[];\n  searchContacts: (query: string) => ContactItem[];\n  isContactComplete: (id: string) => boolean;\n\n  // Favorites & Recently Used\n  toggleFavorite: (id: string) => Promise<void>;\n  getFavorites: () => ContactItem[];\n  trackAccess: (id: string) => Promise<void>;\n  getRecentlyUsed: (limit?: number) => ContactItem[];\n\n  // Duplicate\n  duplicateContact: (id: string) => Promise<ContactItem | undefined>;\n\n  // Initialize\n  initialize: () => Promise<void>;\n}\n\n// Helper function to check if contact has all required fields\nconst checkContactComplete = (contact: ContactItem): boolean => {\n  return !!(\n    contact.name &&\n    contact.phone &&\n    contact.email\n  );\n};\n\nconst firebaseSync = new FirebaseSync<ContactItem>('contacts');\n\nexport const useContactsStore = create<ContactsState>()((set, get) => ({\n  contacts: {},\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const items = await firebaseSync.fetchAll();\n      const contacts = items.reduce((acc, item) => {\n        acc[item.id] = item;\n        return acc;\n      }, {} as Record<string, ContactItem>);\n\n      set({ contacts, loading: false, initialized: true });\n\n      firebaseSync.subscribe((updatedItems) => {\n        const updatedContacts = updatedItems.reduce((acc, item) => {\n          acc[item.id] = item;\n          return acc;\n        }, {} as Record<string, ContactItem>);\n        set({ contacts: updatedContacts });\n      });\n    } catch (error) {\n      console.error('Failed to initialize contacts:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addContact: async (contact) => {\n    const newContact = {\n      ...contact,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      contacts: {\n        ...state.contacts,\n        [contact.id]: newContact,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(contact.id, newContact);\n    } catch (error) {\n      set((state) => {\n        const { [contact.id]: deleted, ...remaining } = state.contacts;\n        return { contacts: remaining };\n      });\n      throw error;\n    }\n  },\n\n  updateContact: async (id, updates) => {\n    const existing = get().contacts[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      ...updates,\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      contacts: {\n        ...state.contacts,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      set((state) => ({\n        contacts: {\n          ...state.contacts,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  deleteContact: async (id) => {\n    const existing = get().contacts[id];\n\n    set((state) => {\n      const { [id]: deleted, ...remaining } = state.contacts;\n      return { contacts: remaining };\n    });\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      if (existing) {\n        set((state) => ({\n          contacts: {\n            ...state.contacts,\n            [id]: existing,\n          },\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getContact: (id) => get().contacts[id],\n\n  getAllContacts: () => {\n    const contacts = get().contacts;\n    return Object.values(contacts).sort((a, b) =>\n      a.name.localeCompare(b.name)\n    );\n  },\n\n  searchContacts: (query) => {\n    const allContacts = get().getAllContacts();\n    const lowerQuery = query.toLowerCase();\n\n    return allContacts.filter(contact =>\n      contact.name.toLowerCase().includes(lowerQuery) ||\n      contact.company?.toLowerCase().includes(lowerQuery) ||\n      contact.role?.toLowerCase().includes(lowerQuery) ||\n      contact.email?.toLowerCase().includes(lowerQuery)\n    );\n  },\n\n  isContactComplete: (id) => {\n    const contact = get().contacts[id];\n    if (!contact) return false;\n    return checkContactComplete(contact);\n  },\n\n  toggleFavorite: async (id) => {\n    const existing = get().contacts[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      isFavorite: !existing.isFavorite,\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      contacts: {\n        ...state.contacts,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      set((state) => ({\n        contacts: {\n          ...state.contacts,\n          [id]: existing,\n        },\n      }));\n      throw error;\n    }\n  },\n\n  getFavorites: () => {\n    const allContacts = get().getAllContacts();\n    return allContacts.filter(contact => contact.isFavorite);\n  },\n\n  trackAccess: async (id) => {\n    const existing = get().contacts[id];\n    if (!existing) return;\n\n    const updated = {\n      ...existing,\n      lastAccessedAt: Date.now(),\n    };\n\n    set((state) => ({\n      contacts: {\n        ...state.contacts,\n        [id]: updated,\n      },\n    }));\n\n    try {\n      await firebaseSync.set(id, updated);\n    } catch (error) {\n      console.error('Failed to track access:', error);\n    }\n  },\n\n  getRecentlyUsed: (limit = 5) => {\n    const allContacts = get().getAllContacts();\n    return allContacts\n      .filter(contact => contact.lastAccessedAt)\n      .sort((a, b) => (b.lastAccessedAt || 0) - (a.lastAccessedAt || 0))\n      .slice(0, limit);\n  },\n\n  duplicateContact: async (id) => {\n    const existing = get().contacts[id];\n    if (!existing) return undefined;\n\n    const newContact: ContactItem = {\n      ...existing,\n      id: Date.now().toString(),\n      name: `${existing.name} (Copy)`,\n      isFavorite: false,\n      lastAccessedAt: undefined,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    await get().addContact(newContact);\n    return newContact;\n  },\n}));\n","import {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut as firebaseSignOut,\n  sendPasswordResetEmail,\n  updatePassword,\n  User as FirebaseUser,\n  onAuthStateChanged,\n} from 'firebase/auth';\nimport { auth } from '../config/firebase';\n\nexport interface AuthResult {\n  user: FirebaseUser | null;\n  error: string | null;\n}\n\n/**\n * Register a new user with email and password\n */\nexport const registerUser = async (\n  email: string,\n  password: string\n): Promise<AuthResult> => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message || 'Registration failed' };\n  }\n};\n\n/**\n * Sign in an existing user\n */\nexport const signIn = async (\n  email: string,\n  password: string\n): Promise<AuthResult> => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    let errorMessage = 'Login failed';\n\n    // Provide user-friendly error messages\n    if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\n      errorMessage = 'Invalid email or password';\n    } else if (error.code === 'auth/too-many-requests') {\n      errorMessage = 'Too many failed attempts. Please try again later';\n    } else if (error.code === 'auth/network-request-failed') {\n      errorMessage = 'Network error. Please check your connection';\n    }\n\n    return { user: null, error: errorMessage };\n  }\n};\n\n/**\n * Sign out the current user\n */\nexport const signOut = async (): Promise<{ error: string | null }> => {\n  try {\n    await firebaseSignOut(auth);\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Sign out failed' };\n  }\n};\n\n/**\n * Send password reset email\n */\nexport const resetPassword = async (\n  email: string\n): Promise<{ error: string | null }> => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    return { error: null };\n  } catch (error: any) {\n    let errorMessage = 'Password reset failed';\n\n    if (error.code === 'auth/user-not-found') {\n      errorMessage = 'No account found with this email';\n    } else if (error.code === 'auth/invalid-email') {\n      errorMessage = 'Invalid email address';\n    }\n\n    return { error: errorMessage };\n  }\n};\n\n/**\n * Update user password (for logged-in users)\n */\nexport const changePassword = async (\n  newPassword: string\n): Promise<{ error: string | null }> => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      return { error: 'No user logged in' };\n    }\n\n    await updatePassword(user, newPassword);\n    return { error: null };\n  } catch (error: any) {\n    let errorMessage = 'Password change failed';\n\n    if (error.code === 'auth/requires-recent-login') {\n      errorMessage = 'Please log in again to change your password';\n    } else if (error.code === 'auth/weak-password') {\n      errorMessage = 'Password is too weak';\n    }\n\n    return { error: errorMessage };\n  }\n};\n\n/**\n * Get the current authenticated user\n */\nexport const getCurrentUser = (): FirebaseUser | null => {\n  return auth.currentUser;\n};\n\n/**\n * Listen to authentication state changes\n */\nexport const onAuthStateChange = (\n  callback: (user: FirebaseUser | null) => void\n) => {\n  return onAuthStateChanged(auth, callback);\n};\n","import {\n  collection,\n  doc,\n  getDoc,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  getDocs,\n  onSnapshot,\n  serverTimestamp,\n  Timestamp,\n} from 'firebase/firestore';\nimport { firestore } from '../config/firebase';\n\nexport type UserRole = 'admin' | 'user';\nexport type UserStatus = 'pending' | 'approved' | 'rejected';\n\nexport interface FirebaseUserProfile {\n  uid: string;\n  email: string;\n  name: string;\n  role: UserRole;\n  status: UserStatus;\n  company?: string;\n  department?: string;\n  needsPasswordChange?: boolean;\n  createdAt: Timestamp | Date;\n  updatedAt: Timestamp | Date;\n}\n\nconst USERS_COLLECTION = 'users';\nconst ACCESS_REQUESTS_COLLECTION = 'accessRequests';\n\n/**\n * Create a new user profile in Firestore\n */\nexport const createUserProfile = async (\n  uid: string,\n  data: Omit<FirebaseUserProfile, 'uid' | 'createdAt' | 'updatedAt'>\n): Promise<{ error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    await setDoc(userRef, {\n      ...data,\n      uid,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    });\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Failed to create user profile' };\n  }\n};\n\n/**\n * Get user profile from Firestore\n */\nexport const getUserProfile = async (\n  uid: string\n): Promise<{ user: FirebaseUserProfile | null; error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    const userSnap = await getDoc(userRef);\n\n    if (!userSnap.exists()) {\n      return { user: null, error: 'User profile not found' };\n    }\n\n    return { user: userSnap.data() as FirebaseUserProfile, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message || 'Failed to get user profile' };\n  }\n};\n\n/**\n * Update user profile\n */\nexport const updateUserProfile = async (\n  uid: string,\n  data: Partial<Omit<FirebaseUserProfile, 'uid' | 'createdAt'>>\n): Promise<{ error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    await updateDoc(userRef, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    });\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Failed to update user profile' };\n  }\n};\n\n/**\n * Delete user profile\n */\nexport const deleteUserProfile = async (\n  uid: string\n): Promise<{ error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    await deleteDoc(userRef);\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Failed to delete user profile' };\n  }\n};\n\n/**\n * Get all pending access requests (admin only)\n */\nexport const getPendingAccessRequests = async (): Promise<{\n  requests: FirebaseUserProfile[];\n  error: string | null;\n}> => {\n  try {\n    const q = query(\n      collection(firestore, USERS_COLLECTION),\n      where('status', '==', 'pending')\n    );\n    const querySnapshot = await getDocs(q);\n\n    const requests: FirebaseUserProfile[] = [];\n    querySnapshot.forEach((doc) => {\n      requests.push(doc.data() as FirebaseUserProfile);\n    });\n\n    return { requests, error: null };\n  } catch (error: any) {\n    return {\n      requests: [],\n      error: error.message || 'Failed to get access requests',\n    };\n  }\n};\n\n/**\n * Approve a user access request\n */\nexport const approveUserAccess = async (\n  uid: string,\n  role: UserRole = 'user'\n): Promise<{ error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    await updateDoc(userRef, {\n      status: 'approved',\n      role,\n      updatedAt: serverTimestamp(),\n    });\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Failed to approve user' };\n  }\n};\n\n/**\n * Reject a user access request\n */\nexport const rejectUserAccess = async (\n  uid: string\n): Promise<{ error: string | null }> => {\n  try {\n    const userRef = doc(firestore, USERS_COLLECTION, uid);\n    await updateDoc(userRef, {\n      status: 'rejected',\n      updatedAt: serverTimestamp(),\n    });\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message || 'Failed to reject user' };\n  }\n};\n\n/**\n * Listen to user profile changes in real-time\n */\nexport const subscribeToUserProfile = (\n  uid: string,\n  callback: (user: FirebaseUserProfile | null) => void\n) => {\n  const userRef = doc(firestore, USERS_COLLECTION, uid);\n  return onSnapshot(userRef, (doc) => {\n    if (doc.exists()) {\n      callback(doc.data() as FirebaseUserProfile);\n    } else {\n      callback(null);\n    }\n  });\n};\n\n/**\n * Listen to pending access requests in real-time (admin only)\n */\nexport const subscribeToPendingRequests = (\n  callback: (requests: FirebaseUserProfile[]) => void\n) => {\n  const q = query(\n    collection(firestore, USERS_COLLECTION),\n    where('status', '==', 'pending')\n  );\n\n  return onSnapshot(q, (querySnapshot) => {\n    const requests: FirebaseUserProfile[] = [];\n    querySnapshot.forEach((doc) => {\n      requests.push(doc.data() as FirebaseUserProfile);\n    });\n    callback(requests);\n  });\n};\n\n/**\n * Check if user is admin\n */\nexport const isUserAdmin = async (uid: string): Promise<boolean> => {\n  try {\n    const { user } = await getUserProfile(uid);\n    return user?.role === 'admin' && user?.status === 'approved';\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Get all approved users (admin only)\n */\nexport const getAllApprovedUsers = async (): Promise<{\n  users: FirebaseUserProfile[];\n  error: string | null;\n}> => {\n  try {\n    const q = query(\n      collection(firestore, USERS_COLLECTION),\n      where('status', '==', 'approved')\n    );\n    const querySnapshot = await getDocs(q);\n\n    const users: FirebaseUserProfile[] = [];\n    querySnapshot.forEach((doc) => {\n      users.push(doc.data() as FirebaseUserProfile);\n    });\n\n    return { users, error: null };\n  } catch (error: any) {\n    return { users: [], error: error.message || 'Failed to get users' };\n  }\n};\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n  signIn as firebaseSignIn,\n  signOut as firebaseSignOut,\n  registerUser as firebaseRegisterUser,\n  onAuthStateChange,\n  getCurrentUser as getFirebaseCurrentUser\n} from '../services/firebaseAuth';\nimport {\n  createUserProfile,\n  getUserProfile,\n  updateUserProfile,\n  getPendingAccessRequests,\n  approveUserAccess,\n  rejectUserAccess,\n  FirebaseUserProfile,\n} from '../services/firebaseUsers';\n\nexport interface User {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  role: 'admin' | 'user';\n  status: 'pending' | 'approved' | 'rejected';\n  isTemporaryPassword: boolean;\n  createdAt: number;\n}\n\nexport interface PendingRequest {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  company: string;\n  requestedAt: number;\n  status: 'pending' | 'approved' | 'denied';\n}\n\ninterface AuthState {\n  currentUser: User | null;\n  users: Record<string, { user: User; passwordHash: string }>;\n  pendingRequests: PendingRequest[];\n  currentSession: string | null;\n  isInitialized: boolean;\n\n  // Actions\n  login: (email: string, password: string) => Promise<{ success: boolean; requiresPasswordChange?: boolean; error?: string }>;\n  logout: () => Promise<void>;\n  requestAccess: (data: Omit<PendingRequest, 'id' | 'requestedAt' | 'status'>) => Promise<{ success: boolean; requestId: string; error?: string }>;\n  approveRequest: (requestId: string, temporaryPassword: string) => Promise<{ success: boolean; error?: string }>;\n  denyRequest: (requestId: string) => Promise<{ success: boolean; error?: string }>;\n  changePassword: (newPassword: string) => Promise<{ success: boolean; error?: string }>;\n  getPendingRequests: () => Promise<PendingRequest[]>;\n  initializeAuth: () => Promise<void>;\n  setCurrentUser: (user: User | null) => void;\n}\n\n// Helper function to convert Firebase user profile to app User\nconst firebaseUserToAppUser = (firebaseUser: FirebaseUserProfile): User => {\n  console.log('[AuthStore] firebaseUserToAppUser - RAW INPUT:', JSON.stringify(firebaseUser, null, 2));\n  console.log('[AuthStore] firebaseUserToAppUser - firebaseUser.uid value:', firebaseUser.uid);\n\n  const nameParts = firebaseUser.name.split(' ');\n\n  // Explicitly create a plain object with all properties\n  const user = {\n    id: String(firebaseUser.uid), // Ensure it's a string\n    email: String(firebaseUser.email),\n    firstName: String(nameParts[0] || ''),\n    lastName: String(nameParts.slice(1).join(' ') || ''),\n    role: firebaseUser.role as 'admin' | 'user',\n    status: firebaseUser.status as 'pending' | 'approved' | 'rejected',\n    isTemporaryPassword: Boolean(firebaseUser.needsPasswordChange || false),\n    createdAt: firebaseUser.createdAt instanceof Date\n      ? firebaseUser.createdAt.getTime()\n      : firebaseUser.createdAt.toMillis(),\n  } as User;\n\n  console.log('[AuthStore] firebaseUserToAppUser - CREATED USER:', JSON.stringify(user, null, 2));\n  console.log('[AuthStore] firebaseUserToAppUser - user.id directly:', user.id);\n  console.log('[AuthStore] firebaseUserToAppUser - typeof user.id:', typeof user.id);\n  console.log('[AuthStore] firebaseUserToAppUser - Object.keys(user):', Object.keys(user));\n  console.log('[AuthStore] firebaseUserToAppUser - user hasOwnProperty id:', user.hasOwnProperty('id'));\n\n  return user;\n};\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      currentUser: null,\n      users: {},\n      pendingRequests: [],\n      currentSession: null,\n      isInitialized: false,\n\n      initializeAuth: async () => {\n        console.log('[AuthStore] initializeAuth - Starting...');\n        // Set up auth state listener\n        onAuthStateChange(async (firebaseUser) => {\n          console.log('[AuthStore] onAuthStateChange - Firebase user:', firebaseUser?.uid, firebaseUser?.email);\n          if (firebaseUser) {\n            // User is signed in, try to fetch their profile\n            try {\n              const { user: profile, error } = await getUserProfile(firebaseUser.uid);\n              console.log('[AuthStore] onAuthStateChange - Profile fetched:', profile?.uid, profile?.email);\n              if (profile && !error) {\n                const appUser = firebaseUserToAppUser(profile);\n                console.log('[AuthStore] onAuthStateChange - Setting currentUser to:', JSON.stringify(appUser, null, 2));\n                set({\n                  currentUser: appUser,\n                  currentSession: firebaseUser.uid,\n                });\n                console.log('[AuthStore] onAuthStateChange - State after set:', JSON.stringify(get().currentUser, null, 2));\n              } else {\n                // If offline or profile not found, log warning but don't sign out\n                // This allows the app to work even if Firestore is having issues\n                console.warn('Could not fetch user profile from Firestore:', error);\n                console.warn('Firestore may be offline or inaccessible. User will remain signed in.');\n                // Keep the user signed in with basic info from Firebase Auth\n                set({\n                  currentUser: null, // Will trigger login flow\n                  currentSession: null,\n                });\n                await firebaseSignOut();\n              }\n            } catch (err) {\n              console.error('Error in auth state change:', err);\n              set({\n                currentUser: null,\n                currentSession: null,\n              });\n            }\n          } else {\n            // User is signed out\n            set({\n              currentUser: null,\n              currentSession: null,\n            });\n          }\n        });\n\n        set({ isInitialized: true });\n      },\n\n      setCurrentUser: (user: User | null) => {\n        set({ currentUser: user });\n      },\n\n      login: async (email: string, password: string) => {\n        try {\n          const { user: firebaseUser, error } = await firebaseSignIn(email, password);\n\n          if (error || !firebaseUser) {\n            return { success: false, error: error || 'Login failed' };\n          }\n\n          // Get user profile from Firestore\n          const { user: profile, error: profileError } = await getUserProfile(firebaseUser.uid);\n\n          if (profileError || !profile) {\n            await firebaseSignOut();\n            return { success: false, error: 'User profile not found. Please contact an administrator.' };\n          }\n\n          // Check if user is approved\n          if (profile.status === 'pending') {\n            await firebaseSignOut();\n            return { success: false, error: 'Your account is pending approval. Please wait for an administrator to approve your access.' };\n          }\n\n          if (profile.status === 'rejected') {\n            await firebaseSignOut();\n            return { success: false, error: 'Your access request was denied. Please contact an administrator.' };\n          }\n\n          const appUser = firebaseUserToAppUser(profile);\n          console.log('[AuthStore] login - Setting currentUser to:', JSON.stringify(appUser, null, 2));\n\n          set({\n            currentUser: appUser,\n            currentSession: firebaseUser.uid,\n          });\n\n          console.log('[AuthStore] login - Verifying state after set:', JSON.stringify(get().currentUser, null, 2));\n\n          return {\n            success: true,\n            requiresPasswordChange: appUser.isTemporaryPassword,\n          };\n        } catch (error: any) {\n          return { success: false, error: error.message || 'Login failed' };\n        }\n      },\n\n      logout: async () => {\n        await firebaseSignOut();\n        set({\n          currentUser: null,\n          currentSession: null,\n        });\n      },\n\n      requestAccess: async (data) => {\n        try {\n          const { firstName, lastName, email, company } = data;\n          const fullName = `${firstName} ${lastName}`;\n\n          // Register user with Firebase Auth\n          const { user: firebaseUser, error: authError } = await firebaseRegisterUser(\n            email,\n            // Generate a temporary password (user will need to reset it)\n            Math.random().toString(36).slice(-8) + Math.random().toString(36).slice(-8)\n          );\n\n          if (authError || !firebaseUser) {\n            return {\n              success: false,\n              requestId: '',\n              error: authError || 'Failed to create user account'\n            };\n          }\n\n          // Create user profile in Firestore with pending status\n          const { error: profileError } = await createUserProfile(firebaseUser.uid, {\n            email,\n            name: fullName,\n            role: 'user',\n            status: 'pending',\n            company,\n            needsPasswordChange: true,\n          });\n\n          if (profileError) {\n            return {\n              success: false,\n              requestId: '',\n              error: profileError\n            };\n          }\n\n          // Sign out the newly created user (they need admin approval first)\n          await firebaseSignOut();\n\n          console.log(' Access request submitted for:', email);\n          console.log('Admin needs to approve this user in the Admin Approval screen');\n\n          return { success: true, requestId: firebaseUser.uid };\n        } catch (error: any) {\n          return {\n            success: false,\n            requestId: '',\n            error: error.message || 'Failed to submit access request'\n          };\n        }\n      },\n\n      approveRequest: async (requestId: string, temporaryPassword: string) => {\n        try {\n          // Approve the user in Firestore\n          const { error: approveError } = await approveUserAccess(requestId, 'user');\n\n          if (approveError) {\n            return { success: false, error: approveError };\n          }\n\n          // TODO: Send email notification to user with temporary password\n          // For now, just log it\n          const { user: profile } = await getUserProfile(requestId);\n          if (profile) {\n            console.log(' User approved:', profile.email);\n            console.log('Temporary password:', temporaryPassword);\n            console.log('NOTE: In production, this would be sent via email');\n          }\n\n          return { success: true };\n        } catch (error: any) {\n          return { success: false, error: error.message || 'Failed to approve request' };\n        }\n      },\n\n      denyRequest: async (requestId: string) => {\n        try {\n          const { error } = await rejectUserAccess(requestId);\n\n          if (error) {\n            return { success: false, error };\n          }\n\n          return { success: true };\n        } catch (error: any) {\n          return { success: false, error: error.message || 'Failed to deny request' };\n        }\n      },\n\n      changePassword: async (newPassword: string) => {\n        try {\n          const { currentUser } = get();\n\n          if (!currentUser) {\n            return { success: false, error: 'Not logged in' };\n          }\n\n          // Note: Firebase doesn't support changing password without re-authentication\n          // In a production app, you'd want to use Firebase's updatePassword function\n          // and handle re-authentication properly. For now, we'll update the profile flag.\n\n          const { error } = await updateUserProfile(currentUser.id, {\n            needsPasswordChange: false,\n          });\n\n          if (error) {\n            return { success: false, error };\n          }\n\n          const updatedUser = { ...currentUser, isTemporaryPassword: false };\n          set({ currentUser: updatedUser });\n\n          return { success: true };\n        } catch (error: any) {\n          return { success: false, error: error.message || 'Failed to change password' };\n        }\n      },\n\n      getPendingRequests: async () => {\n        try {\n          const { requests, error } = await getPendingAccessRequests();\n\n          if (error) {\n            console.error('Failed to get pending requests:', error);\n            return [];\n          }\n\n          return requests.map((profile): PendingRequest => ({\n            id: profile.uid,\n            email: profile.email,\n            firstName: profile.name.split(' ')[0] || '',\n            lastName: profile.name.split(' ').slice(1).join(' ') || '',\n            company: profile.company || '',\n            requestedAt: profile.createdAt instanceof Date\n              ? profile.createdAt.getTime()\n              : profile.createdAt.toMillis(),\n            status: profile.status === 'rejected' ? 'denied' : profile.status,\n          }));\n        } catch (error: any) {\n          console.error('Failed to get pending requests:', error);\n          return [];\n        }\n      },\n    }),\n    {\n      name: 'precast-auth-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n      partialize: (state) => {\n        // Explicitly ensure the user object has all fields when saving\n        const userToSave = state.currentUser ? {\n          id: state.currentUser.id,\n          email: state.currentUser.email,\n          firstName: state.currentUser.firstName,\n          lastName: state.currentUser.lastName,\n          role: state.currentUser.role,\n          status: state.currentUser.status,\n          isTemporaryPassword: state.currentUser.isTemporaryPassword,\n          createdAt: state.currentUser.createdAt,\n        } : null;\n\n        const toSave = {\n          currentUser: userToSave,\n          currentSession: state.currentSession,\n        };\n\n        console.log('[AuthStore] partialize - Saving state:', toSave);\n        console.log('[AuthStore] partialize - currentUser.id:', userToSave?.id);\n        console.log('[AuthStore] partialize - Stringified:', JSON.stringify(toSave, null, 2));\n        return toSave;\n      },\n      onRehydrateStorage: () => (state, error) => {\n        console.log('[AuthStore] onRehydrateStorage - Rehydrated state:', {\n          currentUser: state?.currentUser,\n          currentSession: state?.currentSession,\n          error,\n        });\n\n        if (state?.currentUser) {\n          console.log('[AuthStore] onRehydrateStorage - Current user ID:', state.currentUser.id);\n          console.log('[AuthStore] onRehydrateStorage - typeof id:', typeof state.currentUser.id);\n          console.log('[AuthStore] onRehydrateStorage - has id property:', 'id' in state.currentUser);\n          console.log('[AuthStore] onRehydrateStorage - Current user FULL:', JSON.stringify(state.currentUser, null, 2));\n\n          // Migration: If currentUser exists but id is missing or undefined, clear the auth state\n          // This forces the user to be re-authenticated with the correct structure\n          if (!state.currentUser.id || state.currentUser.id === '' || state.currentUser.id === 'undefined') {\n            console.warn('[AuthStore] Migration: currentUser has invalid id field:', state.currentUser.id);\n            console.warn('[AuthStore] Migration: Clearing auth state to force re-authentication');\n\n            // Clear the storage to force fresh login\n            AsyncStorage.removeItem('precast-auth-storage')\n              .then(() => console.log('[AuthStore] Migration: Storage cleared'))\n              .catch((e) => console.error('[AuthStore] Migration: Failed to clear storage:', e));\n\n            // Also sign out from Firebase to ensure clean state\n            firebaseSignOut()\n              .then(() => console.log('[AuthStore] Migration: Signed out from Firebase'))\n              .catch((e) => console.error('[AuthStore] Migration: Failed to sign out:', e));\n          }\n        }\n      },\n    }\n  )\n);\n","import { firestore } from '../config/firebase';\nimport {\n  collection,\n  doc,\n  writeBatch,\n  serverTimestamp,\n  Timestamp,\n  setDoc\n} from 'firebase/firestore';\n\nexport interface ImportData {\n  exportDate?: string;\n  appVersion?: string;\n  strandPatterns?: any[];\n  products?: any[];\n  strandLibrary?: any[];\n  aggregateLibrary?: any[];\n  admixLibrary?: any[];\n  projects?: any[];\n  contacts?: any[];\n  qualityLogs?: any[];\n  pourSchedules?: any[];\n  yardLocations?: any;\n  aggregateGradations?: any;\n  slippageHistory?: any;\n  calculatorHistory?: any[];\n}\n\nexport interface ImportResult {\n  success: boolean;\n  error?: string;\n  imported?: {\n    strandPatterns: number;\n    products: number;\n    strandLibrary: number;\n    aggregateLibrary: number;\n    admixLibrary: number;\n    projects: number;\n    contacts: number;\n    qualityLogs: number;\n    pourSchedules: number;\n    yardLocations: number;\n  };\n}\n\n/**\n * Import all data from JSON export to Firebase\n */\nexport const importDataToFirebase = async (\n  data: ImportData,\n  userId: string\n): Promise<ImportResult> => {\n  try {\n    const counts = {\n      strandPatterns: 0,\n      products: 0,\n      strandLibrary: 0,\n      aggregateLibrary: 0,\n      admixLibrary: 0,\n      projects: 0,\n      contacts: 0,\n      qualityLogs: 0,\n      pourSchedules: 0,\n      yardLocations: 0,\n    };\n\n    // Import strand patterns\n    if (data.strandPatterns && data.strandPatterns.length > 0) {\n      counts.strandPatterns = await importCollection(\n        'strandPatterns',\n        data.strandPatterns,\n        userId\n      );\n    }\n\n    // Import products\n    if (data.products && data.products.length > 0) {\n      counts.products = await importCollection(\n        'products',\n        data.products,\n        userId\n      );\n    }\n\n    // Import strand library\n    if (data.strandLibrary && data.strandLibrary.length > 0) {\n      counts.strandLibrary = await importCollection(\n        'strandLibrary',\n        data.strandLibrary,\n        userId\n      );\n    }\n\n    // Import aggregate library\n    if (data.aggregateLibrary && data.aggregateLibrary.length > 0) {\n      counts.aggregateLibrary = await importCollection(\n        'aggregateLibrary',\n        data.aggregateLibrary,\n        userId\n      );\n    }\n\n    // Import admix library\n    if (data.admixLibrary && data.admixLibrary.length > 0) {\n      counts.admixLibrary = await importCollection(\n        'admixLibrary',\n        data.admixLibrary,\n        userId\n      );\n    }\n\n    // Import projects\n    if (data.projects && data.projects.length > 0) {\n      counts.projects = await importCollection(\n        'projects',\n        data.projects,\n        userId\n      );\n    }\n\n    // Import contacts\n    if (data.contacts && data.contacts.length > 0) {\n      counts.contacts = await importCollection(\n        'contacts',\n        data.contacts,\n        userId\n      );\n    }\n\n    // Import quality logs\n    if (data.qualityLogs && data.qualityLogs.length > 0) {\n      counts.qualityLogs = await importCollection(\n        'qualityLogs',\n        data.qualityLogs,\n        userId\n      );\n    }\n\n    // Import pour schedules\n    if (data.pourSchedules && data.pourSchedules.length > 0) {\n      counts.pourSchedules = await importCollection(\n        'pourSchedules',\n        data.pourSchedules,\n        userId\n      );\n    }\n\n    // Import yard locations (special case - single document with arrays)\n    if (data.yardLocations) {\n      await importYardLocations(data.yardLocations, userId);\n      counts.yardLocations = 1;\n    }\n\n    return {\n      success: true,\n      imported: counts,\n    };\n  } catch (error: any) {\n    console.error('Import error:', error);\n    return {\n      success: false,\n      error: error.message || 'Import failed',\n    };\n  }\n};\n\n/**\n * Import a collection of documents using batched writes\n */\nconst importCollection = async (\n  collectionName: string,\n  items: any[],\n  userId: string\n): Promise<number> => {\n  let count = 0;\n  const batchSize = 500; // Firestore batch limit\n\n  for (let i = 0; i < items.length; i += batchSize) {\n    const batch = writeBatch(firestore);\n    const batchItems = items.slice(i, i + batchSize);\n\n    for (const item of batchItems) {\n      const docId = item.id || doc(collection(firestore, collectionName)).id;\n      const docRef = doc(firestore, collectionName, docId);\n\n      // Prepare the document data\n      const docData = {\n        ...item,\n        importedAt: serverTimestamp(),\n        importedBy: userId,\n        // Convert timestamp fields if they exist\n        createdAt: item.createdAt\n          ? Timestamp.fromMillis(item.createdAt)\n          : serverTimestamp(),\n        updatedAt: item.updatedAt\n          ? Timestamp.fromMillis(item.updatedAt)\n          : serverTimestamp(),\n      };\n\n      batch.set(docRef, docData, { merge: true });\n      count++;\n    }\n\n    await batch.commit();\n  }\n\n  return count;\n};\n\n/**\n * Import yard locations (special structure)\n */\nconst importYardLocations = async (\n  yardData: any,\n  userId: string\n): Promise<void> => {\n  const docRef = doc(firestore, 'yardLocations', 'main');\n\n  await setDoc(docRef, {\n    yardLocations: yardData.yardLocations || [],\n    yardedPieces: yardData.yardedPieces || [],\n    importedAt: serverTimestamp(),\n    importedBy: userId,\n    updatedAt: serverTimestamp(),\n  }, { merge: true });\n};\n\n/**\n * Validate JSON structure before import\n */\nexport const validateImportData = (jsonString: string): { valid: boolean; data?: ImportData; error?: string } => {\n  try {\n    const data = JSON.parse(jsonString);\n\n    // Basic validation\n    if (typeof data !== 'object' || data === null) {\n      return { valid: false, error: 'Invalid JSON structure' };\n    }\n\n    // Check if at least one collection exists\n    const hasData =\n      (data.strandPatterns && data.strandPatterns.length > 0) ||\n      (data.products && data.products.length > 0) ||\n      (data.strandLibrary && data.strandLibrary.length > 0) ||\n      (data.aggregateLibrary && data.aggregateLibrary.length > 0) ||\n      (data.admixLibrary && data.admixLibrary.length > 0) ||\n      (data.projects && data.projects.length > 0) ||\n      (data.contacts && data.contacts.length > 0) ||\n      (data.qualityLogs && data.qualityLogs.length > 0) ||\n      (data.pourSchedules && data.pourSchedules.length > 0) ||\n      (data.yardLocations);\n\n    if (!hasData) {\n      return { valid: false, error: 'No data found to import' };\n    }\n\n    return { valid: true, data };\n  } catch (error: any) {\n    return { valid: false, error: `Invalid JSON: ${error.message}` };\n  }\n};\n","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  Pressable,\n  ScrollView,\n  ActivityIndicator,\n} from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { importDataToFirebase, validateImportData, ImportResult } from '../services/firebaseImport';\nimport { useAuthStore } from '../state/authStore';\nimport { getCurrentUser } from '../services/firebaseAuth';\n\ninterface DataImportScreenProps {\n  onBack: () => void;\n}\n\nexport default function DataImportScreen({ onBack }: DataImportScreenProps) {\n  const insets = useSafeAreaInsets();\n  const [jsonInput, setJsonInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n  const currentUser = useAuthStore((state) => state.currentUser);\n\n  const handleImport = async () => {\n    if (!jsonInput.trim()) {\n      alert('Please paste your JSON data');\n      return;\n    }\n\n    const firebaseUser = getCurrentUser();\n    if (!firebaseUser || !currentUser) {\n      alert('You must be logged in to import data');\n      return;\n    }\n\n    // Validate JSON\n    const validation = validateImportData(jsonInput);\n    if (!validation.valid) {\n      alert('Invalid Data: ' + (validation.error || 'Invalid JSON structure'));\n      return;\n    }\n\n    // Confirm import\n    const confirmed = confirm('This will import the data to Firebase. Existing data with the same IDs will be merged. Continue?');\n    if (!confirmed) return;\n\n    setLoading(true);\n    setImportResult(null);\n\n    try {\n      const result = await importDataToFirebase(validation.data!, firebaseUser.uid);\n      setImportResult(result);\n\n      if (result.success) {\n        alert('Data imported successfully!');\n        setJsonInput(''); // Clear input on success\n      } else {\n        alert('Import Failed: ' + (result.error || 'Unknown error'));\n      }\n    } catch (error: any) {\n      alert('Error: ' + (error.message || 'Import failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View\n        className=\"bg-white border-b border-gray-200\"\n        style={{ paddingTop: insets.top }}\n      >\n        <View className=\"flex-row items-center justify-between px-4 py-3\">\n          <Pressable\n            onPress={onBack}\n            className=\"flex-row items-center active:opacity-50\"\n          >\n            <Ionicons name=\"arrow-back\" size={24} color=\"#1f2937\" />\n            <Text className=\"text-lg font-semibold text-gray-900 ml-2\">\n              Import Data\n            </Text>\n          </Pressable>\n        </View>\n      </View>\n\n      <ScrollView className=\"flex-1\">\n        <View className=\"p-4\">\n          {/* Instructions */}\n          <View className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"document-text\" size={20} color=\"#3b82f6\" />\n              <View className=\"flex-1 ml-3\">\n                <Text className=\"text-sm font-semibold text-blue-900 mb-1\">\n                  Import Instructions\n                </Text>\n                <Text className=\"text-sm text-blue-800\">\n                  Paste your exported JSON data below. This will import strand patterns, products, materials, projects, and contacts to Firebase.\n                </Text>\n              </View>\n            </View>\n          </View>\n\n          {/* JSON Input */}\n          <Text className=\"text-sm font-semibold text-gray-900 mb-2\">\n            JSON Data\n          </Text>\n          <TextInput\n            value={jsonInput}\n            onChangeText={setJsonInput}\n            placeholder='Paste your JSON export here...'\n            placeholderTextColor=\"#9CA3AF\"\n            cursorColor=\"#000000\"\n            multiline\n            numberOfLines={10}\n            className=\"bg-white border border-gray-300 rounded-lg p-3 text-sm font-mono text-gray-900 mb-4\"\n            style={{\n              minHeight: 200,\n              textAlignVertical: 'top',\n            }}\n            editable={!loading}\n          />\n\n          {/* Import Button */}\n          <Pressable\n            onPress={handleImport}\n            disabled={loading || !jsonInput.trim()}\n            className={`flex-row items-center justify-center py-3 px-4 rounded-lg ${\n              loading || !jsonInput.trim()\n                ? 'bg-gray-300'\n                : 'bg-blue-600 active:bg-blue-700'\n            }`}\n          >\n            {loading ? (\n              <>\n                <ActivityIndicator size=\"small\" color=\"#fff\" />\n                <Text className=\"text-white font-semibold ml-2\">\n                  Importing...\n                </Text>\n              </>\n            ) : (\n              <>\n                <Ionicons name=\"cloud-upload\" size={20} color=\"#fff\" />\n                <Text className=\"text-white font-semibold ml-2\">\n                  Import to Firebase\n                </Text>\n              </>\n            )}\n          </Pressable>\n\n          {/* Import Results */}\n          {importResult && importResult.success && importResult.imported && (\n            <View className=\"bg-green-50 border border-green-200 rounded-lg p-4 mt-4\">\n              <View className=\"flex-row items-center mb-3\">\n                <Ionicons name=\"checkmark-circle\" size={20} color=\"#10b981\" />\n                <Text className=\"text-sm font-semibold text-green-900 ml-2\">\n                  Import Successful\n                </Text>\n              </View>\n              <View className=\"space-y-1\">\n                {importResult.imported.strandPatterns > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Strand Patterns: {importResult.imported.strandPatterns}\n                  </Text>\n                )}\n                {importResult.imported.products > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Products: {importResult.imported.products}\n                  </Text>\n                )}\n                {importResult.imported.strandLibrary > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Strand Library: {importResult.imported.strandLibrary}\n                  </Text>\n                )}\n                {importResult.imported.aggregateLibrary > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Aggregate Library: {importResult.imported.aggregateLibrary}\n                  </Text>\n                )}\n                {importResult.imported.admixLibrary > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Admix Library: {importResult.imported.admixLibrary}\n                  </Text>\n                )}\n                {importResult.imported.projects > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Projects: {importResult.imported.projects}\n                  </Text>\n                )}\n                {importResult.imported.contacts > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Contacts: {importResult.imported.contacts}\n                  </Text>\n                )}\n                {importResult.imported.yardLocations > 0 && (\n                  <Text className=\"text-sm text-green-800\">\n                     Yard Locations: Updated\n                  </Text>\n                )}\n              </View>\n            </View>\n          )}\n\n          {/* Error Result */}\n          {importResult && !importResult.success && (\n            <View className=\"bg-red-50 border border-red-200 rounded-lg p-4 mt-4\">\n              <Text className=\"text-sm font-semibold text-red-900 mb-1\">\n                Import Failed\n              </Text>\n              <Text className=\"text-sm text-red-800\">\n                {importResult.error}\n              </Text>\n            </View>\n          )}\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput, Modal } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useAggregateLibraryStore } from '../state/aggregateLibraryStore';\nimport { useAdmixLibraryStore } from '../state/admixLibraryStore';\nimport { useContactsStore } from '../state/contactsStore';\nimport { useAuthStore } from '../state/authStore';\nimport DataImportScreen from './DataImportScreen';\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList, 'Dashboard'>;\n\ninterface Tool {\n  id: string;\n  name: string;\n  description: string;\n  icon: keyof typeof Ionicons.glyphMap;\n  color: string;\n  bgColor: string;\n  route?: keyof RootStackParamList;\n  comingSoon?: boolean;\n}\n\nconst tools: Tool[] = [\n  {\n    id: 'camber-calculator',\n    name: 'Camber Calculator',\n    description: 'Calculate precast concrete member camber with strand patterns',\n    icon: 'calculator',\n    color: '#3B82F6',\n    bgColor: '#EFF6FF',\n    route: 'Calculator',\n  },\n  {\n    id: 'slippage-identifier',\n    name: 'Slippage Identifier',\n    description: 'Track and report strand slippage with cross-section templates',\n    icon: 'resize',\n    color: '#10B981',\n    bgColor: '#F0FDF4',\n    route: 'ProductDetails',\n  },\n  {\n    id: 'stressing-calculator',\n    name: 'Stressing Force & Elongation',\n    description: 'Calculate expected strand elongation during prestressing',\n    icon: 'git-pull-request',\n    color: '#8B5CF6',\n    bgColor: '#F5F3FF',\n    route: 'StressingCalculator',\n  },\n  {\n    id: 'aggregate-gradation',\n    name: 'Aggregate Gradation Analysis',\n    description: 'Perform sieve analysis and verify ASTM C33 compliance',\n    icon: 'analytics',\n    color: '#EA580C',\n    bgColor: '#FFF7ED',\n    route: 'AggregateGradation',\n  },\n  {\n    id: 'quality-logs',\n    name: 'Quality Logs',\n    description: 'Track quality issues and production logs by department',\n    icon: 'clipboard',\n    color: '#EC4899',\n    bgColor: '#FCE7F3',\n    route: 'QualityLogDashboard',\n  },\n  {\n    id: 'daily-pour-schedule',\n    name: 'Daily Pour Schedule',\n    description: 'Manage concrete pours by department and form/bed',\n    icon: 'calendar',\n    color: '#14B8A6',\n    bgColor: '#F0FDFA',\n    route: 'DailyPourSchedule',\n  },\n  {\n    id: 'yard-maps',\n    name: 'Yard Maps',\n    description: 'Track and locate yarded pieces by department',\n    icon: 'map',\n    color: '#8B5CF6',\n    bgColor: '#F5F3FF',\n    route: 'YardMap',\n  },\n  {\n    id: 'product-library',\n    name: 'Product Library',\n    description: 'Manage product types and tolerance specifications',\n    icon: 'cube',\n    color: '#6366F1',\n    bgColor: '#EEF2FF',\n    route: 'ProductLibrary',\n  },\n  {\n    id: 'project-library',\n    name: 'Project Library',\n    description: 'Manage projects, team assignments, and piece counts',\n    icon: 'folder-open',\n    color: '#F59E0B',\n    bgColor: '#FEF3C7',\n    route: 'ProjectLibrary',\n  },\n  {\n    id: 'aggregate-library',\n    name: 'Aggregate Library',\n    description: 'Comprehensive database of aggregate characteristics',\n    icon: 'flask',\n    color: '#DC2626',\n    bgColor: '#FEF2F2',\n    route: 'AggregateLibrary',\n  },\n  {\n    id: 'admix-library',\n    name: 'Admix Library',\n    description: 'Manage admixture products and dosage information',\n    icon: 'water',\n    color: '#0891B2',\n    bgColor: '#ECFEFF',\n    route: 'AdmixLibrary',\n  },\n  {\n    id: 'contacts',\n    name: 'Contacts',\n    description: 'Manage vendors, suppliers, and sales representatives',\n    icon: 'people',\n    color: '#7C3AED',\n    bgColor: '#F5F3FF',\n    route: 'Contacts',\n  },\n  {\n    id: 'strand-library',\n    name: 'Strand Library',\n    description: 'Manage strand definitions and material properties',\n    icon: 'library',\n    color: '#F59E0B',\n    bgColor: '#FEF3C7',\n    route: 'StrandLibrary',\n  },\n];\n\nexport default function DashboardScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n\n  // Search functionality\n  const [showSearch, setShowSearch] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showDataImport, setShowDataImport] = useState(false);\n\n  const { getAllAggregates } = useAggregateLibraryStore();\n  const { getAllAdmixes } = useAdmixLibraryStore();\n  const { getAllContacts } = useContactsStore();\n  const currentUser = useAuthStore((state) => state.currentUser);\n  const logout = useAuthStore((state) => state.logout);\n\n  const isAdmin = currentUser?.role === 'admin';\n\n  const handleLogout = async () => {\n    await logout();\n    // Navigation to login will happen automatically via App.tsx when currentUser becomes null\n  };\n\n  const handleToolPress = (tool: Tool) => {\n    if (tool.comingSoon) {\n      return; // Do nothing for coming soon tools\n    }\n    if (tool.route) {\n      navigation.navigate(tool.route as any);\n    }\n  };\n\n  // Global search function\n  const performSearch = () => {\n    if (!searchQuery.trim()) {\n      return { aggregates: [], admixes: [], contacts: [] };\n    }\n\n    const query = searchQuery.toLowerCase().trim();\n\n    const aggregates = getAllAggregates().filter(item =>\n      item.name.toLowerCase().includes(query) ||\n      item.source?.toLowerCase().includes(query) ||\n      item.type?.toLowerCase().includes(query)\n    );\n\n    const admixes = getAllAdmixes().filter(item =>\n      item.name.toLowerCase().includes(query) ||\n      item.manufacturer.toLowerCase().includes(query) ||\n      item.class.toLowerCase().includes(query)\n    );\n\n    const contacts = getAllContacts().filter(item =>\n      item.name.toLowerCase().includes(query) ||\n      item.company?.toLowerCase().includes(query) ||\n      item.role?.toLowerCase().includes(query) ||\n      item.email?.toLowerCase().includes(query)\n    );\n\n    return { aggregates, admixes, contacts };\n  };\n\n  const searchResults = performSearch();\n  const totalResults = searchResults.aggregates.length + searchResults.admixes.length + searchResults.contacts.length;\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n      >\n        <View className=\"p-5\">\n          {/* Header */}\n          <View className=\"mb-6 mt-4\">\n            <View className=\"flex-row items-center justify-between mb-2\">\n              <Text className=\"text-4xl font-bold text-gray-900\">\n                Quality Tools\n              </Text>\n              <View className=\"flex-row gap-2\">\n                {isAdmin && (\n                  <Pressable\n                    onPress={() => setShowDataImport(true)}\n                    className=\"bg-green-600 rounded-full p-3 active:bg-green-700\"\n                  >\n                    <Ionicons name=\"cloud-upload\" size={24} color=\"white\" />\n                  </Pressable>\n                )}\n                <Pressable\n                  onPress={() => setShowSearch(true)}\n                  className=\"bg-blue-600 rounded-full p-3 active:bg-blue-700\"\n                >\n                  <Ionicons name=\"search\" size={24} color=\"white\" />\n                </Pressable>\n                <Pressable\n                  onPress={handleLogout}\n                  className=\"bg-red-600 rounded-full p-3 active:bg-red-700\"\n                >\n                  <Ionicons name=\"log-out-outline\" size={24} color=\"white\" />\n                </Pressable>\n              </View>\n            </View>\n            <Text className=\"text-base text-gray-600\">\n              Select a tool to get started\n            </Text>\n            {currentUser && (\n              <Text className=\"text-sm text-gray-500 mt-1\">\n                Logged in as: {currentUser.email} ({currentUser.role})\n              </Text>\n            )}\n          </View>\n\n          {/* Tools Grid - 3 Columns */}\n          <View style={{ flexDirection: 'row', flexWrap: 'wrap', marginHorizontal: -6 }}>\n            {tools.map((tool) => (\n              <View \n                key={tool.id}\n                style={{ width: '33.333%', padding: 6 }}\n              >\n                <Pressable\n                  onPress={() => handleToolPress(tool)}\n                  disabled={tool.comingSoon}\n                  style={{\n                    backgroundColor: tool.bgColor,\n                    borderRadius: 16,\n                    padding: 12,\n                    shadowColor: '#000',\n                    shadowOffset: { width: 0, height: 1 },\n                    shadowOpacity: 0.1,\n                    shadowRadius: 2,\n                    elevation: 2,\n                    opacity: tool.comingSoon ? 0.6 : 1,\n                    minHeight: 160,\n                  }}\n                >\n                  {/* Icon */}\n                  <View style={{ alignItems: 'center', marginBottom: 8 }}>\n                    <View \n                      style={{\n                        backgroundColor: tool.color,\n                        borderRadius: 12,\n                        padding: 10,\n                        marginBottom: 8,\n                      }}\n                    >\n                      <Ionicons name={tool.icon} size={28} color=\"white\" />\n                    </View>\n                    \n                    {tool.comingSoon && (\n                      <View style={{ \n                        backgroundColor: '#FEF3C7', \n                        paddingHorizontal: 6, \n                        paddingVertical: 2, \n                        borderRadius: 8,\n                        marginBottom: 4,\n                      }}>\n                        <Text style={{ fontSize: 9, fontWeight: '700', color: '#92400E' }}>\n                          SOON\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  {/* Tool Name */}\n                  <Text \n                    style={{\n                      fontSize: 13,\n                      fontWeight: '700',\n                      color: '#111827',\n                      textAlign: 'center',\n                      marginBottom: 4,\n                      lineHeight: 16,\n                    }}\n                    numberOfLines={2}\n                  >\n                    {tool.name}\n                  </Text>\n                  \n                  {/* Description */}\n                  <Text \n                    style={{\n                      fontSize: 10,\n                      color: '#6B7280',\n                      textAlign: 'center',\n                      lineHeight: 13,\n                    }}\n                    numberOfLines={3}\n                  >\n                    {tool.description}\n                  </Text>\n                </Pressable>\n              </View>\n            ))}\n          </View>\n\n          {/* Info Section */}\n          <View className=\"mt-8 bg-blue-50 rounded-xl p-5 border border-blue-200\">\n            <View className=\"flex-row items-start\">\n              <View className=\"bg-blue-500 rounded-full p-2 mr-3\">\n                <Ionicons name=\"information\" size={20} color=\"white\" />\n              </View>\n              <View className=\"flex-1\">\n                <Text className=\"text-sm font-semibold text-blue-900 mb-1\">\n                  More Tools Coming\n                </Text>\n                <Text className=\"text-xs text-blue-700\">\n                  We are continuously adding new quality control tools to help you work more efficiently. Check back for updates!\n                </Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Global Search Modal */}\n      <Modal\n        visible={showSearch}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={() => setShowSearch(false)}\n      >\n        <View className=\"flex-1 bg-gray-50\">\n          <View className=\"bg-white p-4 border-b border-gray-200\">\n            <View className=\"flex-row items-center gap-3 mb-3\">\n              <Pressable onPress={() => setShowSearch(false)}>\n                <Ionicons name=\"arrow-back\" size={28} color=\"#111827\" />\n              </Pressable>\n              <Text className=\"text-xl font-bold text-gray-900 flex-1\">\n                Global Search\n              </Text>\n            </View>\n            \n            <View className=\"flex-row items-center bg-gray-100 rounded-lg px-4 py-3\">\n              <Ionicons name=\"search\" size={20} color=\"#6b7280\" />\n              <TextInput\n                value={searchQuery}\n                onChangeText={setSearchQuery}\n                placeholder=\"Search across all libraries...\"\n                placeholderTextColor=\"#9ca3af\"\n                cursorColor=\"#000000\"\n                autoFocus\n                className=\"flex-1 ml-3 text-base text-gray-900\"\n              />\n              {searchQuery.length > 0 && (\n                <Pressable onPress={() => setSearchQuery('')}>\n                  <Ionicons name=\"close-circle\" size={20} color=\"#6b7280\" />\n                </Pressable>\n              )}\n            </View>\n\n            {searchQuery.length > 0 && (\n              <Text className=\"text-sm text-gray-600 mt-2\">\n                {totalResults} {totalResults === 1 ? 'result' : 'results'} found\n              </Text>\n            )}\n          </View>\n\n          <ScrollView className=\"flex-1\">\n            {searchQuery.trim().length === 0 ? (\n              <View className=\"items-center justify-center p-8 mt-20\">\n                <Ionicons name=\"search-outline\" size={64} color=\"#9ca3af\" />\n                <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n                  Start typing to search\n                </Text>\n                <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n                  Search across Aggregate Library, Admix Library, and Contacts\n                </Text>\n              </View>\n            ) : totalResults === 0 ? (\n              <View className=\"items-center justify-center p-8 mt-20\">\n                <Ionicons name=\"sad-outline\" size={64} color=\"#9ca3af\" />\n                <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n                  No results found\n                </Text>\n                <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n                  Try a different search term\n                </Text>\n              </View>\n            ) : (\n              <View className=\"p-4\">\n                {/* Aggregate Results */}\n                {searchResults.aggregates.length > 0 && (\n                  <View className=\"mb-6\">\n                    <View className=\"flex-row items-center mb-3\">\n                      <Ionicons name=\"flask\" size={20} color=\"#DC2626\" />\n                      <Text className=\"text-lg font-bold text-gray-900 ml-2\">\n                        Aggregate Library ({searchResults.aggregates.length})\n                      </Text>\n                    </View>\n                    <View className=\"gap-2\">\n                      {searchResults.aggregates.map(item => (\n                        <Pressable\n                          key={item.id}\n                          onPress={() => {\n                            setShowSearch(false);\n                            navigation.navigate('AggregateLibraryDetail', { aggregateId: item.id });\n                          }}\n                          className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                        >\n                          <Text className=\"text-base font-semibold text-gray-900\">\n                            {item.name}\n                          </Text>\n                          {item.source && (\n                            <Text className=\"text-sm text-gray-600 mt-1\">\n                              Source: {item.source}\n                            </Text>\n                          )}\n                          {item.type && (\n                            <Text className=\"text-xs text-gray-500 mt-0.5\">\n                              {item.type}\n                            </Text>\n                          )}\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n                )}\n\n                {/* Admix Results */}\n                {searchResults.admixes.length > 0 && (\n                  <View className=\"mb-6\">\n                    <View className=\"flex-row items-center mb-3\">\n                      <Ionicons name=\"water\" size={20} color=\"#0891B2\" />\n                      <Text className=\"text-lg font-bold text-gray-900 ml-2\">\n                        Admix Library ({searchResults.admixes.length})\n                      </Text>\n                    </View>\n                    <View className=\"gap-2\">\n                      {searchResults.admixes.map(item => (\n                        <Pressable\n                          key={item.id}\n                          onPress={() => {\n                            setShowSearch(false);\n                            navigation.navigate('AdmixLibraryDetail', { admixId: item.id });\n                          }}\n                          className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                        >\n                          <Text className=\"text-base font-semibold text-gray-900\">\n                            {item.name}\n                          </Text>\n                          <Text className=\"text-sm text-gray-600 mt-1\">\n                            {item.manufacturer}\n                          </Text>\n                          <Text className=\"text-xs text-gray-500 mt-0.5\">\n                            {item.class}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n                )}\n\n                {/* Contact Results */}\n                {searchResults.contacts.length > 0 && (\n                  <View className=\"mb-6\">\n                    <View className=\"flex-row items-center mb-3\">\n                      <Ionicons name=\"people\" size={20} color=\"#7C3AED\" />\n                      <Text className=\"text-lg font-bold text-gray-900 ml-2\">\n                        Contacts ({searchResults.contacts.length})\n                      </Text>\n                    </View>\n                    <View className=\"gap-2\">\n                      {searchResults.contacts.map(item => (\n                        <Pressable\n                          key={item.id}\n                          onPress={() => {\n                            setShowSearch(false);\n                            navigation.navigate('ContactDetail', { contactId: item.id });\n                          }}\n                          className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                        >\n                          <Text className=\"text-base font-semibold text-gray-900\">\n                            {item.name}\n                          </Text>\n                          {item.company && (\n                            <Text className=\"text-sm text-gray-600 mt-1\">\n                              {item.company}\n                            </Text>\n                          )}\n                          {item.role && (\n                            <Text className=\"text-xs text-gray-500 mt-0.5\">\n                              {item.role}\n                            </Text>\n                          )}\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n                )}\n              </View>\n            )}\n          </ScrollView>\n        </View>\n      </Modal>\n\n      {/* Data Import Modal (Admin Only) */}\n      <Modal\n        visible={showDataImport}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={() => setShowDataImport(false)}\n      >\n        <DataImportScreen onBack={() => setShowDataImport(false)} />\n      </Modal>\n    </View>\n  );\n}\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { CamberInputs, CamberResult } from '../utils/camber-calculations';\n\nexport interface CalculationRecord {\n  id: string;\n  timestamp: number;\n  inputs: CamberInputs;\n  results: CamberResult;\n  projectName?: string;\n  actualMeasuredCamber?: number;  // Actual measured camber from field\n  variance?: number;               // Actual - Recommended\n  measurementDate?: number;        // When it was measured\n}\n\ninterface CalculatorState {\n  history: CalculationRecord[];\n  currentInputs: Partial<CamberInputs>;\n  addCalculation: (record: CalculationRecord) => void;\n  updateCalculation: (id: string, updates: Partial<CalculationRecord>) => void;\n  removeCalculation: (id: string) => void;\n  clearHistory: () => void;\n  updateCurrentInputs: (inputs: Partial<CamberInputs>) => void;\n  resetCurrentInputs: () => void;\n}\n\nconst defaultInputs: Partial<CamberInputs> = {\n  memberType: 'hollow-core',\n  releaseStrength: 3500,\n  concreteStrength: 9000,\n};\n\nexport const useCalculatorStore = create<CalculatorState>()(\n  persist(\n    (set) => ({\n      history: [],\n      currentInputs: defaultInputs,\n      \n      addCalculation: (record) =>\n        set((state) => ({\n          history: [record, ...state.history].slice(0, 50), // Keep last 50 calculations\n        })),\n      \n      updateCalculation: (id, updates) =>\n        set((state) => ({\n          history: state.history.map((calc) =>\n            calc.id === id ? { ...calc, ...updates } : calc\n          ),\n        })),\n      \n      removeCalculation: (id) =>\n        set((state) => ({\n          history: state.history.filter((calc) => calc.id !== id),\n        })),\n      \n      clearHistory: () => set({ history: [] }),\n      \n      updateCurrentInputs: (inputs) =>\n        set((state) => ({\n          currentInputs: { ...state.currentInputs, ...inputs },\n        })),\n      \n      resetCurrentInputs: () => set({ currentInputs: defaultInputs }),\n    }),\n    {\n      name: 'camber-calculator-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n      partialize: (state) => ({ history: state.history }), // Only persist history\n    }\n  )\n);\n","/**\n * Precast Concrete Camber Calculation Utilities\n * \n * Camber is the upward deflection built into precast concrete members to counteract\n * deflection under dead load and provide aesthetically pleasing straight lines.\n */\n\nexport interface CamberInputs {\n  span: number; // Length in feet\n  memberType: 'beam' | 'double-tee' | 'hollow-core' | 'single-tee' | 'solid-slab' | 'wall-panel' | 'stadia';\n  releaseStrength: number; // f'ci in psi (strength at release)\n  concreteStrength: number; // f'c in psi (28-day strength)\n  modulusOfElasticity?: number; // Ec in psi (optional, can be calculated)\n  momentOfInertia: number; // I in in^4\n  deadLoad: number; // Uniform dead load in lb/ft\n  liveLoad?: number; // Uniform live load in lb/ft (optional)\n  strandPattern?: string; // Strand pattern ID (optional)\n  strandEValue?: number; // Distance from bottom to center of strand (optional)\n  topStrandPattern?: string; // Top strand pattern ID (optional)\n  productWidth?: number; // Product width in inches (optional, for cut-width products)\n  productSide?: 'L1' | 'L2'; // Which side is the product side (keeper side) (optional, for cut-width products)\n  projectNumber?: string; // Project # (optional)\n  markNumber?: string; // Mark # (optional)\n  idNumber?: string; // ID # (optional)\n}\n\nexport interface CamberResult {\n  initialCamber: number; // inches - Prestress camber (built into form)\n  netInitialCamber: number; // inches - Measured camber at release (after dead load)\n  deadLoadDeflection: number; // inches\n  liveLoadDeflection?: number; // inches\n  longTermDeflection: number; // inches\n  finalCamber: number; // inches\n  recommendedCamber: number; // inches\n  releaseModulusOfElasticity: number; // psi (Eci at release)\n  modulusOfElasticity: number; // psi (Ec at 28 days)\n  creepFactor: number;\n  shrinkageFactor: number;\n}\n\n/**\n * Calculate modulus of elasticity based on ACI 318\n * Ec = 33 * w^1.5 * sqrt(f'c) for normal weight concrete (w = 145 pcf)\n */\nexport function calculateModulusOfElasticity(\n  concreteStrength: number,\n  unitWeight: number = 145\n): number {\n  return 33 * Math.pow(unitWeight, 1.5) * Math.sqrt(concreteStrength);\n}\n\n/**\n * Calculate initial deflection due to uniform load\n *  = (5 * w * L^4) / (384 * E * I)\n * where w is in lb/in, L is in inches\n */\nexport function calculateDeflection(\n  load: number, // lb/ft\n  span: number, // feet\n  modulusOfElasticity: number, // psi\n  momentOfInertia: number // in^4\n): number {\n  const loadPerInch = load / 12; // Convert lb/ft to lb/in\n  const spanInches = span * 12; // Convert feet to inches\n  \n  const deflection = (5 * loadPerInch * Math.pow(spanInches, 4)) / \n                     (384 * modulusOfElasticity * momentOfInertia);\n  \n  return deflection;\n}\n\n/**\n * Get creep factor based on member type and time duration\n * PCI Design Handbook recommendations\n */\nexport function getCreepFactor(memberType: string): number {\n  const creepFactors: Record<string, number> = {\n    'beam': 2.0,\n    'double-tee': 2.0,\n    'hollow-core': 1.8,\n    'single-tee': 2.0,\n    'solid-slab': 2.2,\n    'wall-panel': 1.5,\n    'stadia': 2.0,\n  };\n  \n  return creepFactors[memberType] || 2.0;\n}\n\n/**\n * Get shrinkage factor based on member type\n */\nexport function getShrinkageFactor(memberType: string): number {\n  const shrinkageFactors: Record<string, number> = {\n    'beam': 0.2,\n    'double-tee': 0.2,\n    'hollow-core': 0.15,\n    'single-tee': 0.2,\n    'solid-slab': 0.25,\n    'wall-panel': 0.15,\n    'stadia': 0.2,\n  };\n  \n  return shrinkageFactors[memberType] || 0.2;\n}\n\n/**\n * Calculate long-term deflection including creep and shrinkage\n * Per ACI 318: Long-term deflection =  * initial deflection\n * where  depends on time and compression reinforcement\n */\nexport function calculateLongTermDeflection(\n  initialDeflection: number,\n  creepFactor: number,\n  shrinkageFactor: number\n): number {\n  // Multiplier includes creep and shrinkage effects\n  const multiplier = 1 + creepFactor + shrinkageFactor;\n  return initialDeflection * multiplier;\n}\n\n/**\n * Calculate recommended camber\n * Based on PCI Design Handbook recommendations\n * Camber should offset approximately 70-80% of long-term deflection\n */\nexport function calculateRecommendedCamber(\n  deadLoadDeflection: number,\n  longTermDeflection: number\n): number {\n  // PCI recommends camber to offset 70-80% of long-term deflection\n  // This provides a slight upward camber in service while preventing sag\n  return longTermDeflection * 0.75;\n}\n\n/**\n * Main camber calculation function\n */\nexport function calculateCamber(inputs: CamberInputs): CamberResult {\n  // Calculate modulus of elasticity at release (using release strength)\n  const releaseModulusOfElasticity = inputs.modulusOfElasticity || \n                               calculateModulusOfElasticity(inputs.releaseStrength);\n  \n  // Calculate modulus of elasticity at 28 days (using 28-day strength)\n  const modulusOfElasticity28Day = calculateModulusOfElasticity(inputs.concreteStrength);\n  \n  // Calculate initial deflections at release (using release Ec)\n  const deadLoadDeflection = calculateDeflection(\n    inputs.deadLoad,\n    inputs.span,\n    releaseModulusOfElasticity,\n    inputs.momentOfInertia\n  );\n  \n  const liveLoadDeflection = inputs.liveLoad\n    ? calculateDeflection(\n        inputs.liveLoad,\n        inputs.span,\n        modulusOfElasticity28Day, // Use 28-day for live load\n        inputs.momentOfInertia\n      )\n    : undefined;\n  \n  // Get factors\n  const creepFactor = getCreepFactor(inputs.memberType);\n  const shrinkageFactor = getShrinkageFactor(inputs.memberType);\n  \n  // Calculate long-term deflection\n  const longTermDeflection = calculateLongTermDeflection(\n    deadLoadDeflection,\n    creepFactor,\n    shrinkageFactor\n  );\n  \n  // Calculate recommended camber\n  const recommendedCamber = calculateRecommendedCamber(\n    deadLoadDeflection,\n    longTermDeflection\n  );\n  \n  // Initial camber at release (typically equals recommended camber)\n  const initialCamber = recommendedCamber;\n  \n  // Net initial camber (what you actually measure at release after dead load acts)\n  const netInitialCamber = initialCamber - deadLoadDeflection;\n  \n  // Final camber after all deflections\n  const finalCamber = initialCamber - longTermDeflection;\n  \n  return {\n    initialCamber,\n    netInitialCamber,\n    deadLoadDeflection,\n    liveLoadDeflection,\n    longTermDeflection,\n    finalCamber,\n    recommendedCamber,\n    releaseModulusOfElasticity,\n    modulusOfElasticity: modulusOfElasticity28Day,\n    creepFactor,\n    shrinkageFactor,\n  };\n}\n\n/**\n * Validate inputs\n */\nexport function validateInputs(inputs: Partial<CamberInputs>): string[] {\n  const errors: string[] = [];\n  \n  if (!inputs.span || inputs.span <= 0) {\n    errors.push(\"Span must be greater than 0\");\n  }\n  \n  if (!inputs.releaseStrength || inputs.releaseStrength < 3000 || inputs.releaseStrength > 10000) {\n    errors.push(\"Release strength must be between 3000 and 10000 psi\");\n  }\n  \n  if (!inputs.concreteStrength || inputs.concreteStrength < 3000 || inputs.concreteStrength > 10000) {\n    errors.push(\"28-day strength must be between 3000 and 10000 psi\");\n  }\n  \n  if (inputs.releaseStrength && inputs.concreteStrength && inputs.releaseStrength > inputs.concreteStrength) {\n    errors.push(\"Release strength cannot be greater than 28-day strength\");\n  }\n  \n  if (!inputs.momentOfInertia || inputs.momentOfInertia <= 0) {\n    errors.push(\"Moment of inertia must be greater than 0\");\n  }\n  \n  if (!inputs.deadLoad || inputs.deadLoad <= 0) {\n    errors.push(\"Dead load must be greater than 0\");\n  }\n  \n  if (inputs.liveLoad && inputs.liveLoad < 0) {\n    errors.push(\"Live load cannot be negative\");\n  }\n  \n  return errors;\n}\n\n/**\n * Get typical moment of inertia values for common sections\n */\nexport function getTypicalMomentOfInertia(memberType: string, span: number): number {\n  // These are approximate values for typical sections\n  const spanFactor = Math.pow(span / 30, 1.5); // Scale with span\n  \n  const baseValues: Record<string, number> = {\n    'beam': 8000 * spanFactor,\n    'double-tee': 15000 * spanFactor,\n    'hollow-core': 5000 * spanFactor,\n    'single-tee': 12000 * spanFactor,\n    'solid-slab': 6000 * spanFactor,\n    'wall-panel': 4000 * spanFactor,\n    'stadia': 10000 * spanFactor,\n  };\n  \n  return baseValues[memberType] || 10000 * spanFactor;\n}\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\n\nexport interface StrandCoordinate {\n  x: number; // Horizontal distance from left edge (inches)\n  y: number; // Vertical distance from bottom (inches)\n}\n\nexport interface CustomStrandPattern {\n  id: string;\n  patternId: string; // Format: \"101-75\" (pattern number - pulling force %)\n  name: string;\n  department: 'Wall Panels' | 'Extruded' | 'Flexicore' | 'Precast'; // Department category\n  productType: '8048' | '1048' | '1247' | '1250' | '1648' | string; // Product type within department\n  position: 'Top' | 'Bottom' | 'Both'; // Where strands are positioned\n  strand_3_8: number; // Count of 3/8\" strands\n  strand_1_2: number; // Count of 1/2\" strands\n  strand_0_6: number; // Count of 0.6\" strands\n  strandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Size of each strand by position (left to right)\n  strandCoordinates?: StrandCoordinate[]; // (x,y) position of each strand from bottom-left corner\n  eValue: number; // Distance from bottom to center of strand (inches)\n  pullingForce: number; // Percentage of break strength (1-99%)\n  requiredForce?: number; // Required force in pounds (lbs) for this strand pattern\n  totalArea: number; // Total strand area in in\n  // Legacy fields - kept for backward compatibility with old patterns\n  momentOfInertia?: number; // Deprecated: Should come from product, not strand pattern\n  deadLoad?: number; // Deprecated: Should come from product, not strand pattern\n}\n\ninterface StrandPatternState {\n  customPatterns: CustomStrandPattern[];\n  loading: boolean;\n  initialized: boolean;\n  addPattern: (pattern: Omit<CustomStrandPattern, 'id'>) => Promise<void>;\n  updatePattern: (id: string, pattern: Omit<CustomStrandPattern, 'id'>) => Promise<void>;\n  removePattern: (id: string) => Promise<void>;\n  clearAllPatterns: () => Promise<void>;\n  getPatternById: (id: string) => CustomStrandPattern | undefined;\n  getPatternByPatternId: (patternId: string) => CustomStrandPattern | undefined;\n  getPatternsByPosition: (position: 'Top' | 'Bottom' | 'Both') => CustomStrandPattern[];\n  initialize: () => Promise<void>;\n}\n\nconst firebaseSync = new FirebaseSync<CustomStrandPattern>('strandPatterns');\n\nexport const useStrandPatternStore = create<StrandPatternState>()((set, get) => ({\n  customPatterns: [],\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const patterns = await firebaseSync.fetchAll();\n      set({ customPatterns: patterns, loading: false, initialized: true });\n\n      // Subscribe to real-time updates\n      firebaseSync.subscribe((updatedPatterns) => {\n        set({ customPatterns: updatedPatterns });\n      });\n    } catch (error) {\n      console.error('Failed to initialize strand patterns:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addPattern: async (pattern) => {\n    const id = Date.now().toString();\n    const newPattern: CustomStrandPattern = {\n      ...pattern,\n      id,\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      customPatterns: [...state.customPatterns, newPattern],\n    }));\n\n    try {\n      await firebaseSync.set(id, newPattern);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        customPatterns: state.customPatterns.filter((p) => p.id !== id),\n      }));\n      throw error;\n    }\n  },\n\n  updatePattern: async (id, pattern) => {\n    const oldPattern = get().customPatterns.find((p) => p.id === id);\n\n    // Optimistically update UI\n    set((state) => ({\n      customPatterns: state.customPatterns.map((p) =>\n        p.id === id ? { ...pattern, id } : p\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(id, { ...pattern, id });\n    } catch (error) {\n      // Revert on error\n      if (oldPattern) {\n        set((state) => ({\n          customPatterns: state.customPatterns.map((p) => (p.id === id ? oldPattern : p)),\n        }));\n      }\n      throw error;\n    }\n  },\n\n  removePattern: async (id) => {\n    const oldPattern = get().customPatterns.find((p) => p.id === id);\n\n    // Optimistically update UI\n    set((state) => ({\n      customPatterns: state.customPatterns.filter((p) => p.id !== id),\n    }));\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      // Revert on error\n      if (oldPattern) {\n        set((state) => ({\n          customPatterns: [...state.customPatterns, oldPattern],\n        }));\n      }\n      throw error;\n    }\n  },\n\n  clearAllPatterns: async () => {\n    const oldPatterns = get().customPatterns;\n\n    // Optimistically update UI\n    set(() => ({\n      customPatterns: [],\n    }));\n\n    try {\n      // Delete all patterns from Firebase\n      await Promise.all(oldPatterns.map(p => firebaseSync.delete(p.id)));\n    } catch (error) {\n      // Revert on error\n      set(() => ({\n        customPatterns: oldPatterns,\n      }));\n      throw error;\n    }\n  },\n\n  getPatternById: (id) => {\n    return get().customPatterns.find((p) => p.id === id);\n  },\n\n  getPatternByPatternId: (patternId) => {\n    return get().customPatterns.find((p) => p.patternId === patternId);\n  },\n\n  getPatternsByPosition: (position) => {\n    return get().customPatterns.filter((p) =>\n      p.position === position || p.position === 'Both'\n    );\n  },\n}));\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { Product, ProductType, ToleranceSpec, SubProduct } from '../types/product-library';\n\ninterface ProductLibraryState {\n  products: Product[];\n  loading: boolean;\n  initialized: boolean;\n\n  // CRUD Operations\n  addProduct: (product: Omit<Product, 'id' | 'createdAt' | 'updatedAt'>) => Promise<string>;\n  updateProduct: (id: string, updates: Partial<Product>) => Promise<void>;\n  deleteProduct: (id: string) => Promise<void>;\n  getProduct: (id: string) => Product | undefined;\n  getProductByType: (type: ProductType) => Product | undefined;\n\n  // Sub-Product Operations\n  addSubProduct: (productId: string, subProduct: Omit<SubProduct, 'id' | 'createdAt' | 'updatedAt'>) => Promise<string>;\n  updateSubProduct: (productId: string, subProductId: string, updates: Partial<SubProduct>) => Promise<void>;\n  deleteSubProduct: (productId: string, subProductId: string) => Promise<void>;\n  getSubProduct: (productId: string, subProductId: string) => SubProduct | undefined;\n\n  // Tolerance Operations\n  addTolerance: (productId: string, tolerance: ToleranceSpec) => Promise<void>;\n  updateTolerance: (productId: string, toleranceIndex: number, tolerance: ToleranceSpec) => Promise<void>;\n  deleteTolerance: (productId: string, toleranceIndex: number) => Promise<void>;\n\n  // Sub-Product Tolerance Operations\n  addSubProductTolerance: (productId: string, subProductId: string, tolerance: ToleranceSpec) => Promise<void>;\n  updateSubProductTolerance: (productId: string, subProductId: string, toleranceIndex: number, tolerance: ToleranceSpec) => Promise<void>;\n  deleteSubProductTolerance: (productId: string, subProductId: string, toleranceIndex: number) => Promise<void>;\n\n  // Queries\n  getActiveProducts: () => Product[];\n  getAllProductTypes: () => ProductType[];\n\n  // Utility\n  clearAllProducts: () => Promise<void>;\n  initialize: () => Promise<void>;\n}\n\nconst firebaseSync = new FirebaseSync<Product>('products');\n\nexport const useProductLibraryStore = create<ProductLibraryState>()((set, get) => ({\n  products: [],\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const products = await firebaseSync.fetchAll();\n      set({ products, loading: false, initialized: true });\n\n      // Subscribe to real-time updates\n      firebaseSync.subscribe((updatedProducts) => {\n        set({ products: updatedProducts });\n      });\n    } catch (error) {\n      console.error('Failed to initialize products:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  // CRUD Operations\n  addProduct: async (product) => {\n    const id = `product-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n    const newProduct: Product = {\n      ...product,\n      id,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: [...state.products, newProduct],\n    }));\n\n    try {\n      await firebaseSync.set(id, newProduct);\n      return id;\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.filter((p) => p.id !== id),\n      }));\n      throw error;\n    }\n  },\n\n  updateProduct: async (id, updates) => {\n    const oldProduct = get().products.find((p) => p.id === id);\n    const updatedProduct = oldProduct ? { ...oldProduct, ...updates, updatedAt: Date.now() } : null;\n\n    if (!updatedProduct) return;\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === id ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(id, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      if (oldProduct) {\n        set((state) => ({\n          products: state.products.map((p) => (p.id === id ? oldProduct : p)),\n        }));\n      }\n      throw error;\n    }\n  },\n\n  deleteProduct: async (id) => {\n    const oldProduct = get().products.find((p) => p.id === id);\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.filter((product) => product.id !== id),\n    }));\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      // Revert on error\n      if (oldProduct) {\n        set((state) => ({\n          products: [...state.products, oldProduct],\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getProduct: (id) => {\n    return get().products.find((product) => product.id === id);\n  },\n\n  getProductByType: (type) => {\n    return get().products.find((product) => product.name === type);\n  },\n\n  // Sub-Product Operations\n  addSubProduct: async (productId, subProduct) => {\n    const subProductId = `subproduct-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n    const newSubProduct: SubProduct = {\n      ...subProduct,\n      id: subProductId,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) throw new Error('Product not found');\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: [...(oldProduct.subProducts || []), newSubProduct],\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n      return subProductId;\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  updateSubProduct: async (productId, subProductId, updates) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: (oldProduct.subProducts || []).map((subProduct) =>\n        subProduct.id === subProductId\n          ? { ...subProduct, ...updates, updatedAt: Date.now() }\n          : subProduct\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  deleteSubProduct: async (productId, subProductId) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: (oldProduct.subProducts || []).filter(\n        (subProduct) => subProduct.id !== subProductId\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  getSubProduct: (productId, subProductId) => {\n    const product = get().products.find((p) => p.id === productId);\n    return product?.subProducts?.find((sp) => sp.id === subProductId);\n  },\n\n  // Tolerance Operations\n  addTolerance: async (productId, tolerance) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      tolerances: [...oldProduct.tolerances, tolerance],\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  updateTolerance: async (productId, toleranceIndex, tolerance) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      tolerances: oldProduct.tolerances.map((t, i) =>\n        i === toleranceIndex ? tolerance : t\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  deleteTolerance: async (productId, toleranceIndex) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      tolerances: oldProduct.tolerances.filter((_, i) => i !== toleranceIndex),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  // Sub-Product Tolerance Operations\n  addSubProductTolerance: async (productId, subProductId, tolerance) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: (oldProduct.subProducts || []).map((subProduct) =>\n        subProduct.id === subProductId\n          ? {\n              ...subProduct,\n              tolerances: [...subProduct.tolerances, tolerance],\n              updatedAt: Date.now(),\n            }\n          : subProduct\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  updateSubProductTolerance: async (productId, subProductId, toleranceIndex, tolerance) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: (oldProduct.subProducts || []).map((subProduct) =>\n        subProduct.id === subProductId\n          ? {\n              ...subProduct,\n              tolerances: subProduct.tolerances.map((t, i) =>\n                i === toleranceIndex ? tolerance : t\n              ),\n              updatedAt: Date.now(),\n            }\n          : subProduct\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  deleteSubProductTolerance: async (productId, subProductId, toleranceIndex) => {\n    const oldProduct = get().products.find((p) => p.id === productId);\n    if (!oldProduct) return;\n\n    const updatedProduct = {\n      ...oldProduct,\n      subProducts: (oldProduct.subProducts || []).map((subProduct) =>\n        subProduct.id === subProductId\n          ? {\n              ...subProduct,\n              tolerances: subProduct.tolerances.filter((_, i) => i !== toleranceIndex),\n              updatedAt: Date.now(),\n            }\n          : subProduct\n      ),\n      updatedAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      products: state.products.map((product) =>\n        product.id === productId ? updatedProduct : product\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(productId, updatedProduct);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        products: state.products.map((p) => (p.id === productId ? oldProduct : p)),\n      }));\n      throw error;\n    }\n  },\n\n  // Queries\n  getActiveProducts: () => {\n    return get().products.filter((product) => product.isActive);\n  },\n\n  getAllProductTypes: () => {\n    return get().products.map((product) => product.name);\n  },\n\n  // Utility\n  clearAllProducts: async () => {\n    const oldProducts = get().products;\n\n    // Optimistically update UI\n    set({ products: [] });\n\n    try {\n      await Promise.all(oldProducts.map(p => firebaseSync.delete(p.id)));\n    } catch (error) {\n      // Revert on error\n      set({ products: oldProducts });\n      throw error;\n    }\n  },\n}));\n","import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Calculate Greatest Common Divisor using Euclidean algorithm\n */\nfunction gcd(a: number, b: number): number {\n  return b === 0 ? a : gcd(b, a % b);\n}\n\n/**\n * Convert decimal inches to nearest 1/16\" fraction, reduced to lowest terms\n * @param decimal - decimal inch value (e.g., 0.5 -> 1/2\", 0.375 -> 3/8\")\n * @returns formatted string like \"1/2\"\" or \"3/8\"\" (calculated as 16ths, displayed reduced)\n */\nexport function decimalToFraction(decimal: number): string {\n  const absDecimal = Math.abs(decimal);\n  const wholePart = Math.floor(absDecimal);\n  const fractionalPart = absDecimal - wholePart;\n  \n  // Round to nearest 1/16\n  const sixteenths = Math.round(fractionalPart * 16);\n  \n  // Handle special cases\n  if (sixteenths === 0) {\n    return wholePart > 0 ? `${wholePart}\"` : '0';\n  }\n  \n  if (sixteenths === 16) {\n    return `${wholePart + 1}\"`;\n  }\n  \n  // Reduce fraction to lowest terms\n  const divisor = gcd(sixteenths, 16);\n  const reducedNumerator = sixteenths / divisor;\n  const reducedDenominator = 16 / divisor;\n  \n  // Format the result\n  if (wholePart > 0) {\n    return `${wholePart} ${reducedNumerator}/${reducedDenominator}\"`;\n  }\n  \n  return `${reducedNumerator}/${reducedDenominator}\"`;\n}\n\n/**\n * Format decimal inches with fraction equivalent\n * @param decimal - decimal inch value\n * @returns formatted string like \"0.684 (11/16\")\"\n */\nexport function formatInchesWithFraction(decimal: number): string {\n  const fractionStr = decimalToFraction(decimal);\n  return `${decimal.toFixed(3)} (${fractionStr})`;\n}\n\n/**\n * Parse user input (decimal or fractional) to decimal inches\n * Supports formats:\n * - Decimal: \"1.375\", \"0.75\", \".5\"\n * - Fraction: \"5/16\", \"3/8\", \"11/16\"\n * - Mixed: \"1 5/16\", \"2 3/8\"\n * @param input - user input string\n * @returns decimal value or null if invalid\n */\nexport function parseMeasurementInput(input: string): number | null {\n  const trimmed = input.trim();\n  if (!trimmed) return null;\n\n  // Try decimal first\n  const decimalMatch = trimmed.match(/^(\\d*\\.?\\d+)$/);\n  if (decimalMatch) {\n    const value = parseFloat(decimalMatch[1]);\n    return isNaN(value) ? null : value;\n  }\n\n  // Try mixed number: \"1 5/16\"\n  const mixedMatch = trimmed.match(/^(\\d+)\\s+(\\d+)\\/(\\d+)$/);\n  if (mixedMatch) {\n    const whole = parseInt(mixedMatch[1]);\n    const numerator = parseInt(mixedMatch[2]);\n    const denominator = parseInt(mixedMatch[3]);\n    if (denominator === 0) return null;\n    return whole + (numerator / denominator);\n  }\n\n  // Try simple fraction: \"5/16\"\n  const fractionMatch = trimmed.match(/^(\\d+)\\/(\\d+)$/);\n  if (fractionMatch) {\n    const numerator = parseInt(fractionMatch[1]);\n    const denominator = parseInt(fractionMatch[2]);\n    if (denominator === 0) return null;\n    return numerator / denominator;\n  }\n\n  return null;\n}\n\n/**\n * Convert decimal feet to formatted span display\n * @param decimalFeet - span in decimal feet (e.g., 40.583)\n * @returns formatted string like \"40'-7\" (40.583 ft)\"\n */\nexport function formatSpanDisplay(decimalFeet: number): string {\n  const feet = Math.floor(decimalFeet);\n  const remainingInches = (decimalFeet - feet) * 12;\n  let wholeInches = Math.floor(remainingInches);\n  const fractionalInches = remainingInches - wholeInches;\n\n  // Round to nearest 1/16\n  let sixteenths = Math.round(fractionalInches * 16);\n\n  // Handle rounding up to next inch\n  if (sixteenths === 16) {\n    wholeInches += 1;\n    sixteenths = 0;\n  }\n\n  let inchDisplay = '';\n  if (wholeInches > 0 && sixteenths > 0) {\n    inchDisplay = `${wholeInches} ${sixteenths}/16\"`;\n  } else if (wholeInches > 0) {\n    inchDisplay = `${wholeInches}\"`;\n  } else if (sixteenths > 0) {\n    inchDisplay = `${sixteenths}/16\"`;\n  } else {\n    inchDisplay = `0\"`;\n  }\n\n  return `${feet}'-${inchDisplay} (${decimalFeet.toFixed(3)} ft)`;\n}\n\n/**\n * Convert decimal feet to PDF span format with decimal inches and fractional equivalent\n * @param decimalFeet - span in decimal feet (e.g., 27.5416)\n * @returns object with main (27'-6.500\") and fraction (27'-6 1/2\") strings\n */\nexport function formatSpanForPDF(decimalFeet: number): { main: string; fraction: string } {\n  const feet = Math.floor(decimalFeet);\n  const remainingInches = (decimalFeet - feet) * 12;\n  const wholeInches = Math.floor(remainingInches);\n  const fractionalInches = remainingInches - wholeInches;\n\n  // Main line: feet and decimal inches to 3 places\n  const decimalInchStr = remainingInches.toFixed(3);\n  const main = `${feet}'-${decimalInchStr}\"`;\n\n  // Fraction line: round to nearest 1/8\"\n  let eighths = Math.round(fractionalInches * 8);\n  let adjustedWholeInches = wholeInches;\n\n  // Handle rounding up to next inch\n  if (eighths === 8) {\n    adjustedWholeInches += 1;\n    eighths = 0;\n  }\n\n  // Build fractional display\n  let fractionStr = '';\n  if (eighths === 0) {\n    // No fraction, just whole inches\n    fractionStr = `${feet}'-${adjustedWholeInches}\"`;\n  } else {\n    // Reduce fraction to lowest terms\n    const divisor = gcd(eighths, 8);\n    const reducedNum = eighths / divisor;\n    const reducedDen = 8 / divisor;\n    fractionStr = `${feet}'-${adjustedWholeInches} ${reducedNum}/${reducedDen}\"`;\n  }\n\n  return {\n    main,\n    fraction: `${fractionStr}`\n  };\n}\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { Project, ProjectInput } from '../types/project-library';\n\ninterface ProjectLibraryState {\n  projects: Project[];\n  loading: boolean;\n  initialized: boolean;\n  addProject: (project: ProjectInput) => Promise<void>;\n  updateProject: (id: string, project: Partial<ProjectInput>) => Promise<void>;\n  deleteProject: (id: string) => Promise<void>;\n  getProjectById: (id: string) => Project | undefined;\n  searchProjects: (query: string) => Project[];\n  exportProjects: () => string;\n  importProjects: (jsonData: string) => { success: boolean; message: string; imported: number };\n  clearAllProjects: () => Promise<void>;\n  initialize: () => Promise<void>;\n}\n\nconst firebaseSync = new FirebaseSync<Project>('projects');\n\nexport const useProjectLibraryStore = create<ProjectLibraryState>()((set, get) => ({\n  projects: [],\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      const projects = await firebaseSync.fetchAll();\n      set({ projects, loading: false, initialized: true });\n\n      firebaseSync.subscribe((updatedProjects) => {\n        set({ projects: updatedProjects });\n      });\n    } catch (error) {\n      console.error('Failed to initialize projects:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addProject: async (projectInput) => {\n    const newProject: Project = {\n      ...projectInput,\n      id: `project-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    set((state) => ({\n      projects: [...state.projects, newProject],\n    }));\n\n    try {\n      await firebaseSync.set(newProject.id, newProject);\n    } catch (error) {\n      set((state) => ({\n        projects: state.projects.filter((p) => p.id !== newProject.id),\n      }));\n      throw error;\n    }\n  },\n\n  updateProject: async (id, updates) => {\n    const oldProject = get().projects.find((p) => p.id === id);\n    if (!oldProject) return;\n\n    const updatedProject = { ...oldProject, ...updates, updatedAt: Date.now() };\n\n    set((state) => ({\n      projects: state.projects.map((project) =>\n        project.id === id ? updatedProject : project\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(id, updatedProject);\n    } catch (error) {\n      set((state) => ({\n        projects: state.projects.map((p) => (p.id === id ? oldProject : p)),\n      }));\n      throw error;\n    }\n  },\n\n  deleteProject: async (id) => {\n    const oldProject = get().projects.find((p) => p.id === id);\n\n    set((state) => ({\n      projects: state.projects.filter((project) => project.id !== id),\n    }));\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      if (oldProject) {\n        set((state) => ({\n          projects: [...state.projects, oldProject],\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getProjectById: (id) => {\n    return get().projects.find((project) => project.id === id);\n  },\n\n  searchProjects: (query) => {\n    const lowerQuery = query.toLowerCase().trim();\n    if (!lowerQuery) return get().projects;\n\n    return get().projects.filter(\n      (project) =>\n        project.jobNumber.toLowerCase().includes(lowerQuery) ||\n        project.jobName.toLowerCase().includes(lowerQuery)\n    );\n  },\n\n  exportProjects: () => {\n    const projects = get().projects;\n    return JSON.stringify(projects, null, 2);\n  },\n\n  importProjects: (jsonData: string) => {\n    try {\n      const importedProjects = JSON.parse(jsonData) as Project[];\n\n      if (!Array.isArray(importedProjects)) {\n        return { success: false, message: \"Invalid format: Expected an array of projects\", imported: 0 };\n      }\n\n      for (const project of importedProjects) {\n        if (!project.jobNumber || !project.jobName) {\n          return { success: false, message: \"Invalid project data: Missing required fields\", imported: 0 };\n        }\n      }\n\n      const currentProjects = get().projects;\n      const existingJobNumbers = new Set(currentProjects.map(p => p.jobNumber));\n\n      const newProjects = importedProjects.filter(p => !existingJobNumbers.has(p.jobNumber));\n\n      if (newProjects.length === 0) {\n        return { success: true, message: \"All projects already exist\", imported: 0 };\n      }\n\n      const projectsToAdd = newProjects.map(project => ({\n        ...project,\n        id: `project-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n      }));\n\n      // Add to Firebase\n      Promise.all(projectsToAdd.map(p => firebaseSync.set(p.id, p))).catch(err =>\n        console.error('Failed to sync imported projects to Firebase:', err)\n      );\n\n      set((state) => ({\n        projects: [...state.projects, ...projectsToAdd],\n      }));\n\n      return {\n        success: true,\n        message: `Successfully imported ${newProjects.length} project(s)`,\n        imported: newProjects.length\n      };\n    } catch (error) {\n      return { success: false, message: `Import failed: ${error}`, imported: 0 };\n    }\n  },\n\n  clearAllProjects: async () => {\n    const oldProjects = get().projects;\n\n    set({ projects: [] });\n\n    try {\n      await Promise.all(oldProjects.map(p => firebaseSync.delete(p.id)));\n    } catch (error) {\n      set({ projects: oldProjects });\n      throw error;\n    }\n  },\n}));\n","import { useCallback } from 'react';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\nimport { Project } from '../types/project-library';\n\nexport interface JobSuggestion {\n  jobNumber: string;\n  jobName: string;\n  project: Project;\n}\n\n/**\n * Hook to provide job number/name auto-population functionality\n */\nexport function useJobAutocomplete() {\n  const projects = useProjectLibraryStore((s) => s.projects);\n\n  /**\n   * Find project by exact job number match\n   */\n  const findByJobNumber = useCallback((jobNumber: string): Project | null => {\n    const trimmed = jobNumber.trim();\n    if (!trimmed) return null;\n    \n    return projects.find(p => p.jobNumber.toLowerCase() === trimmed.toLowerCase()) || null;\n  }, [projects]);\n\n  /**\n   * Find project by exact job name match\n   */\n  const findByJobName = useCallback((jobName: string): Project | null => {\n    const trimmed = jobName.trim();\n    if (!trimmed) return null;\n    \n    return projects.find(p => p.jobName.toLowerCase() === trimmed.toLowerCase()) || null;\n  }, [projects]);\n\n  /**\n   * Search for projects by partial job name match\n   * Returns array of matching projects sorted by relevance\n   */\n  const searchByJobName = useCallback((query: string): JobSuggestion[] => {\n    const trimmed = query.trim().toLowerCase();\n    if (!trimmed || trimmed.length < 2) return [];\n\n    const matches = projects\n      .filter(p => p.jobName.toLowerCase().includes(trimmed))\n      .map(project => ({\n        jobNumber: project.jobNumber,\n        jobName: project.jobName,\n        project,\n      }));\n\n    // Sort by: exact match first, then starts-with, then contains\n    return matches.sort((a, b) => {\n      const aLower = a.jobName.toLowerCase();\n      const bLower = b.jobName.toLowerCase();\n      \n      if (aLower === trimmed && bLower !== trimmed) return -1;\n      if (bLower === trimmed && aLower !== trimmed) return 1;\n      if (aLower.startsWith(trimmed) && !bLower.startsWith(trimmed)) return -1;\n      if (bLower.startsWith(trimmed) && !aLower.startsWith(trimmed)) return 1;\n      \n      return a.jobName.localeCompare(b.jobName);\n    });\n  }, [projects]);\n\n  /**\n   * Search for projects by partial job number match\n   */\n  const searchByJobNumber = useCallback((query: string): JobSuggestion[] => {\n    const trimmed = query.trim().toLowerCase();\n    if (!trimmed) return [];\n\n    return projects\n      .filter(p => p.jobNumber.toLowerCase().includes(trimmed))\n      .map(project => ({\n        jobNumber: project.jobNumber,\n        jobName: project.jobName,\n        project,\n      }))\n      .sort((a, b) => a.jobNumber.localeCompare(b.jobNumber));\n  }, [projects]);\n\n  return {\n    findByJobNumber,\n    findByJobName,\n    searchByJobName,\n    searchByJobNumber,\n  };\n}\n","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  ScrollView,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n} from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useCalculatorStore } from '../state/calculatorStore';\nimport {\n  calculateCamber,\n  validateInputs,\n  CamberInputs,\n} from '../utils/camber-calculations';\nimport { useStrandPatternStore } from '../state/strandPatternStore';\nimport { useProductLibraryStore } from '../state/productLibraryStore';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { parseMeasurementInput } from '../utils/cn';\nimport { useJobAutocomplete } from '../utils/jobAutocomplete';\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList, 'Calculator'>;\n\nexport default function CalculatorScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const { currentInputs, addCalculation } = useCalculatorStore();\n  const { customPatterns } = useStrandPatternStore();\n  const { products } = useProductLibraryStore();\n  const { findByJobNumber, searchByJobName } = useJobAutocomplete();\n\n  const [projectName, setProjectName] = useState('');\n  const [projectNumber, setProjectNumber] = useState('');\n  const [markNumber, setMarkNumber] = useState('');\n  const [idNumber, setIdNumber] = useState('');\n  const [spanFeet, setSpanFeet] = useState('');\n  const [spanInches, setSpanInches] = useState('');\n  const [spanFraction, setSpanFraction] = useState('0');\n  const [productWidth, setProductWidth] = useState('');\n  const [productSide, setProductSide] = useState<'L1' | 'L2' | ''>('');\n\n  // Product selection\n  const [selectedProductId, setSelectedProductId] = useState<string>('');\n  const [selectedSubProductId, setSelectedSubProductId] = useState<string>('');\n  const [showProductModal, setShowProductModal] = useState(false);\n\n  // Project Name autocomplete\n  const [showProjectNameSuggestions, setShowProjectNameSuggestions] = useState(false);\n  const [projectNameSuggestions, setProjectNameSuggestions] = useState<Array<{ jobNumber: string, jobName: string }>>([]);\n  const [isAutoFilling, setIsAutoFilling] = useState(false);\n\n  // Auto-populate Project Name when Project Number changes\n  useEffect(() => {\n    if (projectNumber.trim()) {\n      const project = findByJobNumber(projectNumber);\n      if (project) {\n        setIsAutoFilling(true);\n        setProjectName(project.jobName);\n        const timeoutId = setTimeout(() => setIsAutoFilling(false), 100);\n        return () => clearTimeout(timeoutId);\n      } else {\n        // Clear project name if job number doesn't match any project\n        setProjectName('');\n      }\n    } else {\n      // Clear project name if job number is empty\n      setProjectName('');\n    }\n  }, [projectNumber, findByJobNumber]);\n\n  // Filter Project Name suggestions when user types\n  useEffect(() => {\n    // Don't show suggestions if we're auto-filling from job number\n    if (isAutoFilling) return;\n\n    if (projectName.trim().length >= 2) {\n      const suggestions = searchByJobName(projectName);\n      setProjectNameSuggestions(suggestions);\n      setShowProjectNameSuggestions(suggestions.length > 0);\n    } else {\n      setProjectNameSuggestions([]);\n      setShowProjectNameSuggestions(false);\n    }\n  }, [projectName, searchByJobName, isAutoFilling]);\n\n  // Handle selecting a project name from suggestions\n  const handleSelectProjectName = (jobNumber: string, jobName: string) => {\n    setIsAutoFilling(true);\n    setProjectName(jobName);\n    setProjectNumber(jobNumber);\n    setShowProjectNameSuggestions(false);\n    setTimeout(() => setIsAutoFilling(false), 100);\n  };\n\n  const [strandPattern, setStrandPattern] = useState<string>('');\n  const [topStrandPattern, setTopStrandPattern] = useState<string>('');\n  const [showStrandModal, setShowStrandModal] = useState(false);\n  const [showTopStrandModal, setShowTopStrandModal] = useState(false);\n  const [errors, setErrors] = useState<string[]>([]);\n\n  // Get selected pattern to determine full width from pattern coordinates\n  const selectedPattern = customPatterns.find(p => p.id === strandPattern);\n\n  // Get selected product and sub-product\n  const selectedProduct = products.find(p => p.id === selectedProductId);\n  const selectedSubProduct = selectedProduct?.subProducts?.find(sp => sp.id === selectedSubProductId);\n\n  // Get moment of inertia and dead load from selected sub-product\n  const momentOfInertia = selectedSubProduct?.momentOfInertia || 0;\n  const deadLoad = selectedSubProduct?.deadLoadPerLinearFoot || 0;\n\n  // Calculate full width from strand coordinates if available, otherwise default to 48\"\n  const fullWidth = selectedPattern?.strandCoordinates && selectedPattern.strandCoordinates.length > 0\n    ? Math.max(...selectedPattern.strandCoordinates.map(c => c.x))\n    : 48;\n\n  // Check if this is a cut-width product\n  const parsedWidth = productWidth.trim() ? parseMeasurementInput(productWidth) : null;\n  const tolerance = 0.001;\n  const isCutWidth = parsedWidth !== null && Math.abs(parsedWidth - fullWidth) > tolerance && parsedWidth < fullWidth;\n\n  // Convert feet/inches/fraction to decimal feet\n  const getSpanInFeet = (): number => {\n    const feet = parseFloat(spanFeet) || 0;\n    const inches = parseFloat(spanInches) || 0;\n    const fractionValue = parseFraction(spanFraction);\n    return feet + (inches + fractionValue) / 12;\n  };\n\n  // Parse fraction string like \"1/2\" to decimal\n  const parseFraction = (fraction: string): number => {\n    if (!fraction || fraction === '0') return 0;\n    const parts = fraction.split('/');\n    if (parts.length === 2) {\n      const numerator = parseFloat(parts[0]);\n      const denominator = parseFloat(parts[1]);\n      if (denominator !== 0) {\n        return numerator / denominator;\n      }\n    }\n    return 0;\n  };\n\n  const handleContinue = () => {\n    const validationErrors: string[] = [];\n\n    // Required validations\n    if (!selectedSubProductId) {\n      validationErrors.push('Product Type/Size is required');\n    }\n    if (!strandPattern) {\n      validationErrors.push('Strand Pattern is required');\n    }\n\n    // Validate product side if cut-width\n    if (isCutWidth && !productSide) {\n      validationErrors.push('Product side is required for cut-width products');\n    }\n\n    if (validationErrors.length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n\n    setErrors([]);\n\n    // Navigate to next screen or continue with calculation\n    // For now, we'll keep the existing calculation logic\n    const spanInFeet = getSpanInFeet();\n\n    // Get selected custom pattern\n    const selectedPattern = customPatterns.find(p => p.id === strandPattern);\n\n    // Parse product width if provided\n    const parsedWidth = productWidth.trim() ? parseMeasurementInput(productWidth) : null;\n\n    const inputs: Partial<CamberInputs> = {\n      span: spanInFeet,\n      memberType: 'hollow-core',\n      releaseStrength: 3500,\n      concreteStrength: 9000,\n      momentOfInertia: momentOfInertia || selectedPattern?.momentOfInertia || 0,\n      deadLoad: deadLoad || selectedPattern?.deadLoad || 0,\n      liveLoad: undefined,\n      strandPattern: strandPattern || undefined,\n      strandEValue: selectedPattern?.eValue,\n      topStrandPattern: topStrandPattern || undefined,\n      productWidth: parsedWidth !== null ? parsedWidth : undefined,\n      productSide: isCutWidth && productSide ? productSide : undefined,\n      projectNumber: projectNumber || undefined,\n      markNumber: markNumber || undefined,\n      idNumber: idNumber || undefined,\n    };\n\n    const results = calculateCamber(inputs as CamberInputs);\n\n    const record = {\n      id: Date.now().toString(),\n      timestamp: Date.now(),\n      inputs: inputs as CamberInputs,\n      results,\n      projectName: projectName || undefined,\n    };\n\n    addCalculation(record);\n    navigation.navigate('Results', { calculation: record });\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      className=\"flex-1 bg-white\"\n      style={{ paddingTop: insets.top }}\n    >\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: 40 }}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        {/* Header */}\n        <View className=\"px-6 py-4 border-b border-gray-200\">\n          <View className=\"flex-row items-center justify-between mb-1\">\n            <Text className=\"text-gray-900 text-2xl font-bold\">\n              Camber Calculator\n            </Text>\n            <Pressable\n              onPress={() => {\n                navigation.navigate(\"ProductTagScanner\", {\n                  onDataScanned: (data) => {\n                    // Fill all fields from the scanned tag\n                    if (data.projectName) setProjectName(data.projectName);\n                    if (data.projectNumber) setProjectNumber(data.projectNumber);\n                    if (data.markNumber) setMarkNumber(data.markNumber);\n                    if (data.idNumber) setIdNumber(data.idNumber);\n                    if (data.span) {\n                      setSpanFeet(data.span.feet.toString());\n                      setSpanInches(data.span.inches.toString());\n                      setSpanFraction(\"0\"); // Decimal inches, no fraction\n                    }\n                    if (data.productWidth) {\n                      setProductWidth(data.productWidth.toString());\n                    }\n                    if (data.strandPattern) {\n                      // Find matching strand pattern by ID or name\n                      const matchingPattern = customPatterns.find(\n                        p => p.patternId === data.strandPattern || p.name.includes(data.strandPattern || '')\n                      );\n                      if (matchingPattern) {\n                        setStrandPattern(matchingPattern.id);\n                      }\n                    }\n                  },\n                });\n              }}\n              className=\"bg-blue-500 rounded-lg px-4 py-2 flex-row items-center\"\n            >\n              <Ionicons name=\"camera\" size={20} color=\"#fff\" />\n              <Text className=\"text-white text-sm font-semibold ml-2\">\n                Scan Product Tag\n              </Text>\n            </Pressable>\n          </View>\n          <Text className=\"text-gray-600 text-sm mt-1\">\n            Configure project details and select strand pattern\n          </Text>\n        </View>\n\n        {/* Error Display */}\n        {errors.length > 0 && (\n          <View className=\"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-4\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"alert-circle\" size={20} color=\"#DC2626\" />\n              <View className=\"ml-2 flex-1\">\n                <Text className=\"text-red-800 font-semibold text-sm mb-1\">\n                  Please fix the following:\n                </Text>\n                {errors.map((error, index) => (\n                  <Text key={index} className=\"text-red-700 text-sm\">\n                     {error}\n                  </Text>\n                ))}\n              </View>\n            </View>\n          </View>\n        )}\n\n        {/* Optional Product Details */}\n        <View className=\"px-6 mt-6\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-4\">\n            Product Details (Optional)\n          </Text>\n\n          <View className=\"mb-4\" style={{ zIndex: 10 }}>\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Project Name\n            </Text>\n            <View style={{ position: 'relative' }}>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                placeholder=\"Enter project name\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={projectName}\n                onChangeText={setProjectName}\n                onBlur={() => {\n                  // Delay hiding suggestions to allow click events to register\n                  setTimeout(() => setShowProjectNameSuggestions(false), 200);\n                }}\n                onFocus={() => {\n                  if (projectName.trim().length >= 2 && projectNameSuggestions.length > 0) {\n                    setShowProjectNameSuggestions(true);\n                  }\n                }}\n              />\n              {showProjectNameSuggestions && projectNameSuggestions.length > 0 && (\n                <View\n                  className=\"bg-white border border-gray-300 rounded-lg\"\n                  style={{\n                    position: 'absolute',\n                    top: '100%',\n                    left: 0,\n                    right: 0,\n                    marginTop: 4,\n                    zIndex: 9999,\n                    maxHeight: 200,\n                    shadowColor: '#000',\n                    shadowOffset: { width: 0, height: 4 },\n                    shadowOpacity: 0.15,\n                    shadowRadius: 8,\n                    elevation: 8,\n                  }}\n                >\n                  <ScrollView style={{ maxHeight: 200 }} keyboardShouldPersistTaps=\"handled\" nestedScrollEnabled>\n                    {projectNameSuggestions.map((suggestion, index) => (\n                      <Pressable\n                        key={`${suggestion.jobNumber}-${index}`}\n                        onPress={() => handleSelectProjectName(suggestion.jobNumber, suggestion.jobName)}\n                        className=\"px-4 py-3 border-b border-gray-200\"\n                        style={{ backgroundColor: '#fff' }}\n                      >\n                        <Text className=\"text-gray-900 text-base font-medium\">{suggestion.jobName}</Text>\n                        <Text className=\"text-gray-500 text-sm\">Job #: {suggestion.jobNumber}</Text>\n                      </Pressable>\n                    ))}\n                  </ScrollView>\n                </View>\n              )}\n            </View>\n          </View>\n\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Project Number\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n              placeholder=\"Enter project number\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={projectNumber}\n              onChangeText={setProjectNumber}\n            />\n          </View>\n\n          <View className=\"flex-row gap-3 mb-4\">\n            <View className=\"flex-1\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Mark Number\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                placeholder=\"Mark #\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={markNumber}\n                onChangeText={setMarkNumber}\n              />\n            </View>\n\n            <View className=\"flex-1\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                ID Number\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                placeholder=\"ID #\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={idNumber}\n                onChangeText={setIdNumber}\n              />\n            </View>\n          </View>\n\n          {/* Span Entry */}\n          <View className=\"mb-6\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Span (Optional)\n            </Text>\n            <View className=\"flex-row items-center\" style={{ gap: 8 }}>\n              <View style={{ flex: 1, minWidth: 0 }}>\n                <TextInput\n                  className=\"bg-white border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  placeholder=\"Feet\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={spanFeet}\n                  onChangeText={setSpanFeet}\n                  keyboardType=\"numeric\"\n                />\n              </View>\n              <Text className=\"text-gray-600 font-medium\">-</Text>\n              <View style={{ flex: 1, minWidth: 0 }}>\n                <TextInput\n                  className=\"bg-white border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  placeholder=\"Inches\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={spanInches}\n                  onChangeText={setSpanInches}\n                  keyboardType=\"numeric\"\n                />\n              </View>\n              <Pressable\n                className=\"bg-gray-100 border border-gray-300 rounded-lg px-3 py-3 items-center\"\n                style={{ width: 70 }}\n                onPress={() => {\n                  const fractions = ['0', '1/8', '1/4', '3/8', '1/2', '5/8', '3/4', '7/8'];\n                  const currentIndex = fractions.indexOf(spanFraction);\n                  const nextIndex = (currentIndex + 1) % fractions.length;\n                  setSpanFraction(fractions[nextIndex]);\n                }}\n              >\n                <Text className=\"text-gray-900 font-medium text-sm\">\n                  {spanFraction === '0' ? '0' : spanFraction}\"\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n\n          {/* Product Width Entry */}\n          <View className=\"mb-6\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Product Width (Optional)\n            </Text>\n            <Text className=\"text-xs text-gray-500 mb-2\">\n              For cut-width products, enter actual width in inches (decimal or fraction)\n            </Text>\n            <TextInput\n              style={{\n                backgroundColor: '#FFFFFF',\n                borderWidth: 1,\n                borderColor: '#D1D5DB',\n                borderRadius: 8,\n                paddingHorizontal: 16,\n                paddingVertical: 12,\n                fontSize: 16,\n                color: '#111827',\n              }}\n              placeholder=\"e.g., 28 or 28 1/2 or 28.5\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              selectionColor=\"#000000\"\n              value={productWidth}\n              onChangeText={setProductWidth}\n              keyboardType=\"default\"\n            />\n          </View>\n\n          {/* Product Side Selector - Only show for cut-width products */}\n          {isCutWidth && (\n            <View className=\"mb-6\">\n              <View className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-3\">\n                <View className=\"flex-row items-start\">\n                  <Ionicons name=\"cut\" size={20} color=\"#F59E0B\" />\n                  <View className=\"flex-1 ml-3\">\n                    <Text className=\"text-amber-900 font-semibold text-sm mb-1\">\n                      Cut-Width Product Detected\n                    </Text>\n                    <Text className=\"text-amber-800 text-xs\">\n                      Product: {parsedWidth}\" (cut from {fullWidth}\")\n                    </Text>\n                  </View>\n                </View>\n              </View>\n\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Product Side <Text className=\"text-red-500\">*</Text>\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-3\">\n                Which side is the keeper side (product side)?\n              </Text>\n\n              {/* Product Side Buttons */}\n              <View className=\"flex-row gap-3 mb-3\">\n                <Pressable\n                  onPress={() => setProductSide('L1')}\n                  className={`flex-1 rounded-lg py-3 px-4 border-2 ${productSide === 'L1'\n                      ? 'bg-blue-50 border-blue-500'\n                      : 'bg-white border-gray-300'\n                    }`}\n                >\n                  <Text className={`text-center font-semibold text-sm ${productSide === 'L1' ? 'text-blue-700' : 'text-gray-700'\n                    }`}>\n                    L1 (Left Side)\n                  </Text>\n                  <Text className=\"text-center text-xs text-gray-600 mt-1\">\n                    Keep left side\n                  </Text>\n                </Pressable>\n\n                <Pressable\n                  onPress={() => setProductSide('L2')}\n                  className={`flex-1 rounded-lg py-3 px-4 border-2 ${productSide === 'L2'\n                      ? 'bg-blue-50 border-blue-500'\n                      : 'bg-white border-gray-300'\n                    }`}\n                >\n                  <Text className={`text-center font-semibold text-sm ${productSide === 'L2' ? 'text-blue-700' : 'text-gray-700'\n                    }`}>\n                    L2 (Right Side)\n                  </Text>\n                  <Text className=\"text-center text-xs text-gray-600 mt-1\">\n                    Keep right side\n                  </Text>\n                </Pressable>\n              </View>\n\n              {/* Visual Diagram */}\n              <View className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                <Text className=\"text-xs font-semibold text-gray-700 mb-3 text-center\">\n                  Visual Guide\n                </Text>\n\n                {/* L1 Product Side Diagram */}\n                <View className=\"mb-4\">\n                  <Text className=\"text-xs text-gray-600 mb-2\">L1 Product Side (Keep left):</Text>\n                  <View className=\"flex-row items-center\">\n                    <View className=\"flex-1 h-12 bg-blue-100 border-2 border-blue-500 items-center justify-center\">\n                      <Text className=\"text-xs text-blue-700\">Keep (L1)</Text>\n                    </View>\n                    <View className=\"flex-1 h-12 bg-red-100 border-r-4 border-red-500 items-center justify-center\">\n                      <Text className=\"text-xs text-red-700\">Cut Edge</Text>\n                    </View>\n                  </View>\n                </View>\n\n                {/* L2 Product Side Diagram */}\n                <View>\n                  <Text className=\"text-xs text-gray-600 mb-2\">L2 Product Side (Keep right):</Text>\n                  <View className=\"flex-row items-center\">\n                    <View className=\"flex-1 h-12 bg-red-100 border-l-4 border-red-500 items-center justify-center\">\n                      <Text className=\"text-xs text-red-700\">Cut Edge</Text>\n                    </View>\n                    <View className=\"flex-1 h-12 bg-blue-100 border-2 border-blue-500 items-center justify-center\">\n                      <Text className=\"text-xs text-blue-700\">Keep (L2)</Text>\n                    </View>\n                  </View>\n                </View>\n              </View>\n\n              {errors.includes('Product side is required for cut-width products') && (\n                <Text className=\"text-red-600 text-xs mt-2\">\n                   Please select which side is the product side (keeper side)\n                </Text>\n              )}\n            </View>\n          )}\n        </View>\n\n        {/* Required Configuration */}\n        <View className=\"px-6 mb-6\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-4\">\n            Configuration <Text className=\"text-red-500\">*</Text>\n          </Text>\n\n          {/* Product Type/Size */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Product Type/Size <Text className=\"text-red-500\">*</Text>\n            </Text>\n            <Pressable\n              className={`bg-white border ${errors.includes('Product Type/Size is required')\n                  ? 'border-red-500'\n                  : 'border-gray-300'\n                } rounded-lg px-4 py-3 flex-row items-center justify-between`}\n              onPress={() => setShowProductModal(true)}\n            >\n              <Text\n                className={`text-base ${selectedSubProduct ? 'text-gray-900' : 'text-gray-400'\n                  }`}\n              >\n                {selectedSubProduct\n                  ? `${selectedProduct?.name} - ${selectedSubProduct.name}`\n                  : 'Select product type/size'}\n              </Text>\n              <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n            </Pressable>\n          </View>\n\n          {/* Strand Pattern */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Strand Pattern <Text className=\"text-red-500\">*</Text>\n            </Text>\n            <Pressable\n              className={`bg-white border ${errors.includes('Strand Pattern is required')\n                  ? 'border-red-500'\n                  : 'border-gray-300'\n                } rounded-lg px-4 py-3 flex-row items-center justify-between`}\n              onPress={() => setShowStrandModal(true)}\n            >\n              <Text\n                className={`text-base ${strandPattern ? 'text-gray-900' : 'text-gray-400'\n                  }`}\n              >\n                {selectedPattern\n                  ? selectedPattern.name\n                  : 'Select strand pattern'}\n              </Text>\n              <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n            </Pressable>\n            {customPatterns.length === 0 && (\n              <Text className=\"text-orange-600 text-xs mt-1\">\n                No patterns available. Create one in Strand Patterns.\n              </Text>\n            )}\n          </View>\n\n          {/* Top Strand Pattern (Optional) */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Top Strand Pattern (Optional)\n            </Text>\n            <Pressable\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 flex-row items-center justify-between\"\n              onPress={() => setShowTopStrandModal(true)}\n            >\n              <Text\n                className={`text-base ${topStrandPattern ? 'text-gray-900' : 'text-gray-400'\n                  }`}\n              >\n                {topStrandPattern\n                  ? customPatterns.find(p => p.id === topStrandPattern)?.name\n                  : 'None'}\n              </Text>\n              <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n            </Pressable>\n          </View>\n        </View>\n\n        {/* Continue Button */}\n        <View className=\"px-6\">\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n            onPress={handleContinue}\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              Continue to Input Values\n            </Text>\n          </Pressable>\n        </View>\n      </ScrollView>\n\n      {/* Product Selection Modal */}\n      <Modal\n        visible={showProductModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowProductModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Product Type/Size\n              </Text>\n              <Pressable onPress={() => setShowProductModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {products.filter(p => p.isActive).map((product) => (\n                <View key={product.id} className=\"mb-4\">\n                  <Text className=\"text-base font-bold text-gray-900 mb-3\">\n                    {product.name}\n                  </Text>\n\n                  {product.subProducts && product.subProducts.length > 0 ? (\n                    product.subProducts\n                      .filter(sp => sp.isActive && sp.momentOfInertia && sp.deadLoadPerLinearFoot)\n                      .map((subProduct) => (\n                        <Pressable\n                          key={subProduct.id}\n                          onPress={() => {\n                            setSelectedProductId(product.id);\n                            setSelectedSubProductId(subProduct.id);\n                            setShowProductModal(false);\n                            setErrors([]);\n                          }}\n                          className={`mb-3 p-4 rounded-lg border ${selectedSubProductId === subProduct.id\n                              ? 'bg-blue-50 border-blue-500'\n                              : 'bg-white border-gray-200'\n                            }`}\n                        >\n                          <View className=\"flex-row items-center justify-between mb-2\">\n                            <Text className={`text-base font-bold ${selectedSubProductId === subProduct.id ? 'text-blue-600' : 'text-gray-900'\n                              }`}>\n                              {subProduct.name}\n                            </Text>\n                            {selectedSubProductId === subProduct.id && (\n                              <Ionicons name=\"checkmark-circle\" size={24} color=\"#3B82F6\" />\n                            )}\n                          </View>\n\n                          {subProduct.description && (\n                            <Text className={`text-sm mb-2 ${selectedSubProductId === subProduct.id ? 'text-blue-800' : 'text-gray-600'\n                              }`}>\n                              {subProduct.description}\n                            </Text>\n                          )}\n\n                          <View className=\"mt-2\">\n                            <Text className={`text-xs font-semibold mb-1 ${selectedSubProductId === subProduct.id ? 'text-blue-800' : 'text-gray-600'\n                              }`}>\n                              Properties:\n                            </Text>\n                            <Text className={`text-xs ${selectedSubProductId === subProduct.id ? 'text-blue-700' : 'text-gray-600'\n                              }`}>\n                               Moment of Inertia: {subProduct.momentOfInertia?.toLocaleString()} in\n                            </Text>\n                            <Text className={`text-xs ${selectedSubProductId === subProduct.id ? 'text-blue-700' : 'text-gray-600'\n                              }`}>\n                               Dead Load: {subProduct.deadLoadPerLinearFoot?.toLocaleString()} lb/ft\n                            </Text>\n                            {subProduct.area && (\n                              <Text className={`text-xs ${selectedSubProductId === subProduct.id ? 'text-blue-700' : 'text-gray-600'\n                                }`}>\n                                 Area: {subProduct.area.toLocaleString()} in\n                              </Text>\n                            )}\n                          </View>\n                        </Pressable>\n                      ))\n                  ) : (\n                    <View className=\"bg-gray-100 rounded-lg p-4\">\n                      <Text className=\"text-sm text-gray-600 text-center\">\n                        No sub-products available\n                      </Text>\n                    </View>\n                  )}\n                </View>\n              ))}\n\n              {products.filter(p => p.isActive).length === 0 && (\n                <View className=\"items-center py-8\">\n                  <Ionicons name=\"cube-outline\" size={48} color=\"#9CA3AF\" />\n                  <Text className=\"text-gray-600 text-base mt-4 text-center\">\n                    No products available.{'\\n'}Add products in Product Library.\n                  </Text>\n                </View>\n              )}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Strand Pattern Selection Modal */}\n      <Modal\n        visible={showStrandModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowStrandModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Strand Pattern\n              </Text>\n              <Pressable onPress={() => setShowStrandModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {customPatterns.length === 0 ? (\n                <View className=\"items-center py-8\">\n                  <Ionicons name=\"albums-outline\" size={48} color=\"#9CA3AF\" />\n                  <Text className=\"text-gray-600 text-base mt-4 mb-4 text-center\">\n                    No strand patterns available.\n                  </Text>\n                  <Pressable\n                    onPress={() => {\n                      setShowStrandModal(false);\n                      navigation.navigate('StrandPatterns');\n                    }}\n                    className=\"bg-blue-500 rounded-xl py-3 px-6 items-center active:bg-blue-600\"\n                  >\n                    <Text className=\"text-white text-sm font-semibold\">\n                      Go to Strand Library\n                    </Text>\n                  </Pressable>\n                </View>\n              ) : (\n                customPatterns.map((pattern) => (\n                  <Pressable\n                    key={pattern.id}\n                    className={`p-4 mb-2 rounded-lg border ${strandPattern === pattern.id\n                        ? 'bg-blue-50 border-blue-500'\n                        : 'bg-white border-gray-200'\n                      }`}\n                    onPress={() => {\n                      setStrandPattern(pattern.id);\n                      setShowStrandModal(false);\n                      setErrors([]);\n                    }}\n                  >\n                    <Text\n                      className={`text-base font-semibold ${strandPattern === pattern.id\n                          ? 'text-blue-600'\n                          : 'text-gray-900'\n                        }`}\n                    >\n                      {pattern.name}\n                    </Text>\n                    <Text className=\"text-gray-600 text-sm mt-1\">\n                      Pattern ID: {pattern.patternId}  Position: {pattern.position}\n                    </Text>\n                  </Pressable>\n                ))\n              )}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Top Strand Pattern Selection Modal */}\n      <Modal\n        visible={showTopStrandModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowTopStrandModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Top Strand Pattern\n              </Text>\n              <Pressable onPress={() => setShowTopStrandModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {/* None Option */}\n              <Pressable\n                className={`p-4 mb-2 rounded-lg border ${topStrandPattern === ''\n                    ? 'bg-blue-50 border-blue-500'\n                    : 'bg-white border-gray-200'\n                  }`}\n                onPress={() => {\n                  setTopStrandPattern('');\n                  setShowTopStrandModal(false);\n                }}\n              >\n                <Text\n                  className={`text-base font-semibold ${topStrandPattern === ''\n                      ? 'text-blue-600'\n                      : 'text-gray-900'\n                    }`}\n                >\n                  None\n                </Text>\n              </Pressable>\n\n              {customPatterns.map((pattern) => (\n                <Pressable\n                  key={pattern.id}\n                  className={`p-4 mb-2 rounded-lg border ${topStrandPattern === pattern.id\n                      ? 'bg-blue-50 border-blue-500'\n                      : 'bg-white border-gray-200'\n                    }`}\n                  onPress={() => {\n                    setTopStrandPattern(pattern.id);\n                    setShowTopStrandModal(false);\n                  }}\n                >\n                  <Text\n                    className={`text-base font-semibold ${topStrandPattern === pattern.id\n                        ? 'text-blue-600'\n                        : 'text-gray-900'\n                      }`}\n                  >\n                    {pattern.name}\n                  </Text>\n                  <Text className=\"text-gray-600 text-sm mt-1\">\n                    Pattern ID: {pattern.patternId}  Position: {pattern.position}\n                  </Text>\n                </Pressable>\n              ))}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </KeyboardAvoidingView>\n  );\n}\n","/**\n * Strand Pattern Definitions\n * \n * Each pattern contains:\n * - Strand counts by size (3/8\", 1/2\", 0.6\")\n * - e value: distance from bottom of plank to center of strand (inches)\n */\n\nexport interface StrandSize {\n  size: '3/8' | '1/2' | '0.6';\n  count: number;\n  diameter: number; // inches\n  area: number; // in\n}\n\nexport interface StrandPattern {\n  id: string;\n  name: string;\n  strands: StrandSize[];\n  eValue: number; // inches - distance from bottom to center of strand group\n  totalArea: number; // in - total strand area\n  description?: string;\n}\n\n// Strand properties\nconst STRAND_PROPERTIES = {\n  '3/8': { diameter: 0.375, area: 0.085 },\n  '1/2': { diameter: 0.5, area: 0.153 },\n  '0.6': { diameter: 0.6, area: 0.217 },\n};\n\n// Predefined strand patterns\nexport const STRAND_PATTERNS: StrandPattern[] = [\n  {\n    id: 'pattern-1',\n    name: 'Pattern 1: 41/2\"',\n    strands: [\n      { size: '1/2', count: 4, diameter: 0.5, area: 0.153 }\n    ],\n    eValue: 2.0,\n    totalArea: 0.612,\n    description: '4 strands of 1/2\" diameter',\n  },\n  {\n    id: 'pattern-2',\n    name: 'Pattern 2: 61/2\"',\n    strands: [\n      { size: '1/2', count: 6, diameter: 0.5, area: 0.153 }\n    ],\n    eValue: 2.5,\n    totalArea: 0.918,\n    description: '6 strands of 1/2\" diameter',\n  },\n  {\n    id: 'pattern-3',\n    name: 'Pattern 3: 81/2\"',\n    strands: [\n      { size: '1/2', count: 8, diameter: 0.5, area: 0.153 }\n    ],\n    eValue: 3.0,\n    totalArea: 1.224,\n    description: '8 strands of 1/2\" diameter',\n  },\n  {\n    id: 'pattern-4',\n    name: 'Pattern 4: 101/2\"',\n    strands: [\n      { size: '1/2', count: 10, diameter: 0.5, area: 0.153 }\n    ],\n    eValue: 3.5,\n    totalArea: 1.530,\n    description: '10 strands of 1/2\" diameter',\n  },\n  {\n    id: 'pattern-5',\n    name: 'Pattern 5: 40.6\"',\n    strands: [\n      { size: '0.6', count: 4, diameter: 0.6, area: 0.217 }\n    ],\n    eValue: 2.5,\n    totalArea: 0.868,\n    description: '4 strands of 0.6\" diameter',\n  },\n  {\n    id: 'pattern-6',\n    name: 'Pattern 6: 60.6\"',\n    strands: [\n      { size: '0.6', count: 6, diameter: 0.6, area: 0.217 }\n    ],\n    eValue: 3.0,\n    totalArea: 1.302,\n    description: '6 strands of 0.6\" diameter',\n  },\n  {\n    id: 'pattern-7',\n    name: 'Pattern 7: Mixed 41/2\" + 43/8\"',\n    strands: [\n      { size: '1/2', count: 4, diameter: 0.5, area: 0.153 },\n      { size: '3/8', count: 4, diameter: 0.375, area: 0.085 }\n    ],\n    eValue: 2.25,\n    totalArea: 0.952,\n    description: '4 strands 1/2\" + 4 strands 3/8\"',\n  },\n  {\n    id: 'pattern-8',\n    name: 'Pattern 8: 121/2\"',\n    strands: [\n      { size: '1/2', count: 12, diameter: 0.5, area: 0.153 }\n    ],\n    eValue: 4.0,\n    totalArea: 1.836,\n    description: '12 strands of 1/2\" diameter',\n  },\n  {\n    id: 'custom',\n    name: 'Custom Pattern',\n    strands: [],\n    eValue: 0,\n    totalArea: 0,\n    description: 'Define your own strand pattern',\n  },\n];\n\n/**\n * Get strand pattern by ID\n */\nexport function getStrandPattern(patternId: string): StrandPattern | undefined {\n  return STRAND_PATTERNS.find(p => p.id === patternId);\n}\n\n/**\n * Calculate total strand area\n */\nexport function calculateTotalStrandArea(strands: StrandSize[]): number {\n  return strands.reduce((total, strand) => total + (strand.count * strand.area), 0);\n}\n\n/**\n * Create custom strand pattern\n */\nexport function createCustomStrandPattern(\n  strands: { size: '3/8' | '1/2' | '0.6'; count: number }[],\n  eValue: number\n): StrandPattern {\n  const strandSizes: StrandSize[] = strands.map(s => ({\n    size: s.size,\n    count: s.count,\n    diameter: STRAND_PROPERTIES[s.size].diameter,\n    area: STRAND_PROPERTIES[s.size].area,\n  }));\n\n  return {\n    id: 'custom',\n    name: 'Custom Pattern',\n    strands: strandSizes,\n    eValue,\n    totalArea: calculateTotalStrandArea(strandSizes),\n    description: 'Custom defined pattern',\n  };\n}\n","import React, { useState } from 'react';\nimport { View, Text, ScrollView, Pressable, Share, TextInput } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { CalculationRecord, useCalculatorStore } from '../state/calculatorStore';\nimport Svg, { Path, Circle, Line } from 'react-native-svg';\nimport { getStrandPattern } from '../utils/strand-patterns';\nimport { formatInchesWithFraction, decimalToFraction, parseMeasurementInput } from '../utils/cn';\n\ntype ResultsRouteProp = RouteProp<RootStackParamList, 'Results'>;\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList, 'Results'>;\n\nexport default function ResultsScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const route = useRoute<ResultsRouteProp>();\n  const { calculation } = route.params;\n  const { updateCalculation } = useCalculatorStore();\n  \n  const [actualMeasured, setActualMeasured] = useState(\n    calculation.actualMeasuredCamber?.toString() || ''\n  );\n\n  const handleSaveMeasurement = () => {\n    const measured = parseMeasurementInput(actualMeasured);\n    if (measured !== null && measured > 0) {\n      // Compare actual measured to the calculated camber at release (netInitialCamber)\n      const variance = measured - calculation.results.netInitialCamber;\n      updateCalculation(calculation.id, {\n        actualMeasuredCamber: measured,\n        variance: variance,\n        measurementDate: Date.now(),\n      });\n    }\n  };\n\n  const variance = calculation.variance !== undefined \n    ? calculation.variance \n    : calculation.actualMeasuredCamber !== undefined\n      ? calculation.actualMeasuredCamber - calculation.results.netInitialCamber\n      : undefined;\n\n  const handleShare = async () => {\n    const { inputs, results } = calculation;\n    const message = `Camber Calculator Results\nProject: ${calculation.projectName || 'Unnamed'}\n\nINPUTS:\n Member Type: ${inputs.memberType}\n Span: ${inputs.span.toFixed(3)} ft\n Release Strength (f'ci): ${inputs.releaseStrength} psi\n 28-Day Strength (f'c): ${inputs.concreteStrength} psi\n Moment of Inertia: ${inputs.momentOfInertia.toFixed(0)} in\n Dead Load: ${inputs.deadLoad} lb/ft\n${inputs.liveLoad ? ` Live Load: ${inputs.liveLoad} lb/ft` : ''}\n\nRESULTS:\n Recommended Camber: ${formatInchesWithFraction(results.recommendedCamber)}\n Calculated Camber at Release: ${formatInchesWithFraction(results.netInitialCamber)}\n  (Prestress: ${formatInchesWithFraction(results.initialCamber)} - Dead Load: ${formatInchesWithFraction(results.deadLoadDeflection)})\n${results.liveLoadDeflection ? ` Live Load Deflection: ${formatInchesWithFraction(results.liveLoadDeflection)}` : ''}\n Long-Term Deflection: ${formatInchesWithFraction(results.longTermDeflection)}\n Final Camber: ${formatInchesWithFraction(results.finalCamber)}\n Ec at Release: ${(results.releaseModulusOfElasticity / 1000000).toFixed(2)} x 10 psi\n Ec at 28 Days: ${(results.modulusOfElasticity / 1000000).toFixed(2)} x 10 psi\n\nGenerated by Camber Calculator`;\n\n    try {\n      await Share.share({ message });\n    } catch (error) {\n      console.error('Error sharing:', error);\n    }\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n      >\n        <View className=\"p-5\">\n          {/* Header */}\n          <View className=\"mb-6\">\n            <View className=\"flex-row items-center justify-between mb-2\">\n              <Text className=\"text-3xl font-bold text-gray-900\">Results</Text>\n              <Pressable\n                onPress={handleShare}\n                className=\"bg-blue-500 rounded-full p-2.5\"\n              >\n                <Ionicons name=\"share-outline\" size={20} color=\"white\" />\n              </Pressable>\n            </View>\n            {calculation.projectName && (\n              <Text className=\"text-base text-gray-600\">\n                {calculation.projectName}\n              </Text>\n            )}\n          </View>\n\n          {/* Visual Representation */}\n          <View className=\"bg-white rounded-xl p-4 mb-5 shadow-sm\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Camber Profile\n            </Text>\n            <CamberDiagram calculation={calculation} />\n          </View>\n\n          {/* Key Results */}\n          <View className=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-5 mb-5 shadow-sm\">\n            <Text className=\"text-white text-sm font-semibold mb-3\">\n              RECOMMENDED CAMBER\n            </Text>\n            <Text className=\"text-white text-5xl font-bold mb-2\">\n              {calculation.results.recommendedCamber.toFixed(3)}\n            </Text>\n            <Text className=\"text-blue-100 text-base\">\n              inches ({decimalToFraction(calculation.results.recommendedCamber)})\n            </Text>\n          </View>\n\n          {/* Actual Measured Camber Section */}\n          <View className=\"bg-white rounded-xl p-5 mb-5 shadow-sm\">\n            <View className=\"flex-row items-center mb-4\">\n              <Ionicons name=\"resize\" size={20} color=\"#3B82F6\" />\n              <Text className=\"text-lg font-semibold text-gray-900 ml-2\">\n                Measured Camber at Release\n              </Text>\n            </View>\n            \n            <Text className=\"text-sm text-gray-600 mb-3\">\n              Enter the actual measured camber from the field at release:\n            </Text>\n            \n            <View className=\"flex-row gap-3 mb-3\">\n              <View className=\"flex-1\">\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder='e.g., 0.6875 or 11/16'\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={actualMeasured}\n                  onChangeText={setActualMeasured}\n                />\n                <Text className=\"text-xs text-gray-500 mt-1 px-1\">\n                  Accepts decimal (0.6875) or fraction (11/16 or 1 5/16)\n                </Text>\n              </View>\n              <Pressable\n                onPress={handleSaveMeasurement}\n                className=\"bg-blue-500 rounded-xl px-6 py-3 justify-center active:bg-blue-600\"\n              >\n                <Text className=\"text-white font-semibold\">Save</Text>\n              </Pressable>\n            </View>\n\n            {calculation.actualMeasuredCamber !== undefined && variance !== undefined && (\n              <View className=\"bg-gray-50 rounded-lg p-3\">\n                <View className=\"flex-row justify-between mb-2\">\n                  <Text className=\"text-sm text-gray-700\">Measured:</Text>\n                  <Text className=\"text-sm font-semibold text-gray-900\">\n                    {formatInchesWithFraction(calculation.actualMeasuredCamber)}\n                  </Text>\n                </View>\n                <View className=\"flex-row justify-between mb-2\">\n                  <Text className=\"text-sm text-gray-700\">Calculated at Release:</Text>\n                  <Text className=\"text-sm font-semibold text-gray-900\">\n                    {formatInchesWithFraction(calculation.results.netInitialCamber)}\n                  </Text>\n                </View>\n                <View className=\"border-t border-gray-300 my-2\" />\n                <View className=\"flex-row justify-between\">\n                  <Text className=\"text-sm font-bold text-gray-900\">Variance:</Text>\n                  <Text className={`text-sm font-bold ${variance >= 0 ? 'text-blue-600' : 'text-orange-600'}`}>\n                    {variance >= 0 ? '+' : ''}{variance.toFixed(3)}\" ({variance >= 0 ? '+' : ''}{decimalToFraction(Math.abs(variance))})\n                  </Text>\n                </View>\n                <View className=\"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-2\">\n                  <Text className=\"text-xs text-yellow-800 text-center\">\n                     Tolerance checking coming soon\n                  </Text>\n                </View>\n              </View>\n            )}\n          </View>\n\n          {/* Detailed Results */}\n          <View className=\"bg-white rounded-xl p-5 mb-5 shadow-sm\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Detailed Results\n            </Text>\n            \n            {/* Calculated Camber at Release - HIGHLIGHTED */}\n            <View className=\"bg-blue-50 rounded-lg p-3 mb-3 border-2 border-blue-200\">\n              <View className=\"flex-row items-center justify-between\">\n                <View className=\"flex-row items-center flex-1\">\n                  <View className=\"bg-blue-500 rounded-full p-2 mr-3\">\n                    <Ionicons name=\"trending-up\" size={18} color=\"white\" />\n                  </View>\n                  <View className=\"flex-1\">\n                    <Text className=\"text-sm font-bold text-blue-900\">\n                      Calculated Camber at Release\n                    </Text>\n                    <Text className=\"text-xs text-blue-700 mt-0.5\">\n                      Expected field measurement after stripping\n                    </Text>\n                  </View>\n                </View>\n                <View className=\"items-end\">\n                  <Text className=\"text-lg font-bold text-blue-900\">\n                    {formatInchesWithFraction(calculation.results.netInitialCamber)}\n                  </Text>\n                </View>\n              </View>\n            </View>\n\n            {/* Breakdown Section */}\n            <View className=\"bg-gray-50 rounded-lg p-3 mb-3\">\n              <Text className=\"text-xs font-semibold text-gray-700 mb-2\">Breakdown:</Text>\n              <View className=\"flex-row justify-between items-center mb-1\">\n                <Text className=\"text-xs text-gray-600\"> Prestress Camber (built-in)</Text>\n                <Text className=\"text-xs font-medium text-gray-900\">\n                  {formatInchesWithFraction(calculation.results.initialCamber)}\n                </Text>\n              </View>\n              <View className=\"flex-row justify-between items-center mb-1\">\n                <Text className=\"text-xs text-gray-600\"> Dead Load Deflection</Text>\n                <Text className=\"text-xs font-medium text-red-600\">\n                  -{formatInchesWithFraction(calculation.results.deadLoadDeflection)}\n                </Text>\n              </View>\n              <View className=\"border-t border-gray-300 my-1\" />\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-xs font-semibold text-gray-900\">= Net Camber Measurement</Text>\n                <Text className=\"text-xs font-bold text-blue-900\">\n                  {formatInchesWithFraction(calculation.results.netInitialCamber)}\n                </Text>\n              </View>\n            </View>\n\n            {calculation.results.liveLoadDeflection && (\n              <ResultRow\n                label=\"Live Load Deflection\"\n                value={calculation.results.liveLoadDeflection}\n                unit=\"in\"\n                icon=\"arrow-down-circle\"\n                showFraction={true}\n              />\n            )}\n            <ResultRow\n              label=\"Long-Term Deflection\"\n              value={calculation.results.longTermDeflection}\n              unit=\"in\"\n              icon=\"time\"\n              showFraction={true}\n            />\n            <ResultRow\n              label=\"Final Camber\"\n              value={calculation.results.finalCamber}\n              unit=\"in\"\n              icon=\"analytics\"\n              showFraction={true}\n              isLast\n            />\n          </View>\n\n          {/* Material Properties */}\n          <View className=\"bg-white rounded-xl p-5 mb-5 shadow-sm\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Material Properties\n            </Text>\n            \n            <ResultRow\n              label=\"Ec at Release\"\n              value={(calculation.results.releaseModulusOfElasticity / 1000000).toFixed(2)}\n              unit=\" 10 psi\"\n              icon=\"flash\"\n            />\n            <ResultRow\n              label=\"Ec at 28 Days\"\n              value={(calculation.results.modulusOfElasticity / 1000000).toFixed(2)}\n              unit=\" 10 psi\"\n              icon=\"cube\"\n            />\n            <ResultRow\n              label=\"Creep Factor\"\n              value={calculation.results.creepFactor.toFixed(2)}\n              unit=\"\"\n              icon=\"hourglass\"\n            />\n            <ResultRow\n              label=\"Shrinkage Factor\"\n              value={calculation.results.shrinkageFactor.toFixed(2)}\n              unit=\"\"\n              icon=\"contract\"\n              isLast\n            />\n          </View>\n\n          {/* Input Summary */}\n          <View className=\"bg-white rounded-xl p-5 mb-5 shadow-sm\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Input Summary\n            </Text>\n            \n            {calculation.inputs.projectNumber && (\n              <InputRow label=\"Project #\" value={calculation.inputs.projectNumber} />\n            )}\n            {calculation.inputs.markNumber && (\n              <InputRow label=\"Mark #\" value={calculation.inputs.markNumber} />\n            )}\n            {calculation.inputs.idNumber && (\n              <InputRow label=\"ID #\" value={calculation.inputs.idNumber} />\n            )}\n            <InputRow label=\"Member Type\" value={calculation.inputs.memberType} />\n            <InputRow label=\"Span\" value={`${calculation.inputs.span.toFixed(3)} ft`} />\n            <InputRow\n              label=\"Release Strength (f'ci)\"\n              value={`${calculation.inputs.releaseStrength} psi`}\n            />\n            <InputRow\n              label=\"28-Day Strength (f'c)\"\n              value={`${calculation.inputs.concreteStrength} psi`}\n            />\n            <InputRow\n              label=\"Moment of Inertia\"\n              value={`${calculation.inputs.momentOfInertia.toFixed(0)} in`}\n            />\n            <InputRow\n              label=\"Dead Load\"\n              value={`${calculation.inputs.deadLoad} lb/ft`}\n            />\n            {calculation.inputs.liveLoad && (\n              <InputRow\n                label=\"Live Load\"\n                value={`${calculation.inputs.liveLoad} lb/ft`}\n              />\n            )}\n            {calculation.inputs.strandPattern && getStrandPattern(calculation.inputs.strandPattern) && (\n              <>\n                <InputRow\n                  label=\"Strand Pattern\"\n                  value={getStrandPattern(calculation.inputs.strandPattern)?.name || ''}\n                />\n                <InputRow\n                  label=\"e value\"\n                  value={`${calculation.inputs.strandEValue}\" from bottom`}\n                />\n              </>\n            )}\n            {calculation.inputs.topStrandPattern && getStrandPattern(calculation.inputs.topStrandPattern) && (\n              <>\n                <InputRow\n                  label=\"Top Strand Pattern\"\n                  value={getStrandPattern(calculation.inputs.topStrandPattern)?.name || ''}\n                  isLast\n                />\n              </>\n            )}\n            {!calculation.inputs.topStrandPattern && (\n              <View style={{ height: 0 }} />\n            )}\n          </View>\n\n          {/* Action Buttons */}\n          <Pressable\n            onPress={() => navigation.navigate('Calculator')}\n            className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600 mb-3\"\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              New Calculation\n            </Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => navigation.navigate('History')}\n            className=\"bg-white border border-gray-300 rounded-xl py-4 items-center active:bg-gray-50\"\n          >\n            <Text className=\"text-gray-700 text-base font-semibold\">\n              View History\n            </Text>\n          </Pressable>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\ninterface ResultRowProps {\n  label: string;\n  value: string | number;\n  unit: string;\n  icon: keyof typeof Ionicons.glyphMap;\n  isLast?: boolean;\n  showFraction?: boolean;\n}\n\nfunction ResultRow({ label, value, unit, icon, isLast, showFraction = false }: ResultRowProps) {\n  const displayValue = typeof value === 'number' && showFraction \n    ? formatInchesWithFraction(value)\n    : typeof value === 'number'\n      ? value.toFixed(3)\n      : value;\n\n  return (\n    <View\n      className={`flex-row items-center justify-between py-3 ${\n        !isLast ? 'border-b border-gray-100' : ''\n      }`}\n    >\n      <View className=\"flex-row items-center flex-1\">\n        <View className=\"bg-gray-100 rounded-full p-2 mr-3\">\n          <Ionicons name={icon} size={18} color=\"#4B5563\" />\n        </View>\n        <Text className=\"text-sm text-gray-700\">{label}</Text>\n      </View>\n      <Text className=\"text-base font-semibold text-gray-900\">\n        {displayValue} <Text className=\"text-sm text-gray-600\">{unit}</Text>\n      </Text>\n    </View>\n  );\n}\n\ninterface InputRowProps {\n  label: string;\n  value: string;\n  isLast?: boolean;\n}\n\nfunction InputRow({ label, value, isLast }: InputRowProps) {\n  return (\n    <View\n      className={`flex-row justify-between py-3 ${\n        !isLast ? 'border-b border-gray-100' : ''\n      }`}\n    >\n      <Text className=\"text-sm text-gray-600\">{label}</Text>\n      <Text className=\"text-sm font-medium text-gray-900\">{value}</Text>\n    </View>\n  );\n}\n\ninterface CamberDiagramProps {\n  calculation: CalculationRecord;\n}\n\nfunction CamberDiagram({ calculation }: CamberDiagramProps) {\n  const width = 320;\n  const height = 200;\n  const padding = 20;\n  const beamLength = width - 2 * padding;\n  const centerY = height / 2;\n\n  const { netInitialCamber, finalCamber } = calculation.results;\n  const { actualMeasuredCamber } = calculation;\n  \n  // Scale factor for visual representation - include measured camber in scale calculation\n  const maxDeflection = Math.max(\n    Math.abs(netInitialCamber), \n    Math.abs(finalCamber),\n    actualMeasuredCamber ? Math.abs(actualMeasuredCamber) : 0\n  );\n  const scale = maxDeflection > 0 ? 30 / maxDeflection : 1;\n\n  // Calculate y positions (negative is up)\n  const initialCamberY = centerY - (netInitialCamber * scale);\n  const finalCamberY = centerY - (finalCamber * scale);\n  const measuredCamberY = actualMeasuredCamber ? centerY - (actualMeasuredCamber * scale) : null;\n\n  // Create curved path for camber using quadratic bezier\n  const createCamberPath = (camberY: number) => {\n    const controlY = camberY;\n    return `M ${padding} ${centerY} Q ${padding + beamLength / 2} ${controlY} ${padding + beamLength} ${centerY}`;\n  };\n\n  return (\n    <View>\n      <Svg width={width} height={height}>\n        {/* Reference line (straight) */}\n        <Line\n          x1={padding}\n          y1={centerY}\n          x2={padding + beamLength}\n          y2={centerY}\n          stroke=\"#D1D5DB\"\n          strokeWidth=\"1\"\n          strokeDasharray=\"4,4\"\n        />\n\n        {/* Calculated camber curve (blue solid line) */}\n        <Path\n          d={createCamberPath(initialCamberY)}\n          stroke=\"#3B82F6\"\n          strokeWidth=\"2\"\n          fill=\"none\"\n        />\n\n        {/* Measured camber curve (orange solid line) - if available */}\n        {measuredCamberY !== null && (\n          <Path\n            d={createCamberPath(measuredCamberY)}\n            stroke=\"#F97316\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n          />\n        )}\n\n        {/* Final camber (slight upward curve) */}\n        {finalCamber > 0 && (\n          <Path\n            d={createCamberPath(finalCamberY)}\n            stroke=\"#10B981\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n            strokeDasharray=\"4,4\"\n          />\n        )}\n\n        {/* Support points */}\n        <Circle cx={padding} cy={centerY} r=\"4\" fill=\"#6B7280\" />\n        <Circle cx={padding + beamLength} cy={centerY} r=\"4\" fill=\"#6B7280\" />\n\n        {/* Dimension line and label for calculated camber */}\n        <Line\n          x1={padding + beamLength / 2}\n          y1={centerY}\n          x2={padding + beamLength / 2}\n          y2={initialCamberY}\n          stroke=\"#3B82F6\"\n          strokeWidth=\"1\"\n        />\n        <Circle cx={padding + beamLength / 2} cy={initialCamberY} r=\"3\" fill=\"#3B82F6\" />\n\n        {/* Dimension line and label for measured camber - if available */}\n        {measuredCamberY !== null && (\n          <>\n            <Line\n              x1={padding + beamLength / 2 + 40}\n              y1={centerY}\n              x2={padding + beamLength / 2 + 40}\n              y2={measuredCamberY}\n              stroke=\"#F97316\"\n              strokeWidth=\"1\"\n            />\n            <Circle cx={padding + beamLength / 2 + 40} cy={measuredCamberY} r=\"3\" fill=\"#F97316\" />\n          </>\n        )}\n      </Svg>\n\n      {/* Value labels below the SVG */}\n      <View className=\"flex-row justify-center gap-4 mt-2 mb-2\">\n        <View className=\"items-center\">\n          <Text className=\"text-xs font-semibold text-blue-600\">\n            {netInitialCamber.toFixed(3)}\" ({decimalToFraction(netInitialCamber)})\n          </Text>\n          <Text className=\"text-xs text-gray-500\">Calculated</Text>\n        </View>\n        {actualMeasuredCamber !== undefined && (\n          <View className=\"items-center\">\n            <Text className=\"text-xs font-semibold text-orange-600\">\n              {actualMeasuredCamber.toFixed(3)}\" ({decimalToFraction(actualMeasuredCamber)})\n            </Text>\n            <Text className=\"text-xs text-gray-500\">Measured</Text>\n          </View>\n        )}\n      </View>\n\n      {/* Legend */}\n      <View className=\"mt-2 space-y-2\">\n        <View className=\"flex-row items-center\">\n          <View className=\"w-8 h-0.5 bg-blue-500 mr-2\" />\n          <Text className=\"text-xs text-gray-600\">Calculated camber at release</Text>\n        </View>\n        {actualMeasuredCamber !== undefined && (\n          <View className=\"flex-row items-center\">\n            <View className=\"w-8 h-0.5 bg-orange-500 mr-2\" />\n            <Text className=\"text-xs text-gray-600\">Measured camber at release</Text>\n          </View>\n        )}\n        {finalCamber > 0 && (\n          <View className=\"flex-row items-center\">\n            <View className=\"w-8 border-b border-dashed border-green-500 mr-2\" />\n            <Text className=\"text-xs text-gray-600\">Final camber (long-term)</Text>\n          </View>\n        )}\n        <View className=\"flex-row items-center\">\n          <View className=\"w-8 border-b border-dashed border-gray-400 mr-2\" />\n          <Text className=\"text-xs text-gray-600\">Reference (no camber)</Text>\n        </View>\n      </View>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View, Text, Modal, Pressable } from 'react-native';\n\ninterface ConfirmModalProps {\n  visible: boolean;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n  confirmStyle?: 'default' | 'destructive';\n}\n\nexport default function ConfirmModal({\n  visible,\n  title,\n  message,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  onConfirm,\n  onCancel,\n  confirmStyle = 'default',\n}: ConfirmModalProps) {\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onCancel}\n    >\n      <Pressable\n        className=\"flex-1 items-center justify-center\"\n        style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n        onPress={onCancel}\n      >\n        <Pressable\n          className=\"bg-white rounded-2xl mx-5 w-80 overflow-hidden\"\n          onPress={(e) => e.stopPropagation()}\n        >\n          <View className=\"p-5\">\n            <Text className=\"text-xl font-bold text-gray-900 mb-2\">\n              {title}\n            </Text>\n            <Text className=\"text-base text-gray-600 leading-6\">\n              {message}\n            </Text>\n          </View>\n\n          <View className=\"border-t border-gray-200\">\n            <View className=\"flex-row\">\n              <Pressable\n                onPress={onCancel}\n                className=\"flex-1 py-4 items-center border-r border-gray-200 active:bg-gray-50\"\n              >\n                <Text className=\"text-base font-semibold text-blue-500\">\n                  {cancelText}\n                </Text>\n              </Pressable>\n\n              <Pressable\n                onPress={onConfirm}\n                className=\"flex-1 py-4 items-center active:bg-gray-50\"\n              >\n                <Text\n                  className={`text-base font-semibold ${\n                    confirmStyle === 'destructive' ? 'text-red-500' : 'text-blue-500'\n                  }`}\n                >\n                  {confirmText}\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n        </Pressable>\n      </Pressable>\n    </Modal>\n  );\n}\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput, Modal } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useCalculatorStore, CalculationRecord } from '../state/calculatorStore';\nimport { useStrandPatternStore } from '../state/strandPatternStore';\nimport { format } from 'date-fns';\nimport ConfirmModal from '../components/ConfirmModal';\nimport { formatInchesWithFraction, formatSpanDisplay, decimalToFraction } from '../utils/cn';\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList, 'History'>;\n\nconst memberTypes = [\n  { value: 'beam', label: 'Beam' },\n  { value: 'double-tee', label: 'Double Tee' },\n  { value: 'hollow-core', label: 'Hollow Core' },\n  { value: 'single-tee', label: 'Single Tee' },\n  { value: 'solid-slab', label: 'Solid Slab' },\n  { value: 'wall-panel', label: 'Wall Panel' },\n  { value: 'stadia', label: 'Stadia' },\n] as const;\n\ninterface SearchFilters {\n  projectName?: string;\n  projectNumber?: string;\n  markNumber?: string;\n  idNumber?: string;\n  memberType?: string;\n  strandPattern?: string;\n  topStrandPattern?: string;\n  minSpan?: number;\n  maxSpan?: number;\n}\n\nexport default function HistoryScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const { history, removeCalculation, clearHistory } = useCalculatorStore();\n  const { customPatterns } = useStrandPatternStore();\n  const [showClearAllModal, setShowClearAllModal] = useState(false);\n  const [deleteItemId, setDeleteItemId] = useState<string | null>(null);\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  \n  // Filter states\n  const [filters, setFilters] = useState<SearchFilters>({});\n  const [tempFilters, setTempFilters] = useState<SearchFilters>({});\n\n  const handleClearAll = () => {\n    clearHistory();\n    setShowClearAllModal(false);\n  };\n\n  const handleDeleteItem = (id: string) => {\n    removeCalculation(id);\n    setDeleteItemId(null);\n  };\n\n  const handleOpenFilter = () => {\n    console.log('Filter button pressed - opening modal');\n    setTempFilters(filters);\n    setShowFilterModal(true);\n  };\n\n  const handleApplyFilters = () => {\n    setFilters(tempFilters);\n    setShowFilterModal(false);\n  };\n\n  const handleClearFilters = () => {\n    setTempFilters({});\n    setFilters({});\n    setShowFilterModal(false);\n  };\n\n  // Filter calculations based on active filters\n  const filteredHistory = useMemo(() => {\n    if (Object.keys(filters).length === 0) {\n      return history;\n    }\n\n    return history.filter((calc) => {\n      // Project Name filter (case insensitive partial match)\n      if (filters.projectName && \n          !calc.projectName?.toLowerCase().includes(filters.projectName.toLowerCase())) {\n        return false;\n      }\n\n      // Project Number filter (case insensitive partial match)\n      if (filters.projectNumber && \n          !calc.inputs.projectNumber?.toLowerCase().includes(filters.projectNumber.toLowerCase())) {\n        return false;\n      }\n\n      // Mark Number filter (case insensitive partial match)\n      if (filters.markNumber && \n          !calc.inputs.markNumber?.toLowerCase().includes(filters.markNumber.toLowerCase())) {\n        return false;\n      }\n\n      // ID Number filter (case insensitive partial match)\n      if (filters.idNumber && \n          !calc.inputs.idNumber?.toLowerCase().includes(filters.idNumber.toLowerCase())) {\n        return false;\n      }\n\n      // Member Type filter (exact match)\n      if (filters.memberType && calc.inputs.memberType !== filters.memberType) {\n        return false;\n      }\n\n      // Strand Pattern filter (exact match)\n      if (filters.strandPattern && calc.inputs.strandPattern !== filters.strandPattern) {\n        return false;\n      }\n\n      // Top Strand Pattern filter (exact match)\n      if (filters.topStrandPattern && calc.inputs.topStrandPattern !== filters.topStrandPattern) {\n        return false;\n      }\n\n      // Min Span filter\n      if (filters.minSpan !== undefined && calc.inputs.span < filters.minSpan) {\n        return false;\n      }\n\n      // Max Span filter\n      if (filters.maxSpan !== undefined && calc.inputs.span > filters.maxSpan) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [history, filters]);\n\n  const activeFilterCount = Object.keys(filters).length;\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n      >\n        <View className=\"p-5\">\n          {/* Header */}\n          <View className=\"flex-row items-center justify-between mb-6\">\n            <View className=\"flex-1\">\n              <Text className=\"text-3xl font-bold text-gray-900 mb-1\">\n                History\n              </Text>\n              <Text className=\"text-sm text-gray-600\">\n                {filteredHistory.length} {filteredHistory.length === 1 ? 'calculation' : 'calculations'}\n                {activeFilterCount > 0 && ` (${activeFilterCount} ${activeFilterCount === 1 ? 'filter' : 'filters'} active)`}\n              </Text>\n            </View>\n            <View className=\"flex-row gap-2\">\n              <Pressable\n                onPress={handleOpenFilter}\n                className={`${activeFilterCount > 0 ? 'bg-blue-500' : 'bg-gray-200'} rounded-full p-3`}\n              >\n                <Ionicons \n                  name=\"filter\" \n                  size={20} \n                  color={activeFilterCount > 0 ? \"white\" : \"#6B7280\"} \n                />\n              </Pressable>\n              {history.length > 0 && (\n                <Pressable\n                  onPress={() => setShowClearAllModal(true)}\n                  className=\"bg-red-50 px-3 py-2 rounded-lg\"\n                >\n                  <Text className=\"text-red-600 text-sm font-medium\">Clear All</Text>\n                </Pressable>\n              )}\n            </View>\n          </View>\n\n          {/* Active Filters Display */}\n          {activeFilterCount > 0 && (\n            <View className=\"mb-4\">\n              <View className=\"flex-row flex-wrap gap-2\">\n                {filters.projectName && (\n                  <View className=\"bg-blue-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-blue-700 text-xs font-medium mr-1\">\n                      Project: {filters.projectName}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, projectName: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#1D4ED8\" />\n                    </Pressable>\n                  </View>\n                )}\n                {filters.projectNumber && (\n                  <View className=\"bg-blue-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-blue-700 text-xs font-medium mr-1\">\n                      Proj #: {filters.projectNumber}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, projectNumber: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#1D4ED8\" />\n                    </Pressable>\n                  </View>\n                )}\n                {filters.markNumber && (\n                  <View className=\"bg-blue-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-blue-700 text-xs font-medium mr-1\">\n                      Mark #: {filters.markNumber}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, markNumber: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#1D4ED8\" />\n                    </Pressable>\n                  </View>\n                )}\n                {filters.idNumber && (\n                  <View className=\"bg-blue-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-blue-700 text-xs font-medium mr-1\">\n                      ID #: {filters.idNumber}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, idNumber: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#1D4ED8\" />\n                    </Pressable>\n                  </View>\n                )}\n                {filters.memberType && (\n                  <View className=\"bg-purple-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-purple-700 text-xs font-medium mr-1\">\n                      Type: {memberTypes.find(t => t.value === filters.memberType)?.label}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, memberType: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#7C3AED\" />\n                    </Pressable>\n                  </View>\n                )}\n                {filters.strandPattern && (\n                  <View className=\"bg-green-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-green-700 text-xs font-medium mr-1\">\n                      Strand: {customPatterns.find(p => p.id === filters.strandPattern)?.name}\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, strandPattern: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#059669\" />\n                    </Pressable>\n                  </View>\n                )}\n                {(filters.minSpan !== undefined || filters.maxSpan !== undefined) && (\n                  <View className=\"bg-orange-100 px-3 py-1.5 rounded-full flex-row items-center\">\n                    <Text className=\"text-orange-700 text-xs font-medium mr-1\">\n                      Span: {filters.minSpan ?? '0'} - {filters.maxSpan ?? ''} ft\n                    </Text>\n                    <Pressable onPress={() => setFilters(prev => ({ ...prev, minSpan: undefined, maxSpan: undefined }))}>\n                      <Ionicons name=\"close-circle\" size={14} color=\"#EA580C\" />\n                    </Pressable>\n                  </View>\n                )}\n              </View>\n            </View>\n          )}\n\n          {/* History List */}\n          {filteredHistory.length === 0 ? (\n            <View className=\"items-center justify-center py-20\">\n              <View className=\"bg-gray-100 rounded-full p-6 mb-4\">\n                <Ionicons name={activeFilterCount > 0 ? \"search-outline\" : \"calculator-outline\"} size={48} color=\"#9CA3AF\" />\n              </View>\n              <Text className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {activeFilterCount > 0 ? 'No Matching Calculations' : 'No Calculations Yet'}\n              </Text>\n              <Text className=\"text-sm text-gray-600 text-center mb-6 px-8\">\n                {activeFilterCount > 0 \n                  ? 'Try adjusting your filters to see more results'\n                  : 'Your calculation history will appear here'\n                }\n              </Text>\n              {activeFilterCount > 0 ? (\n                <Pressable\n                  onPress={handleClearFilters}\n                  className=\"bg-blue-500 px-6 py-3 rounded-xl\"\n                >\n                  <Text className=\"text-white font-semibold\">\n                    Clear Filters\n                  </Text>\n                </Pressable>\n              ) : (\n                <Pressable\n                  onPress={() => navigation.navigate('Calculator')}\n                  className=\"bg-blue-500 px-6 py-3 rounded-xl\"\n                >\n                  <Text className=\"text-white font-semibold\">\n                    Create First Calculation\n                  </Text>\n                </Pressable>\n              )}\n            </View>\n          ) : (\n            <View className=\"space-y-3\">\n              {filteredHistory.map((calculation) => (\n                <Pressable\n                  key={calculation.id}\n                  onPress={() => navigation.navigate('Results', { calculation })}\n                  className=\"bg-white rounded-xl p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-start justify-between mb-3\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-base font-semibold text-gray-900 mb-1\">\n                        {calculation.projectName || 'Unnamed Project'}\n                      </Text>\n                      {(calculation.inputs.projectNumber || calculation.inputs.markNumber || calculation.inputs.idNumber) && (\n                        <View className=\"flex-row flex-wrap gap-2 mb-1\">\n                          {calculation.inputs.projectNumber && (\n                            <View className=\"bg-gray-100 px-2 py-0.5 rounded\">\n                              <Text className=\"text-xs text-gray-700\">\n                                Proj: {calculation.inputs.projectNumber}\n                              </Text>\n                            </View>\n                          )}\n                          {calculation.inputs.markNumber && (\n                            <View className=\"bg-gray-100 px-2 py-0.5 rounded\">\n                              <Text className=\"text-xs text-gray-700\">\n                                Mark: {calculation.inputs.markNumber}\n                              </Text>\n                            </View>\n                          )}\n                          {calculation.inputs.idNumber && (\n                            <View className=\"bg-gray-100 px-2 py-0.5 rounded\">\n                              <Text className=\"text-xs text-gray-700\">\n                                ID: {calculation.inputs.idNumber}\n                              </Text>\n                            </View>\n                          )}\n                        </View>\n                      )}\n                      <Text className=\"text-xs text-gray-500\">\n                        {format(new Date(calculation.timestamp), 'MMM dd, yyyy  h:mm a')}\n                      </Text>\n                    </View>\n                    <Pressable\n                      onPress={() => setDeleteItemId(calculation.id)}\n                      className=\"bg-red-50 rounded-full p-2 ml-2\"\n                    >\n                      <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                    </Pressable>\n                  </View>\n\n                  <View className=\"border-t border-gray-100 pt-3\">\n                    <View className=\"flex-row items-center justify-between mb-2\">\n                      <View className=\"flex-row items-center\">\n                        <Ionicons name=\"resize-outline\" size={16} color=\"#6B7280\" />\n                        <Text className=\"text-sm text-gray-600 ml-1\">\n                          {calculation.inputs.memberType}\n                        </Text>\n                      </View>\n                      <Text className=\"text-sm text-gray-600\">\n                        {formatSpanDisplay(calculation.inputs.span)}\n                      </Text>\n                    </View>\n\n                    <View className=\"bg-blue-50 rounded-lg px-3 py-2 mt-2\">\n                      <View className=\"flex-row items-center justify-between\">\n                        <Text className=\"text-xs text-blue-700 font-medium\">\n                          Calculated Camber at Release\n                        </Text>\n                        <Text className=\"text-base font-bold text-blue-700\">\n                          {formatInchesWithFraction(calculation.results.netInitialCamber)}\n                        </Text>\n                      </View>\n                    </View>\n\n                    {calculation.actualMeasuredCamber !== undefined && (\n                      <View className=\"bg-green-50 rounded-lg px-3 py-2 mt-2\">\n                        <View className=\"flex-row items-center justify-between mb-1\">\n                          <Text className=\"text-xs text-green-700 font-medium\">\n                            Measured Camber\n                          </Text>\n                          <Text className=\"text-sm font-bold text-green-700\">\n                            {formatInchesWithFraction(calculation.actualMeasuredCamber)}\n                          </Text>\n                        </View>\n                        {calculation.variance !== undefined && (\n                          <View className=\"flex-row items-center justify-between\">\n                            <Text className=\"text-xs text-gray-600\">\n                              Variance\n                            </Text>\n                            <Text className={`text-xs font-semibold ${\n                              Math.abs(calculation.variance) < 0.0625 \n                                ? 'text-green-600' \n                                : 'text-orange-600'\n                            }`}>\n                              {calculation.variance >= 0 ? '+' : ''}{calculation.variance.toFixed(3)}\" ({calculation.variance >= 0 ? '+' : ''}{decimalToFraction(Math.abs(calculation.variance))})\n                            </Text>\n                          </View>\n                        )}\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row items-center justify-end mt-3\">\n                    <Ionicons name=\"chevron-forward\" size={16} color=\"#9CA3AF\" />\n                  </View>\n                </Pressable>\n              ))}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Filter Modal */}\n      <Modal\n        visible={showFilterModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowFilterModal(false)}\n      >\n        <View className=\"flex-1 justify-end\" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>\n          <Pressable onPress={() => setShowFilterModal(false)} className=\"flex-1\" />\n          <View className=\"bg-white rounded-t-3xl overflow-hidden\" style={{ height: '85%', flexDirection: 'column' }}>\n            <View className=\"p-5 border-b border-gray-200\">\n              <View className=\"flex-row items-center justify-between\">\n                <Text className=\"text-xl font-bold text-gray-900\">\n                  Filter Calculations\n                </Text>\n                <Pressable onPress={() => setShowFilterModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n            </View>\n            \n            <ScrollView style={{ flex: 1 }} contentContainerStyle={{ padding: 20, paddingBottom: 40 }}>\n              {/* Project Name */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Project Name\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Search by project name\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={tempFilters.projectName || ''}\n                  onChangeText={(text) => setTempFilters(prev => ({ ...prev, projectName: text || undefined }))}\n                />\n              </View>\n\n              {/* Project Number */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Project #\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Search by project number\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={tempFilters.projectNumber || ''}\n                  onChangeText={(text) => setTempFilters(prev => ({ ...prev, projectNumber: text || undefined }))}\n                />\n              </View>\n\n              {/* Mark Number */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Mark #\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Search by mark number\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={tempFilters.markNumber || ''}\n                  onChangeText={(text) => setTempFilters(prev => ({ ...prev, markNumber: text || undefined }))}\n                />\n              </View>\n\n              {/* ID Number */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  ID #\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Search by ID number\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={tempFilters.idNumber || ''}\n                  onChangeText={(text) => setTempFilters(prev => ({ ...prev, idNumber: text || undefined }))}\n                />\n              </View>\n\n              {/* Member Type */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Member Type\n                </Text>\n                <View className=\"flex-row flex-wrap gap-2\">\n                  {memberTypes.map((type) => (\n                    <Pressable\n                      key={type.value}\n                      onPress={() => setTempFilters(prev => ({ \n                        ...prev, \n                        memberType: prev.memberType === type.value ? undefined : type.value \n                      }))}\n                      className={`px-3 py-2 rounded-xl border ${\n                        tempFilters.memberType === type.value\n                          ? 'bg-purple-500 border-purple-500'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text\n                        className={`text-sm font-medium ${\n                          tempFilters.memberType === type.value ? 'text-white' : 'text-gray-700'\n                        }`}\n                      >\n                        {type.label}\n                      </Text>\n                    </Pressable>\n                  ))}\n                </View>\n              </View>\n\n              {/* Strand Pattern */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Strand Pattern\n                </Text>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"flex-row gap-2\">\n                  <Pressable\n                    onPress={() => setTempFilters(prev => ({ ...prev, strandPattern: undefined }))}\n                    className={`px-3 py-2 rounded-xl border ${\n                      !tempFilters.strandPattern\n                        ? 'bg-gray-500 border-gray-500'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-sm font-medium ${\n                      !tempFilters.strandPattern ? 'text-white' : 'text-gray-700'\n                    }`}>\n                      Any\n                    </Text>\n                  </Pressable>\n                  {customPatterns.map((pattern) => (\n                    <Pressable\n                      key={pattern.id}\n                      onPress={() => setTempFilters(prev => ({ \n                        ...prev, \n                        strandPattern: prev.strandPattern === pattern.id ? undefined : pattern.id \n                      }))}\n                      className={`px-3 py-2 rounded-xl border ${\n                        tempFilters.strandPattern === pattern.id\n                          ? 'bg-green-500 border-green-500'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text className={`text-sm font-medium ${\n                        tempFilters.strandPattern === pattern.id ? 'text-white' : 'text-gray-700'\n                      }`}>\n                        {pattern.patternId} - {pattern.name}\n                      </Text>\n                    </Pressable>\n                  ))}\n                </ScrollView>\n              </View>\n\n              {/* Top Strand Pattern */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Top Strand Pattern\n                </Text>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"flex-row gap-2\">\n                  <Pressable\n                    onPress={() => setTempFilters(prev => ({ ...prev, topStrandPattern: undefined }))}\n                    className={`px-3 py-2 rounded-xl border ${\n                      !tempFilters.topStrandPattern\n                        ? 'bg-gray-500 border-gray-500'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-sm font-medium ${\n                      !tempFilters.topStrandPattern ? 'text-white' : 'text-gray-700'\n                    }`}>\n                      Any\n                    </Text>\n                  </Pressable>\n                  {customPatterns.map((pattern) => (\n                    <Pressable\n                      key={pattern.id}\n                      onPress={() => setTempFilters(prev => ({ \n                        ...prev, \n                        topStrandPattern: prev.topStrandPattern === pattern.id ? undefined : pattern.id \n                      }))}\n                      className={`px-3 py-2 rounded-xl border ${\n                        tempFilters.topStrandPattern === pattern.id\n                          ? 'bg-blue-500 border-blue-500'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text className={`text-sm font-medium ${\n                        tempFilters.topStrandPattern === pattern.id ? 'text-white' : 'text-gray-700'\n                      }`}>\n                        {pattern.patternId} - {pattern.name}\n                      </Text>\n                    </Pressable>\n                  ))}\n                </ScrollView>\n              </View>\n\n              {/* Span Range */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Span Range (feet)\n                </Text>\n                <View className=\"flex-row gap-2\">\n                  <View className=\"flex-1\">\n                    <Text className=\"text-xs text-gray-600 mb-1\">Min</Text>\n                    <TextInput\n                      className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                      placeholder=\"0\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      keyboardType=\"decimal-pad\"\n                      value={tempFilters.minSpan?.toString() || ''}\n                      onChangeText={(text) => {\n                        const val = parseFloat(text);\n                        setTempFilters(prev => ({ ...prev, minSpan: isNaN(val) ? undefined : val }));\n                      }}\n                    />\n                  </View>\n                  <View className=\"flex-1\">\n                    <Text className=\"text-xs text-gray-600 mb-1\">Max</Text>\n                    <TextInput\n                      className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                      placeholder=\"\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      keyboardType=\"decimal-pad\"\n                      value={tempFilters.maxSpan?.toString() || ''}\n                      onChangeText={(text) => {\n                        const val = parseFloat(text);\n                        setTempFilters(prev => ({ ...prev, maxSpan: isNaN(val) ? undefined : val }));\n                      }}\n                    />\n                  </View>\n                </View>\n              </View>\n            </ScrollView>\n\n            {/* Action Buttons */}\n            <View className=\"p-5 border-t border-gray-200\">\n              <Pressable\n                onPress={handleApplyFilters}\n                className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600 mb-3\"\n              >\n                <Text className=\"text-white text-base font-semibold\">\n                  Apply Filters\n                </Text>\n              </Pressable>\n              <Pressable\n                onPress={handleClearFilters}\n                className=\"bg-white border border-gray-300 rounded-xl py-4 items-center active:bg-gray-50\"\n              >\n                <Text className=\"text-gray-700 text-base font-semibold\">\n                  Clear All Filters\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Modals */}\n      <ConfirmModal\n        visible={showClearAllModal}\n        title=\"Clear History\"\n        message=\"Are you sure you want to delete all calculations? This action cannot be undone.\"\n        confirmText=\"Clear All\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"destructive\"\n        onConfirm={handleClearAll}\n        onCancel={() => setShowClearAllModal(false)}\n      />\n\n      <ConfirmModal\n        visible={deleteItemId !== null}\n        title=\"Delete Calculation\"\n        message=\"Are you sure you want to delete this calculation?\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"destructive\"\n        onConfirm={() => deleteItemId && handleDeleteItem(deleteItemId)}\n        onCancel={() => setDeleteItemId(null)}\n      />\n    </View>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  TextInput,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport * as Clipboard from 'expo-clipboard';\nimport * as FileSystem from 'expo-file-system';\nimport * as Sharing from 'expo-sharing';\nimport * as DocumentPicker from 'expo-document-picker';\nimport { useStrandPatternStore, CustomStrandPattern, StrandCoordinate } from '../state/strandPatternStore';\nimport ConfirmModal from '../components/ConfirmModal';\n\ntype Department = 'Wall Panels' | 'Extruded' | 'Flexicore' | 'Precast';\n\ntype ProductTypesByDepartment = {\n  'Extruded': string[];\n  'Wall Panels': string[];\n  'Flexicore': string[];\n  'Precast': string[];\n};\n\nconst PRODUCT_TYPES: ProductTypesByDepartment = {\n  'Extruded': ['8048', '1048', '1247', '1250', '1648'],\n  'Wall Panels': [],\n  'Flexicore': [],\n  'Precast': [],\n};\n\nexport default function StrandPatternsScreen() {\n  const insets = useSafeAreaInsets();\n  const { customPatterns, addPattern, removePattern, updatePattern, clearAllPatterns } = useStrandPatternStore();\n\n  const [selectedDepartment, setSelectedDepartment] = useState<Department | null>(null);\n  const [selectedProductType, setSelectedProductType] = useState<string | null>(null);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingPattern, setEditingPattern] = useState<CustomStrandPattern | null>(null);\n  const [deleteConfirmId, setDeleteConfirmId] = useState<string | null>(null);\n  const [showClearConfirm, setShowClearConfirm] = useState(false);\n\n  // Auto-assign department and productType to existing patterns without them\n  React.useEffect(() => {\n    customPatterns.forEach(pattern => {\n      if (!pattern.department || !pattern.productType) {\n        // Try to detect product type from pattern name\n        const name = pattern.name.toLowerCase();\n        let detectedProductType = '';\n        let detectedDepartment: Department = 'Extruded';\n\n        if (name.includes('8048')) {\n          detectedProductType = '8048';\n          detectedDepartment = 'Extruded';\n        } else if (name.includes('1048')) {\n          detectedProductType = '1048';\n          detectedDepartment = 'Extruded';\n        } else if (name.includes('1247')) {\n          detectedProductType = '1247';\n          detectedDepartment = 'Extruded';\n        } else if (name.includes('1250')) {\n          detectedProductType = '1250';\n          detectedDepartment = 'Extruded';\n        } else if (name.includes('1648')) {\n          detectedProductType = '1648';\n          detectedDepartment = 'Extruded';\n        }\n\n        if (detectedProductType) {\n          updatePattern(pattern.id, {\n            ...pattern,\n            department: detectedDepartment,\n            productType: detectedProductType,\n          });\n        }\n      }\n    });\n  }, []);\n\n  const filteredPatterns = customPatterns.filter(pattern => {\n    if (!selectedDepartment) return false;\n    if (!selectedProductType) return pattern.department === selectedDepartment;\n    return pattern.department === selectedDepartment && pattern.productType === selectedProductType;\n  });\n\n  // Sort patterns: Bottom strands first (highest to lowest), then Top strands (highest to lowest), then Both\n  const sortedPatterns = [...filteredPatterns].sort((a, b) => {\n    // First, group by position: Bottom -> Top -> Both\n    const positionOrder = { 'Bottom': 0, 'Top': 1, 'Both': 2 };\n    const positionDiff = positionOrder[a.position] - positionOrder[b.position];\n\n    if (positionDiff !== 0) {\n      return positionDiff;\n    }\n\n    // Within same position, sort by pattern number (highest first)\n    // Extract numeric part from pattern ID (e.g., \"152\" from \"152-70\" or \"T40\" from \"T40-70\")\n    const getPatternNumber = (patternId: string): number => {\n      const match = patternId.match(/(\\d+)/);\n      return match ? parseInt(match[1]) : 0;\n    };\n\n    const aNum = getPatternNumber(a.patternId);\n    const bNum = getPatternNumber(b.patternId);\n\n    // Sort descending (highest first)\n    return bNum - aNum;\n  });\n\n  const handleAddPattern = () => {\n    if (!selectedDepartment || !selectedProductType) {\n      Alert.alert('Error', 'Please select a department and product type first');\n      return;\n    }\n    setEditingPattern(null);\n    setShowAddModal(true);\n  };\n\n  const handleEditPattern = (pattern: CustomStrandPattern) => {\n    setEditingPattern(pattern);\n    setShowAddModal(true);\n  };\n\n  const handleDeletePattern = (id: string) => {\n    removePattern(id);\n    setDeleteConfirmId(null);\n  };\n\n  const handleSavePattern = async (patternData: Omit<CustomStrandPattern, 'id' | 'department' | 'productType'>) => {\n    if (!selectedDepartment || !selectedProductType) {\n      Alert.alert('Error', 'Please select a department and product type');\n      return;\n    }\n\n    const fullPatternData: Omit<CustomStrandPattern, 'id'> = {\n      ...patternData,\n      department: selectedDepartment,\n      productType: selectedProductType,\n    };\n\n    if (editingPattern) {\n      await updatePattern(editingPattern.id, fullPatternData);\n    } else {\n      await addPattern(fullPatternData);\n    }\n    setShowAddModal(false);\n  };\n\n  const handleExportPatterns = async () => {\n    try {\n      const jsonData = JSON.stringify(customPatterns, null, 2);\n\n      if (Platform.OS === 'web') {\n        const blob = new Blob([jsonData], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `strand-patterns-${new Date().toISOString().split('T')[0]}.json`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n      } else {\n        const fileName = `strand-patterns-${new Date().toISOString().split('T')[0]}.json`;\n        const fileUri = `${FileSystem.documentDirectory}${fileName}`;\n        await FileSystem.writeAsStringAsync(fileUri, jsonData);\n\n        if (await Sharing.isAvailableAsync()) {\n          await Sharing.shareAsync(fileUri);\n        }\n      }\n    } catch (error) {\n      console.error('Export error:', error);\n    }\n  };\n\n  const handleImportPatterns = async () => {\n    try {\n      if (Platform.OS === 'web') {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = 'application/json';\n        input.onchange = async (e: any) => {\n          const file = e.target.files[0];\n          if (file) {\n            const reader = new FileReader();\n            reader.onload = (event: any) => {\n              try {\n                const patterns = JSON.parse(event.target.result);\n                if (Array.isArray(patterns)) {\n                  patterns.forEach((pattern: CustomStrandPattern) => {\n                    const exists = customPatterns.find(p => p.id === pattern.id);\n                    if (!exists) {\n                      addPattern(pattern);\n                    }\n                  });\n                }\n              } catch (error) {\n                console.error('JSON parse error:', error);\n              }\n            };\n            reader.readAsText(file);\n          }\n        };\n        input.click();\n      } else {\n        const result = await DocumentPicker.getDocumentAsync({\n          type: 'application/json',\n          copyToCacheDirectory: true,\n        });\n\n        if (result.canceled === false && result.assets && result.assets.length > 0) {\n          const fileContent = await FileSystem.readAsStringAsync(result.assets[0].uri);\n          const patterns = JSON.parse(fileContent);\n\n          if (Array.isArray(patterns)) {\n            patterns.forEach((pattern: CustomStrandPattern) => {\n              const exists = customPatterns.find(p => p.id === pattern.id);\n              if (!exists) {\n                addPattern(pattern);\n              }\n            });\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Import error:', error);\n    }\n  };\n\n  const handleCopyToClipboard = async () => {\n    try {\n      const jsonData = JSON.stringify(customPatterns, null, 2);\n      await Clipboard.setStringAsync(jsonData);\n      Alert.alert('Success', 'Patterns copied to clipboard!');\n    } catch (error) {\n      console.error('Copy error:', error);\n      Alert.alert('Error', 'Failed to copy to clipboard');\n    }\n  };\n\n  const handlePasteFromClipboard = async () => {\n    try {\n      const clipboardText = await Clipboard.getStringAsync();\n\n      if (!clipboardText) {\n        Alert.alert('Error', 'Clipboard is empty');\n        return;\n      }\n\n      const patterns = JSON.parse(clipboardText);\n\n      if (!Array.isArray(patterns)) {\n        Alert.alert('Error', 'Invalid data format');\n        return;\n      }\n\n      let importedCount = 0;\n      patterns.forEach((pattern: CustomStrandPattern) => {\n        const exists = customPatterns.find(p => p.id === pattern.id);\n        if (!exists) {\n          addPattern(pattern);\n          importedCount++;\n        }\n      });\n\n      Alert.alert('Success', `Imported ${importedCount} pattern(s)`);\n    } catch (error) {\n      console.error('Paste error:', error);\n      Alert.alert('Error', 'Failed to parse clipboard data');\n    }\n  };\n\n  const handleBackToDepartments = () => {\n    setSelectedProductType(null);\n    setSelectedDepartment(null);\n  };\n\n  const handleBackToProductTypes = () => {\n    setSelectedProductType(null);\n  };\n\n  // Department Selection View\n  if (!selectedDepartment) {\n    return (\n      <View className=\"flex-1 bg-gray-50\">\n        <ScrollView\n          className=\"flex-1\"\n          contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n        >\n          <View className=\"p-5\">\n            <View className=\"mb-6\">\n              <Text className=\"text-3xl font-bold text-gray-900 mb-2\">\n                Strand Pattern Manager\n              </Text>\n              <Text className=\"text-base text-gray-600\">\n                Select a department to manage strand patterns\n              </Text>\n            </View>\n\n            <View className=\"space-y-3\">\n              {(['Extruded', 'Wall Panels', 'Flexicore', 'Precast'] as Department[]).map((dept) => (\n                <Pressable\n                  key={dept}\n                  onPress={() => setSelectedDepartment(dept)}\n                  className=\"bg-white rounded-xl p-5 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-center justify-between\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-xl font-bold text-gray-900 mb-1\">\n                        {dept}\n                      </Text>\n                      <Text className=\"text-sm text-gray-600\">\n                        {customPatterns.filter(p => p.department === dept).length} patterns\n                      </Text>\n                    </View>\n                    <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n                  </View>\n                </Pressable>\n              ))}\n            </View>\n\n            {/* Action Buttons at Bottom */}\n            <View className=\"mt-8 space-y-3\">\n              <View className=\"flex-row gap-3\">\n                <Pressable\n                  onPress={handleImportPatterns}\n                  className=\"flex-1 bg-green-500 rounded-xl py-3 items-center active:bg-green-600\"\n                >\n                  <Ionicons name=\"cloud-upload-outline\" size={20} color=\"white\" />\n                  <Text className=\"text-white text-sm font-semibold mt-1\">\n                    Import JSON\n                  </Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleExportPatterns}\n                  className=\"flex-1 bg-purple-500 rounded-xl py-3 items-center active:bg-purple-600\"\n                  disabled={customPatterns.length === 0}\n                  style={{ opacity: customPatterns.length === 0 ? 0.5 : 1 }}\n                >\n                  <Ionicons name=\"cloud-download-outline\" size={20} color=\"white\" />\n                  <Text className=\"text-white text-sm font-semibold mt-1\">\n                    Export JSON\n                  </Text>\n                </Pressable>\n              </View>\n\n              <View className=\"flex-row gap-3\">\n                <Pressable\n                  onPress={handleCopyToClipboard}\n                  className=\"flex-1 bg-orange-500 rounded-xl py-3 items-center active:bg-orange-600\"\n                  disabled={customPatterns.length === 0}\n                  style={{ opacity: customPatterns.length === 0 ? 0.5 : 1 }}\n                >\n                  <Ionicons name=\"copy-outline\" size={20} color=\"white\" />\n                  <Text className=\"text-white text-sm font-semibold mt-1\">\n                    Copy Text\n                  </Text>\n                </Pressable>\n                <Pressable\n                  onPress={handlePasteFromClipboard}\n                  className=\"flex-1 bg-teal-500 rounded-xl py-3 items-center active:bg-teal-600\"\n                >\n                  <Ionicons name=\"clipboard-outline\" size={20} color=\"white\" />\n                  <Text className=\"text-white text-sm font-semibold mt-1\">\n                    Paste Text\n                  </Text>\n                </Pressable>\n              </View>\n\n              {customPatterns.length > 0 && (\n                <Pressable\n                  onPress={() => setShowClearConfirm(true)}\n                  className=\"bg-red-500 rounded-xl py-3 items-center active:bg-red-600\"\n                >\n                  <Ionicons name=\"trash-outline\" size={20} color=\"white\" />\n                  <Text className=\"text-white text-sm font-semibold mt-1\">\n                    Clear All Patterns\n                  </Text>\n                </Pressable>\n              )}\n            </View>\n          </View>\n        </ScrollView>\n\n        <ConfirmModal\n          visible={showClearConfirm}\n          title=\"Clear All Patterns?\"\n          message=\"This will permanently delete all custom strand patterns. This action cannot be undone.\"\n          onConfirm={() => {\n            clearAllPatterns();\n            setShowClearConfirm(false);\n          }}\n          onCancel={() => setShowClearConfirm(false)}\n        />\n      </View>\n    );\n  }\n\n  // Product Type Selection View\n  if (!selectedProductType) {\n    const productTypes = PRODUCT_TYPES[selectedDepartment];\n\n    return (\n      <View className=\"flex-1 bg-gray-50\">\n        <ScrollView\n          className=\"flex-1\"\n          contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n        >\n          <View className=\"p-5\">\n            <Pressable\n              onPress={handleBackToDepartments}\n              className=\"flex-row items-center mb-4\"\n            >\n              <Ionicons name=\"chevron-back\" size={24} color=\"#3B82F6\" />\n              <Text className=\"text-blue-500 text-base font-semibold ml-1\">\n                Back to Departments\n              </Text>\n            </Pressable>\n\n            <View className=\"mb-6\">\n              <Text className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {selectedDepartment}\n              </Text>\n              <Text className=\"text-base text-gray-600\">\n                Select a product type\n              </Text>\n            </View>\n\n            {productTypes.length > 0 ? (\n              <View className=\"space-y-3\">\n                {productTypes.map((type) => (\n                  <Pressable\n                    key={type}\n                    onPress={() => setSelectedProductType(type)}\n                    className=\"bg-white rounded-xl p-5 shadow-sm active:bg-gray-50\"\n                  >\n                    <View className=\"flex-row items-center justify-between\">\n                      <View className=\"flex-1\">\n                        <Text className=\"text-xl font-bold text-gray-900 mb-1\">\n                          {type}\n                        </Text>\n                        <Text className=\"text-sm text-gray-600\">\n                          {customPatterns.filter(p => p.department === selectedDepartment && p.productType === type).length} patterns\n                        </Text>\n                      </View>\n                      <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n                    </View>\n                  </Pressable>\n                ))}\n              </View>\n            ) : (\n              <View className=\"bg-white rounded-xl p-8 items-center\">\n                <Ionicons name=\"construct-outline\" size={48} color=\"#9CA3AF\" />\n                <Text className=\"text-lg font-semibold text-gray-900 mt-4 mb-2\">\n                  No Product Types Yet\n                </Text>\n                <Text className=\"text-sm text-gray-600 text-center\">\n                  Product types for this department will be added soon\n                </Text>\n              </View>\n            )}\n          </View>\n        </ScrollView>\n      </View>\n    );\n  }\n\n  // Strand Patterns List View\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n      >\n        <View className=\"p-5\">\n          <Pressable\n            onPress={handleBackToProductTypes}\n            className=\"flex-row items-center mb-4\"\n          >\n            <Ionicons name=\"chevron-back\" size={24} color=\"#3B82F6\" />\n            <Text className=\"text-blue-500 text-base font-semibold ml-1\">\n              Back to Product Types\n            </Text>\n          </Pressable>\n\n          <View className=\"mb-6\">\n            <Text className=\"text-sm text-gray-500 mb-1\">\n              {selectedDepartment} / {selectedProductType}\n            </Text>\n            <Text className=\"text-3xl font-bold text-gray-900 mb-2\">\n              Strand Patterns\n            </Text>\n            <Text className=\"text-base text-gray-600\">\n              {sortedPatterns.length} pattern(s) for {selectedProductType}\n            </Text>\n          </View>\n\n          {/* Patterns List */}\n          {sortedPatterns.length === 0 ? (\n            <View className=\"bg-white rounded-xl p-8 items-center mb-5\">\n              <View className=\"bg-gray-100 rounded-full p-6 mb-4\">\n                <Ionicons name=\"albums-outline\" size={48} color=\"#9CA3AF\" />\n              </View>\n              <Text className=\"text-lg font-semibold text-gray-900 mb-2\">\n                No Patterns Yet\n              </Text>\n              <Text className=\"text-sm text-gray-600 text-center\">\n                Add your first strand pattern for {selectedProductType}\n              </Text>\n            </View>\n          ) : (\n            <View className=\"space-y-3 mb-5\">\n              {sortedPatterns.map((pattern) => (\n                <View\n                  key={pattern.id}\n                  className=\"bg-white rounded-xl p-4 shadow-sm\"\n                >\n                  <View className=\"flex-row items-center justify-between mb-3\">\n                    <View className=\"flex-1\">\n                      <View className=\"flex-row items-center gap-2 mb-1\">\n                        <Text className=\"text-lg font-bold text-gray-900\">\n                          {pattern.patternId}\n                        </Text>\n                        <View className={`px-2 py-1 rounded ${\n                          pattern.position === 'Top' ? 'bg-blue-100' :\n                          pattern.position === 'Bottom' ? 'bg-green-100' :\n                          'bg-purple-100'\n                        }`}>\n                          <Text className={`text-xs font-semibold ${\n                            pattern.position === 'Top' ? 'text-blue-700' :\n                            pattern.position === 'Bottom' ? 'text-green-700' :\n                            'text-purple-700'\n                          }`}>\n                            {pattern.position}\n                          </Text>\n                        </View>\n                      </View>\n                      <Text className=\"text-sm text-gray-600\">\n                        {pattern.name}\n                      </Text>\n                    </View>\n                    <View className=\"flex-row gap-2\">\n                      <Pressable\n                        onPress={() => handleEditPattern(pattern)}\n                        className=\"bg-blue-50 rounded-full p-2\"\n                      >\n                        <Ionicons name=\"pencil\" size={20} color=\"#3B82F6\" />\n                      </Pressable>\n                      <Pressable\n                        onPress={() => setDeleteConfirmId(pattern.id)}\n                        className=\"bg-red-50 rounded-full p-2\"\n                      >\n                        <Ionicons name=\"trash-outline\" size={20} color=\"#EF4444\" />\n                      </Pressable>\n                    </View>\n                  </View>\n\n                  <View className=\"border-t border-gray-100 pt-3\">\n                    <Text className=\"text-xs text-gray-600\">\n                      {pattern.strand_3_8 > 0 && `${pattern.strand_3_8}  3/8\" `}\n                      {pattern.strand_1_2 > 0 && `${pattern.strand_1_2}  1/2\" `}\n                      {pattern.strand_0_6 > 0 && `${pattern.strand_0_6}  0.6\" `}\n                       e = {pattern.eValue}\"  Force = {pattern.pullingForce}%\n                      {pattern.requiredForce && `  ${pattern.requiredForce.toLocaleString()} lbs`}\n                    </Text>\n                  </View>\n                </View>\n              ))}\n            </View>\n          )}\n\n          {/* Action Buttons */}\n          <Pressable\n            onPress={handleAddPattern}\n            className=\"bg-blue-500 rounded-xl py-4 items-center mb-3 active:bg-blue-600 flex-row justify-center\"\n          >\n            <Ionicons name=\"add-circle-outline\" size={24} color=\"white\" />\n            <Text className=\"text-white text-base font-semibold ml-2\">\n              Add New Pattern\n            </Text>\n          </Pressable>\n\n          <View className=\"flex-row gap-3 mb-3\">\n            <Pressable\n              onPress={handleImportPatterns}\n              className=\"flex-1 bg-green-500 rounded-xl py-3 items-center active:bg-green-600\"\n            >\n              <Ionicons name=\"cloud-upload-outline\" size={20} color=\"white\" />\n              <Text className=\"text-white text-sm font-semibold mt-1\">\n                Import JSON\n              </Text>\n            </Pressable>\n            <Pressable\n              onPress={handleExportPatterns}\n              className=\"flex-1 bg-purple-500 rounded-xl py-3 items-center active:bg-purple-600\"\n              disabled={customPatterns.length === 0}\n              style={{ opacity: customPatterns.length === 0 ? 0.5 : 1 }}\n            >\n              <Ionicons name=\"cloud-download-outline\" size={20} color=\"white\" />\n              <Text className=\"text-white text-sm font-semibold mt-1\">\n                Export JSON\n              </Text>\n            </Pressable>\n          </View>\n\n          <View className=\"flex-row gap-3 mb-3\">\n            <Pressable\n              onPress={handleCopyToClipboard}\n              className=\"flex-1 bg-orange-500 rounded-xl py-3 items-center active:bg-orange-600\"\n              disabled={customPatterns.length === 0}\n              style={{ opacity: customPatterns.length === 0 ? 0.5 : 1 }}\n            >\n              <Ionicons name=\"copy-outline\" size={20} color=\"white\" />\n              <Text className=\"text-white text-sm font-semibold mt-1\">\n                Copy Text\n              </Text>\n            </Pressable>\n            <Pressable\n              onPress={handlePasteFromClipboard}\n              className=\"flex-1 bg-teal-500 rounded-xl py-3 items-center active:bg-teal-600\"\n            >\n              <Ionicons name=\"clipboard-outline\" size={20} color=\"white\" />\n              <Text className=\"text-white text-sm font-semibold mt-1\">\n                Paste Text\n              </Text>\n            </Pressable>\n          </View>\n\n          {customPatterns.length > 0 && (\n            <Pressable\n              onPress={() => setShowClearConfirm(true)}\n              className=\"bg-red-500 rounded-xl py-3 items-center active:bg-red-600\"\n            >\n              <Ionicons name=\"trash-outline\" size={20} color=\"white\" />\n              <Text className=\"text-white text-sm font-semibold mt-1\">\n                Clear All Patterns\n              </Text>\n            </Pressable>\n          )}\n        </View>\n      </ScrollView>\n\n      {showAddModal && (\n        <PatternEditorModal\n          pattern={editingPattern}\n          onClose={() => setShowAddModal(false)}\n          onSave={handleSavePattern}\n        />\n      )}\n\n      <ConfirmModal\n        visible={deleteConfirmId !== null}\n        title=\"Delete Pattern?\"\n        message=\"This will permanently delete this strand pattern. This action cannot be undone.\"\n        onConfirm={() => deleteConfirmId && handleDeletePattern(deleteConfirmId)}\n        onCancel={() => setDeleteConfirmId(null)}\n      />\n\n      <ConfirmModal\n        visible={showClearConfirm}\n        title=\"Clear All Patterns?\"\n        message=\"This will permanently delete all custom strand patterns. This action cannot be undone.\"\n        onConfirm={() => {\n          clearAllPatterns();\n          setShowClearConfirm(false);\n        }}\n        onCancel={() => setShowClearConfirm(false)}\n      />\n    </View>\n  );\n}\ninterface PatternEditorModalProps {\n  pattern: CustomStrandPattern | null;\n  onClose: () => void;\n  onSave: (pattern: Omit<CustomStrandPattern, 'id' | 'department' | 'productType'>) => void;\n}\n\nfunction PatternEditorModal({ pattern, onClose, onSave }: PatternEditorModalProps) {\n  const [patternNumber, setPatternNumber] = useState(pattern?.patternId.split('-')[0] || '');\n  const [pullingForce, setPullingForce] = useState(\n    pattern?.pullingForce.toString() || '75'\n  );\n  const [name, setName] = useState(pattern?.name || '');\n  const [position, setPosition] = useState<'Top' | 'Bottom' | 'Both'>(pattern?.position || 'Bottom');\n  const [strand_3_8, setStrand_3_8] = useState(pattern?.strand_3_8.toString() || '0');\n  const [strand_1_2, setStrand_1_2] = useState(pattern?.strand_1_2.toString() || '0');\n  const [strand_0_6, setStrand_0_6] = useState(pattern?.strand_0_6.toString() || '0');\n  const [strandSizes, setStrandSizes] = useState<Array<'3/8' | '1/2' | '0.6'>>(pattern?.strandSizes || []);\n  const [strandCoordinates, setStrandCoordinates] = useState<Array<{x: string; y: string}>>(\n    pattern?.strandCoordinates?.map(coord => ({ x: coord.x.toString(), y: coord.y.toString() })) || []\n  );\n  const [centroid, setCentroid] = useState('');\n  const [strandHeight, setStrandHeight] = useState('');\n  const [eValue, setEValue] = useState(pattern?.eValue.toString() || '');\n  const [requiredForce, setRequiredForce] = useState(pattern?.requiredForce?.toString() || '');\n  const [errors, setErrors] = useState<string[]>([]);\n\n  // Parse fraction or decimal input\n  const parseFractionOrDecimal = (input: string): number => {\n    if (!input || input.trim() === '') return 0;\n    \n    // Check if input contains a fraction (e.g., \"2 1/8\" or \"1/8\")\n    const fractionMatch = input.match(/(\\d+)?\\s*(\\d+)\\/(\\d+)/);\n    if (fractionMatch) {\n      const whole = parseInt(fractionMatch[1] || '0');\n      const numerator = parseInt(fractionMatch[2]);\n      const denominator = parseInt(fractionMatch[3]);\n      return whole + (numerator / denominator);\n    }\n    \n    // Otherwise parse as decimal\n    return parseFloat(input) || 0;\n  };\n\n  // Auto-calculate e value when centroid or strand height changes\n  const calculateEValue = () => {\n    const centroidValue = parseFractionOrDecimal(centroid);\n    const height = parseFractionOrDecimal(strandHeight);\n    \n    if (centroidValue > 0 && height > 0) {\n      const e = centroidValue - height;\n      setEValue(e.toFixed(3));\n    }\n  };\n\n  // Update e value whenever centroid or strand height changes\n  React.useEffect(() => {\n    calculateEValue();\n  }, [centroid, strandHeight]);\n\n  const STRAND_AREAS = {\n    '3/8': 0.085,\n    '1/2': 0.153,\n    '0.6': 0.217,\n  };\n\n  const calculateTotalArea = () => {\n    const count_3_8 = parseInt(strand_3_8) || 0;\n    const count_1_2 = parseInt(strand_1_2) || 0;\n    const count_0_6 = parseInt(strand_0_6) || 0;\n    \n    return (\n      count_3_8 * STRAND_AREAS['3/8'] +\n      count_1_2 * STRAND_AREAS['1/2'] +\n      count_0_6 * STRAND_AREAS['0.6']\n    );\n  };\n\n  // Get total strand count\n  const getTotalStrandCount = () => {\n    return (parseInt(strand_3_8) || 0) + (parseInt(strand_1_2) || 0) + (parseInt(strand_0_6) || 0);\n  };\n\n  // Update strand sizes array when counts change\n  React.useEffect(() => {\n    const totalCount = getTotalStrandCount();\n    if (totalCount > 0 && strandSizes.length !== totalCount) {\n      // Initialize or resize array\n      const newSizes: Array<'3/8' | '1/2' | '0.6'> = [];\n      for (let i = 0; i < totalCount; i++) {\n        newSizes.push(strandSizes[i] || '1/2'); // Default to 1/2\"\n      }\n      setStrandSizes(newSizes);\n    } else if (totalCount === 0) {\n      setStrandSizes([]);\n    }\n  }, [strand_3_8, strand_1_2, strand_0_6]);\n\n  // Update a specific strand position's size\n  const updateStrandSize = (index: number, size: '3/8' | '1/2' | '0.6') => {\n    const newSizes = [...strandSizes];\n    newSizes[index] = size;\n    setStrandSizes(newSizes);\n  };\n\n  // Validate strand size designations match counts\n  const validateStrandDesignations = (): boolean => {\n    const count_3_8 = parseInt(strand_3_8) || 0;\n    const count_1_2 = parseInt(strand_1_2) || 0;\n    const count_0_6 = parseInt(strand_0_6) || 0;\n    \n    const designated_3_8 = strandSizes.filter(s => s === '3/8').length;\n    const designated_1_2 = strandSizes.filter(s => s === '1/2').length;\n    const designated_0_6 = strandSizes.filter(s => s === '0.6').length;\n\n    return designated_3_8 === count_3_8 && designated_1_2 === count_1_2 && designated_0_6 === count_0_6;\n  };\n\n  const handleSave = () => {\n    const validationErrors: string[] = [];\n\n    // Validate pattern number\n    if (!patternNumber || patternNumber.length < 2 || patternNumber.length > 3) {\n      validationErrors.push('Pattern number must be 2-3 digits');\n    }\n\n    // Validate pulling force\n    const force = parseInt(pullingForce);\n    if (!pullingForce || isNaN(force) || force < 1 || force > 99) {\n      validationErrors.push('Pulling force must be 1-99%');\n    }\n\n    // Validate name\n    if (!name.trim()) {\n      validationErrors.push('Pattern name is required');\n    }\n\n    // Validate at least one strand\n    const count_3_8 = parseInt(strand_3_8) || 0;\n    const count_1_2 = parseInt(strand_1_2) || 0;\n    const count_0_6 = parseInt(strand_0_6) || 0;\n    if (count_3_8 + count_1_2 + count_0_6 === 0) {\n      validationErrors.push('At least one strand is required');\n    }\n\n    // Validate e value\n    // For top strands, e can be negative (centroid - strand height can be negative)\n    // For bottom strands, e should be positive\n    const e = parseFloat(eValue);\n    if (!eValue || isNaN(e)) {\n      validationErrors.push('e value is required');\n    } else if (position === 'Bottom' && e <= 0) {\n      validationErrors.push('e value must be greater than 0 for bottom strands');\n    }\n    // Top strands can have negative e values, so no validation needed for that case\n\n    // Validate strand size designations if strands exist\n    if (count_3_8 + count_1_2 + count_0_6 > 0 && !validateStrandDesignations()) {\n      const designated_3_8 = strandSizes.filter(s => s === '3/8').length;\n      const designated_1_2 = strandSizes.filter(s => s === '1/2').length;\n      const designated_0_6 = strandSizes.filter(s => s === '0.6').length;\n      validationErrors.push(\n        `Strand designations must match counts: Need ${count_3_8}  3/8\", ${count_1_2}  1/2\", ${count_0_6}  0.6\" but have ${designated_3_8}, ${designated_1_2}, ${designated_0_6}`\n      );\n    }\n\n    // Validate strand coordinates if provided\n    let parsedCoordinates: StrandCoordinate[] | undefined;\n    if (strandCoordinates.length > 0) {\n      const totalCount = getTotalStrandCount();\n      \n      // Check if all coordinates are filled\n      const allFilled = strandCoordinates.every(coord => coord.x.trim() !== '' && coord.y.trim() !== '');\n      \n      if (!allFilled) {\n        validationErrors.push('All strand coordinates must be filled or remove coordinates entirely');\n      } else {\n        // Parse and validate coordinates\n        parsedCoordinates = [];\n        for (let i = 0; i < strandCoordinates.length; i++) {\n          const xValue = parseFractionOrDecimal(strandCoordinates[i].x);\n          const yValue = parseFractionOrDecimal(strandCoordinates[i].y);\n          \n          if (isNaN(xValue) || isNaN(yValue)) {\n            validationErrors.push(`Invalid coordinate for strand ${i + 1}: x=\"${strandCoordinates[i].x}\", y=\"${strandCoordinates[i].y}\"`);\n          } else if (xValue < 0 || yValue < 0) {\n            validationErrors.push(`Coordinates for strand ${i + 1} must be non-negative`);\n          } else {\n            parsedCoordinates.push({ x: xValue, y: yValue });\n          }\n        }\n      }\n    }\n\n    if (validationErrors.length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n\n    const patternId = `${patternNumber}-${pullingForce}`;\n\n    onSave({\n      patternId,\n      name: name.trim(),\n      position,\n      strand_3_8: count_3_8,\n      strand_1_2: count_1_2,\n      strand_0_6: count_0_6,\n      strandSizes: strandSizes.length > 0 ? strandSizes : undefined,\n      strandCoordinates: parsedCoordinates,\n      eValue: e,\n      pullingForce: force,\n      requiredForce: requiredForce ? parseFloat(requiredForce) : undefined,\n      totalArea: calculateTotalArea(),\n    });\n  };\n\n  return (\n    <View\n      className=\"absolute inset-0 items-center justify-center\"\n      style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}\n    >\n      <View className=\"bg-white rounded-2xl mx-5 w-full max-w-md\">\n        <ScrollView className=\"max-h-96\">\n          <View className=\"p-5\">\n            <View className=\"flex-row items-center justify-between mb-4\">\n              <Text className=\"text-xl font-bold text-gray-900\">\n                {pattern ? 'Edit Pattern' : 'New Pattern'}\n              </Text>\n              <Pressable onPress={onClose}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n\n            {/* Errors */}\n            {errors.length > 0 && (\n              <View className=\"bg-red-50 border border-red-200 rounded-xl p-3 mb-4\">\n                {errors.map((error, idx) => (\n                  <Text key={idx} className=\"text-red-700 text-sm\">\n                     {error}\n                  </Text>\n                ))}\n              </View>\n            )}\n\n            {/* Pattern ID Section */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Pattern ID\n              </Text>\n              <View className=\"flex-row items-center gap-2\">\n                <TextInput\n                  className=\"flex-1 bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"101\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  keyboardType=\"number-pad\"\n                  maxLength={3}\n                  value={patternNumber}\n                  onChangeText={setPatternNumber}\n                />\n                <Text className=\"text-lg text-gray-600\">-</Text>\n                <TextInput\n                  className=\"w-20 bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"75\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  keyboardType=\"number-pad\"\n                  maxLength={2}\n                  value={pullingForce}\n                  onChangeText={setPullingForce}\n                />\n                <Text className=\"text-sm text-gray-600\">%</Text>\n              </View>\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Format: [Number]-[Pulling Force %]\n              </Text>\n            </View>\n\n            {/* Name */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Pattern Name\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                placeholder=\"e.g., Heavy Load Pattern\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={name}\n                onChangeText={setName}\n              />\n            </View>\n\n            {/* Position Selector */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Strand Position\n              </Text>\n              <View className=\"flex-row gap-2\">\n                <Pressable\n                  onPress={() => setPosition('Bottom')}\n                  className={`flex-1 rounded-xl py-3 items-center border-2 ${\n                    position === 'Bottom' \n                      ? 'bg-green-50 border-green-500' \n                      : 'bg-white border-gray-300'\n                  }`}\n                >\n                  <Text className={`font-semibold ${\n                    position === 'Bottom' ? 'text-green-700' : 'text-gray-600'\n                  }`}>\n                    Bottom\n                  </Text>\n                </Pressable>\n                <Pressable\n                  onPress={() => setPosition('Top')}\n                  className={`flex-1 rounded-xl py-3 items-center border-2 ${\n                    position === 'Top' \n                      ? 'bg-blue-50 border-blue-500' \n                      : 'bg-white border-gray-300'\n                  }`}\n                >\n                  <Text className={`font-semibold ${\n                    position === 'Top' ? 'text-blue-700' : 'text-gray-600'\n                  }`}>\n                    Top\n                  </Text>\n                </Pressable>\n                <Pressable\n                  onPress={() => setPosition('Both')}\n                  className={`flex-1 rounded-xl py-3 items-center border-2 ${\n                    position === 'Both' \n                      ? 'bg-purple-50 border-purple-500' \n                      : 'bg-white border-gray-300'\n                  }`}\n                >\n                  <Text className={`font-semibold ${\n                    position === 'Both' ? 'text-purple-700' : 'text-gray-600'\n                  }`}>\n                    Both\n                  </Text>\n                </Pressable>\n              </View>\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Select where these strands are positioned in the member\n              </Text>\n            </View>\n\n            {/* Strand Counts */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Number of Strands\n              </Text>\n              \n              <View className=\"space-y-3\">\n                <View className=\"flex-row items-center\">\n                  <Text className=\"w-16 text-sm text-gray-700\">3/8\"</Text>\n                  <TextInput\n                    className=\"flex-1 bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                    placeholder=\"0\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    keyboardType=\"number-pad\"\n                    value={strand_3_8}\n                    onChangeText={setStrand_3_8}\n                  />\n                </View>\n                \n                <View className=\"flex-row items-center\">\n                  <Text className=\"w-16 text-sm text-gray-700\">1/2\"</Text>\n                  <TextInput\n                    className=\"flex-1 bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                    placeholder=\"0\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    keyboardType=\"number-pad\"\n                    value={strand_1_2}\n                    onChangeText={setStrand_1_2}\n                  />\n                </View>\n                \n                <View className=\"flex-row items-center\">\n                  <Text className=\"w-16 text-sm text-gray-700\">0.6\"</Text>\n                  <TextInput\n                    className=\"flex-1 bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                    placeholder=\"0\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    keyboardType=\"number-pad\"\n                    value={strand_0_6}\n                    onChangeText={setStrand_0_6}\n                  />\n                </View>\n              </View>\n            </View>\n\n            {/* Strand Size Designations */}\n            {getTotalStrandCount() > 0 && (\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Designate Strand Sizes (Position 1-{getTotalStrandCount()}, Left to Right)\n                </Text>\n                <Text className=\"text-xs text-gray-500 mb-3\">\n                  Total: {parseInt(strand_3_8) || 0}  3/8\", {parseInt(strand_1_2) || 0}  1/2\", {parseInt(strand_0_6) || 0}  0.6\"\n                </Text>\n                \n                <View className=\"bg-gray-50 rounded-xl p-3 border border-gray-200\">\n                  <View className=\"flex-row flex-wrap gap-2\">\n                    {strandSizes.map((size, index) => (\n                      <View key={index} className=\"items-center\">\n                        <Text className=\"text-xs text-gray-600 mb-1\">\n                          Pos {index + 1}\n                        </Text>\n                        <View className=\"flex-row border border-gray-300 rounded-lg overflow-hidden\">\n                          <Pressable\n                            onPress={() => updateStrandSize(index, '3/8')}\n                            className={`px-2 py-1 ${\n                              size === '3/8' ? 'bg-blue-500' : 'bg-white'\n                            }`}\n                          >\n                            <Text className={`text-xs font-semibold ${\n                              size === '3/8' ? 'text-white' : 'text-gray-700'\n                            }`}>\n                              3/8\n                            </Text>\n                          </Pressable>\n                          <View className=\"w-px bg-gray-300\" />\n                          <Pressable\n                            onPress={() => updateStrandSize(index, '1/2')}\n                            className={`px-2 py-1 ${\n                              size === '1/2' ? 'bg-green-500' : 'bg-white'\n                            }`}\n                          >\n                            <Text className={`text-xs font-semibold ${\n                              size === '1/2' ? 'text-white' : 'text-gray-700'\n                            }`}>\n                              1/2\n                            </Text>\n                          </Pressable>\n                          <View className=\"w-px bg-gray-300\" />\n                          <Pressable\n                            onPress={() => updateStrandSize(index, '0.6')}\n                            className={`px-2 py-1 ${\n                              size === '0.6' ? 'bg-purple-500' : 'bg-white'\n                            }`}\n                          >\n                            <Text className={`text-xs font-semibold ${\n                              size === '0.6' ? 'text-white' : 'text-gray-700'\n                            }`}>\n                              0.6\n                            </Text>\n                          </Pressable>\n                        </View>\n                      </View>\n                    ))}\n                  </View>\n                  \n                  {/* Count verification */}\n                  <View className=\"mt-3 pt-3 border-t border-gray-300\">\n                    <Text className=\"text-xs text-gray-600\">\n                      Designated: {strandSizes.filter(s => s === '3/8').length}  3/8\", {strandSizes.filter(s => s === '1/2').length}  1/2\", {strandSizes.filter(s => s === '0.6').length}  0.6\"\n                    </Text>\n                    {!validateStrandDesignations() && (\n                      <Text className=\"text-xs text-orange-600 font-semibold mt-1\">\n                         Designations must match strand counts above\n                      </Text>\n                    )}\n                  </View>\n                </View>\n              </View>\n            )}\n\n            {/* Strand Coordinates (Optional) */}\n            {getTotalStrandCount() > 0 && (\n              <View className=\"mb-4\">\n                <View className=\"flex-row items-center justify-between mb-2\">\n                  <Text className=\"text-sm font-semibold text-gray-700\">\n                    Strand Coordinates (Optional)\n                  </Text>\n                  <Pressable\n                    onPress={() => {\n                      const totalCount = getTotalStrandCount();\n                      if (strandCoordinates.length === 0) {\n                        // Initialize coordinates with default y = 2 1/8\"\n                        const newCoords = Array(totalCount).fill(null).map(() => ({ x: '', y: '2 1/8' }));\n                        setStrandCoordinates(newCoords);\n                      } else {\n                        // Clear coordinates\n                        setStrandCoordinates([]);\n                      }\n                    }}\n                    className=\"bg-blue-500 rounded-lg px-3 py-1\"\n                  >\n                    <Text className=\"text-xs font-semibold text-white\">\n                      {strandCoordinates.length > 0 ? 'Remove' : 'Add Coordinates'}\n                    </Text>\n                  </Pressable>\n                </View>\n\n                <View className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-3\">\n                  <View className=\"flex-row items-start\">\n                    <Ionicons name=\"information-circle\" size={16} color=\"#F59E0B\" />\n                    <Text className=\"flex-1 text-xs text-amber-800 ml-2\">\n                      For cut-width products: Enter (x,y) position of each strand from bottom-left corner. x=0 is left edge, y=0 is bottom. Use decimals or fractions (e.g., 2.5 or 2 1/2). App will auto-calculate which strands are active based on product width.\n                    </Text>\n                  </View>\n                </View>\n\n                {strandCoordinates.length > 0 && (\n                  <View className=\"bg-gray-50 rounded-xl p-3 border border-gray-200\">\n                    <ScrollView style={{ maxHeight: 300 }}>\n                      <View className=\"space-y-3\">\n                        {strandCoordinates.map((coord, index) => (\n                          <View key={index}>\n                            <Text className=\"text-xs font-semibold text-gray-700 mb-2\">\n                              Strand {index + 1} ({strandSizes[index]}\")\n                            </Text>\n                            <View className=\"flex-row gap-2\">\n                              <View className=\"flex-1\">\n                                <Text className=\"text-xs text-gray-600 mb-1\">\n                                  x (horizontal, in)\n                                </Text>\n                                <TextInput\n                                  className=\"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-gray-900\"\n                                  placeholder=\"e.g., 2.5 or 2 1/2\"\n                                  placeholderTextColor=\"#9CA3AF\"\n                                  cursorColor=\"#000000\"\n                                  value={coord.x}\n                                  onChangeText={(text) => {\n                                    const newCoords = [...strandCoordinates];\n                                    newCoords[index] = { ...newCoords[index], x: text };\n                                    setStrandCoordinates(newCoords);\n                                  }}\n                                />\n                              </View>\n                              <View className=\"flex-1\">\n                                <Text className=\"text-xs text-gray-600 mb-1\">\n                                  y (vertical, in)\n                                </Text>\n                                <TextInput\n                                  className=\"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-gray-900\"\n                                  placeholder=\"e.g., 3 or 2 7/8\"\n                                  placeholderTextColor=\"#9CA3AF\"\n                                  cursorColor=\"#000000\"\n                                  value={coord.y}\n                                  onChangeText={(text) => {\n                                    const newCoords = [...strandCoordinates];\n                                    newCoords[index] = { ...newCoords[index], y: text };\n                                    setStrandCoordinates(newCoords);\n                                  }}\n                                />\n                              </View>\n                            </View>\n                          </View>\n                        ))}\n                      </View>\n                    </ScrollView>\n                  </View>\n                )}\n              </View>\n            )}\n\n            {/* Centroid */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Section Centroid (inches from bottom)\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-2\">\n                Enter as decimal or fraction (e.g., 6 or 5 7/8)\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                placeholder=\"e.g., 6 or 5 7/8\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={centroid}\n                onChangeText={setCentroid}\n              />\n            </View>\n\n            {/* Strand Height */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Strand Height from Bottom (inches)\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-2\">\n                Enter as decimal or fraction (e.g., 2.125 or 2 1/8)\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                placeholder=\"e.g., 2.125 or 2 1/8\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={strandHeight}\n                onChangeText={setStrandHeight}\n              />\n            </View>\n\n            {/* e Value (Auto-calculated or manual) */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                e Value (inches) - Auto-calculated\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-2\">\n                Calculated as: Centroid - Strand height{'\\n'}\n                Or enter manually\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                placeholder=\"e.g., 3.875\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                keyboardType=\"decimal-pad\"\n                value={eValue}\n                onChangeText={setEValue}\n              />\n            </View>\n\n            {/* Required Force (lbs) - Optional */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Required Force (lbs) - Optional\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-2\">\n                Required force in pounds for this strand pattern\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-xl px-4 py-3 text-base text-gray-900\"\n                placeholder=\"e.g., 15000\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                keyboardType=\"numeric\"\n                value={requiredForce}\n                onChangeText={setRequiredForce}\n              />\n            </View>\n\n            {/* Total Area Display */}\n            <View className=\"bg-blue-50 rounded-xl p-3 mb-4\">\n              <Text className=\"text-xs font-semibold text-blue-900\">\n                Total Strand Area\n              </Text>\n              <Text className=\"text-lg font-bold text-blue-900\">\n                {calculateTotalArea().toFixed(3)} in\n              </Text>\n            </View>\n          </View>\n        </ScrollView>\n\n        {/* Action Buttons */}\n        <View className=\"border-t border-gray-200 p-4 flex-row gap-3\">\n          <Pressable\n            onPress={onClose}\n            className=\"flex-1 bg-gray-100 rounded-xl py-3 items-center\"\n          >\n            <Text className=\"text-gray-700 font-semibold\">Cancel</Text>\n          </Pressable>\n          <Pressable\n            onPress={handleSave}\n            className=\"flex-1 bg-blue-500 rounded-xl py-3 items-center\"\n          >\n            <Text className=\"text-white font-semibold\">Save</Text>\n          </Pressable>\n        </View>\n      </View>\n    </View>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  ScrollView,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useStrandPatternStore } from \"../state/strandPatternStore\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { parseMeasurementInput } from \"../utils/cn\";\nimport { useJobAutocomplete } from \"../utils/jobAutocomplete\";\n\ntype ProductDetailsScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"ProductDetails\"\n>;\n\ninterface Props {\n  navigation: ProductDetailsScreenNavigationProp;\n}\n\n// Product types/sizes for hollow-core planks\nconst PRODUCT_TYPES = [\n  { id: \"8048\", label: '8048', height: 8, width: 48 },\n  { id: \"1048\", label: '1048', height: 10, width: 48 },\n  { id: \"1247\", label: '1247', height: 12, width: 48 },\n  { id: \"1250\", label: '1250', height: 12, width: 48 },\n  { id: \"1648\", label: '1648', height: 16, width: 48 },\n  { id: \"1650\", label: '1650', height: 16, width: 48 },\n];\n\nexport default function ProductDetailsScreen({ navigation }: Props) {\n  const insets = useSafeAreaInsets();\n  const { customPatterns } = useStrandPatternStore();\n  const { findByJobNumber, searchByJobName } = useJobAutocomplete();\n\n  // Optional fields\n  const [projectName, setProjectName] = useState(\"\");\n  const [projectNumber, setProjectNumber] = useState(\"\");\n  const [markNumber, setMarkNumber] = useState(\"\");\n  const [idNumber, setIdNumber] = useState(\"\");\n  const [spanFeet, setSpanFeet] = useState(\"\");\n  const [spanInches, setSpanInches] = useState(\"\");\n  const [spanFraction, setSpanFraction] = useState(\"0\");\n  const [pourDate, setPourDate] = useState(\"\");\n\n  // Required fields\n  const [productType, setProductType] = useState(\"\");\n  const [strandPattern, setStrandPattern] = useState(\"\");\n\n  // Optional field\n  const [topStrandPattern, setTopStrandPattern] = useState(\"\");\n  const [productWidth, setProductWidth] = useState(\"\");\n  const [productSide, setProductSide] = useState<'L1' | 'L2' | ''>('');\n\n  // Modals\n  const [showProductModal, setShowProductModal] = useState(false);\n  const [showStrandModal, setShowStrandModal] = useState(false);\n  const [showTopStrandModal, setShowTopStrandModal] = useState(false);\n\n  // Project Name autocomplete\n  const [showProjectNameSuggestions, setShowProjectNameSuggestions] = useState(false);\n  const [projectNameSuggestions, setProjectNameSuggestions] = useState<Array<{jobNumber: string, jobName: string}>>([]);\n  const [isAutoFilling, setIsAutoFilling] = useState(false);\n\n  const [errors, setErrors] = useState<string[]>([]);\n\n  // Auto-populate Project Name when Project Number changes\n  useEffect(() => {\n    if (projectNumber.trim()) {\n      const project = findByJobNumber(projectNumber);\n      if (project) {\n        setIsAutoFilling(true);\n        setProjectName(project.jobName);\n        setTimeout(() => setIsAutoFilling(false), 100);\n      } else {\n        // Clear project name if job number doesn't match any project\n        setProjectName(\"\");\n      }\n    } else {\n      // Clear project name if job number is empty\n      setProjectName(\"\");\n    }\n  }, [projectNumber, findByJobNumber]);\n\n  // Filter Project Name suggestions when user types\n  useEffect(() => {\n    // Don't show suggestions if we're auto-filling from job number\n    if (isAutoFilling) return;\n\n    if (projectName.trim().length >= 2) {\n      const suggestions = searchByJobName(projectName);\n      setProjectNameSuggestions(suggestions);\n      setShowProjectNameSuggestions(suggestions.length > 0);\n    } else {\n      setProjectNameSuggestions([]);\n      setShowProjectNameSuggestions(false);\n    }\n  }, [projectName, searchByJobName, isAutoFilling]);\n\n  // Handle selecting a project name from suggestions\n  const handleSelectProjectName = (jobNumber: string, jobName: string) => {\n    setIsAutoFilling(true);\n    setProjectName(jobName);\n    setProjectNumber(jobNumber);\n    setShowProjectNameSuggestions(false);\n    setTimeout(() => setIsAutoFilling(false), 100);\n  };\n\n  // Get bottom patterns (where strands are positioned)\n  const bottomPatterns = customPatterns.filter(\n    (p) => p.position === \"Bottom\" || p.position === \"Both\"\n  );\n  const topPatterns = customPatterns.filter(\n    (p) => p.position === \"Top\" || p.position === \"Both\"\n  );\n\n  const selectedProductType = PRODUCT_TYPES.find((p) => p.id === productType);\n  const selectedStrandPattern = customPatterns.find(\n    (p) => p.id === strandPattern\n  );\n  const selectedTopStrandPattern = customPatterns.find(\n    (p) => p.id === topStrandPattern\n  );\n\n  // Check if this is a cut-width product\n  const fullWidth = selectedProductType?.width || 48;\n  const parsedWidth = productWidth.trim() ? parseMeasurementInput(productWidth) : null;\n  const tolerance = 0.001;\n  const isCutWidth = parsedWidth !== null && Math.abs(parsedWidth - fullWidth) > tolerance && parsedWidth < fullWidth;\n\n  const parseFraction = (fraction: string): number => {\n    if (!fraction || fraction === \"0\") return 0;\n    const parts = fraction.split(\"/\");\n    if (parts.length === 2) {\n      const numerator = parseFloat(parts[0]);\n      const denominator = parseFloat(parts[1]);\n      if (denominator !== 0) {\n        return numerator / denominator;\n      }\n    }\n    return 0;\n  };\n\n  const getSpanInFeet = (): number => {\n    const feet = parseFloat(spanFeet) || 0;\n    const inches = parseFloat(spanInches) || 0;\n    const fractionValue = parseFraction(spanFraction);\n    return feet + (inches + fractionValue) / 12;\n  };\n\n  const handleContinue = () => {\n    const validationErrors: string[] = [];\n\n    // Required validations\n    if (!productType) {\n      validationErrors.push(\"Product Type/Size is required\");\n    }\n    if (!strandPattern) {\n      validationErrors.push(\"Strand Pattern is required\");\n    }\n\n    // Validate product side if product is cut-width\n    if (isCutWidth && !productSide) {\n      validationErrors.push(\"Product side is required for cut-width products\");\n    }\n\n    if (validationErrors.length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n\n    // Parse product width if provided\n    const parsedWidth = productWidth.trim() ? parseMeasurementInput(productWidth) : null;\n\n    // Navigate to slippage identifier with configuration\n    navigation.navigate(\"SlippageIdentifier\", {\n      config: {\n        projectName: projectName || undefined,\n        projectNumber: projectNumber || undefined,\n        markNumber: markNumber || undefined,\n        idNumber: idNumber || undefined,\n        span: spanFeet || spanInches || spanFraction !== \"0\" ? getSpanInFeet() : undefined,\n        pourDate: pourDate || undefined,\n        productType: productType,\n        strandPattern: strandPattern,\n        topStrandPattern: topStrandPattern || undefined,\n        productWidth: parsedWidth !== null ? parsedWidth : undefined,\n        productSide: isCutWidth && productSide ? productSide : undefined,\n      },\n    });\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-white\"\n      style={{ paddingTop: insets.top }}\n    >\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: 40 }}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n          {/* Header */}\n          <View className=\"px-6 py-4 border-b border-gray-200\">\n            <View className=\"flex-row items-center justify-between mb-1\">\n              <Text className=\"text-gray-900 text-2xl font-bold\">\n                Product Details\n              </Text>\n              <Pressable\n                onPress={() => {\n                  navigation.navigate(\"ProductTagScanner\", {\n                    onDataScanned: (data) => {\n                      // Fill all fields from the scanned tag\n                      if (data.projectName) setProjectName(data.projectName);\n                      if (data.projectNumber) setProjectNumber(data.projectNumber);\n                      if (data.markNumber) setMarkNumber(data.markNumber);\n                      if (data.idNumber) setIdNumber(data.idNumber);\n                      if (data.span) {\n                        setSpanFeet(data.span.feet.toString());\n                        setSpanInches(data.span.inches.toString());\n                        setSpanFraction(\"0\"); // Decimal inches, no fraction\n                      }\n                      if (data.pourDate) setPourDate(data.pourDate);\n                      if (data.productWidth) {\n                        setProductWidth(data.productWidth.toString());\n                      }\n                      if (data.strandPattern) {\n                        // Find matching strand pattern by ID or name\n                        const matchingPattern = customPatterns.find(\n                          p => p.patternId === data.strandPattern || p.name.includes(data.strandPattern || '')\n                        );\n                        if (matchingPattern) {\n                          setStrandPattern(matchingPattern.id);\n                        }\n                      }\n                    },\n                  });\n                }}\n                className=\"bg-blue-500 rounded-lg px-4 py-2 flex-row items-center\"\n              >\n                <Ionicons name=\"camera\" size={20} color=\"#fff\" />\n                <Text className=\"text-white text-sm font-semibold ml-2\">\n                  Scan Product Tag\n                </Text>\n              </Pressable>\n            </View>\n            <Text className=\"text-gray-600 text-sm mt-1\">\n              Configure project details and select strand pattern\n            </Text>\n          </View>\n\n          {/* Error Display */}\n          {errors.length > 0 && (\n            <View className=\"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-4\">\n              <View className=\"flex-row items-start\">\n                <Ionicons name=\"alert-circle\" size={20} color=\"#DC2626\" />\n                <View className=\"ml-2 flex-1\">\n                  <Text className=\"text-red-800 font-semibold text-sm mb-1\">\n                    Please fix the following:\n                  </Text>\n                  {errors.map((error, index) => (\n                    <Text key={index} className=\"text-red-700 text-sm\">\n                       {error}\n                    </Text>\n                  ))}\n                </View>\n              </View>\n            </View>\n          )}\n\n          {/* Optional Product Details */}\n          <View className=\"px-6 mt-6\">\n            <Text className=\"text-gray-900 text-lg font-semibold mb-4\">\n              Product Details (Optional)\n            </Text>\n\n            <View className=\"mb-4\" style={{ zIndex: 10 }}>\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Project Name\n              </Text>\n              <View style={{ position: 'relative' }}>\n                <TextInput\n                  className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Enter project name\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={projectName}\n                  onChangeText={setProjectName}\n                  onBlur={() => {\n                    // Delay hiding suggestions to allow click events to register\n                    setTimeout(() => setShowProjectNameSuggestions(false), 200);\n                  }}\n                  onFocus={() => {\n                    if (projectName.trim().length >= 2 && projectNameSuggestions.length > 0) {\n                      setShowProjectNameSuggestions(true);\n                    }\n                  }}\n                />\n                {showProjectNameSuggestions && projectNameSuggestions.length > 0 && (\n                  <View\n                    className=\"bg-white border border-gray-300 rounded-lg\"\n                    style={{\n                      position: 'absolute',\n                      top: '100%',\n                      left: 0,\n                      right: 0,\n                      marginTop: 4,\n                      zIndex: 9999,\n                      maxHeight: 200,\n                      shadowColor: '#000',\n                      shadowOffset: { width: 0, height: 4 },\n                      shadowOpacity: 0.15,\n                      shadowRadius: 8,\n                      elevation: 8,\n                    }}\n                  >\n                    <ScrollView style={{ maxHeight: 200 }} keyboardShouldPersistTaps=\"handled\" nestedScrollEnabled>\n                      {projectNameSuggestions.map((suggestion, index) => (\n                        <Pressable\n                          key={`${suggestion.jobNumber}-${index}`}\n                          onPress={() => handleSelectProjectName(suggestion.jobNumber, suggestion.jobName)}\n                          className=\"px-4 py-3 border-b border-gray-200\"\n                          style={{ backgroundColor: '#fff' }}\n                        >\n                          <Text className=\"text-gray-900 text-base font-medium\">{suggestion.jobName}</Text>\n                          <Text className=\"text-gray-500 text-sm\">Job #: {suggestion.jobNumber}</Text>\n                        </Pressable>\n                      ))}\n                    </ScrollView>\n                  </View>\n                )}\n              </View>\n            </View>\n\n            <View className=\"mb-4\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Project Number\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                placeholder=\"Enter project number\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={projectNumber}\n                onChangeText={setProjectNumber}\n              />\n            </View>\n\n            <View className=\"flex-row gap-3 mb-4\">\n              <View className=\"flex-1\">\n                <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                  Mark Number\n                </Text>\n                <TextInput\n                  className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"Mark #\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={markNumber}\n                  onChangeText={setMarkNumber}\n                />\n              </View>\n\n              <View className=\"flex-1\">\n                <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                  ID Number\n                </Text>\n                <TextInput\n                  className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                  placeholder=\"ID #\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={idNumber}\n                  onChangeText={setIdNumber}\n                />\n              </View>\n            </View>\n\n            {/* Span Entry */}\n            <View className=\"mb-6\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Span (Optional)\n              </Text>\n              <View className=\"flex-row items-center\" style={{ gap: 8 }}>\n                <View style={{ flex: 1, minWidth: 0 }}>\n                  <TextInput\n                    className=\"bg-white border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                    placeholder=\"Feet\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    value={spanFeet}\n                    onChangeText={setSpanFeet}\n                    keyboardType=\"numeric\"\n                  />\n                </View>\n                <Text className=\"text-gray-600 font-medium\">-</Text>\n                <View style={{ flex: 1, minWidth: 0 }}>\n                  <TextInput\n                    className=\"bg-white border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                    placeholder=\"Inches\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    value={spanInches}\n                    onChangeText={setSpanInches}\n                    keyboardType=\"numeric\"\n                  />\n                </View>\n                <Pressable\n                  className=\"bg-gray-100 border border-gray-300 rounded-lg px-3 py-3 items-center\"\n                  style={{ width: 70 }}\n                  onPress={() => {\n                    const fractions = [\"0\", \"1/8\", \"1/4\", \"3/8\", \"1/2\", \"5/8\", \"3/4\", \"7/8\"];\n                    const currentIndex = fractions.indexOf(spanFraction);\n                    const nextIndex = (currentIndex + 1) % fractions.length;\n                    setSpanFraction(fractions[nextIndex]);\n                  }}\n                >\n                  <Text className=\"text-gray-900 font-medium text-sm\">\n                    {spanFraction === \"0\" ? \"0\" : spanFraction}\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n\n            {/* Pour Date Entry */}\n            <View className=\"mb-6\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Pour Date (Optional)\n              </Text>\n              <TextInput\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900\"\n                placeholder=\"MM/DD/YYYY\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={pourDate}\n                onChangeText={setPourDate}\n                keyboardType=\"default\"\n              />\n            </View>\n\n            {/* Product Width Entry */}\n            <View className=\"mb-6\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Product Width (Optional)\n              </Text>\n              <Text className=\"text-xs text-gray-500 mb-2\">\n                For cut-width products, enter actual width in inches (decimal or fraction)\n              </Text>\n              <TextInput\n                style={{\n                  backgroundColor: '#FFFFFF',\n                  borderWidth: 1,\n                  borderColor: '#D1D5DB',\n                  borderRadius: 8,\n                  paddingHorizontal: 16,\n                  paddingVertical: 12,\n                  fontSize: 16,\n                  color: '#111827',\n                }}\n                placeholder=\"e.g., 28 or 28 1/2 or 28.5\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                selectionColor=\"#000000\"\n                value={productWidth}\n                onChangeText={setProductWidth}\n                keyboardType=\"default\"\n              />\n            </View>\n\n            {/* Product Side Selector - Only show for cut-width products */}\n            {isCutWidth && (\n              <View className=\"mb-6\">\n                <View className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-3\">\n                  <View className=\"flex-row items-start\">\n                    <Ionicons name=\"cut\" size={20} color=\"#F59E0B\" />\n                    <View className=\"flex-1 ml-3\">\n                      <Text className=\"text-amber-900 font-semibold text-sm mb-1\">\n                        Cut-Width Product Detected\n                      </Text>\n                      <Text className=\"text-amber-800 text-xs\">\n                        Product: {parsedWidth}\" (cut from {fullWidth}\")\n                      </Text>\n                    </View>\n                  </View>\n                </View>\n\n                <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                  Product Side <Text className=\"text-red-500\">*</Text>\n                </Text>\n                <Text className=\"text-xs text-gray-500 mb-3\">\n                  Which side is the keeper side (product side)?\n                </Text>\n\n                {/* Product Side Buttons */}\n                <View className=\"flex-row gap-3 mb-3\">\n                  <Pressable\n                    onPress={() => setProductSide('L1')}\n                    className={`flex-1 rounded-lg py-3 px-4 border-2 ${\n                      productSide === 'L1'\n                        ? 'bg-blue-50 border-blue-500'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-center font-semibold text-sm ${\n                      productSide === 'L1' ? 'text-blue-700' : 'text-gray-700'\n                    }`}>\n                      L1 (Left Side)\n                    </Text>\n                    <Text className=\"text-center text-xs text-gray-600 mt-1\">\n                      Keep left side\n                    </Text>\n                  </Pressable>\n\n                  <Pressable\n                    onPress={() => setProductSide('L2')}\n                    className={`flex-1 rounded-lg py-3 px-4 border-2 ${\n                      productSide === 'L2'\n                        ? 'bg-blue-50 border-blue-500'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-center font-semibold text-sm ${\n                      productSide === 'L2' ? 'text-blue-700' : 'text-gray-700'\n                    }`}>\n                      L2 (Right Side)\n                    </Text>\n                    <Text className=\"text-center text-xs text-gray-600 mt-1\">\n                      Keep right side\n                    </Text>\n                  </Pressable>\n                </View>\n\n                {/* Visual Diagram */}\n                <View className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                  <Text className=\"text-xs font-semibold text-gray-700 mb-3 text-center\">\n                    Visual Guide\n                  </Text>\n                  \n                  {/* L1 Product Side Diagram */}\n                  <View className=\"mb-4\">\n                    <Text className=\"text-xs text-gray-600 mb-2\">L1 Product Side (Keep left):</Text>\n                    <View className=\"flex-row items-center\">\n                      <View className=\"flex-1 h-12 bg-blue-100 border-2 border-blue-500 items-center justify-center\">\n                        <Text className=\"text-xs text-blue-700\">Keep (L1)</Text>\n                      </View>\n                      <View className=\"flex-1 h-12 bg-red-100 border-r-4 border-red-500 items-center justify-center\">\n                        <Text className=\"text-xs text-red-700\">Cut Edge</Text>\n                      </View>\n                    </View>\n                  </View>\n\n                  {/* L2 Product Side Diagram */}\n                  <View>\n                    <Text className=\"text-xs text-gray-600 mb-2\">L2 Product Side (Keep right):</Text>\n                    <View className=\"flex-row items-center\">\n                      <View className=\"flex-1 h-12 bg-red-100 border-l-4 border-red-500 items-center justify-center\">\n                        <Text className=\"text-xs text-red-700\">Cut Edge</Text>\n                      </View>\n                      <View className=\"flex-1 h-12 bg-blue-100 border-2 border-blue-500 items-center justify-center\">\n                        <Text className=\"text-xs text-blue-700\">Keep (L2)</Text>\n                      </View>\n                    </View>\n                  </View>\n                </View>\n\n                {errors.includes(\"Product side is required for cut-width products\") && (\n                  <Text className=\"text-red-600 text-xs mt-2\">\n                     Please select which side is the product side (keeper side)\n                  </Text>\n                )}\n              </View>\n            )}\n          </View>\n\n          {/* Required Configuration */}\n          <View className=\"px-6 mb-6\">\n            <Text className=\"text-gray-900 text-lg font-semibold mb-4\">\n              Configuration <Text className=\"text-red-500\">*</Text>\n            </Text>\n\n            {/* Product Type/Size */}\n            <View className=\"mb-4\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Product Type/Size <Text className=\"text-red-500\">*</Text>\n              </Text>\n              <Pressable\n                className={`bg-white border ${\n                  errors.includes(\"Product Type/Size is required\")\n                    ? \"border-red-500\"\n                    : \"border-gray-300\"\n                } rounded-lg px-4 py-3 flex-row items-center justify-between`}\n                onPress={() => setShowProductModal(true)}\n              >\n                <Text\n                  className={`text-base ${\n                    productType ? \"text-gray-900\" : \"text-gray-400\"\n                  }`}\n                >\n                  {selectedProductType\n                    ? selectedProductType.label\n                    : \"Select product type/size\"}\n                </Text>\n                <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n\n            {/* Strand Pattern */}\n            <View className=\"mb-4\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Strand Pattern <Text className=\"text-red-500\">*</Text>\n              </Text>\n              <Pressable\n                className={`bg-white border ${\n                  errors.includes(\"Strand Pattern is required\")\n                    ? \"border-red-500\"\n                    : \"border-gray-300\"\n                } rounded-lg px-4 py-3 flex-row items-center justify-between`}\n                onPress={() => setShowStrandModal(true)}\n              >\n                <Text\n                  className={`text-base ${\n                    strandPattern ? \"text-gray-900\" : \"text-gray-400\"\n                  }`}\n                >\n                  {selectedStrandPattern\n                    ? selectedStrandPattern.name\n                    : \"Select strand pattern\"}\n                </Text>\n                <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n              </Pressable>\n              {bottomPatterns.length === 0 && (\n                <Text className=\"text-orange-600 text-xs mt-1\">\n                  No bottom patterns available. Create one in Strand Patterns.\n                </Text>\n              )}\n            </View>\n\n            {/* Top Strand Pattern (Optional) */}\n            <View className=\"mb-4\">\n              <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n                Top Strand Pattern (Optional)\n              </Text>\n              <Pressable\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 flex-row items-center justify-between\"\n                onPress={() => setShowTopStrandModal(true)}\n              >\n                <Text\n                  className={`text-base ${\n                    topStrandPattern ? \"text-gray-900\" : \"text-gray-400\"\n                  }`}\n                >\n                  {selectedTopStrandPattern\n                    ? selectedTopStrandPattern.name\n                    : \"None\"}\n                </Text>\n                <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n\n          </View>\n\n          {/* Continue Button */}\n          <View className=\"px-6\">\n            <Pressable\n              className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n              onPress={handleContinue}\n            >\n              <Text className=\"text-white text-base font-semibold\">\n                Continue to Input Values\n              </Text>\n            </Pressable>\n          </View>\n      </ScrollView>\n\n      {/* Product Type Modal */}\n      <Modal\n        visible={showProductModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowProductModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Product Type/Size\n              </Text>\n              <Pressable onPress={() => setShowProductModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {PRODUCT_TYPES.map((type) => (\n                <Pressable\n                  key={type.id}\n                  className={`p-4 mb-2 rounded-lg border ${\n                    productType === type.id\n                      ? \"bg-blue-50 border-blue-500\"\n                      : \"bg-white border-gray-200\"\n                  }`}\n                  onPress={() => {\n                    setProductType(type.id);\n                    setShowProductModal(false);\n                    setErrors([]);\n                  }}\n                >\n                  <Text\n                    className={`text-base font-semibold ${\n                      productType === type.id\n                        ? \"text-blue-600\"\n                        : \"text-gray-900\"\n                    }`}\n                  >\n                    {type.label}\n                  </Text>\n                  <Text className=\"text-gray-600 text-sm mt-1\">\n                    {type.height}\" thick  {type.width}\" wide hollow core slab\n                  </Text>\n                </Pressable>\n              ))}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Strand Pattern Modal */}\n      <Modal\n        visible={showStrandModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowStrandModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Strand Pattern\n              </Text>\n              <Pressable onPress={() => setShowStrandModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {bottomPatterns.length === 0 ? (\n                <View className=\"items-center py-8\">\n                  <Ionicons name=\"albums-outline\" size={48} color=\"#9CA3AF\" />\n                  <Text className=\"text-gray-600 text-base mt-4 mb-4 text-center\">\n                    No bottom strand patterns available.\n                  </Text>\n                  <Pressable\n                    onPress={() => {\n                      setShowStrandModal(false);\n                      navigation.navigate(\"StrandPatterns\");\n                    }}\n                    className=\"bg-blue-500 rounded-xl py-3 px-6 items-center active:bg-blue-600\"\n                  >\n                    <Text className=\"text-white text-sm font-semibold\">\n                      Go to Strand Library\n                    </Text>\n                  </Pressable>\n                </View>\n              ) : (\n                bottomPatterns.map((pattern) => (\n                  <Pressable\n                    key={pattern.id}\n                    className={`p-4 mb-2 rounded-lg border ${\n                      strandPattern === pattern.id\n                        ? \"bg-blue-50 border-blue-500\"\n                        : \"bg-white border-gray-200\"\n                    }`}\n                    onPress={() => {\n                      setStrandPattern(pattern.id);\n                      setShowStrandModal(false);\n                      setErrors([]);\n                    }}\n                  >\n                    <Text\n                      className={`text-base font-semibold ${\n                        strandPattern === pattern.id\n                          ? \"text-blue-600\"\n                          : \"text-gray-900\"\n                      }`}\n                    >\n                      {pattern.name}\n                    </Text>\n                    <Text className=\"text-gray-600 text-sm mt-1\">\n                      Pattern ID: {pattern.patternId}  Position:{\" \"}\n                      {pattern.position}\n                    </Text>\n                  </Pressable>\n                ))\n              )}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Top Strand Pattern Modal */}\n      <Modal\n        visible={showTopStrandModal}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowTopStrandModal(false)}\n      >\n        <View className=\"flex-1 justify-end bg-black/50\">\n          <View className=\"bg-white rounded-t-3xl max-h-[70%]\">\n            <View className=\"p-4 border-b border-gray-200 flex-row items-center justify-between\">\n              <Text className=\"text-gray-900 text-lg font-semibold\">\n                Select Top Strand Pattern\n              </Text>\n              <Pressable onPress={() => setShowTopStrandModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n            <ScrollView className=\"p-4\">\n              {/* None Option */}\n              <Pressable\n                className={`p-4 mb-2 rounded-lg border ${\n                  topStrandPattern === \"\"\n                    ? \"bg-blue-50 border-blue-500\"\n                    : \"bg-white border-gray-200\"\n                }`}\n                onPress={() => {\n                  setTopStrandPattern(\"\");\n                  setShowTopStrandModal(false);\n                }}\n              >\n                <Text\n                  className={`text-base font-semibold ${\n                    topStrandPattern === \"\"\n                      ? \"text-blue-600\"\n                      : \"text-gray-900\"\n                  }`}\n                >\n                  None\n                </Text>\n              </Pressable>\n\n              {topPatterns.map((pattern) => (\n                <Pressable\n                  key={pattern.id}\n                  className={`p-4 mb-2 rounded-lg border ${\n                    topStrandPattern === pattern.id\n                      ? \"bg-blue-50 border-blue-500\"\n                      : \"bg-white border-gray-200\"\n                  }`}\n                  onPress={() => {\n                    setTopStrandPattern(pattern.id);\n                    setShowTopStrandModal(false);\n                  }}\n                >\n                  <Text\n                    className={`text-base font-semibold ${\n                      topStrandPattern === pattern.id\n                        ? \"text-blue-600\"\n                        : \"text-gray-900\"\n                    }`}\n                  >\n                    {pattern.name}\n                  </Text>\n                  <Text className=\"text-gray-600 text-sm mt-1\">\n                    Pattern ID: {pattern.patternId}  Position:{\" \"}\n                    {pattern.position}\n                  </Text>\n                </Pressable>\n              ))}\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </KeyboardAvoidingView>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection8048Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection8048({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection8048Props) {\n  // Dimensions in inches\n  const FULL_WIDTH = 48;\n  const HEIGHT = 8;\n  \n  // Flange dimensions\n  const TOP_FLANGE = 1.1875; // 1 3/16\"\n  const BOTTOM_FLANGE = 1.1875; // 1 3/16\"\n  \n  // Core dimensions\n  const CORE_WIDTH = 5.5; // 5 1/2\"\n  const CORE_HEIGHT = 5.625; // 5 5/8\"\n  const EDGE_TO_FIRST_CORE = 2.625; // 2 5/8\"\n  const CORE_SPACING = 1.9375; // 1 15/16\"\n  \n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults for 7-strand pattern\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      { x: 2, y: 2.125, id: 1, size: bottomStrandSizes?.[0], isTop: false },\n      { x: 9.125, y: 2.125, id: 2, size: bottomStrandSizes?.[1], isTop: false },\n      { x: 16.5625, y: 2.125, id: 3, size: bottomStrandSizes?.[2], isTop: false },\n      { x: 24, y: 2.125, id: 4, size: bottomStrandSizes?.[3], isTop: false },\n      { x: 31.4375, y: 2.125, id: 5, size: bottomStrandSizes?.[4], isTop: false },\n      { x: 38.875, y: 2.125, id: 6, size: bottomStrandSizes?.[5], isTop: false },\n      { x: 46, y: 2.125, id: 7, size: bottomStrandSizes?.[6], isTop: false },\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n  \n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n  \n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n  \n  // Calculate core positions (6 cores total)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < 6; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n  \n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n  \n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  // Add extra space for legend if strands are visible\n  const legendSpace = (strandCoordinates || bottomStrandSizes || topStrandCoordinates) ? 60 : 0;\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0) + legendSpace; // Add extra space for E1/E2 values and legend\n  const padding = 20;\n  \n  // Keyway dimensions (exact coordinates from user specification)\n  // Bottom corner has 1/2\" radius\n  // Profile coordinates (x, y) where x is depth from edge, y is height from bottom\n  const keywayRadius = 0.5 * scale; // 1/2\" radius at bottom corner\n  const keywayPoints = [\n    { x: 0, y: 0.5 },      // After radius\n    { x: 0.25, y: 0.625 }, // 1/4\", 5/8\"\n    { x: 0.5625, y: 5 },   // 9/16\", 5\"\n    { x: 0.75, y: 5.125 }, // 3/4\", 5 1/8\"\n    { x: 0.8125, y: 6.875 }, // 13/16\", 6 7/8\"\n    { x: 0.625, y: 7 },    // 5/8\", 7\"\n    { x: 0.75, y: 7.5 },   // 3/4\", 7 1/2\"\n    { x: 1.25, y: 8 },     // 1 1/4\", 8\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n  \n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 kept = left is keeper\n    const rightHasKeyway = productSide === 'L2'; // L2 kept = right is keeper\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n  \n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect \n              x={padding} \n              y={padding} \n              width={displayWidth} \n              height={displayHeight} \n            />\n          </ClipPath>\n        </Defs>\n        \n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n        \n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n          \n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n        \n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n        \n        {/* Slippage values (E1/E2) below cross-section */}\n        {showSlippageValues && slippages.length > 0 && visibleStrands.map((strand) => {\n          const slippageData = slippages.find(s => parseInt(s.strandId) === strand.id);\n          if (!slippageData) return null;\n\n          const e1Display = slippageData.leftExceedsOne ? '>1\"' : slippageData.leftSlippage;\n          const e2Display = slippageData.rightExceedsOne ? '>1\"' : slippageData.rightSlippage;\n\n          const fontSize = 11;\n          const lineHeight = 16;\n\n          // Position below the cross-section\n          // E1 on first line, E2 on second line, both centered under the strand\n          const belowCrossSectionY = padding + displayHeight + 15;\n          const e1Y = belowCrossSectionY;\n          const e2Y = belowCrossSectionY + lineHeight;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 value (first line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e1Y}\n                fontSize={fontSize}\n                fill=\"#059669\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E1: {e1Display}\n              </SvgText>\n\n              {/* E2 value (second line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e2Y}\n                fontSize={fontSize}\n                fill=\"#7C3AED\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E2: {e2Display}\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection1048Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection1048({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection1048Props) {\n  // Dimensions in inches - 10\" tall x 48\" wide\n  // This is a distinct product type with 5 cores (not a scaled 8048)\n  const FULL_WIDTH = 48;\n  const HEIGHT = 10;\n\n  // Flange dimensions\n  const TOP_FLANGE = 1.375; // 1 3/8\"\n  const BOTTOM_FLANGE = 1.375; // 1 3/8\"\n\n  // Core dimensions - 5 cores total (different from 8048's 6 cores)\n  const CORE_WIDTH = 7.25; // 7 1/4\"\n  const CORE_HEIGHT = 7.25; // 7 1/4\"\n  const EDGE_TO_FIRST_CORE = 2.75; // 2 3/4\"\n  const CORE_SPACING = 1.5625; // 1 9/16\" between cores\n  const NUM_CORES = 5;\n\n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults for 6-strand pattern (5 cores)\n  // Strands are centered between cores and edges\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      { x: 1.375, y: 2.46, id: 1, size: bottomStrandSizes?.[0], isTop: false },\n      { x: 10.78125, y: 2.46, id: 2, size: bottomStrandSizes?.[1], isTop: false },\n      { x: 19.59375, y: 2.46, id: 3, size: bottomStrandSizes?.[2], isTop: false },\n      { x: 28.40625, y: 2.46, id: 4, size: bottomStrandSizes?.[3], isTop: false },\n      { x: 37.21875, y: 2.46, id: 5, size: bottomStrandSizes?.[4], isTop: false },\n      { x: 46.625, y: 2.46, id: 6, size: bottomStrandSizes?.[5], isTop: false },\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n\n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n\n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n\n  // Calculate core positions (5 cores total for 1048)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < NUM_CORES; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n\n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n\n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0); // Add extra space for E1/E2 values below\n  const padding = 20;\n\n  // Keyway dimensions - Y coordinates scaled by 1.25, X coordinates same as 8048\n  // This maintains the same draft angle\n  // Bottom corner has 5/8\" radius (0.5 * 1.25)\n  const keywayRadius = 0.625 * scale; // 0.5 * 1.25\n  const keywayPoints = [\n    { x: 0, y: 0.625 },      // After radius (0.5 * 1.25)\n    { x: 0.25, y: 0.78125 }, // 1/4\", 5/8\" * 1.25\n    { x: 0.5625, y: 6.25 },  // 9/16\", 5\" * 1.25\n    { x: 0.75, y: 6.40625 }, // 3/4\", 5.125\" * 1.25\n    { x: 0.8125, y: 8.59375 }, // 13/16\", 6.875\" * 1.25\n    { x: 0.625, y: 8.75 },   // 5/8\", 7\" * 1.25\n    { x: 0.75, y: 9.375 },   // 3/4\", 7.5\" * 1.25\n    { x: 1.25, y: 10 },      // 1 1/4\", 8\" * 1.25 = 10\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n\n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 = left is product side (keeper)\n    const rightHasKeyway = productSide === 'L2'; // L2 = right is product side (keeper)\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n\n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect\n              x={padding}\n              y={padding}\n              width={displayWidth}\n              height={displayHeight}\n            />\n          </ClipPath>\n        </Defs>\n\n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n\n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n\n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n\n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n\n        {/* Slippage values (E1/E2) below cross-section */}\n        {showSlippageValues && slippages.length > 0 && visibleStrands.map((strand) => {\n          const slippageData = slippages.find(s => parseInt(s.strandId) === strand.id);\n          if (!slippageData) return null;\n\n          const e1Display = slippageData.leftExceedsOne ? '>1\"' : slippageData.leftSlippage;\n          const e2Display = slippageData.rightExceedsOne ? '>1\"' : slippageData.rightSlippage;\n\n          const fontSize = 11;\n          const lineHeight = 16;\n\n          // Position below the cross-section\n          // E1 on first line, E2 on second line, both centered under the strand\n          const belowCrossSectionY = padding + displayHeight + 15;\n          const e1Y = belowCrossSectionY;\n          const e2Y = belowCrossSectionY + lineHeight;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 value (first line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e1Y}\n                fontSize={fontSize}\n                fill=\"#059669\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E1: {e1Display}\n              </SvgText>\n\n              {/* E2 value (second line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e2Y}\n                fontSize={fontSize}\n                fill=\"#7C3AED\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E2: {e2Display}\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection1247Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection1247({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection1247Props) {\n  // Dimensions in inches - 12\" tall x 48\" wide\n  // Horizontal layout same as 1048, taller cores\n  const FULL_WIDTH = 48;\n  const HEIGHT = 12;\n\n  // Flange dimensions\n  const BOTTOM_FLANGE = 1.375; // 1 3/8\"\n  const TOP_FLANGE = 1.375; // 1 3/8\" (12 - 1.375 - 9.25 = 1.375)\n\n  // Core dimensions - 5 cores total, horizontal layout same as 1048\n  const CORE_WIDTH = 7.25; // 7 1/4\" (same as 1048)\n  const CORE_HEIGHT = 9.25; // 9 1/4\" (taller than 1048)\n  const EDGE_TO_FIRST_CORE = 2.75; // 2 3/4\" (same as 1048)\n  const CORE_SPACING = 1.5625; // 1 9/16\" between cores (same as 1048)\n  const NUM_CORES = 5;\n\n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults for 6-strand pattern (5 cores)\n  // X positions same as 1048, Y position same as 1048 (same bottom flange)\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      { x: 1.375, y: 2.46, id: 1, size: bottomStrandSizes?.[0], isTop: false },\n      { x: 10.78125, y: 2.46, id: 2, size: bottomStrandSizes?.[1], isTop: false },\n      { x: 19.59375, y: 2.46, id: 3, size: bottomStrandSizes?.[2], isTop: false },\n      { x: 28.40625, y: 2.46, id: 4, size: bottomStrandSizes?.[3], isTop: false },\n      { x: 37.21875, y: 2.46, id: 5, size: bottomStrandSizes?.[4], isTop: false },\n      { x: 46.625, y: 2.46, id: 6, size: bottomStrandSizes?.[5], isTop: false },\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n\n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n\n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n\n  // Calculate core positions (5 cores total for 1247)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < NUM_CORES; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n\n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n\n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0); // Add extra space for E1/E2 values below\n  const padding = 20;\n\n  // Keyway dimensions - Y coordinates scaled by 1.5 (12/8), X coordinates same as 8048\n  // This maintains the same draft angle as 8048\n  // Bottom corner has 3/4\" radius (0.5 * 1.5)\n  const keywayRadius = 0.75 * scale; // 0.5 * 1.5\n  const keywayPoints = [\n    { x: 0, y: 0.75 },       // After radius (0.5 * 1.5)\n    { x: 0.25, y: 0.9375 },  // 1/4\", 0.625\" * 1.5\n    { x: 0.5625, y: 7.5 },   // 9/16\", 5\" * 1.5\n    { x: 0.75, y: 7.6875 },  // 3/4\", 5.125\" * 1.5\n    { x: 0.8125, y: 10.3125 }, // 13/16\", 6.875\" * 1.5\n    { x: 0.625, y: 10.5 },   // 5/8\", 7\" * 1.5\n    { x: 0.75, y: 11.25 },   // 3/4\", 7.5\" * 1.5\n    { x: 1.25, y: 12 },      // 1 1/4\", 8\" * 1.5 = 12\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n\n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 = left is product side (keeper)\n    const rightHasKeyway = productSide === 'L2'; // L2 = right is product side (keeper)\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n\n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect\n              x={padding}\n              y={padding}\n              width={displayWidth}\n              height={displayHeight}\n            />\n          </ClipPath>\n        </Defs>\n\n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n\n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n\n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n\n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n\n        {/* Slippage values (E1/E2) below cross-section */}\n        {showSlippageValues && slippages.length > 0 && visibleStrands.map((strand) => {\n          const slippageData = slippages.find(s => parseInt(s.strandId) === strand.id);\n          if (!slippageData) return null;\n\n          const e1Display = slippageData.leftExceedsOne ? '>1\"' : slippageData.leftSlippage;\n          const e2Display = slippageData.rightExceedsOne ? '>1\"' : slippageData.rightSlippage;\n\n          const fontSize = 11;\n          const lineHeight = 16;\n\n          // Position below the cross-section\n          // E1 on first line, E2 on second line, both centered under the strand\n          const belowCrossSectionY = padding + displayHeight + 15;\n          const e1Y = belowCrossSectionY;\n          const e2Y = belowCrossSectionY + lineHeight;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 value (first line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e1Y}\n                fontSize={fontSize}\n                fill=\"#059669\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E1: {e1Display}\n              </SvgText>\n\n              {/* E2 value (second line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e2Y}\n                fontSize={fontSize}\n                fill=\"#7C3AED\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E2: {e2Display}\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection1250Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection1250({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection1250Props) {\n  // Dimensions in inches - 12\" tall x 48\" wide\n  // Different core configuration from 1247\n  const FULL_WIDTH = 48;\n  const HEIGHT = 12;\n\n  // Flange dimensions\n  const BOTTOM_FLANGE = 1.5625; // 1 9/16\"\n  const TOP_FLANGE = 1.5625; // 1 9/16\" (12 - 1.5625 - 8.875 = 1.5625)\n\n  // Core dimensions - 5 cores total with different sizing than 1247\n  const CORE_WIDTH = 6.4375; // 6 7/16\"\n  const CORE_HEIGHT = 8.875; // 8 7/8\"\n  const EDGE_TO_FIRST_CORE = 3.15625; // 3 5/32\" (corrected for exact 48\" width)\n  const CORE_SPACING = 2.375; // 2 3/8\" between cores\n  const NUM_CORES = 5;\n\n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults for 6-strand pattern (5 cores)\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      { x: 1.57812, y: 2.79531, id: 1, size: bottomStrandSizes?.[0], isTop: false },\n      { x: 10.78125, y: 2.79531, id: 2, size: bottomStrandSizes?.[1], isTop: false },\n      { x: 19.59375, y: 2.79531, id: 3, size: bottomStrandSizes?.[2], isTop: false },\n      { x: 28.40625, y: 2.79531, id: 4, size: bottomStrandSizes?.[3], isTop: false },\n      { x: 37.21875, y: 2.79531, id: 5, size: bottomStrandSizes?.[4], isTop: false },\n      { x: 46.42188, y: 2.79531, id: 6, size: bottomStrandSizes?.[5], isTop: false },\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n\n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n\n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n\n  // Calculate core positions (5 cores total for 1250)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < NUM_CORES; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n\n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n\n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0); // Add extra space for E1/E2 values below\n  const padding = 20;\n\n  // Keyway dimensions - Y coordinates scaled by 1.5 (12/8), X coordinates same as 8048\n  // This maintains the same draft angle as 8048\n  // Bottom corner has 3/4\" radius (0.5 * 1.5)\n  const keywayRadius = 0.75 * scale; // 0.5 * 1.5\n  const keywayPoints = [\n    { x: 0, y: 0.75 },       // After radius (0.5 * 1.5)\n    { x: 0.25, y: 0.9375 },  // 1/4\", 0.625\" * 1.5\n    { x: 0.5625, y: 7.5 },   // 9/16\", 5\" * 1.5\n    { x: 0.75, y: 7.6875 },  // 3/4\", 5.125\" * 1.5\n    { x: 0.8125, y: 10.3125 }, // 13/16\", 6.875\" * 1.5\n    { x: 0.625, y: 10.5 },   // 5/8\", 7\" * 1.5\n    { x: 0.75, y: 11.25 },   // 3/4\", 7.5\" * 1.5\n    { x: 1.25, y: 12 },      // 1 1/4\", 8\" * 1.5 = 12\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n\n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 = left is product side (keeper)\n    const rightHasKeyway = productSide === 'L2'; // L2 = right is product side (keeper)\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n\n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect\n              x={padding}\n              y={padding}\n              width={displayWidth}\n              height={displayHeight}\n            />\n          </ClipPath>\n        </Defs>\n\n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n\n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n\n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n\n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n\n        {/* Slippage values (E1/E2) below cross-section */}\n        {showSlippageValues && slippages.length > 0 && visibleStrands.map((strand) => {\n          const slippageData = slippages.find(s => parseInt(s.strandId) === strand.id);\n          if (!slippageData) return null;\n\n          const e1Display = slippageData.leftExceedsOne ? '>1\"' : slippageData.leftSlippage;\n          const e2Display = slippageData.rightExceedsOne ? '>1\"' : slippageData.rightSlippage;\n\n          const fontSize = 11;\n          const lineHeight = 16;\n\n          // Position below the cross-section\n          // E1 on first line, E2 on second line, both centered under the strand\n          const belowCrossSectionY = padding + displayHeight + 15;\n          const e1Y = belowCrossSectionY;\n          const e2Y = belowCrossSectionY + lineHeight;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 value (first line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e1Y}\n                fontSize={fontSize}\n                fill=\"#059669\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E1: {e1Display}\n              </SvgText>\n\n              {/* E2 value (second line below cross-section) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={e2Y}\n                fontSize={fontSize}\n                fill=\"#7C3AED\"\n                fontWeight=\"bold\"\n                textAnchor=\"middle\"\n              >\n                E2: {e2Display}\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection1648Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection1648({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection1648Props) {\n  // Dimensions in inches - 16\" tall x 48\" wide\n  const FULL_WIDTH = 48;\n  const HEIGHT = 16;\n\n  // Flange dimensions\n  const BOTTOM_FLANGE = 1.375; // 1 3/8\"\n  const TOP_FLANGE = HEIGHT - 13.1875 - 1.375; // Remaining top flange\n\n  // Core dimensions - 4 cores total\n  const CORE_WIDTH = 9; // 9\"\n  const CORE_HEIGHT = 13.1875; // 13 3/16\"\n  const EDGE_TO_FIRST_CORE = 2.8125; // 2 13/16\"\n  const CORE_SPACING = 2.1875; // 2 3/16\"\n  const NUM_CORES = 4;\n\n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      // Default strand positions can be added here if needed\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n\n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n\n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n\n  // Calculate core positions (4 cores total)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < NUM_CORES; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n\n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n\n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0); // Add extra space for E1/E2 values below\n  const padding = 20;\n\n  // Keyway dimensions - Y coordinates scaled by 2.0 (16/8), X coordinates same as 8048\n  // This maintains the same draft angle as 8048\n  // Bottom corner has 1\" radius (0.5 * 2.0)\n  const keywayRadius = 1.0 * scale; // 0.5 * 2.0\n  const keywayPoints = [\n    { x: 0, y: 1.0 },       // After radius (0.5 * 2.0)\n    { x: 0.25, y: 1.25 },   // 1/4\", 0.625\" * 2.0\n    { x: 0.5625, y: 10 },   // 9/16\", 5\" * 2.0\n    { x: 0.75, y: 10.25 },  // 3/4\", 5.125\" * 2.0\n    { x: 0.8125, y: 13.75 }, // 13/16\", 6.875\" * 2.0\n    { x: 0.625, y: 14 },    // 5/8\", 7\" * 2.0\n    { x: 0.75, y: 15 },     // 3/4\", 7.5\" * 2.0\n    { x: 1.25, y: 16 },     // 1 1/4\", 8\" * 2.0 = 16\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n\n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 = left is product side (keeper)\n    const rightHasKeyway = productSide === 'L2'; // L2 = right is product side (keeper)\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n\n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect\n              x={padding}\n              y={padding}\n              width={displayWidth}\n              height={displayHeight}\n            />\n          </ClipPath>\n        </Defs>\n\n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n\n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n\n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n\n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n\n        {/* E1/E2 slippage values below strands */}\n        {showSlippageValues && visibleStrands.map((strand) => {\n          const slippage = slippages.find(s => s.strandId === `S${strand.id}`);\n          if (!slippage) return null;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 (Left slippage) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={padding + displayHeight + 25}\n                fontSize={12}\n                fontWeight=\"600\"\n                fill={slippage.leftExceedsOne ? '#EF4444' : '#10B981'}\n                textAnchor=\"middle\"\n              >\n                E1: {slippage.leftSlippage}\"\n              </SvgText>\n\n              {/* E2 (Right slippage) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={padding + displayHeight + 40}\n                fontSize={12}\n                fontWeight=\"600\"\n                fill={slippage.rightExceedsOne ? '#EF4444' : '#10B981'}\n                textAnchor=\"middle\"\n              >\n                E2: {slippage.rightSlippage}\"\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React from 'react';\nimport { View } from 'react-native';\nimport Svg, { Rect, Ellipse, Circle, Text as SvgText, Line, Path, Defs, ClipPath, Polygon, G } from 'react-native-svg';\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n}\n\ninterface StrandInfo {\n  x: number;\n  y: number;\n  size?: '3/8' | '1/2' | '0.6';\n  isTop?: boolean; // Whether this is a top strand\n}\n\ninterface CrossSection1650Props {\n  scale?: number; // Pixels per inch\n  showDimensions?: boolean;\n  highlightedStrand?: number | null;\n  activeStrands?: number[];\n  productSide?: 'L1' | 'L2' | null;\n  productWidth?: number;\n  slippages?: StrandSlippage[]; // Optional slippage data to display\n  showSlippageValues?: boolean; // Whether to show E1/E2 labels\n  strandCoordinates?: Array<{ x: number; y: number }>; // Optional custom strand positions\n  bottomStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for bottom strands\n  topStrandCoordinates?: Array<{ x: number; y: number }>; // Top strand positions\n  topStrandSizes?: Array<'3/8' | '1/2' | '0.6'>; // Sizes for top strands\n}\n\nexport default function CrossSection1650({\n  scale = 10, // Default: 10 pixels per inch\n  showDimensions = false,\n  highlightedStrand = null,\n  activeStrands, // No default - if undefined, all strands are active\n  productSide = null,\n  productWidth,\n  slippages = [],\n  showSlippageValues = false,\n  strandCoordinates,\n  bottomStrandSizes,\n  topStrandCoordinates,\n  topStrandSizes,\n}: CrossSection1650Props) {\n  // Dimensions in inches - 16\" tall x 48\" wide (thicker webs variant)\n  const FULL_WIDTH = 48;\n  const HEIGHT = 16;\n\n  // Flange dimensions\n  const BOTTOM_FLANGE = 2.375; // 2 3/8\"\n  const TOP_FLANGE = HEIGHT - 11.25 - 2.375; // Remaining top flange\n\n  // Core dimensions - 4 cores total (thicker webs than 1648)\n  const CORE_WIDTH = 7.625; // 7 5/8\"\n  const CORE_HEIGHT = 11.25; // 11 1/4\"\n  const EDGE_TO_FIRST_CORE = 3.1875; // 3 3/16\"\n  const CORE_SPACING = 3.6875; // 3 11/16\"\n  const NUM_CORES = 4;\n\n  // Strand positions (x from left edge, y from bottom)\n  // Use custom coordinates if provided, otherwise use defaults\n  const BOTTOM_STRAND_POSITIONS = strandCoordinates ?\n    strandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: bottomStrandSizes?.[index],\n      isTop: false,\n    })) :\n    [\n      // Default strand positions can be added here if needed\n    ];\n\n  // Top strand positions (if provided)\n  const TOP_STRAND_POSITIONS = topStrandCoordinates ?\n    topStrandCoordinates.map((coord, index) => ({\n      x: coord.x,\n      y: coord.y,\n      id: index + 1,\n      size: topStrandSizes?.[index],\n      isTop: true,\n    })) : [];\n\n  // Combine bottom and top strands\n  const ALL_STRAND_POSITIONS = [...BOTTOM_STRAND_POSITIONS, ...TOP_STRAND_POSITIONS];\n\n  // Calculate display dimensions\n  const displayWidth = productWidth ? productWidth * scale : FULL_WIDTH * scale;\n  const displayHeight = HEIGHT * scale;\n\n  // Calculate which part to show based on product side\n  let xOffset = 0;\n  if (productSide === 'L1' && productWidth) {\n    // L1 = keep left side, show from x=0\n    xOffset = 0;\n  } else if (productSide === 'L2' && productWidth) {\n    // L2 = keep right side, show from right\n    xOffset = (FULL_WIDTH - productWidth) * scale;\n  }\n  // No product side = show full width (xOffset = 0)\n\n  // Calculate core positions (4 cores total)\n  const coreY = BOTTOM_FLANGE * scale;\n  const cores = [];\n  for (let i = 0; i < NUM_CORES; i++) {\n    const coreX = (EDGE_TO_FIRST_CORE + i * (CORE_WIDTH + CORE_SPACING)) * scale;\n    cores.push({\n      x: coreX - xOffset,\n      y: coreY,\n      width: CORE_WIDTH * scale,\n      height: CORE_HEIGHT * scale,\n    });\n  }\n\n  // Filter cores that are visible in the cut section\n  const visibleCores = cores.filter(core => {\n    const coreRight = core.x + core.width;\n    return core.x < displayWidth && coreRight > 0;\n  });\n\n  // Calculate strand positions relative to the displayed section\n  const visibleStrands = ALL_STRAND_POSITIONS.map((strand) => ({\n    ...strand,\n    displayX: (strand.x * scale) - xOffset,\n    displayY: displayHeight - (strand.y * scale), // Flip y for SVG coordinates\n    // If activeStrands is undefined, all strands are active (full-width product)\n    isActive: activeStrands ? activeStrands.includes(strand.id) : true,\n    isHighlighted: highlightedStrand === strand.id,\n  })).filter((strand) => {\n    // Only show strands within the visible area\n    return strand.displayX >= 0 && strand.displayX <= displayWidth;\n  });\n\n  const svgWidth = displayWidth + 40; // Add padding\n  const svgHeight = displayHeight + 40 + (showSlippageValues ? 45 : 0); // Add extra space for E1/E2 values below\n  const padding = 20;\n\n  // Keyway dimensions - Y coordinates scaled by 2.0 (16/8), X coordinates same as 8048\n  // This maintains the same draft angle as 8048\n  // Bottom corner has 1\" radius (0.5 * 2.0)\n  const keywayRadius = 1.0 * scale; // 0.5 * 2.0\n  const keywayPoints = [\n    { x: 0, y: 1.0 },       // After radius (0.5 * 2.0)\n    { x: 0.25, y: 1.25 },   // 1/4\", 0.625\" * 2.0\n    { x: 0.5625, y: 10 },   // 9/16\", 5\" * 2.0\n    { x: 0.75, y: 10.25 },  // 3/4\", 5.125\" * 2.0\n    { x: 0.8125, y: 13.75 }, // 13/16\", 6.875\" * 2.0\n    { x: 0.625, y: 14 },    // 5/8\", 7\" * 2.0\n    { x: 0.75, y: 15 },     // 3/4\", 7.5\" * 2.0\n    { x: 1.25, y: 16 },     // 1 1/4\", 8\" * 2.0 = 16\" (top)\n  ].map(p => ({ x: p.x * scale, y: p.y * scale })); // Scale to pixels\n\n  // Build path for plank with keyway on keeper edge\n  const buildPlankPath = () => {\n    const x = padding;\n    const y = padding;\n    const w = displayWidth;\n    const h = displayHeight;\n\n    // Determine which edge gets the keyway (keeper edge) and which is straight (cut edge)\n    const hasKeyway = productSide !== null;\n    const leftHasKeyway = productSide === 'L1'; // L1 = left is product side (keeper)\n    const rightHasKeyway = productSide === 'L2'; // L2 = right is product side (keeper)\n\n    if (!hasKeyway) {\n      // Full width product - show keyway on BOTH sides\n      // Start at bottom-left with radius\n      let path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Left bottom radius curve\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge, ending before the right keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Right bottom radius curve\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n\n      return path;\n    }\n\n    // Build path with keyway on keeper edge using exact coordinates\n    let path = '';\n\n    if (leftHasKeyway) {\n      // Left edge has keyway, right edge is cut (straight)\n      // Start at bottom-left with radius\n      path = `M ${x + keywayRadius} ${y + h}`;\n\n      // Radius curve at bottom-left corner (going up and left)\n      path += ` Q ${x} ${y + h} ${x} ${y + h - keywayRadius}`;\n\n      // Follow keyway profile points going up the left edge\n      // Points are measured from bottom, so convert: (x_depth, y_height) to SVG coords\n      for (let i = 0; i < keywayPoints.length; i++) {\n        const point = keywayPoints[i];\n        path += ` L ${x + point.x} ${y + h - point.y}`;\n      }\n\n      // Top edge to top-right\n      path += ` L ${x + w} ${y}`;\n\n      // Right edge (straight cut)\n      path += ` L ${x + w} ${y + h}`;\n\n      // Bottom edge back to start\n      path += ` L ${x + keywayRadius} ${y + h}`;\n\n      path += ` Z`;\n    } else {\n      // Right edge has keyway, left edge is cut (straight)\n      // Mirror the keyway profile for the right edge\n      // Start at top-left\n      path = `M ${x} ${y}`;\n\n      // Top edge, ending before the keyway starts\n      const topKeywayPoint = keywayPoints[keywayPoints.length - 1];\n      path += ` L ${x + w - topKeywayPoint.x} ${y}`;\n\n      // Follow keyway profile points going down the right edge (reversed and mirrored)\n      for (let i = keywayPoints.length - 1; i >= 0; i--) {\n        const point = keywayPoints[i];\n        path += ` L ${x + w - point.x} ${y + h - point.y}`;\n      }\n\n      // Radius curve at bottom-right corner (going left and down)\n      path += ` Q ${x + w} ${y + h} ${x + w - keywayRadius} ${y + h}`;\n\n      // Bottom edge\n      path += ` L ${x} ${y + h}`;\n\n      // Left edge (straight cut)\n      path += ` L ${x} ${y}`;\n\n      path += ` Z`;\n    }\n\n    return path;\n  };\n\n  // Generate a stable clip path ID\n  const clipPathId = React.useMemo(() => `plank-clip-${Math.random().toString(36).substr(2, 9)}`, []);\n\n  return (\n    <View style={{ width: svgWidth, height: svgHeight, alignSelf: 'center' }}>\n      <Svg width={svgWidth} height={svgHeight}>\n        {/* Define clip path for clean core cutting */}\n        <Defs>\n          <ClipPath id={clipPathId}>\n            <Rect\n              x={padding}\n              y={padding}\n              width={displayWidth}\n              height={displayHeight}\n            />\n          </ClipPath>\n        </Defs>\n\n        {/* Plank outline with keyway on keeper edge */}\n        <Path\n          d={buildPlankPath()}\n          fill=\"#E5E7EB\"\n          stroke=\"#374151\"\n          strokeWidth={2}\n        />\n\n        {/* Cores (voids) - rendered at full size, clipped by plank boundary */}\n        {visibleCores.map((core, index) => {\n          // Only render cores that have any part visible\n          const coreRight = core.x + core.width;\n          if (coreRight <= 0 || core.x >= displayWidth) return null;\n\n          // Render the full ellipse at its true position, clip path handles cutting\n          return (\n            <Ellipse\n              key={`core-${index}`}\n              cx={padding + core.x + core.width / 2}\n              cy={padding + core.y + core.height / 2}\n              rx={core.width / 2}\n              ry={core.height / 2}\n              fill=\"white\"\n              stroke=\"#9CA3AF\"\n              strokeWidth={1.5}\n              clipPath={`url(#${clipPathId})`}\n            />\n          );\n        })}\n\n        {/* Strands - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const strandRadius = strand.isActive ? 5 : 3.5;\n          const strokeWidth = strand.isActive ? 2.5 : 1.5;\n\n          // Color based on whether it's top or bottom strand\n          const baseColor = strand.isTop ? '#2563EB' : '#059669'; // Blue for top, green for bottom\n          const darkColor = strand.isTop ? '#1E40AF' : '#047857';\n          const fillColor = strand.isActive ? baseColor : '#D1D5DB';\n          const strokeColor = strand.isHighlighted ? '#3B82F6' : (strand.isActive ? darkColor : '#9CA3AF');\n\n          const cx = padding + strand.displayX;\n          const cy = padding + strand.displayY;\n\n          // Render different shapes based on strand size\n          // 3/8\" = diamonds, 1/2\" = X marks, 0.6\" = circles (regardless of top/bottom)\n\n          if (strand.size === '3/8') {\n            // Diamond shape for 3/8\" strands\n            const diamondSize = strand.isActive ? 7 : 5;\n            const points = `${cx},${cy - diamondSize} ${cx + diamondSize},${cy} ${cx},${cy + diamondSize} ${cx - diamondSize},${cy}`;\n            return (\n              <Polygon\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                points={points}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          } else if (strand.size === '1/2') {\n            // X mark for 1/2\" strands\n            const xSize = strand.isActive ? 6 : 4;\n            return (\n              <React.Fragment key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}>\n                <Line\n                  x1={cx - xSize}\n                  y1={cy - xSize}\n                  x2={cx + xSize}\n                  y2={cy + xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n                <Line\n                  x1={cx - xSize}\n                  y1={cy + xSize}\n                  x2={cx + xSize}\n                  y2={cy - xSize}\n                  stroke={strokeColor}\n                  strokeWidth={strokeWidth + 0.5}\n                />\n              </React.Fragment>\n            );\n          } else {\n            // Circle for 0.6\" strands (or default)\n            return (\n              <Circle\n                key={`strand-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n                cx={cx}\n                cy={cy}\n                r={strandRadius}\n                fill={fillColor}\n                stroke={strokeColor}\n                strokeWidth={strokeWidth}\n              />\n            );\n          }\n        })}\n\n        {/* Strand labels - Show when there are strand coordinates provided */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && visibleStrands.map((strand) => {\n          const fontSize = strand.isActive ? 12 : 10;\n          const fontWeight = strand.isActive ? \"bold\" : \"normal\";\n          const fillColor = strand.isActive ? \"#1F2937\" : \"#9CA3AF\";\n\n          return (\n            <SvgText\n              key={`label-${strand.id}-${strand.isTop ? 'top' : 'bottom'}`}\n              x={padding + strand.displayX}\n              y={padding + strand.displayY - (strand.isActive ? 12 : 10)}\n              fontSize={fontSize}\n              fill={fillColor}\n              fontWeight={fontWeight}\n              textAnchor=\"middle\"\n            >\n              {strand.isTop ? `T${strand.id}` : `B${strand.id}`}\n            </SvgText>\n          );\n        })}\n\n        {/* E1/E2 slippage values below strands */}\n        {showSlippageValues && visibleStrands.map((strand) => {\n          const slippage = slippages.find(s => s.strandId === `S${strand.id}`);\n          if (!slippage) return null;\n\n          return (\n            <React.Fragment key={`slippage-${strand.id}`}>\n              {/* E1 (Left slippage) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={padding + displayHeight + 25}\n                fontSize={12}\n                fontWeight=\"600\"\n                fill={slippage.leftExceedsOne ? '#EF4444' : '#10B981'}\n                textAnchor=\"middle\"\n              >\n                E1: {slippage.leftSlippage}\"\n              </SvgText>\n\n              {/* E2 (Right slippage) */}\n              <SvgText\n                x={padding + strand.displayX}\n                y={padding + displayHeight + 40}\n                fontSize={12}\n                fontWeight=\"600\"\n                fill={slippage.rightExceedsOne ? '#EF4444' : '#10B981'}\n                textAnchor=\"middle\"\n              >\n                E2: {slippage.rightSlippage}\"\n              </SvgText>\n            </React.Fragment>\n          );\n        })}\n\n        {/* Legend inside SVG - only show if strands are visible */}\n        {(strandCoordinates || bottomStrandSizes || topStrandCoordinates) && (() => {\n          const legendScale = scale / 10;\n          const baseSize = 16 * legendScale; // Increased from 12\n          const spacing = 70 * legendScale; // Increased from 60\n          const symbolSize = 8 * legendScale; // Increased from 6\n          const fontSize = 14 * legendScale; // Increased from 10\n          const labelGap = 5; // Gap between symbol and label text (fixed, not scaled)\n          const legendY = padding + displayHeight + (showSlippageValues ? 45 : 0) + 10;\n          const legendCenterX = svgWidth / 2;\n\n          return (\n            <G>\n              {/* Title */}\n              <SvgText\n                x={legendCenterX}\n                y={legendY + fontSize}\n                fontSize={fontSize}\n                fill=\"#374151\"\n                fontWeight=\"600\"\n                textAnchor=\"middle\"\n              >\n                Strand Size Key\n              </SvgText>\n\n              {/* Green Circle = 0.6\" */}\n              <G>\n                <Circle\n                  cx={legendCenterX - spacing}\n                  cy={legendY + baseSize * 1.5}\n                  r={symbolSize}\n                  fill=\"#059669\"\n                  stroke=\"#047857\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX - spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 0.6\"\n                </SvgText>\n              </G>\n\n              {/* Green X = 1/2\" */}\n              <G>\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 - symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 + symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <Line\n                  x1={legendCenterX - symbolSize}\n                  y1={legendY + baseSize * 1.5 + symbolSize}\n                  x2={legendCenterX + symbolSize}\n                  y2={legendY + baseSize * 1.5 - symbolSize}\n                  stroke=\"#059669\"\n                  strokeWidth={3}\n                />\n                <SvgText\n                  x={legendCenterX + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 1/2\"\n                </SvgText>\n              </G>\n\n              {/* Blue Diamond = 3/8\" */}\n              <G>\n                <Polygon\n                  points={`${legendCenterX + spacing},${legendY + baseSize * 1.5 - symbolSize} ${legendCenterX + spacing + symbolSize},${legendY + baseSize * 1.5} ${legendCenterX + spacing},${legendY + baseSize * 1.5 + symbolSize} ${legendCenterX + spacing - symbolSize},${legendY + baseSize * 1.5}`}\n                  fill=\"#2563EB\"\n                  stroke=\"#1E40AF\"\n                  strokeWidth={2.5}\n                />\n                <SvgText\n                  x={legendCenterX + spacing + symbolSize + labelGap}\n                  y={legendY + baseSize * 1.5 + 4}\n                  fontSize={fontSize * 0.9}\n                  fill=\"#1F2937\"\n                >\n                  = 3/8\"\n                </SvgText>\n              </G>\n            </G>\n          );\n        })()}\n      </Svg>\n    </View>\n  );\n}\n","import React, { useState, useMemo } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  ScrollView,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useStrandPatternStore } from \"../state/strandPatternStore\";\nimport CrossSection8048 from \"../components/CrossSection8048\";\nimport CrossSection1048 from \"../components/CrossSection1048\";\nimport CrossSection1247 from \"../components/CrossSection1247\";\nimport CrossSection1250 from \"../components/CrossSection1250\";\nimport CrossSection1648 from \"../components/CrossSection1648\";\nimport CrossSection1650 from \"../components/CrossSection1650\";\n\ntype SlippageIdentifierScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"SlippageIdentifier\"\n>;\ntype SlippageIdentifierScreenRouteProp = RouteProp<\n  RootStackParamList,\n  \"SlippageIdentifier\"\n>;\n\ninterface Props {\n  navigation: SlippageIdentifierScreenNavigationProp;\n  route: SlippageIdentifierScreenRouteProp;\n}\n\ninterface StrandSlippage {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n  size?: '3/8' | '1/2' | '0.6'; // Strand size from pattern\n}\n\nexport default function SlippageIdentifierScreen({ navigation, route }: Props) {\n  const insets = useSafeAreaInsets();\n  const { config } = route.params;\n  const { customPatterns } = useStrandPatternStore();\n\n  // Get the selected strand patterns (bottom and optionally top)\n  const selectedPattern = customPatterns.find(p => p.id === config.strandPattern);\n  const selectedTopPattern = config.topStrandPattern\n    ? customPatterns.find(p => p.id === config.topStrandPattern)\n    : undefined;\n\n  // Calculate active strands based on product width and product side\n  const activeStrandIndices = useMemo(() => {\n    if (!selectedPattern || !selectedPattern.strandCoordinates || !config.productWidth || !config.productSide) {\n      // No coordinates, width, or product side provided - all strands are active\n      return null;\n    }\n\n    const { strandCoordinates } = selectedPattern;\n    const { productWidth, productSide } = config;\n\n    // The x coordinates are already positions in the full product (0\" to 48\")\n    // Strands are at x=2\" to x=46\" within the 48\" product\n    const minX = Math.min(...strandCoordinates.map(c => c.x));\n    const maxX = Math.max(...strandCoordinates.map(c => c.x));\n    const fullProductWidth = maxX + 2; // Rightmost strand + 2\" concrete cover\n\n    console.log('[SlippageIdentifier] Calculating active strands:');\n    console.log('  Strand positions:', `x=${minX}\" to x=${maxX}\"`);\n    console.log('  Full product width:', fullProductWidth);\n    console.log('  Cut product width:', productWidth);\n    console.log('  Product side:', productSide);\n    console.log('  Total strands:', strandCoordinates.length);\n\n    // Filter strands based on which side to keep\n    const activeIndices: number[] = [];\n    strandCoordinates.forEach((coord, index) => {\n      let isActive = false;\n\n      if (productSide === 'L1') {\n        // L1 is kept (left side) - keep strands from 0 to productWidth\n        // Keep strands where x <= productWidth\n        isActive = coord.x <= productWidth;\n        console.log(`  Strand ${index + 1} at x=${coord.x}\": ${isActive ? 'ACTIVE' : 'inactive'} (keeping 0-${productWidth}\")`);\n      } else if (productSide === 'L2') {\n        // L2 is kept (right side) - keep strands from (fullProductWidth - productWidth) to fullProductWidth\n        const cutPosition = fullProductWidth - productWidth;\n        isActive = coord.x >= cutPosition;\n        console.log(`  Strand ${index + 1} at x=${coord.x}\": ${isActive ? 'ACTIVE' : 'inactive'} (keeping ${cutPosition}-${fullProductWidth}\")`);\n      }\n\n      if (isActive) {\n        activeIndices.push(index);\n      }\n    });\n\n    console.log('[SlippageIdentifier] Active strand count:', activeIndices.length);\n    console.log('[SlippageIdentifier] Active strand indices:', activeIndices);\n\n    return activeIndices;\n  }, [selectedPattern, config.productWidth, config.productSide]);\n\n  // Calculate total strand count and initialize fields\n  const initialSlippages = useMemo(() => {\n    const strands: StrandSlippage[] = [];\n\n    // Add bottom strands\n    if (selectedPattern) {\n      const totalCount = selectedPattern.strand_3_8 + selectedPattern.strand_1_2 + selectedPattern.strand_0_6;\n\n      // Determine which strands are active based on activeStrandIndices\n      let activeStrands: number[];\n\n      if (activeStrandIndices === null) {\n        // No filtering - all strands are active\n        activeStrands = Array.from({ length: totalCount }, (_, i) => i + 1);\n      } else {\n        // Convert 0-based indices to 1-based strand numbers\n        activeStrands = activeStrandIndices.map(idx => idx + 1);\n      }\n\n      // Create array of strands with their sizes - only for active strands\n      for (const strandNum of activeStrands) {\n        const strandSize = selectedPattern.strandSizes?.[strandNum - 1];\n        strands.push({\n          strandId: `B${strandNum}`, // B prefix for bottom strands\n          leftSlippage: \"0\",\n          rightSlippage: \"0\",\n          leftExceedsOne: false,\n          rightExceedsOne: false,\n          size: strandSize,\n        });\n      }\n    }\n\n    // Add top strands\n    if (selectedTopPattern) {\n      const totalTopCount = selectedTopPattern.strand_3_8 + selectedTopPattern.strand_1_2 + selectedTopPattern.strand_0_6;\n\n      // For top strands, use all strands (no cut-width filtering for now)\n      // TODO: Implement cut-width filtering for top strands if needed\n      for (let i = 1; i <= totalTopCount; i++) {\n        const strandSize = selectedTopPattern.strandSizes?.[i - 1];\n        strands.push({\n          strandId: `T${i}`, // T prefix for top strands\n          leftSlippage: \"0\",\n          rightSlippage: \"0\",\n          leftExceedsOne: false,\n          rightExceedsOne: false,\n          size: strandSize,\n        });\n      }\n    }\n\n    return strands;\n  }, [selectedPattern, selectedTopPattern, activeStrandIndices]);\n\n  const [slippages, setSlippages] = useState<StrandSlippage[]>(initialSlippages);\n\n  const updateSlippage = (\n    strandId: string,\n    side: \"left\" | \"right\",\n    value: string\n  ) => {\n    setSlippages((prev) =>\n      prev.map((s) =>\n        s.strandId === strandId\n          ? {\n              ...s,\n              [side === \"left\" ? \"leftSlippage\" : \"rightSlippage\"]: value,\n            }\n          : s\n      )\n    );\n  };\n\n  const handleFocus = (\n    strandId: string,\n    side: \"left\" | \"right\"\n  ) => {\n    // Clear \"0\" when user focuses on the field\n    setSlippages((prev) =>\n      prev.map((s) => {\n        if (s.strandId === strandId) {\n          const currentValue = side === \"left\" ? s.leftSlippage : s.rightSlippage;\n          if (currentValue === \"0\") {\n            return {\n              ...s,\n              [side === \"left\" ? \"leftSlippage\" : \"rightSlippage\"]: \"\",\n            };\n          }\n        }\n        return s;\n      })\n    );\n  };\n\n  const handleBlur = (\n    strandId: string,\n    side: \"left\" | \"right\"\n  ) => {\n    // Revert to \"0\" if empty when user leaves the field\n    setSlippages((prev) =>\n      prev.map((s) => {\n        if (s.strandId === strandId) {\n          const currentValue = side === \"left\" ? s.leftSlippage : s.rightSlippage;\n          if (currentValue.trim() === \"\") {\n            return {\n              ...s,\n              [side === \"left\" ? \"leftSlippage\" : \"rightSlippage\"]: \"0\",\n            };\n          }\n        }\n        return s;\n      })\n    );\n  };\n\n  const toggleExceedsOne = (\n    strandId: string,\n    side: \"left\" | \"right\"\n  ) => {\n    setSlippages((prev) =>\n      prev.map((s) =>\n        s.strandId === strandId\n          ? {\n              ...s,\n              [side === \"left\" ? \"leftExceedsOne\" : \"rightExceedsOne\"]: !s[side === \"left\" ? \"leftExceedsOne\" : \"rightExceedsOne\"],\n            }\n          : s\n      )\n    );\n  };\n\n\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-white\"\n      style={{ paddingTop: insets.top }}\n    >\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: 40 }}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        {/* Header */}\n        <View className=\"px-6 py-4 border-b border-gray-200\">\n          <Text className=\"text-gray-900 text-2xl font-bold\">\n            Slippage Identifier\n          </Text>\n          <Text className=\"text-gray-600 text-sm mt-1\">\n            Enter slippage values at each strand end\n          </Text>\n        </View>\n\n        {/* Cross-section diagram */}\n        <View className=\"items-center my-4\" style={{ overflow: 'visible', minHeight: 200 }}>\n          <Text className=\"text-gray-700 text-xs font-semibold mb-2\">\n            Cross Section - {config.productType} Hollow Core Plank\n          </Text>\n          {config.productType === '1048' ? (\n            <CrossSection1048\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1247' ? (\n            <CrossSection1247\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1250' ? (\n            <CrossSection1250\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1648' ? (\n            <CrossSection1648\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1650' ? (\n            <CrossSection1650\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : (\n            <CrossSection8048\n              scale={6}\n              activeStrands={activeStrandIndices !== null ? activeStrandIndices.map(i => i + 1) : undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          )}\n        </View>\n\n        {/* Cut-width info banner */}\n        {activeStrandIndices !== null && selectedPattern && config.productSide && (\n          <View className=\"px-6 mb-3\">\n            <View className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n              <View className=\"flex-row items-start\">\n                <Ionicons name=\"cut\" size={18} color=\"#10B981\" />\n                <View className=\"flex-1 ml-2\">\n                  <Text className=\"text-green-900 font-semibold text-xs mb-0.5\">\n                    Cut-Width Product\n                  </Text>\n                  <Text className=\"text-green-800 text-xs\">\n                    {config.productWidth}\"  {config.productSide} ({config.productSide === 'L1' ? 'Left side' : 'Right side'})  {slippages.length}/{selectedPattern.strand_3_8 + selectedPattern.strand_1_2 + selectedPattern.strand_0_6} strands\n                  </Text>\n                </View>\n              </View>\n            </View>\n          </View>\n        )}\n\n        {/* Slippage inputs for each strand */}\n        <View className=\"px-6\">\n          {/* Bottom Strands Section */}\n          {slippages.some(s => s.strandId.startsWith('B')) && (\n            <>\n              <Text className=\"text-gray-900 text-base font-semibold mb-2\">\n                Bottom Strands {activeStrandIndices === null ? '' : '(Active Strands)'}\n              </Text>\n\n              {slippages.filter(s => s.strandId.startsWith('B')).map((strand, index) => (\n                <View\n                  key={strand.strandId}\n                  className=\"bg-gray-50 rounded-lg p-3 mb-2 border border-gray-200\"\n                >\n                  {/* Strand header - more compact */}\n                  <View className=\"flex-row items-center justify-between mb-2\">\n                    <View className=\"flex-row items-center\">\n                      <View className=\"bg-green-600 rounded-full w-6 h-6 items-center justify-center mr-2\">\n                        <Text className=\"text-white font-bold text-xs\">\n                          {strand.strandId.substring(1)}\n                        </Text>\n                      </View>\n                      <Text className=\"text-gray-900 font-semibold text-sm\">\n                        Bottom Strand {strand.strandId.substring(1)}\n                        {strand.size && (\n                          <Text className=\"text-gray-600 font-normal text-xs\">\n                            {' '}({strand.size}\")\n                          </Text>\n                        )}\n                      </Text>\n                    </View>\n                  </View>\n\n                  <View className=\"flex-row gap-2\">\n                    {/* End 1 */}\n                    <View className=\"flex-1\">\n                      <Text className=\"text-xs font-medium text-gray-600 mb-1\">\n                        END 1\n                      </Text>\n                      <TextInput\n                        className={`bg-white border border-gray-300 rounded-lg px-2 py-2 text-sm mb-1 ${\n                          strand.leftExceedsOne\n                            ? \"text-orange-600 font-bold\"\n                            : \"text-gray-900\"\n                        }`}\n                        placeholder=\"0.5\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        value={strand.leftExceedsOne ? \">1\\\"\" : strand.leftSlippage}\n                        onChangeText={(text) =>\n                          updateSlippage(strand.strandId, \"left\", text)\n                        }\n                        onFocus={() => handleFocus(strand.strandId, \"left\")}\n                        onBlur={() => handleBlur(strand.strandId, \"left\")}\n                        editable={!strand.leftExceedsOne}\n                        keyboardType=\"default\"\n                      />\n                      <Pressable\n                        className=\"flex-row items-center\"\n                        onPress={() => toggleExceedsOne(strand.strandId, \"left\")}\n                      >\n                        <View\n                          className={`w-4 h-4 rounded border-2 mr-1.5 items-center justify-center ${\n                            strand.leftExceedsOne\n                              ? \"bg-orange-500 border-orange-500\"\n                              : \"bg-white border-gray-300\"\n                          }`}\n                        >\n                          {strand.leftExceedsOne && (\n                            <Text className=\"text-white text-xs font-bold\"></Text>\n                          )}\n                        </View>\n                        <Text className=\"text-gray-700 text-xs\">\n                          {'>1\"'}\n                        </Text>\n                      </Pressable>\n                    </View>\n\n                    {/* End 2 */}\n                    <View className=\"flex-1\">\n                      <Text className=\"text-xs font-medium text-gray-600 mb-1\">\n                        END 2\n                      </Text>\n                      <TextInput\n                        className={`bg-white border border-gray-300 rounded-lg px-2 py-2 text-sm mb-1 ${\n                          strand.rightExceedsOne\n                            ? \"text-orange-600 font-bold\"\n                            : \"text-gray-900\"\n                        }`}\n                        placeholder=\"0.5\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        value={strand.rightExceedsOne ? \">1\\\"\" : strand.rightSlippage}\n                        onChangeText={(text) =>\n                          updateSlippage(strand.strandId, \"right\", text)\n                        }\n                        onFocus={() => handleFocus(strand.strandId, \"right\")}\n                        onBlur={() => handleBlur(strand.strandId, \"right\")}\n                        editable={!strand.rightExceedsOne}\n                        keyboardType=\"default\"\n                      />\n                      <Pressable\n                        className=\"flex-row items-center\"\n                        onPress={() => toggleExceedsOne(strand.strandId, \"right\")}\n                      >\n                        <View\n                          className={`w-4 h-4 rounded border-2 mr-1.5 items-center justify-center ${\n                            strand.rightExceedsOne\n                              ? \"bg-orange-500 border-orange-500\"\n                              : \"bg-white border-gray-300\"\n                          }`}\n                        >\n                          {strand.rightExceedsOne && (\n                            <Text className=\"text-white text-xs font-bold\"></Text>\n                          )}\n                        </View>\n                        <Text className=\"text-gray-700 text-xs\">\n                          {'>1\"'}\n                        </Text>\n                      </Pressable>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </>\n          )}\n\n          {/* Top Strands Section */}\n          {slippages.some(s => s.strandId.startsWith('T')) && (\n            <>\n              <Text className=\"text-gray-900 text-base font-semibold mb-2 mt-4\">\n                Top Strands\n              </Text>\n\n              {slippages.filter(s => s.strandId.startsWith('T')).map((strand, index) => (\n                <View\n                  key={strand.strandId}\n                  className=\"bg-gray-50 rounded-lg p-3 mb-2 border border-gray-200\"\n                >\n                  {/* Strand header - more compact */}\n                  <View className=\"flex-row items-center justify-between mb-2\">\n                    <View className=\"flex-row items-center\">\n                      <View className=\"bg-blue-600 rounded-full w-6 h-6 items-center justify-center mr-2\">\n                        <Text className=\"text-white font-bold text-xs\">\n                          {strand.strandId.substring(1)}\n                        </Text>\n                      </View>\n                      <Text className=\"text-gray-900 font-semibold text-sm\">\n                        Top Strand {strand.strandId.substring(1)}\n                        {strand.size && (\n                          <Text className=\"text-gray-600 font-normal text-xs\">\n                            {' '}({strand.size}\")\n                          </Text>\n                        )}\n                      </Text>\n                    </View>\n                  </View>\n\n                  <View className=\"flex-row gap-2\">\n                    {/* End 1 */}\n                    <View className=\"flex-1\">\n                      <Text className=\"text-xs font-medium text-gray-600 mb-1\">\n                        END 1\n                      </Text>\n                      <TextInput\n                        className={`bg-white border border-gray-300 rounded-lg px-2 py-2 text-sm mb-1 ${\n                          strand.leftExceedsOne\n                            ? \"text-orange-600 font-bold\"\n                            : \"text-gray-900\"\n                        }`}\n                        placeholder=\"0.5\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        value={strand.leftExceedsOne ? \">1\\\"\" : strand.leftSlippage}\n                        onChangeText={(text) =>\n                          updateSlippage(strand.strandId, \"left\", text)\n                        }\n                        onFocus={() => handleFocus(strand.strandId, \"left\")}\n                        onBlur={() => handleBlur(strand.strandId, \"left\")}\n                        editable={!strand.leftExceedsOne}\n                        keyboardType=\"default\"\n                      />\n                      <Pressable\n                        className=\"flex-row items-center\"\n                        onPress={() => toggleExceedsOne(strand.strandId, \"left\")}\n                      >\n                        <View\n                          className={`w-4 h-4 rounded border-2 mr-1.5 items-center justify-center ${\n                            strand.leftExceedsOne\n                              ? \"bg-orange-500 border-orange-500\"\n                              : \"bg-white border-gray-300\"\n                          }`}\n                        >\n                          {strand.leftExceedsOne && (\n                            <Text className=\"text-white text-xs font-bold\"></Text>\n                          )}\n                        </View>\n                        <Text className=\"text-gray-700 text-xs\">\n                          {'>1\"'}\n                        </Text>\n                      </Pressable>\n                    </View>\n\n                    {/* End 2 */}\n                    <View className=\"flex-1\">\n                      <Text className=\"text-xs font-medium text-gray-600 mb-1\">\n                        END 2\n                      </Text>\n                      <TextInput\n                        className={`bg-white border border-gray-300 rounded-lg px-2 py-2 text-sm mb-1 ${\n                          strand.rightExceedsOne\n                            ? \"text-orange-600 font-bold\"\n                            : \"text-gray-900\"\n                        }`}\n                        placeholder=\"0.5\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        value={strand.rightExceedsOne ? \">1\\\"\" : strand.rightSlippage}\n                        onChangeText={(text) =>\n                          updateSlippage(strand.strandId, \"right\", text)\n                        }\n                        onFocus={() => handleFocus(strand.strandId, \"right\")}\n                        onBlur={() => handleBlur(strand.strandId, \"right\")}\n                        editable={!strand.rightExceedsOne}\n                        keyboardType=\"default\"\n                      />\n                      <Pressable\n                        className=\"flex-row items-center\"\n                        onPress={() => toggleExceedsOne(strand.strandId, \"right\")}\n                      >\n                        <View\n                          className={`w-4 h-4 rounded border-2 mr-1.5 items-center justify-center ${\n                            strand.rightExceedsOne\n                              ? \"bg-orange-500 border-orange-500\"\n                              : \"bg-white border-gray-300\"\n                          }`}\n                        >\n                          {strand.rightExceedsOne && (\n                            <Text className=\"text-white text-xs font-bold\"></Text>\n                          )}\n                        </View>\n                        <Text className=\"text-gray-700 text-xs\">\n                          {'>1\"'}\n                        </Text>\n                      </Pressable>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </>\n          )}\n\n          {/* Calculate button */}\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-3 items-center active:bg-blue-600 mt-2\"\n            onPress={() => navigation.navigate(\"SlippageSummary\", { slippages, config })}\n          >\n            <Text className=\"text-white text-sm font-semibold\">\n              Calculate Results\n            </Text>\n          </Pressable>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { FirebaseSync } from '../services/firebaseSync';\nimport { useAuthStore } from './authStore';\n\nexport interface SlippageData {\n  strandId: string;\n  leftSlippage: string;\n  rightSlippage: string;\n  leftExceedsOne: boolean;\n  rightExceedsOne: boolean;\n  strandSource?: 'bottom' | 'top'; // Which pattern this strand comes from\n  size?: '3/8' | '1/2' | '0.6'; // Strand size from pattern\n}\n\nexport interface SlippageConfig {\n  projectName?: string;\n  projectNumber?: string;\n  markNumber?: string;\n  idNumber?: string;\n  span?: number;\n  pourDate?: string;\n  productType: string;\n  strandPattern: string;\n  topStrandPattern?: string;\n  productWidth?: number;  // For cut-width products\n  productSide?: 'L1' | 'L2';  // Which side is the product side (keeper side)\n}\n\nexport interface SlippageRecord {\n  id: string;\n  timestamp: number;\n  slippages: SlippageData[];\n  config: SlippageConfig;\n  createdBy: string; // Username of the person who created it\n  userId: string; // Firebase user ID for filtering\n}\n\nexport interface PublishedSlippageRecord extends SlippageRecord {\n  publishedAt: number;\n  publishedBy: string; // Username of the person who published it\n}\n\ninterface SlippageHistoryState {\n  userRecords: SlippageRecord[];\n  publishedRecords: PublishedSlippageRecord[];\n  isLoading: boolean;\n  isSyncing: boolean;\n\n  // User records actions\n  addUserRecord: (record: SlippageRecord) => Promise<void>;\n  updateUserRecord: (id: string, updates: Partial<SlippageRecord>) => void;\n  removeUserRecord: (id: string) => Promise<void>;\n  clearUserRecords: () => void;\n\n  // Published records actions\n  publishRecord: (record: SlippageRecord, publishedBy: string) => Promise<void>;\n  removePublishedRecord: (id: string) => Promise<void>;\n  clearPublishedRecords: () => void;\n\n  // Firebase sync actions\n  syncUserRecords: () => Promise<void>;\n  syncPublishedRecords: () => Promise<void>;\n  subscribeToPublishedRecords: () => () => void;\n}\n\n// Firebase sync instances\nconst userRecordsSync = new FirebaseSync<SlippageRecord>('userSlippageRecords');\nconst publishedRecordsSync = new FirebaseSync<PublishedSlippageRecord>('publishedSlippageRecords');\n\nexport const useSlippageHistoryStore = create<SlippageHistoryState>()(\n  persist(\n    (set, get) => ({\n      userRecords: [],\n      publishedRecords: [],\n      isLoading: false,\n      isSyncing: false,\n\n      addUserRecord: async (record) => {\n        console.log('[SlippageHistoryStore] Adding user record:', {\n          id: record.id,\n          userId: record.userId,\n          timestamp: record.timestamp,\n          hasSlippages: record.slippages?.length > 0,\n        });\n\n        // Add to local state\n        set((state) => ({\n          userRecords: [record, ...state.userRecords].slice(0, 100),\n        }));\n\n        // Sync to Firebase\n        try {\n          console.log('[SlippageHistoryStore] Syncing to Firebase...');\n          await userRecordsSync.set(record.id, record);\n          console.log('[SlippageHistoryStore] Successfully synced to Firebase');\n        } catch (error) {\n          console.error('[SlippageHistoryStore] Failed to sync user record to Firebase:', error);\n          // Show more detailed error information\n          if (error instanceof Error) {\n            console.error('[SlippageHistoryStore] Error message:', error.message);\n            console.error('[SlippageHistoryStore] Error stack:', error.stack);\n          }\n        }\n      },\n\n      updateUserRecord: (id, updates) =>\n        set((state) => ({\n          userRecords: state.userRecords.map((record) =>\n            record.id === id ? { ...record, ...updates } : record\n          ),\n        })),\n\n      removeUserRecord: async (id) => {\n        // Remove from local state\n        set((state) => ({\n          userRecords: state.userRecords.filter((record) => record.id !== id),\n        }));\n\n        // Remove from Firebase\n        try {\n          await userRecordsSync.delete(id);\n        } catch (error) {\n          console.error('Failed to delete user record from Firebase:', error);\n        }\n      },\n\n      clearUserRecords: () => set({ userRecords: [] }),\n\n      publishRecord: async (record, publishedBy) => {\n        const publishedRecord: PublishedSlippageRecord = {\n          ...record,\n          publishedAt: Date.now(),\n          publishedBy,\n        };\n\n        // Add to local state\n        set((state) => ({\n          publishedRecords: [publishedRecord, ...state.publishedRecords].slice(0, 200),\n        }));\n\n        // Sync to Firebase\n        try {\n          await publishedRecordsSync.set(publishedRecord.id, publishedRecord);\n        } catch (error) {\n          console.error('Failed to publish record to Firebase:', error);\n        }\n      },\n\n      removePublishedRecord: async (id) => {\n        // Remove from local state\n        set((state) => ({\n          publishedRecords: state.publishedRecords.filter((record) => record.id !== id),\n        }));\n\n        // Remove from Firebase\n        try {\n          await publishedRecordsSync.delete(id);\n        } catch (error) {\n          console.error('Failed to delete published record from Firebase:', error);\n        }\n      },\n\n      clearPublishedRecords: () => set({ publishedRecords: [] }),\n\n      // Sync user records from Firebase (filtered by current user)\n      syncUserRecords: async () => {\n        const currentUser = useAuthStore.getState().currentUser;\n        console.log('[SlippageHistoryStore] syncUserRecords called. Current user:', currentUser?.email);\n        console.log('[SlippageHistoryStore] Current user FULL object:', JSON.stringify(currentUser, null, 2));\n        console.log('[SlippageHistoryStore] Current user ID specifically:', currentUser?.id);\n        console.log('[SlippageHistoryStore] Type of user ID:', typeof currentUser?.id);\n\n        if (!currentUser) {\n          console.log('[SlippageHistoryStore] No current user, skipping sync');\n          return;\n        }\n\n        set({ isSyncing: true });\n        try {\n          console.log('[SlippageHistoryStore] Fetching all records from Firebase...');\n          const allRecords = await userRecordsSync.fetchAll();\n          console.log('[SlippageHistoryStore] Fetched', allRecords.length, 'total records');\n\n          // Log sample record to see what userId values look like\n          if (allRecords.length > 0) {\n            console.log('[SlippageHistoryStore] Sample record:', JSON.stringify(allRecords[0], null, 2));\n          }\n\n          // Filter to only show current user's records\n          const userRecords = allRecords.filter(r => r.userId === currentUser.id);\n          console.log('[SlippageHistoryStore] Filtered to', userRecords.length, 'user records for userId:', currentUser.id);\n\n          set({ userRecords, isSyncing: false });\n        } catch (error) {\n          console.error('[SlippageHistoryStore] Failed to sync user records from Firebase:', error);\n          if (error instanceof Error) {\n            console.error('[SlippageHistoryStore] Error message:', error.message);\n          }\n          set({ isSyncing: false });\n        }\n      },\n\n      // Sync published records from Firebase (available to all users)\n      syncPublishedRecords: async () => {\n        set({ isSyncing: true });\n        try {\n          const publishedRecords = await publishedRecordsSync.fetchAll();\n          set({ publishedRecords, isSyncing: false });\n        } catch (error) {\n          console.error('Failed to sync published records from Firebase:', error);\n          set({ isSyncing: false });\n        }\n      },\n\n      // Subscribe to real-time updates for published records\n      subscribeToPublishedRecords: () => {\n        return publishedRecordsSync.subscribe((publishedRecords) => {\n          set({ publishedRecords });\n        });\n      },\n    }),\n    {\n      name: 'slippage-history-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n","import * as Print from 'expo-print';\nimport * as Sharing from 'expo-sharing';\nimport * as FileSystem from 'expo-file-system';\nimport { Platform } from 'react-native';\nimport { SlippageData, SlippageConfig } from '../state/slippageHistoryStore';\nimport { parseMeasurementInput, decimalToFraction, formatSpanForPDF } from './cn';\n\n// Web-only PDF generation using jsPDF\nlet jsPDF: any = null;\nlet html2canvas: any = null;\nlet librariesLoading: Promise<void> | null = null;\n\n// Dynamically import jsPDF and html2canvas only on web\nif (Platform.OS === 'web') {\n  librariesLoading = (async () => {\n    try {\n      const jsPDFModule = await import('jspdf');\n      jsPDF = jsPDFModule.jsPDF;\n      console.log('[PDF Generator] jsPDF loaded successfully');\n\n      const html2canvasModule = await import('html2canvas');\n      html2canvas = html2canvasModule.default;\n      console.log('[PDF Generator] html2canvas loaded successfully');\n    } catch (err) {\n      console.error('[PDF Generator] Failed to load PDF libraries:', err);\n      throw err;\n    }\n  })();\n}\n\ninterface PDFGenerationParams {\n  slippages: SlippageData[];\n  config: SlippageConfig;\n  slippageStats: {\n    totalSlippage: number;\n    totalSlippageEnd1: number;\n    totalSlippageEnd2: number;\n    totalAvgSlippage: number;\n    totalAvgSlippageEnd1: number;\n    totalAvgSlippageEnd2: number;\n    anyValueExceeds: boolean;\n    anyEnd1Exceeds: boolean;\n    anyEnd2Exceeds: boolean;\n  };\n  userEmail: string;\n  userName: string;\n  crossSectionImageUri?: string;\n  getStrandSize?: (strandId: string) => string;\n  strandPatternName?: string;\n}\n\nexport async function generateSlippagePDF(params: PDFGenerationParams): Promise<string | null> {\n  const {\n    slippages,\n    config,\n    slippageStats,\n    userEmail,\n    userName,\n    crossSectionImageUri,\n    getStrandSize,\n    strandPatternName,\n  } = params;\n\n  try {\n    // Separate bottom and top strand slippages\n    const bottomStrands = slippages.filter(s => s.strandId.startsWith('B'));\n    const topStrands = slippages.filter(s => s.strandId.startsWith('T'));\n\n    // Calculate bottom strand statistics\n    const bottomStats = (() => {\n      const values = bottomStrands.map(s => {\n        const e1Raw = parseMeasurementInput(s.leftSlippage);\n        const e2Raw = parseMeasurementInput(s.rightSlippage);\n        const e1 = s.leftExceedsOne ? 1.0 : (e1Raw ?? 0);\n        const e2 = s.rightExceedsOne ? 1.0 : (e2Raw ?? 0);\n        return {\n          e1, e2,\n          e1Exceeds: s.leftExceedsOne,\n          e2Exceeds: s.rightExceedsOne,\n          total: e1 + e2,\n        };\n      });\n\n      const totalE1 = values.reduce((sum, v) => sum + v.e1, 0);\n      const totalE2 = values.reduce((sum, v) => sum + v.e2, 0);\n      const totalBoth = values.reduce((sum, v) => sum + v.total, 0);\n      const count = values.length;\n      const anyE1Exceeds = values.some(v => v.e1Exceeds);\n      const anyE2Exceeds = values.some(v => v.e2Exceeds);\n      const anyExceeds = anyE1Exceeds || anyE2Exceeds;\n\n      return {\n        totalE1,\n        totalE2,\n        totalBoth,\n        avgE1: count > 0 ? totalE1 / count : 0,\n        avgE2: count > 0 ? totalE2 / count : 0,\n        avgBoth: count > 0 ? totalBoth / count : 0,\n        anyE1Exceeds,\n        anyE2Exceeds,\n        anyExceeds,\n      };\n    })();\n\n    // Calculate top strand statistics\n    const topStats = (() => {\n      const values = topStrands.map(s => {\n        const e1Raw = parseMeasurementInput(s.leftSlippage);\n        const e2Raw = parseMeasurementInput(s.rightSlippage);\n        const e1 = s.leftExceedsOne ? 1.0 : (e1Raw ?? 0);\n        const e2 = s.rightExceedsOne ? 1.0 : (e2Raw ?? 0);\n        return {\n          e1, e2,\n          e1Exceeds: s.leftExceedsOne,\n          e2Exceeds: s.rightExceedsOne,\n          total: e1 + e2,\n        };\n      });\n\n      const totalE1 = values.reduce((sum, v) => sum + v.e1, 0);\n      const totalE2 = values.reduce((sum, v) => sum + v.e2, 0);\n      const totalBoth = values.reduce((sum, v) => sum + v.total, 0);\n      const count = values.length;\n      const anyE1Exceeds = values.some(v => v.e1Exceeds);\n      const anyE2Exceeds = values.some(v => v.e2Exceeds);\n      const anyExceeds = anyE1Exceeds || anyE2Exceeds;\n\n      return {\n        totalE1,\n        totalE2,\n        totalBoth,\n        avgE1: count > 0 ? totalE1 / count : 0,\n        avgE2: count > 0 ? totalE2 / count : 0,\n        avgBoth: count > 0 ? totalBoth / count : 0,\n        anyE1Exceeds,\n        anyE2Exceeds,\n        anyExceeds,\n      };\n    })();\n    // Convert image URI to base64 data URI if provided\n    let base64Image: string | undefined;\n    const isWebEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n    if (crossSectionImageUri) {\n      try {\n        console.log('[PDF Generator] Converting image to base64:', crossSectionImageUri);\n\n        if (isWebEnv) {\n          // On web, the URI is already a data URI or blob URL from captureRef\n          // Check if it's already a data URI\n          if (crossSectionImageUri.startsWith('data:')) {\n            base64Image = crossSectionImageUri;\n            console.log('[PDF Generator] Using data URI directly for web');\n          } else if (crossSectionImageUri.startsWith('blob:')) {\n            // Convert blob URL to data URI\n            console.log('[PDF Generator] Converting blob URL to data URI...');\n            const response = await fetch(crossSectionImageUri);\n            const blob = await response.blob();\n            const reader = new FileReader();\n            base64Image = await new Promise((resolve) => {\n              reader.onloadend = () => resolve(reader.result as string);\n              reader.readAsDataURL(blob);\n            });\n            console.log('[PDF Generator] Blob converted to data URI');\n          } else {\n            console.warn('[PDF Generator] Unknown URI format on web:', crossSectionImageUri);\n            base64Image = crossSectionImageUri; // Try to use it anyway\n          }\n        } else {\n          // Native platform - use FileSystem\n          const fileInfo = await FileSystem.getInfoAsync(crossSectionImageUri);\n          console.log('[PDF Generator] Image file info:', fileInfo);\n\n          if (!fileInfo.exists) {\n            console.error('[PDF Generator] Image file does not exist');\n            throw new Error('Image file does not exist');\n          }\n\n          // Read the image as base64\n          const base64 = await FileSystem.readAsStringAsync(crossSectionImageUri, {\n            encoding: FileSystem.EncodingType.Base64,\n          });\n\n          // More aggressive size limits to prevent C++ exceptions\n          const maxSizeBytes = 2 * 1024 * 1024; // 2MB limit (reduced from 5MB)\n          if (base64.length > maxSizeBytes) {\n            console.warn('[PDF Generator] Image too large (>2MB), skipping to prevent errors');\n            base64Image = undefined;\n          } else {\n            // Validate base64 string\n            if (!base64 || base64.length === 0) {\n              console.warn('[PDF Generator] Invalid base64 data, skipping image');\n              base64Image = undefined;\n            } else {\n              base64Image = `data:image/png;base64,${base64}`;\n              console.log('[PDF Generator] Image converted successfully, size:', Math.round(base64.length / 1024), 'KB');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('[PDF Generator] Error converting image to base64:', error);\n        // Continue without the image if conversion fails\n        base64Image = undefined;\n      }\n    } else {\n      console.log('[PDF Generator] No cross-section image provided');\n    }\n\n    // Build HTML content for the PDF\n    const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <style>\n            @page {\n              size: letter;\n              margin: 0;\n            }\n\n            * {\n              margin: 0;\n              padding: 0;\n              box-sizing: border-box;\n            }\n\n            body, .pdf-container {\n              font-family: 'Helvetica Neue', Arial, sans-serif;\n              padding: 12px 18px;\n              color: #1f2937;\n              line-height: 1.3;\n              background-color: #ffffff;\n              font-size: 9px;\n              word-spacing: 0.2em;\n              letter-spacing: 0.02em;\n              max-width: 612px;\n              overflow: hidden;\n            }\n\n            /* Responsive font and layout sizing */\n            @media screen and (min-width: 768px) {\n              /* Tablets - slightly larger text */\n              body, .pdf-container {\n                font-size: 10px;\n                padding: 16px 24px;\n              }\n              h1 {\n                font-size: 16px !important;\n              }\n              h2 {\n                font-size: 11px !important;\n              }\n              .strand-table th {\n                font-size: 8px !important;\n              }\n              .strand-table td {\n                font-size: 8.5px !important;\n              }\n            }\n\n            @media screen and (min-width: 1024px) {\n              /* Desktop - much larger text for readability */\n              body, .pdf-container {\n                font-size: 12px;\n                padding: 20px 30px;\n                max-width: 800px;\n              }\n              h1 {\n                font-size: 20px !important;\n              }\n              h2 {\n                font-size: 14px !important;\n              }\n              .strand-table th {\n                font-size: 10px !important;\n                padding: 5px 6px !important;\n              }\n              .strand-table td {\n                font-size: 11px !important;\n                padding: 5px 6px !important;\n              }\n              .info-label {\n                font-size: 8px !important;\n              }\n              .info-value {\n                font-size: 10px !important;\n              }\n              .stat-label {\n                font-size: 8px !important;\n              }\n              .stat-value {\n                font-size: 11px !important;\n              }\n            }\n\n            .header {\n              border-bottom: 2px solid #2563eb;\n              padding-bottom: 3px;\n              margin-bottom: 4px;\n            }\n\n            h1 {\n              font-size: 14px;\n              color: #1e40af;\n              margin-bottom: 2px;\n              line-height: 1.3;\n              letter-spacing: 0.05em;\n              word-spacing: 0.2em;\n            }\n\n            .subtitle {\n              color: #6b7280;\n              font-size: 7.5px;\n              line-height: 1.3;\n              word-spacing: 0.15em;\n              letter-spacing: 0.02em;\n            }\n\n            .section {\n              margin-bottom: 4px;\n            }\n\n            h2 {\n              font-size: 9px;\n              color: #374151;\n              margin-bottom: 2px;\n              padding-bottom: 2px;\n              border-bottom: 1px solid #e5e7eb;\n              line-height: 1.3;\n              letter-spacing: 0.05em;\n              word-spacing: 0.2em;\n            }\n\n            .info-grid {\n              display: grid;\n              grid-template-columns: repeat(4, 1fr);\n              gap: 3px;\n              margin-bottom: 3px;\n            }\n\n            .info-item {\n              padding: 3px 4px;\n              background: #f9fafb;\n              border-left: 2px solid #2563eb;\n            }\n\n            .info-label {\n              font-size: 6.5px;\n              color: #6b7280;\n              text-transform: uppercase;\n              letter-spacing: 0.08em;\n              word-spacing: 0.2em;\n              line-height: 1.3;\n              margin-bottom: 1px;\n            }\n\n            .info-value {\n              font-size: 8px;\n              color: #111827;\n              font-weight: 600;\n              margin-top: 1px;\n              line-height: 1.3;\n              letter-spacing: 0.03em;\n              word-spacing: 0.15em;\n            }\n\n            .info-value-sub {\n              font-size: 6.5px;\n              color: #6b7280;\n              font-style: italic;\n              margin-top: 1px;\n              line-height: 1.3;\n              letter-spacing: 0.02em;\n            }\n\n            ${crossSectionImageUri ? `\n            .cross-section {\n              text-align: center;\n              margin: 4px auto;\n              padding: 4px;\n              background: #ffffff;\n              border-radius: 3px;\n              border: 1px solid #e5e7eb;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n            }\n\n            .cross-section img {\n              max-width: 95%;\n              max-height: 180px;\n              height: auto;\n              border-radius: 2px;\n              display: block;\n              margin: 0 auto;\n            }\n\n            /* Responsive sizing for different devices */\n            @media screen and (min-width: 768px) {\n              /* Tablets and larger - increase cross-section size */\n              .cross-section img {\n                max-height: 300px;\n                max-width: 90%;\n              }\n            }\n\n            @media screen and (min-width: 1024px) {\n              /* Desktop - significantly larger cross-section */\n              .cross-section {\n                padding: 8px;\n              }\n              .cross-section img {\n                max-height: 500px;\n                max-width: 85%;\n              }\n            }\n\n            @media screen and (max-width: 767px) {\n              /* Mobile devices - ensure cross-section fits with legend */\n              .cross-section {\n                padding: 2px;\n                margin: 2px auto;\n              }\n              .cross-section img {\n                max-height: 180px;\n                max-width: 100%;\n              }\n            }\n            ` : ''}\n\n            .stats-grid {\n              display: grid;\n              grid-template-columns: repeat(3, 1fr);\n              gap: 3px;\n              margin-bottom: 4px;\n            }\n\n            .stat-card {\n              padding: 3px 4px;\n              background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);\n              border-radius: 4px;\n              border: 1px solid #d1d5db;\n            }\n\n            .stat-label {\n              font-size: 6px;\n              color: #4b5563;\n              text-transform: uppercase;\n              letter-spacing: 0.08em;\n              word-spacing: 0.2em;\n              font-weight: 600;\n              margin-bottom: 1px;\n              line-height: 1.3;\n            }\n\n            .stat-value {\n              font-size: 8.5px;\n              color: #1e40af;\n              font-weight: 700;\n              margin-top: 1px;\n              line-height: 1.2;\n              letter-spacing: 0.02em;\n            }\n\n            .stat-value-small {\n              font-size: 6.5px;\n              color: #6b7280;\n              margin-top: 1px;\n              font-style: italic;\n              line-height: 1.3;\n              letter-spacing: 0.01em;\n            }\n\n            .strand-table {\n              width: 100%;\n              border-collapse: separate;\n              border-spacing: 0;\n              margin-top: 3px;\n            }\n\n            .strand-table th {\n              background: #000000;\n              padding: 3px 4px;\n              text-align: left;\n              font-size: 6.5px;\n              color: #ffffff;\n              text-transform: uppercase;\n              letter-spacing: 0.08em;\n              word-spacing: 0.2em;\n              font-weight: 700;\n              border-bottom: 2px solid #000000;\n              line-height: 1.4;\n              vertical-align: middle;\n              white-space: nowrap;\n            }\n\n            .strand-table td {\n              padding: 3px 4px;\n              border-bottom: 1px solid #e5e7eb;\n              font-size: 7px;\n              line-height: 1.4;\n              vertical-align: middle;\n              letter-spacing: 0.02em;\n              word-spacing: 0.1em;\n            }\n\n            .strand-table tr:nth-child(even) {\n              background: #f9fafb;\n            }\n\n            .strand-id {\n              font-weight: 700;\n              color: #1e40af;\n            }\n\n            .strand-total {\n              font-weight: 700;\n              color: #047857;\n            }\n\n            .warning-box {\n              background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n              border-left: 3px solid #f59e0b;\n              padding: 4px 6px;\n              margin: 5px 0;\n              border-radius: 3px;\n            }\n\n            .warning-text {\n              font-size: 7.5px;\n              color: #92400e;\n              font-weight: 700;\n              line-height: 1.4;\n              letter-spacing: 0.02em;\n              word-spacing: 0.15em;\n            }\n\n            .footer {\n              margin-top: 5px;\n              padding-top: 3px;\n              border-top: 1px solid #e5e7eb;\n              font-size: 6px;\n              color: #6b7280;\n              line-height: 1.4;\n              letter-spacing: 0.02em;\n              word-spacing: 0.15em;\n            }\n\n            .footer-item {\n              margin-bottom: 1px;\n              line-height: 1.4;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"pdf-container\">\n          <!-- Header -->\n          <div class=\"header\">\n            <h1>Slippage Report</h1>\n            <div class=\"subtitle\">\n              ${config.projectName || 'Unnamed Project'}  Generated ${new Date().toLocaleDateString()}\n            </div>\n          </div>\n\n          <!-- Product Details -->\n          <div class=\"section\">\n            <h2>Product Details</h2>\n            <div class=\"info-grid\">\n              <div class=\"info-item\">\n                <div class=\"info-label\">Project Number</div>\n                <div class=\"info-value\">${config.projectNumber || ''}</div>\n              </div>\n              <div class=\"info-item\">\n                <div class=\"info-label\">Project Name</div>\n                <div class=\"info-value\">${config.projectName || ''}</div>\n              </div>\n              <div class=\"info-item\">\n                <div class=\"info-label\">Mark Number</div>\n                <div class=\"info-value\">${config.markNumber || ''}</div>\n              </div>\n              <div class=\"info-item\">\n                <div class=\"info-label\">ID Number</div>\n                <div class=\"info-value\">${config.idNumber || ''}</div>\n              </div>\n              <div class=\"info-item\">\n                <div class=\"info-label\">Product Type</div>\n                <div class=\"info-value\">${config.productType}</div>\n              </div>\n              <div class=\"info-item\">\n                <div class=\"info-label\">Strand Pattern</div>\n                <div class=\"info-value\">${strandPatternName || config.strandPattern}</div>\n              </div>\n              ${config.span ? (() => {\n                const spanFormatted = formatSpanForPDF(config.span);\n                return `\n              <div class=\"info-item\">\n                <div class=\"info-label\">Span</div>\n                <div class=\"info-value\">${spanFormatted.main}</div>\n                <div class=\"info-value-sub\">${spanFormatted.fraction}</div>\n              </div>\n                `;\n              })() : `\n              <div class=\"info-item\">\n                <div class=\"info-label\">Span</div>\n                <div class=\"info-value\">-</div>\n              </div>\n              `}\n              <div class=\"info-item\">\n                <div class=\"info-label\">Width${config.productWidth ? ' (Cut)' : ''}</div>\n                <div class=\"info-value\">${config.productWidth ? `${config.productWidth}\"` : '-'}</div>\n              </div>\n            </div>\n          </div>\n\n          ${base64Image ? `\n          <!-- Cross Section -->\n          <div class=\"section\">\n            <h2>Cross Section with Strand Pattern</h2>\n            <div class=\"cross-section\">\n              <img src=\"${base64Image}\" alt=\"Cross Section Diagram\" />\n            </div>\n          </div>\n          ` : ''}\n\n          <!-- Bottom Strand Statistics -->\n          ${bottomStrands.length > 0 ? `\n          <div class=\"section\">\n            <h2 style=\"color: #059669;\">Bottom Strand Statistics</h2>\n            <div class=\"stats-grid\">\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total Slippage (Both Ends)</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyExceeds ? '>' : ''}${bottomStats.totalBoth.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyExceeds ? '>' : ''}${decimalToFraction(bottomStats.totalBoth)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total E1 Slippage</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyE1Exceeds ? '>' : ''}${bottomStats.totalE1.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyE1Exceeds ? '>' : ''}${decimalToFraction(bottomStats.totalE1)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total E2 Slippage</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyE2Exceeds ? '>' : ''}${bottomStats.totalE2.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyE2Exceeds ? '>' : ''}${decimalToFraction(bottomStats.totalE2)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average Slippage (Both Ends)</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyExceeds ? '>' : ''}${bottomStats.avgBoth.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyExceeds ? '>' : ''}${decimalToFraction(bottomStats.avgBoth)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average E1 Slippage</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyE1Exceeds ? '>' : ''}${bottomStats.avgE1.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyE1Exceeds ? '>' : ''}${decimalToFraction(bottomStats.avgE1)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average E2 Slippage</div>\n                <div class=\"stat-value\">\n                  ${bottomStats.anyE2Exceeds ? '>' : ''}${bottomStats.avgE2.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${bottomStats.anyE2Exceeds ? '>' : ''}${decimalToFraction(bottomStats.avgE2)}\n                </div>\n              </div>\n            </div>\n            ${bottomStats.anyExceeds ? `\n            <div class=\"warning-box\">\n              <div class=\"warning-text\"> WARNING: Bottom strands contain values exceeding 1\"</div>\n            </div>\n            ` : ''}\n          </div>\n          ` : ''}\n\n          <!-- Top Strand Statistics -->\n          ${topStrands.length > 0 ? `\n          <div class=\"section\">\n            <h2 style=\"color: #2563eb;\">Top Strand Statistics</h2>\n            <div class=\"stats-grid\">\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total Slippage (Both Ends)</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyExceeds ? '>' : ''}${topStats.totalBoth.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyExceeds ? '>' : ''}${decimalToFraction(topStats.totalBoth)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total E1 Slippage</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyE1Exceeds ? '>' : ''}${topStats.totalE1.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyE1Exceeds ? '>' : ''}${decimalToFraction(topStats.totalE1)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Total E2 Slippage</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyE2Exceeds ? '>' : ''}${topStats.totalE2.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyE2Exceeds ? '>' : ''}${decimalToFraction(topStats.totalE2)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average Slippage (Both Ends)</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyExceeds ? '>' : ''}${topStats.avgBoth.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyExceeds ? '>' : ''}${decimalToFraction(topStats.avgBoth)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average E1 Slippage</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyE1Exceeds ? '>' : ''}${topStats.avgE1.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyE1Exceeds ? '>' : ''}${decimalToFraction(topStats.avgE1)}\n                </div>\n              </div>\n              <div class=\"stat-card\">\n                <div class=\"stat-label\">Average E2 Slippage</div>\n                <div class=\"stat-value\">\n                  ${topStats.anyE2Exceeds ? '>' : ''}${topStats.avgE2.toFixed(3)}\"\n                </div>\n                <div class=\"stat-value-small\">\n                  ${topStats.anyE2Exceeds ? '>' : ''}${decimalToFraction(topStats.avgE2)}\n                </div>\n              </div>\n            </div>\n            ${topStats.anyExceeds ? `\n            <div class=\"warning-box\">\n              <div class=\"warning-text\"> WARNING: Top strands contain values exceeding 1\"</div>\n            </div>\n            ` : ''}\n          </div>\n          ` : ''}\n\n          <!-- Individual Strand Data -->\n          <div class=\"section\">\n            <h2>Slippage by Strand</h2>\n\n            ${slippages.some(s => s.strandId.startsWith('B')) ? `\n              <h3 style=\"font-size: 13px; color: #059669; margin: 10px 0 5px 0; font-weight: 600;\">Bottom Strands</h3>\n              <table class=\"strand-table\">\n                <thead>\n                  <tr>\n                    <th>Strand</th>\n                    <th>END 1</th>\n                    <th>END 2</th>\n                    <th>Total</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${slippages.filter(s => s.strandId.startsWith('B')).map((strand) => {\n                    const end1Value = parseMeasurementInput(strand.leftSlippage);\n                    const end2Value = parseMeasurementInput(strand.rightSlippage);\n                    // Use adjusted values: 1.0 if exceeds, otherwise use parsed value\n                    const e1 = strand.leftExceedsOne ? 1.0 : (end1Value ?? 0);\n                    const e2 = strand.rightExceedsOne ? 1.0 : (end2Value ?? 0);\n                    const strandTotal = e1 + e2;\n                    const hasExceeds = strand.leftExceedsOne || strand.rightExceedsOne;\n                    const strandSize = getStrandSize ? getStrandSize(strand.strandId) : '';\n                    const strandNum = strand.strandId.substring(1);\n\n                    return `\n                      <tr>\n                        <td style=\"font-weight: 700; color: #059669;\">\n                          Bottom Strand ${strandNum}${strandSize ? ` (${strandSize})` : ''}\n                        </td>\n                        <td>\n                          <span style=\"color: #111827; font-weight: 600;\">\n                            ${strand.leftExceedsOne ? '>1.000' : (end1Value !== null ? end1Value.toFixed(3) : '0.000')}\"\n                          </span>\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${strand.leftExceedsOne ? '>1' : (end1Value !== null ? decimalToFraction(end1Value) : '0')})\n                          </span>\n                        </td>\n                        <td>\n                          <span style=\"color: #111827; font-weight: 600;\">\n                            ${strand.rightExceedsOne ? '>1.000' : (end2Value !== null ? end2Value.toFixed(3) : '0.000')}\"\n                          </span>\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${strand.rightExceedsOne ? '>1' : (end2Value !== null ? decimalToFraction(end2Value) : '0')})\n                          </span>\n                        </td>\n                        <td class=\"strand-total\">\n                          ${hasExceeds ? '>' : ''}${strandTotal.toFixed(3)}\"\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${hasExceeds ? '>' : ''}${decimalToFraction(strandTotal)})\n                          </span>\n                        </td>\n                      </tr>\n                    `;\n                  }).join('')}\n                </tbody>\n              </table>\n            ` : ''}\n\n            ${slippages.some(s => s.strandId.startsWith('T')) ? `\n              <h3 style=\"font-size: 13px; color: #2563eb; margin: 15px 0 5px 0; font-weight: 600;\">Top Strands</h3>\n              <table class=\"strand-table\">\n                <thead>\n                  <tr>\n                    <th>Strand</th>\n                    <th>END 1</th>\n                    <th>END 2</th>\n                    <th>Total</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${slippages.filter(s => s.strandId.startsWith('T')).map((strand) => {\n                    const end1Value = parseMeasurementInput(strand.leftSlippage);\n                    const end2Value = parseMeasurementInput(strand.rightSlippage);\n                    // Use adjusted values: 1.0 if exceeds, otherwise use parsed value\n                    const e1 = strand.leftExceedsOne ? 1.0 : (end1Value ?? 0);\n                    const e2 = strand.rightExceedsOne ? 1.0 : (end2Value ?? 0);\n                    const strandTotal = e1 + e2;\n                    const hasExceeds = strand.leftExceedsOne || strand.rightExceedsOne;\n                    const strandSize = getStrandSize ? getStrandSize(strand.strandId) : '';\n                    const strandNum = strand.strandId.substring(1);\n\n                    return `\n                      <tr>\n                        <td style=\"font-weight: 700; color: #2563eb;\">\n                          Top Strand ${strandNum}${strandSize ? ` (${strandSize})` : ''}\n                        </td>\n                        <td>\n                          <span style=\"color: #111827; font-weight: 600;\">\n                            ${strand.leftExceedsOne ? '>1.000' : (end1Value !== null ? end1Value.toFixed(3) : '0.000')}\"\n                          </span>\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${strand.leftExceedsOne ? '>1' : (end1Value !== null ? decimalToFraction(end1Value) : '0')})\n                          </span>\n                        </td>\n                        <td>\n                          <span style=\"color: #111827; font-weight: 600;\">\n                            ${strand.rightExceedsOne ? '>1.000' : (end2Value !== null ? end2Value.toFixed(3) : '0.000')}\"\n                          </span>\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${strand.rightExceedsOne ? '>1' : (end2Value !== null ? decimalToFraction(end2Value) : '0')})\n                          </span>\n                        </td>\n                        <td class=\"strand-total\">\n                          ${hasExceeds ? '>' : ''}${strandTotal.toFixed(3)}\"\n                          <span style=\"color: #6b7280; font-size: 11px; margin-left: 5px;\">\n                            (${hasExceeds ? '>' : ''}${decimalToFraction(strandTotal)})\n                          </span>\n                        </td>\n                      </tr>\n                    `;\n                  }).join('')}\n                </tbody>\n              </table>\n            ` : ''}\n          </div>\n\n          <!-- Footer -->\n          <div class=\"footer\">\n            <div class=\"footer-item\"><strong>Generated by:</strong> ${userName} (${userEmail})</div>\n            <div class=\"footer-item\"><strong>Date:</strong> ${new Date().toLocaleString()}</div>\n            <div class=\"footer-item\"><strong>Tool:</strong> Slippage Identifier Tool</div>\n          </div>\n          </div>\n        </body>\n      </html>\n    `;\n\n    // Generate PDF\n    console.log('[PDF Generator] Generating PDF...');\n    console.log('[PDF Generator] Platform:', Platform.OS);\n\n    // Check if we're on web\n    const isWeb = Platform.OS === 'web';\n\n    if (isWeb) {\n      console.log('[PDF Generator] Web platform detected - using jsPDF for direct PDF download...');\n\n      // Wait for libraries to load if they haven't already\n      if (librariesLoading) {\n        try {\n          console.log('[PDF Generator] Waiting for libraries to load...');\n          await librariesLoading;\n          console.log('[PDF Generator] Libraries loaded successfully');\n        } catch (err) {\n          console.error('[PDF Generator] Failed to load libraries:', err);\n          console.log('[PDF Generator] Falling back to print dialog');\n          await Print.printAsync({ html: htmlContent });\n          return 'web-print-dialog-opened';\n        }\n      }\n\n      if (!jsPDF || !html2canvas) {\n        console.error('[PDF Generator] Libraries not available, falling back to print dialog');\n        await Print.printAsync({ html: htmlContent });\n        return 'web-print-dialog-opened';\n      }\n\n      try {\n        console.log('[PDF Generator] Creating temporary element for rendering...');\n        console.log('[PDF Generator] Has base64Image:', !!base64Image);\n        if (base64Image) {\n          console.log('[PDF Generator] Image data length:', base64Image.length);\n          console.log('[PDF Generator] Image prefix:', base64Image.substring(0, 50));\n        }\n\n        // Create a temporary div to render the HTML\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = htmlContent;\n        tempDiv.style.position = 'absolute';\n        tempDiv.style.left = '-9999px';\n        tempDiv.style.top = '0';\n        tempDiv.style.width = '612px'; // Letter width in points (8.5\" at 72dpi)\n        tempDiv.style.backgroundColor = 'white';\n        document.body.appendChild(tempDiv);\n\n        // Wait for images to load if there's a base64 image\n        if (base64Image) {\n          console.log('[PDF Generator] Waiting for image to load...');\n          const images = tempDiv.querySelectorAll('img');\n          if (images.length > 0) {\n            console.log('[PDF Generator] Found', images.length, 'images in HTML');\n            await Promise.all(\n              Array.from(images).map(img => {\n                return new Promise((resolve) => {\n                  if (img.complete) {\n                    console.log('[PDF Generator] Image already loaded');\n                    resolve(true);\n                  } else {\n                    img.onload = () => {\n                      console.log('[PDF Generator] Image loaded successfully');\n                      resolve(true);\n                    };\n                    img.onerror = () => {\n                      console.error('[PDF Generator] Image failed to load');\n                      resolve(false);\n                    };\n                    // Timeout after 5 seconds\n                    setTimeout(() => resolve(false), 5000);\n                  }\n                });\n              })\n            );\n          }\n        }\n\n        // Wait a moment for styles to apply\n        await new Promise(resolve => setTimeout(resolve, 200));\n\n        console.log('[PDF Generator] Rendering HTML to canvas...');\n\n        // Convert HTML to canvas with better error handling\n        const canvas = await html2canvas(tempDiv, {\n          scale: 2, // Higher quality\n          useCORS: true,\n          allowTaint: true,\n          logging: true, // Enable logging to debug\n          backgroundColor: '#ffffff',\n          onclone: (clonedDoc: Document) => {\n            console.log('[PDF Generator] Document cloned for rendering');\n            // Ensure images are visible in the clone\n            const clonedImages = clonedDoc.querySelectorAll('img');\n            console.log('[PDF Generator] Found', clonedImages.length, 'images in cloned document');\n          },\n        });\n\n        console.log('[PDF Generator] Canvas created successfully');\n        console.log('[PDF Generator] Canvas dimensions:', canvas.width, 'x', canvas.height);\n\n        console.log('[PDF Generator] Creating PDF from canvas...');\n\n        // Create PDF and add the canvas as an image\n        const pdf = new jsPDF('p', 'pt', 'letter');\n        const imgData = canvas.toDataURL('image/png');\n\n        const pdfWidth = 612; // 8.5 inches in points\n        const pdfHeight = 792; // 11 inches in points\n\n        // Calculate dimensions to fit the content\n        const imgWidth = pdfWidth;\n        const imgHeight = (canvas.height * pdfWidth) / canvas.width;\n\n        // If content is longer than one page, split it\n        let heightLeft = imgHeight;\n        let position = 0;\n\n        // Add first page\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pdfHeight;\n\n        // Add additional pages if needed\n        while (heightLeft > 0) {\n          position = heightLeft - imgHeight;\n          pdf.addPage();\n          pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n          heightLeft -= pdfHeight;\n        }\n\n        // Save the PDF\n        pdf.save(`Slippage-Report-${Date.now()}.pdf`);\n\n        // Cleanup\n        document.body.removeChild(tempDiv);\n\n        console.log('[PDF Generator] PDF downloaded successfully');\n        return 'web-pdf-downloaded';\n      } catch (error: any) {\n        console.error('[PDF Generator] PDF generation failed:', error);\n        console.error('[PDF Generator] Error name:', error?.name);\n        console.error('[PDF Generator] Error message:', error?.message);\n        if (error?.stack) {\n          console.error('[PDF Generator] Error stack:', error.stack);\n        }\n\n        // Try to clean up the temp div if it exists\n        try {\n          const existingTempDiv = document.querySelector('[style*=\"-9999px\"]');\n          if (existingTempDiv) {\n            document.body.removeChild(existingTempDiv);\n          }\n        } catch (cleanupError) {\n          console.error('[PDF Generator] Cleanup failed:', cleanupError);\n        }\n\n        console.log('[PDF Generator] Falling back to print dialog');\n        await Print.printAsync({ html: htmlContent });\n        return 'web-print-dialog-opened';\n      }\n    }\n\n    // For native platforms (iOS/Android), generate actual PDF file\n    let uri: string;\n    try {\n      console.log('[PDF Generator] Starting PDF generation...');\n      console.log('[PDF Generator] HTML length:', htmlContent.length, 'characters');\n      console.log('[PDF Generator] Has base64 image:', !!base64Image);\n\n      // Validate HTML before printing\n      if (!htmlContent || htmlContent.length === 0) {\n        throw new Error('HTML content is empty');\n      }\n\n      // First attempt: try with image if available\n      const result = await Print.printToFileAsync({\n        html: htmlContent,\n        width: 612, // 8.5 inches in points\n        height: 792, // 11 inches in points\n      });\n      uri = result.uri;\n      console.log('[PDF Generator] PDF created successfully at:', uri);\n    } catch (printError: any) {\n      console.error('[PDF Generator] First attempt failed:', printError);\n      console.error('[PDF Generator] Error message:', printError?.message);\n      console.error('[PDF Generator] Error name:', printError?.name);\n\n      // Check if error is related to image or memory issues\n      const errorMessage = printError?.message?.toLowerCase() || '';\n      const isImageError = base64Image && (\n        errorMessage.includes('c++') ||\n        errorMessage.includes('exception') ||\n        errorMessage.includes('image') ||\n        errorMessage.includes('memory') ||\n        errorMessage.includes('printing did not complete')\n      );\n\n      if (isImageError) {\n        console.log('[PDF Generator] Detected potential image-related error, retrying without image...');\n        base64Image = undefined;\n\n        // Regenerate HTML without image sections\n        const htmlWithoutImage = htmlContent\n          .replace(/<img[^>]*>/gi, '')\n          .replace(/data:image\\/[^\"'\\s]*/gi, '')\n          .replace(/<!-- Cross Section -->[\\s\\S]*?<\\/div>\\s*<\\/div>/i, '');\n\n        console.log('[PDF Generator] Retrying without image, HTML length:', htmlWithoutImage.length);\n\n        try {\n          const retryResult = await Print.printToFileAsync({\n            html: htmlWithoutImage,\n            width: 612,\n            height: 792,\n          });\n          uri = retryResult.uri;\n          console.log('[PDF Generator] PDF created successfully without image at:', uri);\n        } catch (retryError) {\n          console.error('[PDF Generator] Retry failed:', retryError);\n          throw new Error('Failed to generate PDF even without images: ' + (retryError as Error)?.message);\n        }\n      } else {\n        // If it's not an image-related error, throw the original error\n        throw printError;\n      }\n    }\n\n    return uri;\n  } catch (error) {\n    console.error('[PDF Generator] Error generating PDF:', error);\n    if (error instanceof Error) {\n      console.error('[PDF Generator] Error stack:', error.stack);\n    }\n    return null;\n  }\n}\n\nexport async function sharePDF(filePath: string): Promise<void> {\n  try {\n    const isAvailable = await Sharing.isAvailableAsync();\n    if (isAvailable) {\n      await Sharing.shareAsync(filePath, {\n        mimeType: 'application/pdf',\n        dialogTitle: 'Share Slippage Report',\n        UTI: 'com.adobe.pdf',\n      });\n    } else {\n      console.error('Sharing is not available on this device');\n    }\n  } catch (error) {\n    console.error('Error sharing PDF:', error);\n    throw error;\n  }\n}\n","import React, { useMemo, useState, useRef } from \"react\";\nimport { View, Text, ScrollView, Pressable, Alert, Platform } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { decimalToFraction, parseMeasurementInput } from \"../utils/cn\";\nimport { useStrandPatternStore } from \"../state/strandPatternStore\";\nimport { useSlippageHistoryStore, SlippageRecord } from \"../state/slippageHistoryStore\";\nimport { useAuthStore } from \"../state/authStore\";\nimport ConfirmModal from \"../components/ConfirmModal\";\nimport CrossSection8048 from \"../components/CrossSection8048\";\nimport CrossSection1048 from \"../components/CrossSection1048\";\nimport CrossSection1247 from \"../components/CrossSection1247\";\nimport CrossSection1250 from \"../components/CrossSection1250\";\nimport { generateSlippagePDF, sharePDF } from \"../utils/pdfGenerator\";\nimport { captureRef } from \"react-native-view-shot\";\n\ntype SlippageSummaryScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"SlippageSummary\"\n>;\ntype SlippageSummaryScreenRouteProp = RouteProp<\n  RootStackParamList,\n  \"SlippageSummary\"\n>;\n\ninterface Props {\n  navigation: SlippageSummaryScreenNavigationProp;\n  route: SlippageSummaryScreenRouteProp;\n}\n\nexport default function SlippageSummaryScreen({ navigation, route }: Props) {\n  const insets = useSafeAreaInsets();\n  const { slippages, config } = route.params;\n  const { customPatterns } = useStrandPatternStore();\n  const { addUserRecord, publishRecord } = useSlippageHistoryStore();\n  const currentUser = useAuthStore((state) => state.currentUser);\n\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [showPublishModal, setShowPublishModal] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [publishSuccess, setPublishSuccess] = useState(false);\n  const [isGeneratingPDF, setIsGeneratingPDF] = useState(false);\n\n  // Ref for capturing cross-section as image\n  const crossSectionRef = useRef<View>(null);\n\n  // Get the selected strand patterns (bottom and optionally top)\n  const selectedPattern = customPatterns.find(p => p.id === config.strandPattern);\n  const selectedTopPattern = config.topStrandPattern\n    ? customPatterns.find(p => p.id === config.topStrandPattern)\n    : undefined;\n\n  // Helper to get strand size by position\n  const getStrandSize = (strandId: string): string => {\n    // Check if it's a top strand (starts with T) or bottom strand (starts with B or is just a number)\n    const isTopStrand = strandId.startsWith('T');\n    const isBottomStrand = strandId.startsWith('B');\n\n    // Extract the numeric part (remove T or B prefix if present)\n    const numericId = isTopStrand || isBottomStrand\n      ? strandId.substring(1)\n      : strandId;\n    const index = parseInt(numericId) - 1;\n\n    // Get size from the appropriate pattern\n    const pattern = isTopStrand ? selectedTopPattern : selectedPattern;\n    const size = pattern?.strandSizes?.[index];\n    return size ? `${size}\"` : '';\n  };\n\n  // Save and publish handlers\n  const handleSave = () => {\n    console.log('[SlippageSummaryScreen] Current user object:', JSON.stringify(currentUser, null, 2));\n    console.log('[SlippageSummaryScreen] Current user ID:', currentUser?.id);\n    console.log('[SlippageSummaryScreen] Current user email:', currentUser?.email);\n\n    const record: SlippageRecord = {\n      id: `slippage-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: Date.now(),\n      slippages,\n      config,\n      createdBy: currentUser?.email || 'Unknown',\n      userId: currentUser?.id || '',\n    };\n\n    console.log('[SlippageSummaryScreen] Created record with userId:', record.userId);\n    addUserRecord(record);\n    setSaveSuccess(true);\n    setShowSaveModal(false);\n    setTimeout(() => setSaveSuccess(false), 3000);\n  };\n\n  const handlePublish = () => {\n    const record: SlippageRecord = {\n      id: `slippage-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: Date.now(),\n      slippages,\n      config,\n      createdBy: currentUser?.email || 'Unknown',\n      userId: currentUser?.id || '',\n    };\n    publishRecord(record, currentUser?.email || 'Unknown');\n    setPublishSuccess(true);\n    setShowPublishModal(false);\n    setTimeout(() => setPublishSuccess(false), 3000);\n  };\n\n  const handleGeneratePDFReport = async () => {\n    setIsGeneratingPDF(true);\n\n    try {\n      // Capture the cross-section diagram as an image\n      let crossSectionImageUri: string | undefined;\n      const isWeb = Platform.OS === 'web';\n\n      if (crossSectionRef.current) {\n        try {\n          console.log('[PDF] Capturing cross-section...');\n          console.log('[PDF] Platform:', isWeb ? 'web' : 'native');\n          console.log('[PDF] crossSectionRef.current exists:', !!crossSectionRef.current);\n\n          if (isWeb) {\n            // On web, we need to use html2canvas directly since captureRef doesn't work\n            console.log('[PDF] Using html2canvas for web...');\n\n            // Dynamically import html2canvas\n            const html2canvas = await import('html2canvas');\n\n            // Find the actual DOM element - the ref.current might be a React Native component wrapper\n            // We need to find the actual div element\n            let element = crossSectionRef.current as any;\n\n            // If it's a React Native component, try to get the underlying DOM element\n            if (element._nativeTag || element._internalFiberInstanceHandleDEV) {\n              // Try to find the rendered DOM element\n              const container = document.querySelector('[data-testid=\"cross-section-container\"]');\n              if (container) {\n                element = container;\n                console.log('[PDF] Found cross-section container via selector');\n              }\n            }\n\n            console.log('[PDF] Capturing element:', element);\n\n            const canvas = await html2canvas.default(element, {\n              scale: 2,\n              useCORS: true,\n              allowTaint: true,\n              backgroundColor: '#ffffff',\n              logging: false,\n            });\n\n            crossSectionImageUri = canvas.toDataURL('image/png');\n            console.log('[PDF] Cross-section captured successfully via html2canvas');\n            console.log('[PDF] Image URI length:', crossSectionImageUri?.length);\n          } else {\n            // On native, use captureRef\n            crossSectionImageUri = await captureRef(crossSectionRef, {\n              format: 'png',\n              quality: 0.8,\n            });\n            console.log('[PDF] Cross-section captured successfully via captureRef');\n          }\n        } catch (captureError) {\n          console.error('[PDF] Error capturing cross-section:', captureError);\n          console.log('[PDF] Continuing without cross-section image');\n          // Continue without the image if capture fails\n          crossSectionImageUri = undefined;\n        }\n      } else {\n        console.log('[PDF] No cross-section ref available');\n      }\n\n      // Get user's email and name\n      const userEmail = currentUser?.email || 'unknown@example.com';\n      const userName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Unknown User';\n\n      console.log('[PDF] Generating PDF...');\n      // Generate the PDF\n      const filePath = await generateSlippagePDF({\n        slippages,\n        config,\n        slippageStats,\n        userEmail,\n        userName,\n        crossSectionImageUri,\n        getStrandSize,\n        strandPatternName: selectedPattern?.name,\n      });\n\n      if (filePath) {\n        console.log('[PDF] PDF generated successfully:', filePath);\n\n        // Handle different web responses\n        if (filePath === 'web-pdf-downloaded') {\n          console.log('[PDF] PDF downloaded successfully on web');\n          Alert.alert(\n            'PDF Downloaded',\n            'The slippage report has been downloaded to your Downloads folder.'\n          );\n        } else if (filePath === 'web-print-dialog-opened') {\n          console.log('[PDF] Web print dialog opened - user can save as PDF from browser');\n          Alert.alert(\n            'Print Dialog Opened',\n            'Use your browser\\'s print dialog to save the report as PDF. Select \"Save as PDF\" as the printer destination.'\n          );\n        } else {\n          // On native platforms, share the PDF file\n          await sharePDF(filePath);\n          console.log('[PDF] PDF shared successfully');\n        }\n      } else {\n        console.log('[PDF] Failed to generate PDF - no file path returned');\n        Alert.alert('Error', 'Failed to generate PDF report. Please try again.');\n      }\n    } catch (error) {\n      console.error('[PDF] Error generating/sharing PDF:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('[PDF] Error details:', errorMessage);\n\n      // Provide more helpful error message\n      if (errorMessage.includes('C++') || errorMessage.includes('exception')) {\n        Alert.alert(\n          'PDF Generation Error',\n          'There was an issue processing the image. The PDF may have been generated without the cross-section diagram. Please try again.'\n        );\n      } else {\n        Alert.alert('Error', `Failed to generate or share PDF report: ${errorMessage}`);\n      }\n    } finally {\n      setIsGeneratingPDF(false);\n    }\n  };\n\n  // Calculate all slippage statistics\n  const slippageStats = useMemo(() => {\n    // Parse all values to decimals and track exceeds flags\n    const parsedValues = slippages.map((s) => ({\n      strandId: s.strandId,\n      end1Raw: parseMeasurementInput(s.leftSlippage),\n      end2Raw: parseMeasurementInput(s.rightSlippage),\n      end1Exceeds: s.leftExceedsOne,\n      end2Exceeds: s.rightExceedsOne,\n      // When exceeds is true, use 1.0 for calculations, otherwise use the parsed value\n      end1: s.leftExceedsOne ? 1.0 : (parseMeasurementInput(s.leftSlippage) ?? 0),\n      end2: s.rightExceedsOne ? 1.0 : (parseMeasurementInput(s.rightSlippage) ?? 0),\n    }));\n\n    // Check if any value exceeds 1\"\n    const anyEnd1Exceeds = parsedValues.some((v) => v.end1Exceeds);\n    const anyEnd2Exceeds = parsedValues.some((v) => v.end2Exceeds);\n    const anyValueExceeds = anyEnd1Exceeds || anyEnd2Exceeds;\n\n    // Get values for calculations (using the adjusted values that account for >1\")\n    // Include ALL strands, even those with 0 slippage\n    const end1Values = parsedValues\n      .map((v) => v.end1)\n      .filter((v): v is number => v !== null && !isNaN(v));\n    const end2Values = parsedValues\n      .map((v) => v.end2)\n      .filter((v): v is number => v !== null && !isNaN(v));\n    const allValues = [...end1Values, ...end2Values];\n\n    // Total slippage (all values) - now includes 1.0 for any >1\" values\n    const totalSlippage = allValues.reduce((sum, val) => sum + val, 0);\n\n    // Total slippage per end - now includes 1.0 for any >1\" values\n    const totalSlippageEnd1 = end1Values.reduce((sum, val) => sum + val, 0);\n    const totalSlippageEnd2 = end2Values.reduce((sum, val) => sum + val, 0);\n\n    // Total slippage per strand with exceeds tracking\n    const strandTotals = parsedValues.map((v) => {\n      return {\n        strandId: v.strandId,\n        total: v.end1 + v.end2, // Uses the adjusted values (1.0 if exceeds)\n        exceeds: v.end1Exceeds || v.end2Exceeds,\n      };\n    });\n\n    // Average calculations - now includes all active strands (including those with 0 slippage)\n    const totalAvgSlippage =\n      allValues.length > 0 ? totalSlippage / allValues.length : 0;\n    const totalAvgSlippageEnd1 =\n      end1Values.length > 0 ? totalSlippageEnd1 / end1Values.length : 0;\n    const totalAvgSlippageEnd2 =\n      end2Values.length > 0 ? totalSlippageEnd2 / end2Values.length : 0;\n\n    return {\n      totalSlippage,\n      totalSlippageEnd1,\n      totalSlippageEnd2,\n      strandTotals,\n      totalAvgSlippage,\n      totalAvgSlippageEnd1,\n      totalAvgSlippageEnd2,\n      anyValueExceeds,\n      anyEnd1Exceeds,\n      anyEnd2Exceeds,\n    };\n  }, [slippages]);\n\n  // Calculate active strand indices for the cross-section\n  const activeStrandIndices = useMemo(() => {\n    if (!selectedPattern || !selectedPattern.strandCoordinates || !config.productWidth || !config.productSide) {\n      return null;\n    }\n\n    const { strandCoordinates } = selectedPattern;\n    const { productWidth, productSide } = config;\n\n    // The x coordinates are already positions in the full product (0\" to 48\")\n    // Strands are at x=2\" to x=46\" within the 48\" product\n    const minX = Math.min(...strandCoordinates.map(c => c.x));\n    const maxX = Math.max(...strandCoordinates.map(c => c.x));\n    const fullProductWidth = maxX + 2; // Rightmost strand + 2\" concrete cover\n\n    console.log('[SlippageSummary] Calculating active strands:');\n    console.log('  Strand positions:', `x=${minX}\" to x=${maxX}\"`);\n    console.log('  Full product width:', fullProductWidth);\n    console.log('  Cut product width:', productWidth);\n    console.log('  Product side:', productSide);\n    console.log('  Total strands:', strandCoordinates.length);\n\n    const activeIndices: number[] = [];\n    strandCoordinates.forEach((coord, index) => {\n      let isActive = false;\n      if (productSide === 'L1') {\n        // L1 is kept (left side) - keep strands from 0 to productWidth\n        isActive = coord.x <= productWidth;\n        console.log(`  Strand ${index + 1} at x=${coord.x}\": ${isActive ? 'ACTIVE' : 'inactive'} (keeping 0-${productWidth}\")`);\n      } else if (productSide === 'L2') {\n        // L2 is kept (right side) - keep strands from (fullProductWidth - productWidth) to fullProductWidth\n        const cutPosition = fullProductWidth - productWidth;\n        isActive = coord.x >= cutPosition;\n        console.log(`  Strand ${index + 1} at x=${coord.x}\": ${isActive ? 'ACTIVE' : 'inactive'} (keeping ${cutPosition}-${fullProductWidth}\")`);\n      }\n      if (isActive) {\n        activeIndices.push(index + 1); // Convert to 1-based\n      }\n    });\n\n    console.log('[SlippageSummary] Active strand count:', activeIndices.length);\n    console.log('[SlippageSummary] Active strand indices:', activeIndices);\n\n    return activeIndices;\n  }, [selectedPattern, config.productWidth, config.productSide]);\n\n  return (\n    <View className=\"flex-1 bg-white\" style={{ paddingTop: insets.top }}>\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: 20 }}\n      >\n        {/* Header - More compact */}\n        <View className=\"px-6 py-3 border-b border-gray-200\">\n          <Text className=\"text-gray-900 text-xl font-bold\">\n            Slippage Summary\n          </Text>\n        </View>\n\n        {/* Cross-section diagram - smaller */}\n        <View\n          ref={crossSectionRef}\n          className=\"items-center my-3\"\n          style={{ overflow: 'visible', minHeight: 200 }}\n          collapsable={false}\n          // @ts-ignore - data-testid is not in React Native types but works on web\n          data-testid=\"cross-section-container\"\n        >\n          <Text className=\"text-gray-700 text-xs font-semibold mb-2\">\n            Cross Section with Slippage Values\n          </Text>\n          {config.productType === '1048' ? (\n            <CrossSection1048\n              scale={6}\n              activeStrands={activeStrandIndices || undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              slippages={slippages}\n              showSlippageValues={true}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1247' ? (\n            <CrossSection1247\n              scale={6}\n              activeStrands={activeStrandIndices || undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              slippages={slippages}\n              showSlippageValues={true}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : config.productType === '1250' ? (\n            <CrossSection1250\n              scale={6}\n              activeStrands={activeStrandIndices || undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              slippages={slippages}\n              showSlippageValues={true}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          ) : (\n            <CrossSection8048\n              scale={6}\n              activeStrands={activeStrandIndices || undefined}\n              productSide={config.productSide || null}\n              productWidth={config.productWidth}\n              slippages={slippages}\n              showSlippageValues={true}\n              strandCoordinates={selectedPattern?.strandCoordinates}\n              bottomStrandSizes={selectedPattern?.strandSizes}\n              topStrandCoordinates={selectedTopPattern?.strandCoordinates}\n              topStrandSizes={selectedTopPattern?.strandSizes}\n            />\n          )}\n        </View>\n\n        {/* Cut-width info banner - more compact */}\n        {config.productWidth && config.productSide && selectedPattern?.strandCoordinates && (\n          <View className=\"px-6 mb-2\">\n            <View className=\"bg-amber-50 border border-amber-200 rounded-lg p-2.5\">\n              <View className=\"flex-row items-center\">\n                <Ionicons name=\"cut\" size={16} color=\"#F59E0B\" />\n                <Text className=\"text-amber-900 text-xs ml-2\">\n                  Cut: {config.productWidth}\"  {config.productSide}  {slippages.length}/{selectedPattern.strand_3_8 + selectedPattern.strand_1_2 + selectedPattern.strand_0_6} strands\n                </Text>\n              </View>\n            </View>\n          </View>\n        )}\n\n        {/* Slippage Statistics - more compact */}\n        <View className=\"px-6\">\n          <Text className=\"text-gray-900 text-base font-semibold mb-2\">\n            Statistics\n          </Text>\n\n          {/* Total & Average side by side */}\n          <View className=\"flex-row gap-2 mb-2\">\n            <View className=\"flex-1 bg-blue-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium mb-0.5\">\n                Total Slippage\n              </Text>\n              <Text className=\"text-blue-600 text-lg font-bold\">\n                {slippageStats.anyValueExceeds && \">\"}\n                {slippageStats.totalSlippage.toFixed(3)}\"\n              </Text>\n              <Text className=\"text-blue-600 text-xs\">\n                {slippageStats.anyValueExceeds && \">\"}{decimalToFraction(slippageStats.totalSlippage)}\n              </Text>\n            </View>\n\n            <View className=\"flex-1 bg-orange-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium mb-0.5\">\n                Avg Slippage\n              </Text>\n              <Text className=\"text-orange-600 text-lg font-bold\">\n                {slippageStats.anyValueExceeds && \">\"}\n                {slippageStats.totalAvgSlippage.toFixed(3)}\"\n              </Text>\n              <Text className=\"text-orange-600 text-xs\">\n                {slippageStats.anyValueExceeds && \">\"}{decimalToFraction(slippageStats.totalAvgSlippage)}\n              </Text>\n            </View>\n          </View>\n\n          {/* End Totals - compact */}\n          <View className=\"flex-row gap-2 mb-2\">\n            <View className=\"flex-1 bg-green-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium\">END 1 Total</Text>\n              <Text className=\"text-green-600 text-base font-bold\">\n                {slippageStats.anyEnd1Exceeds && \">\"}\n                {slippageStats.totalSlippageEnd1.toFixed(3)}\"\n              </Text>\n            </View>\n\n            <View className=\"flex-1 bg-purple-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium\">END 2 Total</Text>\n              <Text className=\"text-purple-600 text-base font-bold\">\n                {slippageStats.anyEnd2Exceeds && \">\"}\n                {slippageStats.totalSlippageEnd2.toFixed(3)}\"\n              </Text>\n            </View>\n          </View>\n\n          {/* End Averages - compact */}\n          <View className=\"flex-row gap-2 mb-2\">\n            <View className=\"flex-1 bg-green-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium\">END 1 Avg</Text>\n              <Text className=\"text-green-600 text-base font-bold\">\n                {slippageStats.anyEnd1Exceeds && \">\"}\n                {slippageStats.totalAvgSlippageEnd1.toFixed(3)}\"\n              </Text>\n            </View>\n\n            <View className=\"flex-1 bg-purple-50 rounded-lg p-2.5\">\n              <Text className=\"text-gray-700 text-xs font-medium\">END 2 Avg</Text>\n              <Text className=\"text-purple-600 text-base font-bold\">\n                {slippageStats.anyEnd2Exceeds && \">\"}\n                {slippageStats.totalAvgSlippageEnd2.toFixed(3)}\"\n              </Text>\n            </View>\n          </View>\n\n          {/* Per-Strand Details - separated by bottom/top */}\n          <View className=\"bg-gray-50 rounded-lg p-2.5 mb-3\">\n            <Text className=\"text-gray-700 text-xs font-semibold mb-2\">\n              By Strand\n            </Text>\n\n            {/* Bottom Strands */}\n            {slippages.some(s => s.strandId.startsWith('B')) && (\n              <>\n                <Text className=\"text-gray-600 text-xs font-semibold mb-1.5\">\n                  Bottom Strands\n                </Text>\n                {slippages.filter(s => s.strandId.startsWith('B')).map((strand) => {\n                  const end1Value = parseMeasurementInput(strand.leftSlippage);\n                  const end2Value = parseMeasurementInput(strand.rightSlippage);\n                  // Use adjusted values: 1.0 if exceeds, otherwise use parsed value\n                  const e1 = strand.leftExceedsOne ? 1.0 : (end1Value ?? 0);\n                  const e2 = strand.rightExceedsOne ? 1.0 : (end2Value ?? 0);\n                  const strandTotal = e1 + e2;\n                  const hasExceeds = strand.leftExceedsOne || strand.rightExceedsOne;\n\n                  return (\n                    <View key={strand.strandId} className=\"mb-2 pb-2 border-b border-gray-300 last:border-b-0\">\n                      {/* Strand Header - inline */}\n                      <View className=\"flex-row items-center justify-between mb-1.5\">\n                        <View className=\"flex-row items-center\">\n                          <View className=\"bg-green-600 rounded-full w-5 h-5 items-center justify-center mr-1.5\">\n                            <Text className=\"text-white font-bold text-xs\">\n                              {strand.strandId.substring(1)}\n                            </Text>\n                          </View>\n                          <Text className=\"text-gray-900 text-xs font-semibold\">\n                            Bottom Strand {strand.strandId.substring(1)}\n                            {getStrandSize(strand.strandId) && (\n                              <Text className=\"text-gray-600 font-normal\">\n                                {' '}({getStrandSize(strand.strandId)})\n                              </Text>\n                            )}\n                          </Text>\n                        </View>\n                        <View className=\"bg-blue-100 px-2 py-0.5 rounded\">\n                          <Text className=\"text-blue-700 text-xs font-bold\">\n                            {hasExceeds && \">\"}Total: {strandTotal.toFixed(2)}\"\n                          </Text>\n                        </View>\n                      </View>\n\n                      {/* END 1 & END 2 - inline */}\n                      <View className=\"flex-row gap-2 ml-6\">\n                        <View className=\"flex-1 bg-white rounded p-1.5 border border-green-200\">\n                          <Text className=\"text-gray-600 text-xs mb-0.5\">E1</Text>\n                          <Text className=\"text-green-600 text-xs font-bold\">\n                            {strand.leftExceedsOne ? '>1\"' : (end1Value !== null && end1Value !== 0 ? `${end1Value.toFixed(3)}\"` : '0\"')}\n                          </Text>\n                        </View>\n\n                        <View className=\"flex-1 bg-white rounded p-1.5 border border-purple-200\">\n                          <Text className=\"text-gray-600 text-xs mb-0.5\">E2</Text>\n                          <Text className=\"text-purple-600 text-xs font-bold\">\n                            {strand.rightExceedsOne ? '>1\"' : (end2Value !== null && end2Value !== 0 ? `${end2Value.toFixed(3)}\"` : '0\"')}\n                          </Text>\n                        </View>\n                      </View>\n                    </View>\n                  );\n                })}\n              </>\n            )}\n\n            {/* Top Strands */}\n            {slippages.some(s => s.strandId.startsWith('T')) && (\n              <>\n                <Text className=\"text-gray-600 text-xs font-semibold mb-1.5 mt-2\">\n                  Top Strands\n                </Text>\n                {slippages.filter(s => s.strandId.startsWith('T')).map((strand) => {\n                  const end1Value = parseMeasurementInput(strand.leftSlippage);\n                  const end2Value = parseMeasurementInput(strand.rightSlippage);\n                  // Use adjusted values: 1.0 if exceeds, otherwise use parsed value\n                  const e1 = strand.leftExceedsOne ? 1.0 : (end1Value ?? 0);\n                  const e2 = strand.rightExceedsOne ? 1.0 : (end2Value ?? 0);\n                  const strandTotal = e1 + e2;\n                  const hasExceeds = strand.leftExceedsOne || strand.rightExceedsOne;\n\n                  return (\n                    <View key={strand.strandId} className=\"mb-2 pb-2 border-b border-gray-300 last:border-b-0\">\n                      {/* Strand Header - inline */}\n                      <View className=\"flex-row items-center justify-between mb-1.5\">\n                        <View className=\"flex-row items-center\">\n                          <View className=\"bg-blue-600 rounded-full w-5 h-5 items-center justify-center mr-1.5\">\n                            <Text className=\"text-white font-bold text-xs\">\n                              {strand.strandId.substring(1)}\n                            </Text>\n                          </View>\n                          <Text className=\"text-gray-900 text-xs font-semibold\">\n                            Top Strand {strand.strandId.substring(1)}\n                            {getStrandSize(strand.strandId) && (\n                              <Text className=\"text-gray-600 font-normal\">\n                                {' '}({getStrandSize(strand.strandId)})\n                              </Text>\n                            )}\n                          </Text>\n                        </View>\n                        <View className=\"bg-blue-100 px-2 py-0.5 rounded\">\n                          <Text className=\"text-blue-700 text-xs font-bold\">\n                            {hasExceeds && \">\"}Total: {strandTotal.toFixed(2)}\"\n                          </Text>\n                        </View>\n                      </View>\n\n                      {/* END 1 & END 2 - inline */}\n                      <View className=\"flex-row gap-2 ml-6\">\n                        <View className=\"flex-1 bg-white rounded p-1.5 border border-green-200\">\n                          <Text className=\"text-gray-600 text-xs mb-0.5\">E1</Text>\n                          <Text className=\"text-green-600 text-xs font-bold\">\n                            {strand.leftExceedsOne ? '>1\"' : (end1Value !== null && end1Value !== 0 ? `${end1Value.toFixed(3)}\"` : '0\"')}\n                          </Text>\n                        </View>\n\n                        <View className=\"flex-1 bg-white rounded p-1.5 border border-purple-200\">\n                          <Text className=\"text-gray-600 text-xs mb-0.5\">E2</Text>\n                          <Text className=\"text-purple-600 text-xs font-bold\">\n                            {strand.rightExceedsOne ? '>1\"' : (end2Value !== null && end2Value !== 0 ? `${end2Value.toFixed(3)}\"` : '0\"')}\n                          </Text>\n                        </View>\n                      </View>\n                    </View>\n                  );\n                })}\n              </>\n            )}\n          </View>\n\n          {/* Success Messages */}\n          {saveSuccess && (\n            <View className=\"bg-green-50 border border-green-200 rounded-xl p-4 mb-4 flex-row items-center\">\n              <Ionicons name=\"checkmark-circle\" size={24} color=\"#10B981\" />\n              <Text className=\"text-green-700 font-semibold ml-3\">\n                Record saved successfully!\n              </Text>\n            </View>\n          )}\n          \n          {publishSuccess && (\n            <View className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4 flex-row items-center\">\n              <Ionicons name=\"checkmark-circle\" size={24} color=\"#3B82F6\" />\n              <Text className=\"text-blue-700 font-semibold ml-3\">\n                Record published successfully!\n              </Text>\n            </View>\n          )}\n\n          {/* Action Buttons */}\n          <View className=\"flex-row gap-3 mb-3\">\n            <Pressable\n              className=\"flex-1 bg-green-500 rounded-xl py-4 items-center active:bg-green-600\"\n              onPress={() => setShowSaveModal(true)}\n            >\n              <View className=\"flex-row items-center\">\n                <Ionicons name=\"save-outline\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">\n                  Save\n                </Text>\n              </View>\n            </Pressable>\n            \n            <Pressable\n              className=\"flex-1 bg-purple-500 rounded-xl py-4 items-center active:bg-purple-600\"\n              onPress={() => setShowPublishModal(true)}\n            >\n              <View className=\"flex-row items-center\">\n                <Ionicons name=\"cloud-upload-outline\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">\n                  Publish\n                </Text>\n              </View>\n            </Pressable>\n          </View>\n\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600 mb-3\"\n            onPress={handleGeneratePDFReport}\n            disabled={isGeneratingPDF}\n          >\n            <View className=\"flex-row items-center\">\n              <Ionicons name={isGeneratingPDF ? \"hourglass-outline\" : \"document-text-outline\"} size={20} color=\"white\" />\n              <Text className=\"text-white text-base font-semibold ml-2\">\n                {isGeneratingPDF ? 'Generating PDF...' : 'Generate Report'}\n              </Text>\n            </View>\n          </Pressable>\n\n          <Pressable\n            className=\"bg-gray-100 rounded-xl py-4 items-center active:bg-gray-200 mb-4\"\n            onPress={() => navigation.goBack()}\n          >\n            <Text className=\"text-gray-700 text-base font-semibold\">\n              Back to Input\n            </Text>\n          </Pressable>\n        </View>\n      </ScrollView>\n\n      {/* Save Confirmation Modal */}\n      <ConfirmModal\n        visible={showSaveModal}\n        title=\"Save Record\"\n        message=\"Save this slippage record to your personal records?\"\n        confirmText=\"Save\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"default\"\n        onConfirm={handleSave}\n        onCancel={() => setShowSaveModal(false)}\n      />\n\n      {/* Publish Confirmation Modal */}\n      <ConfirmModal\n        visible={showPublishModal}\n        title=\"Publish Record\"\n        message=\"Publish this slippage record to the official records visible to all users?\"\n        confirmText=\"Publish\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"default\"\n        onConfirm={handlePublish}\n        onCancel={() => setShowPublishModal(false)}\n      />\n    </View>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { View, Text, ScrollView, Pressable, StyleSheet } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useSlippageHistoryStore, SlippageRecord, PublishedSlippageRecord } from \"../state/slippageHistoryStore\";\nimport { useStrandPatternStore } from \"../state/strandPatternStore\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { format } from \"date-fns\";\nimport ConfirmModal from \"../components/ConfirmModal\";\nimport { decimalToFraction, parseMeasurementInput } from \"../utils/cn\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList, \"SlippageHistory\">;\n\nexport default function SlippageHistoryScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const {\n    userRecords,\n    publishedRecords,\n    removeUserRecord,\n    removePublishedRecord,\n    clearUserRecords,\n    clearPublishedRecords,\n    syncUserRecords,\n    syncPublishedRecords,\n    subscribeToPublishedRecords,\n    isSyncing,\n  } = useSlippageHistoryStore();\n  const { customPatterns } = useStrandPatternStore();\n  const currentUser = useAuthStore((state) => state.currentUser);\n\n  const [activeTab, setActiveTab] = useState<\"my-records\" | \"published\">(\"my-records\");\n  const [showClearAllModal, setShowClearAllModal] = useState(false);\n  const [deleteItemId, setDeleteItemId] = useState<string | null>(null);\n\n  // Sync data from Firebase when component mounts\n  useEffect(() => {\n    syncUserRecords();\n    syncPublishedRecords();\n\n    // Subscribe to real-time updates for published records\n    const unsubscribe = subscribeToPublishedRecords();\n    return () => unsubscribe();\n  }, [syncUserRecords, syncPublishedRecords, subscribeToPublishedRecords]);\n\n  // Re-sync user records when tab changes\n  useEffect(() => {\n    if (activeTab === \"my-records\") {\n      syncUserRecords();\n    }\n  }, [activeTab, syncUserRecords]);\n\n  const handleClearAll = () => {\n    if (activeTab === \"my-records\") {\n      clearUserRecords();\n    } else {\n      // Only admins can clear published records\n      if (currentUser?.role === \"admin\") {\n        clearPublishedRecords();\n      }\n    }\n    setShowClearAllModal(false);\n  };\n\n  const handleDeleteItem = (id: string) => {\n    if (activeTab === \"my-records\") {\n      removeUserRecord(id);\n    } else {\n      // Only admins can delete published records\n      if (currentUser?.role === \"admin\") {\n        removePublishedRecord(id);\n      }\n    }\n    setDeleteItemId(null);\n  };\n\n  const handleRecordPress = (record: SlippageRecord | PublishedSlippageRecord) => {\n    // Navigate to summary screen with the record data\n    navigation.navigate(\"SlippageSummary\", {\n      slippages: record.slippages,\n      config: record.config,\n    });\n  };\n\n  const currentRecords = activeTab === \"my-records\" ? userRecords : publishedRecords;\n  const canDelete = activeTab === \"my-records\" || currentUser?.role === \"admin\";\n\n  // Calculate total slippage for a record\n  const calculateTotalSlippage = (record: SlippageRecord | PublishedSlippageRecord) => {\n    let total = 0;\n    let hasExceeds = false;\n    \n    record.slippages.forEach((s) => {\n      const left = parseMeasurementInput(s.leftSlippage) ?? 0;\n      const right = parseMeasurementInput(s.rightSlippage) ?? 0;\n      total += left + right;\n      if (s.leftExceedsOne || s.rightExceedsOne) {\n        hasExceeds = true;\n      }\n    });\n    \n    return { total, hasExceeds };\n  };\n\n  return (\n    <View style={styles.container}>\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n      >\n        <View style={styles.content}>\n          {/* Header */}\n          <View style={styles.header}>\n            <View style={styles.headerLeft}>\n              <Text style={styles.title}>Slippage History</Text>\n              <Text style={styles.subtitle}>\n                {currentRecords.length} {currentRecords.length === 1 ? \"record\" : \"records\"}\n              </Text>\n            </View>\n            {currentRecords.length > 0 && canDelete && (\n              <Pressable\n                onPress={() => setShowClearAllModal(true)}\n                style={styles.clearButton}\n              >\n                <Text style={styles.clearButtonText}>Clear All</Text>\n              </Pressable>\n            )}\n          </View>\n\n          {/* Tabs */}\n          <View style={styles.tabContainer}>\n            <Pressable\n              onPress={() => setActiveTab(\"my-records\")}\n              style={[styles.tab, activeTab === \"my-records\" && styles.activeTab]}\n            >\n              <Text style={[styles.tabText, activeTab === \"my-records\" && styles.activeTabText]}>\n                My Records\n              </Text>\n            </Pressable>\n            \n            <Pressable\n              onPress={() => setActiveTab(\"published\")}\n              style={[styles.tab, activeTab === \"published\" && styles.activeTab]}\n            >\n              <Text style={[styles.tabText, activeTab === \"published\" && styles.activeTabText]}>\n                Published Records\n              </Text>\n            </Pressable>\n          </View>\n\n          {/* Records List */}\n          {currentRecords.length === 0 ? (\n            <View style={styles.emptyState}>\n              <View style={styles.emptyIcon}>\n                <Ionicons\n                  name={activeTab === \"my-records\" ? \"folder-outline\" : \"cloud-outline\"}\n                  size={48}\n                  color=\"#9CA3AF\"\n                />\n              </View>\n              <Text style={styles.emptyTitle}>\n                {activeTab === \"my-records\" ? \"No Records Yet\" : \"No Published Records\"}\n              </Text>\n              <Text style={styles.emptyMessage}>\n                {activeTab === \"my-records\"\n                  ? \"Your saved slippage records will appear here\"\n                  : \"Published slippage records from all users will appear here\"}\n              </Text>\n              <Pressable\n                onPress={() => navigation.navigate(\"ProductDetails\")}\n                style={styles.createButton}\n              >\n                <Text style={styles.createButtonText}>Create New Record</Text>\n              </Pressable>\n            </View>\n          ) : (\n            <View style={styles.recordsList}>\n              {currentRecords.map((record) => {\n                const { total, hasExceeds } = calculateTotalSlippage(record);\n                const pattern = customPatterns.find((p) => p.id === record.config.strandPattern);\n                const isPublished = \"publishedAt\" in record;\n\n                return (\n                  <Pressable\n                    key={record.id}\n                    onPress={() => handleRecordPress(record)}\n                    style={styles.recordCard}\n                  >\n                    <View style={styles.recordHeader}>\n                      <View style={styles.recordHeaderLeft}>\n                        <View style={styles.recordTitleRow}>\n                          <Text style={styles.recordTitle}>\n                            {record.config.projectName || \"Unnamed Project\"}\n                          </Text>\n                          {isPublished && (\n                            <View style={styles.publishedBadge}>\n                              <Text style={styles.publishedBadgeText}>PUBLISHED</Text>\n                            </View>\n                          )}\n                        </View>\n                        \n                        {(record.config.projectNumber || record.config.markNumber || record.config.idNumber) && (\n                          <View style={styles.recordMetaRow}>\n                            {record.config.projectNumber && (\n                              <View style={styles.metaBadge}>\n                                <Text style={styles.metaBadgeText}>\n                                  Proj: {record.config.projectNumber}\n                                </Text>\n                              </View>\n                            )}\n                            {record.config.markNumber && (\n                              <View style={styles.metaBadge}>\n                                <Text style={styles.metaBadgeText}>\n                                  Mark: {record.config.markNumber}\n                                </Text>\n                              </View>\n                            )}\n                            {record.config.idNumber && (\n                              <View style={styles.metaBadge}>\n                                <Text style={styles.metaBadgeText}>\n                                  ID: {record.config.idNumber}\n                                </Text>\n                              </View>\n                            )}\n                          </View>\n                        )}\n                        \n                        <Text style={styles.recordDate}>\n                          {format(new Date(record.timestamp), \"MMM dd, yyyy  h:mm a\")}\n                        </Text>\n                        <Text style={styles.recordCreator}>By: {record.createdBy}</Text>\n                        {isPublished && (\n                          <Text style={styles.recordPublished}>\n                            Published: {format(new Date((record as PublishedSlippageRecord).publishedAt), \"MMM dd, yyyy\")}\n                          </Text>\n                        )}\n                      </View>\n                      \n                      {canDelete && (\n                        <Pressable\n                          onPress={() => setDeleteItemId(record.id)}\n                          style={styles.deleteButton}\n                        >\n                          <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                        </Pressable>\n                      )}\n                    </View>\n\n                    <View style={styles.recordDivider} />\n\n                    <View style={styles.recordDetails}>\n                      <View style={styles.recordDetailRow}>\n                        <View style={styles.recordDetailLeft}>\n                          <Ionicons name=\"cube-outline\" size={16} color=\"#6B7280\" />\n                          <Text style={styles.recordDetailText}>\n                            {record.config.productType}\n                          </Text>\n                        </View>\n                        {record.config.span && (\n                          <Text style={styles.recordDetailText}>\n                            {record.config.span}\" span\n                          </Text>\n                        )}\n                      </View>\n\n                      {pattern && (\n                        <View style={styles.recordDetailLeft}>\n                          <Ionicons name=\"albums-outline\" size={16} color=\"#6B7280\" />\n                          <Text style={styles.recordDetailText}>\n                            Pattern: {pattern.name}\n                          </Text>\n                        </View>\n                      )}\n\n                      <View style={styles.totalSlippageCard}>\n                        <View style={styles.totalSlippageRow}>\n                          <Text style={styles.totalSlippageLabel}>Total Slippage</Text>\n                          <Text style={styles.totalSlippageValue}>\n                            {hasExceeds && \">\"}\n                            {total.toFixed(3)}\" ({hasExceeds && \">\"}\n                            {decimalToFraction(total)})\n                          </Text>\n                        </View>\n                        {hasExceeds && (\n                          <Text style={styles.warningText}>\n                             Contains values exceeding 1\"\n                          </Text>\n                        )}\n                      </View>\n                    </View>\n\n                    <View style={styles.recordFooter}>\n                      <Ionicons name=\"chevron-forward\" size={16} color=\"#9CA3AF\" />\n                    </View>\n                  </Pressable>\n                );\n              })}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Modals */}\n      <ConfirmModal\n        visible={showClearAllModal}\n        title={`Clear ${activeTab === \"my-records\" ? \"My Records\" : \"Published Records\"}`}\n        message={`Are you sure you want to delete all ${\n          activeTab === \"my-records\" ? \"your\" : \"published\"\n        } records? This action cannot be undone.`}\n        confirmText=\"Clear All\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"destructive\"\n        onConfirm={handleClearAll}\n        onCancel={() => setShowClearAllModal(false)}\n      />\n\n      <ConfirmModal\n        visible={deleteItemId !== null}\n        title=\"Delete Record\"\n        message=\"Are you sure you want to delete this record?\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"destructive\"\n        onConfirm={() => deleteItemId && handleDeleteItem(deleteItemId)}\n        onCancel={() => setDeleteItemId(null)}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F9FAFB',\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 20,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 24,\n  },\n  headerLeft: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: '#111827',\n    marginBottom: 4,\n  },\n  subtitle: {\n    fontSize: 14,\n    color: '#6B7280',\n  },\n  clearButton: {\n    backgroundColor: '#FEF2F2',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 8,\n  },\n  clearButtonText: {\n    color: '#DC2626',\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    backgroundColor: '#E5E7EB',\n    borderRadius: 12,\n    padding: 4,\n    marginBottom: 24,\n  },\n  tab: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    backgroundColor: 'transparent',\n  },\n  activeTab: {\n    backgroundColor: 'white',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  tabText: {\n    textAlign: 'center',\n    fontWeight: '600',\n    color: '#6B7280',\n  },\n  activeTabText: {\n    color: '#111827',\n  },\n  emptyState: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 80,\n  },\n  emptyIcon: {\n    backgroundColor: '#F3F4F6',\n    borderRadius: 9999,\n    padding: 24,\n    marginBottom: 16,\n  },\n  emptyTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#111827',\n    marginBottom: 8,\n  },\n  emptyMessage: {\n    fontSize: 14,\n    color: '#6B7280',\n    textAlign: 'center',\n    marginBottom: 24,\n    paddingHorizontal: 32,\n  },\n  createButton: {\n    backgroundColor: '#3B82F6',\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 12,\n  },\n  createButtonText: {\n    color: 'white',\n    fontWeight: '600',\n  },\n  recordsList: {\n    gap: 12,\n  },\n  recordCard: {\n    backgroundColor: 'white',\n    borderRadius: 12,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  recordHeader: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    justifyContent: 'space-between',\n    marginBottom: 12,\n  },\n  recordHeaderLeft: {\n    flex: 1,\n  },\n  recordTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  recordTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#111827',\n  },\n  publishedBadge: {\n    backgroundColor: '#F3E8FF',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n    marginLeft: 8,\n  },\n  publishedBadgeText: {\n    fontSize: 10,\n    fontWeight: 'bold',\n    color: '#7C3AED',\n  },\n  recordMetaRow: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n    marginBottom: 4,\n  },\n  metaBadge: {\n    backgroundColor: '#F3F4F6',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  metaBadgeText: {\n    fontSize: 12,\n    color: '#374151',\n  },\n  recordDate: {\n    fontSize: 12,\n    color: '#6B7280',\n  },\n  recordCreator: {\n    fontSize: 12,\n    color: '#6B7280',\n  },\n  recordPublished: {\n    fontSize: 12,\n    color: '#7C3AED',\n  },\n  deleteButton: {\n    backgroundColor: '#FEF2F2',\n    borderRadius: 9999,\n    padding: 8,\n    marginLeft: 8,\n  },\n  recordDivider: {\n    height: StyleSheet.hairlineWidth,\n    backgroundColor: '#F3F4F6',\n    marginVertical: 12,\n  },\n  recordDetails: {\n    gap: 8,\n  },\n  recordDetailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  recordDetailLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  recordDetailText: {\n    fontSize: 14,\n    color: '#6B7280',\n  },\n  totalSlippageCard: {\n    backgroundColor: '#EFF6FF',\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    marginTop: 8,\n  },\n  totalSlippageRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  totalSlippageLabel: {\n    fontSize: 12,\n    color: '#1D4ED8',\n    fontWeight: '500',\n  },\n  totalSlippageValue: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#1D4ED8',\n  },\n  warningText: {\n    fontSize: 12,\n    color: '#EA580C',\n    fontWeight: '600',\n    marginTop: 4,\n  },\n  recordFooter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    marginTop: 12,\n  },\n});\n","/**\n * Microsoft Graph API Integration\n * \n * This module handles authentication and email sending via Microsoft Graph API.\n * Emails sent through this API will appear in the user's Outlook Sent folder.\n * \n * SETUP REQUIRED:\n * 1. Register an app in Azure AD (portal.azure.com)\n * 2. Add redirect URI: exp://[your-app-slug]/--/redirect\n * 3. Grant API permissions: Mail.Send (delegated)\n * 4. Add your Azure AD app credentials to .env file\n */\n\nimport * as AuthSession from \"expo-auth-session\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\n// Enable browser dismiss on iOS\nWebBrowser.maybeCompleteAuthSession();\n\n// Microsoft Graph API configuration\n// TODO: These need to be configured in your .env file or Azure AD app registration\nconst AZURE_AD_CONFIG = {\n  clientId: process.env.EXPO_PUBLIC_AZURE_AD_CLIENT_ID || \"YOUR_CLIENT_ID_HERE\",\n  tenantId: process.env.EXPO_PUBLIC_AZURE_AD_TENANT_ID || \"common\", // Use \"common\" for multi-tenant or your specific tenant ID\n  redirectUri: AuthSession.makeRedirectUri({\n    scheme: \"exp\", // Change to your custom scheme if needed\n  }),\n  scopes: [\"Mail.Send\", \"User.Read\"], // Mail.Send allows sending emails, User.Read for user info\n};\n\nconst GRAPH_API_ENDPOINT = \"https://graph.microsoft.com/v1.0\";\nconst TOKEN_STORAGE_KEY = \"microsoft_graph_token\";\n\ninterface GraphAPIToken {\n  accessToken: string;\n  refreshToken?: string;\n  expiresAt: number;\n}\n\ninterface EmailParams {\n  from: string;\n  to: string;\n  cc?: string;\n  subject: string;\n  body: string;\n}\n\n/**\n * Authenticate with Microsoft and get access token\n */\nexport async function authenticateWithMicrosoft(): Promise<GraphAPIToken> {\n  try {\n    const discovery = {\n      authorizationEndpoint: `https://login.microsoftonline.com/${AZURE_AD_CONFIG.tenantId}/oauth2/v2.0/authorize`,\n      tokenEndpoint: `https://login.microsoftonline.com/${AZURE_AD_CONFIG.tenantId}/oauth2/v2.0/token`,\n    };\n\n    const request = new AuthSession.AuthRequest({\n      clientId: AZURE_AD_CONFIG.clientId,\n      scopes: AZURE_AD_CONFIG.scopes,\n      redirectUri: AZURE_AD_CONFIG.redirectUri,\n      responseType: AuthSession.ResponseType.Code,\n      usePKCE: true,\n    });\n\n    const result = await request.promptAsync(discovery);\n\n    if (result.type === \"success\") {\n      const { code } = result.params;\n\n      // Exchange code for tokens\n      const tokenResponse = await fetch(discovery.tokenEndpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        body: new URLSearchParams({\n          client_id: AZURE_AD_CONFIG.clientId,\n          code: code,\n          redirect_uri: AZURE_AD_CONFIG.redirectUri,\n          grant_type: \"authorization_code\",\n          code_verifier: request.codeVerifier || \"\",\n        }).toString(),\n      });\n\n      const tokens = await tokenResponse.json();\n\n      if (tokens.error) {\n        throw new Error(tokens.error_description || tokens.error);\n      }\n\n      const tokenData: GraphAPIToken = {\n        accessToken: tokens.access_token,\n        refreshToken: tokens.refresh_token,\n        expiresAt: Date.now() + tokens.expires_in * 1000,\n      };\n\n      // Store tokens securely\n      await AsyncStorage.setItem(TOKEN_STORAGE_KEY, JSON.stringify(tokenData));\n\n      return tokenData;\n    } else if (result.type === \"error\") {\n      throw new Error(result.params.error_description || \"Authentication failed\");\n    } else {\n      // User cancelled - don't log as error, just throw for caller to handle\n      const cancelError = new Error(\"Authentication was cancelled\");\n      cancelError.name = \"AuthCancelledError\";\n      throw cancelError;\n    }\n  } catch (error: any) {\n    // Only log errors that aren't user cancellations\n    if (error.name !== \"AuthCancelledError\") {\n      console.error(\"Microsoft authentication error:\", error);\n    }\n    throw error;\n  }\n}\n\n/**\n * Get stored access token or refresh if expired\n */\nasync function getValidAccessToken(): Promise<string> {\n  try {\n    const storedToken = await AsyncStorage.getItem(TOKEN_STORAGE_KEY);\n\n    if (!storedToken) {\n      throw new Error(\"No authentication token found. Please sign in.\");\n    }\n\n    const tokenData: GraphAPIToken = JSON.parse(storedToken);\n\n    // Check if token is expired (with 5 minute buffer)\n    if (Date.now() >= tokenData.expiresAt - 5 * 60 * 1000) {\n      // Token expired or about to expire, need to re-authenticate\n      // In a production app, you'd use the refresh token here\n      throw new Error(\"Token expired. Please sign in again.\");\n    }\n\n    return tokenData.accessToken;\n  } catch (error) {\n    console.error(\"Token retrieval error:\", error);\n    throw error;\n  }\n}\n\n/**\n * Send email via Microsoft Graph API\n * \n * The email will be sent from the authenticated user's account and will\n * appear in their Outlook Sent folder automatically.\n */\nexport async function sendEmailViaGraphAPI(params: EmailParams): Promise<void> {\n  try {\n    const accessToken = await getValidAccessToken();\n\n    // Prepare recipients\n    const toRecipients = params.to.split(\",\").map((email) => ({\n      emailAddress: {\n        address: email.trim(),\n      },\n    }));\n\n    const ccRecipients = params.cc\n      ? params.cc.split(\",\").map((email) => ({\n          emailAddress: {\n            address: email.trim(),\n          },\n        }))\n      : undefined;\n\n    // Prepare email message\n    const message = {\n      message: {\n        subject: params.subject,\n        body: {\n          contentType: \"Text\",\n          content: params.body,\n        },\n        toRecipients: toRecipients,\n        ccRecipients: ccRecipients,\n      },\n      saveToSentItems: true, // Important: This saves to Sent folder\n    };\n\n    // Send email via Graph API\n    const response = await fetch(`${GRAPH_API_ENDPOINT}/me/sendMail`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(message),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(\n        errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`\n      );\n    }\n\n    // Success - no response body for sendMail endpoint\n    console.log(\"Email sent successfully via Graph API\");\n  } catch (error: any) {\n    console.error(\"Graph API send email error:\", error);\n    \n    // Check if it's an authentication error\n    if (error.message?.includes(\"token\") || error.message?.includes(\"authentication\")) {\n      // Clear invalid token\n      await AsyncStorage.removeItem(TOKEN_STORAGE_KEY);\n    }\n    \n    throw error;\n  }\n}\n\n/**\n * Check if user is authenticated\n */\nexport async function isAuthenticated(): Promise<boolean> {\n  try {\n    const storedToken = await AsyncStorage.getItem(TOKEN_STORAGE_KEY);\n    if (!storedToken) return false;\n\n    const tokenData: GraphAPIToken = JSON.parse(storedToken);\n    return Date.now() < tokenData.expiresAt;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Sign out and clear stored tokens\n */\nexport async function signOutMicrosoft(): Promise<void> {\n  await AsyncStorage.removeItem(TOKEN_STORAGE_KEY);\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  ScrollView,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  ActivityIndicator,\n  Alert,\n  StyleSheet,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { \n  sendEmailViaGraphAPI, \n  authenticateWithMicrosoft, \n  isAuthenticated \n} from \"../api/microsoft-graph\";\n\ntype EmailComposerScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"EmailComposer\"\n>;\ntype EmailComposerScreenRouteProp = RouteProp<RootStackParamList, \"EmailComposer\">;\n\ninterface Props {\n  navigation: EmailComposerScreenNavigationProp;\n  route: EmailComposerScreenRouteProp;\n}\n\nexport default function EmailComposerScreen({ navigation, route }: Props) {\n  const insets = useSafeAreaInsets();\n  const currentUser = useAuthStore((state) => state.currentUser);\n  const { subject, body } = route.params;\n\n  const [toEmail, setToEmail] = useState(\"\");\n  const [ccEmail, setCcEmail] = useState(\"\");\n  const [isSending, setIsSending] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n  const [isMicrosoftAuthenticated, setIsMicrosoftAuthenticated] = useState(false);\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n\n  const fromEmail = currentUser?.email || \"\";\n\n  // Check Microsoft authentication status on mount\n  useEffect(() => {\n    checkAuthStatus();\n  }, []);\n\n  const checkAuthStatus = async () => {\n    setIsCheckingAuth(true);\n    const authenticated = await isAuthenticated();\n    setIsMicrosoftAuthenticated(authenticated);\n    setIsCheckingAuth(false);\n  };\n\n  const handleMicrosoftSignIn = async () => {\n    try {\n      setIsSending(true);\n      await authenticateWithMicrosoft();\n      setIsMicrosoftAuthenticated(true);\n      Alert.alert(\n        \"Success\",\n        \"Successfully signed in with Microsoft. You can now send emails.\"\n      );\n    } catch (error: any) {\n      // Don't show error if user cancelled authentication\n      if (error.name === \"AuthCancelledError\") {\n        // User cancelled - just silently return\n        return;\n      }\n\n      console.error(\"Microsoft sign-in error:\", error);\n      Alert.alert(\n        \"Sign In Failed\",\n        error.message || \"Unable to sign in with Microsoft. Please try again.\"\n      );\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handleSend = async () => {\n    // Check if authenticated first\n    if (!isMicrosoftAuthenticated) {\n      Alert.alert(\n        \"Authentication Required\",\n        \"Please sign in with your Microsoft account to send emails.\",\n        [\n          {\n            text: \"Cancel\",\n            style: \"cancel\",\n          },\n          {\n            text: \"Sign In\",\n            onPress: handleMicrosoftSignIn,\n          },\n        ]\n      );\n      return;\n    }\n\n    // Validate recipient\n    if (!toEmail.trim()) {\n      Alert.alert(\"Missing Recipient\", \"Please enter a recipient email address.\");\n      return;\n    }\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(toEmail.trim())) {\n      Alert.alert(\"Invalid Email\", \"Please enter a valid email address.\");\n      return;\n    }\n\n    setIsSending(true);\n\n    try {\n      await sendEmailViaGraphAPI({\n        from: fromEmail,\n        to: toEmail.trim(),\n        cc: ccEmail.trim() || undefined,\n        subject,\n        body,\n      });\n\n      Alert.alert(\n        \"Email Sent Successfully\",\n        \"Your report has been sent and will appear in your Outlook Sent folder.\",\n        [\n          {\n            text: \"OK\",\n            onPress: () => navigation.goBack(),\n          },\n        ]\n      );\n    } catch (error: any) {\n      console.error(\"Email send error:\", error);\n      \n      if (error.message?.includes(\"authentication\") || error.message?.includes(\"token\")) {\n        setIsMicrosoftAuthenticated(false);\n        Alert.alert(\n          \"Authentication Required\",\n          \"Your session has expired. Please sign in again.\",\n          [\n            {\n              text: \"Cancel\",\n              style: \"cancel\",\n            },\n            {\n              text: \"Sign In\",\n              onPress: handleMicrosoftSignIn,\n            },\n          ]\n        );\n      } else {\n        Alert.alert(\n          \"Send Failed\",\n          `Unable to send email: ${error.message || \"Unknown error\"}. Please try again.`,\n          [{ text: \"OK\" }]\n        );\n      }\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n    >\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={{ paddingBottom: insets.bottom + 20 }}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        <View style={styles.content}>\n          {/* Microsoft Authentication Status */}\n          {isCheckingAuth ? (\n            <View style={styles.authCheckContainer}>\n              <ActivityIndicator color=\"#3B82F6\" />\n              <Text style={styles.authCheckText}>Checking authentication...</Text>\n            </View>\n          ) : !isMicrosoftAuthenticated ? (\n            <View style={styles.authRequiredContainer}>\n              <Ionicons name=\"alert-circle\" size={48} color=\"#F59E0B\" />\n              <Text style={styles.authRequiredTitle}>Microsoft Sign-In Required</Text>\n              <Text style={styles.authRequiredText}>\n                To send emails through your Outlook account, please sign in with Microsoft.\n              </Text>\n              <Pressable\n                style={styles.signInButton}\n                onPress={handleMicrosoftSignIn}\n                disabled={isSending}\n              >\n                {isSending ? (\n                  <ActivityIndicator color=\"white\" />\n                ) : (\n                  <>\n                    <Ionicons name=\"logo-microsoft\" size={20} color=\"white\" />\n                    <Text style={styles.signInButtonText}>Sign in with Microsoft</Text>\n                  </>\n                )}\n              </Pressable>\n            </View>\n          ) : (\n            <>\n              {/* From Field (Read-only) */}\n              <View style={styles.fieldContainer}>\n                <Text style={styles.label}>From</Text>\n                <View style={styles.fromContainer}>\n                  <Text style={styles.fromEmail}>{fromEmail}</Text>\n                  <View style={styles.verifiedBadge}>\n                    <Ionicons name=\"checkmark-circle\" size={16} color=\"#10B981\" />\n                    <Text style={styles.verifiedText}>Microsoft</Text>\n                  </View>\n                </View>\n              </View>\n\n          {/* To Field */}\n          <View style={styles.fieldContainer}>\n            <Text style={styles.label}>To *</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"recipient@example.com\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={toEmail}\n              onChangeText={setToEmail}\n              keyboardType=\"email-address\"\n              autoCapitalize=\"none\"\n              autoCorrect={false}\n              editable={!isSending}\n            />\n          </View>\n\n          {/* CC Field */}\n          <View style={styles.fieldContainer}>\n            <Text style={styles.label}>CC (Optional)</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"cc@example.com\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={ccEmail}\n              onChangeText={setCcEmail}\n              keyboardType=\"email-address\"\n              autoCapitalize=\"none\"\n              autoCorrect={false}\n              editable={!isSending}\n            />\n          </View>\n\n          {/* Subject (Read-only) */}\n          <View style={styles.fieldContainer}>\n            <Text style={styles.label}>Subject</Text>\n            <View style={styles.readOnlyField}>\n              <Text style={styles.readOnlyText}>{subject}</Text>\n            </View>\n          </View>\n\n          {/* Preview Toggle */}\n          <Pressable\n            style={styles.previewButton}\n            onPress={() => setShowPreview(!showPreview)}\n          >\n            <Ionicons\n              name={showPreview ? \"eye-off-outline\" : \"eye-outline\"}\n              size={20}\n              color=\"#3B82F6\"\n            />\n            <Text style={styles.previewButtonText}>\n              {showPreview ? \"Hide Preview\" : \"Show Preview\"}\n            </Text>\n          </Pressable>\n\n          {/* Body Preview */}\n          {showPreview && (\n            <View style={styles.previewContainer}>\n              <Text style={styles.previewLabel}>Email Body Preview:</Text>\n              <ScrollView style={styles.previewScroll}>\n                <Text style={styles.previewText}>{body}</Text>\n              </ScrollView>\n            </View>\n          )}\n\n          {/* Info Box */}\n          <View style={styles.infoBox}>\n            <Ionicons name=\"information-circle\" size={20} color=\"#3B82F6\" />\n            <Text style={styles.infoText}>\n              This email will be sent through your Microsoft 365 account and will\n              appear in your Outlook Sent folder.\n            </Text>\n          </View>\n\n          {/* Send Button */}\n          <Pressable\n            style={[styles.sendButton, isSending && styles.sendButtonDisabled]}\n            onPress={handleSend}\n            disabled={isSending}\n          >\n            {isSending ? (\n              <ActivityIndicator color=\"white\" />\n            ) : (\n              <>\n                <Ionicons name=\"send\" size={20} color=\"white\" />\n                <Text style={styles.sendButtonText}>Send Report</Text>\n              </>\n            )}\n          </Pressable>\n\n          {/* Cancel Button */}\n          <Pressable\n            style={styles.cancelButton}\n            onPress={() => navigation.goBack()}\n            disabled={isSending}\n          >\n            <Text style={styles.cancelButtonText}>Cancel</Text>\n          </Pressable>\n            </>\n          )}\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#F9FAFB\",\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 20,\n  },\n  authCheckContainer: {\n    padding: 40,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  authCheckText: {\n    marginTop: 12,\n    fontSize: 14,\n    color: \"#6B7280\",\n  },\n  authRequiredContainer: {\n    padding: 32,\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n    borderRadius: 16,\n    borderWidth: 2,\n    borderColor: \"#FED7AA\",\n  },\n  authRequiredTitle: {\n    fontSize: 20,\n    fontWeight: \"700\",\n    color: \"#92400E\",\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: \"center\",\n  },\n  authRequiredText: {\n    fontSize: 14,\n    color: \"#78350F\",\n    textAlign: \"center\",\n    marginBottom: 24,\n    lineHeight: 20,\n  },\n  signInButton: {\n    backgroundColor: \"#0078D4\",\n    borderRadius: 12,\n    paddingVertical: 14,\n    paddingHorizontal: 24,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 10,\n    minWidth: 200,\n  },\n  signInButtonText: {\n    color: \"white\",\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n  fieldContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: \"600\",\n    color: \"#374151\",\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: \"white\",\n    borderWidth: 1,\n    borderColor: \"#D1D5DB\",\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    fontSize: 16,\n    color: \"#111827\",\n  },\n  fromContainer: {\n    backgroundColor: \"#F3F4F6\",\n    borderWidth: 1,\n    borderColor: \"#E5E7EB\",\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n  fromEmail: {\n    fontSize: 16,\n    color: \"#374151\",\n    fontWeight: \"500\",\n  },\n  verifiedBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#ECFDF5\",\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 8,\n    gap: 4,\n  },\n  verifiedText: {\n    fontSize: 12,\n    color: \"#10B981\",\n    fontWeight: \"600\",\n  },\n  readOnlyField: {\n    backgroundColor: \"#F9FAFB\",\n    borderWidth: 1,\n    borderColor: \"#E5E7EB\",\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  readOnlyText: {\n    fontSize: 16,\n    color: \"#6B7280\",\n  },\n  previewButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingVertical: 12,\n    gap: 8,\n    marginBottom: 16,\n  },\n  previewButtonText: {\n    fontSize: 16,\n    color: \"#3B82F6\",\n    fontWeight: \"600\",\n  },\n  previewContainer: {\n    backgroundColor: \"white\",\n    borderWidth: 1,\n    borderColor: \"#D1D5DB\",\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 20,\n  },\n  previewLabel: {\n    fontSize: 14,\n    fontWeight: \"600\",\n    color: \"#374151\",\n    marginBottom: 8,\n  },\n  previewScroll: {\n    maxHeight: 200,\n  },\n  previewText: {\n    fontSize: 14,\n    color: \"#6B7280\",\n    lineHeight: 20,\n  },\n  infoBox: {\n    flexDirection: \"row\",\n    backgroundColor: \"#EFF6FF\",\n    borderWidth: 1,\n    borderColor: \"#DBEAFE\",\n    borderRadius: 12,\n    padding: 12,\n    marginBottom: 20,\n    gap: 12,\n  },\n  infoText: {\n    flex: 1,\n    fontSize: 13,\n    color: \"#1E40AF\",\n    lineHeight: 18,\n  },\n  sendButton: {\n    backgroundColor: \"#3B82F6\",\n    borderRadius: 12,\n    paddingVertical: 16,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 8,\n    marginBottom: 12,\n  },\n  sendButtonDisabled: {\n    backgroundColor: \"#93C5FD\",\n  },\n  sendButtonText: {\n    color: \"white\",\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n  cancelButton: {\n    backgroundColor: \"white\",\n    borderWidth: 1,\n    borderColor: \"#D1D5DB\",\n    borderRadius: 12,\n    paddingVertical: 16,\n    alignItems: \"center\",\n  },\n  cancelButtonText: {\n    color: \"#374151\",\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n});\n","import { create } from 'zustand';\nimport { FirebaseSync } from '../services/firebaseSync';\n\nexport interface StrandDefinition {\n  id: string;\n  name: string; // e.g., \"1/2\\\" Grade 270\"\n  diameter: number; // inches (e.g., 0.5)\n  area: number; // square inches\n  elasticModulus: number; // ksi (1000 psi)\n  breakingStrength: number; // kips (1000 lbs)\n  grade?: string; // e.g., \"270\", \"250\"\n  isDefault?: boolean; // True for built-in strands\n  createdAt: number; // timestamp\n}\n\ninterface StrandLibraryState {\n  strands: StrandDefinition[];\n  loading: boolean;\n  initialized: boolean;\n  addStrand: (strand: Omit<StrandDefinition, 'id' | 'createdAt'>) => Promise<void>;\n  updateStrand: (id: string, strand: Omit<StrandDefinition, 'id' | 'createdAt'>) => Promise<void>;\n  removeStrand: (id: string) => Promise<void>;\n  getStrandById: (id: string) => StrandDefinition | undefined;\n  getStrandsByDiameter: (diameter: number) => StrandDefinition[];\n  seedDefaultStrands: () => Promise<void>;\n  initialize: () => Promise<void>;\n}\n\n// Default strand definitions based on ASTM A416\nconst DEFAULT_STRANDS: Omit<StrandDefinition, 'id' | 'createdAt'>[] = [\n  // Grade 250 strands\n  {\n    name: \"3/8\\\" Grade 250\",\n    diameter: 0.375,\n    area: 0.080,\n    elasticModulus: 28500,\n    breakingStrength: 20.0,\n    grade: \"250\",\n    isDefault: true,\n  },\n  {\n    name: \"7/16\\\" Grade 250\",\n    diameter: 0.4375,\n    area: 0.115,\n    elasticModulus: 28500,\n    breakingStrength: 29.0,\n    grade: \"250\",\n    isDefault: true,\n  },\n  {\n    name: \"1/2\\\" Grade 250\",\n    diameter: 0.500,\n    area: 0.153,\n    elasticModulus: 28500,\n    breakingStrength: 38.3,\n    grade: \"250\",\n    isDefault: true,\n  },\n  {\n    name: \"0.6\\\" Grade 250\",\n    diameter: 0.600,\n    area: 0.217,\n    elasticModulus: 28500,\n    breakingStrength: 54.0,\n    grade: \"250\",\n    isDefault: true,\n  },\n  // Grade 270 strands\n  {\n    name: \"3/8\\\" Grade 270\",\n    diameter: 0.375,\n    area: 0.080,\n    elasticModulus: 28500,\n    breakingStrength: 23.0,\n    grade: \"270\",\n    isDefault: true,\n  },\n  {\n    name: \"7/16\\\" Grade 270\",\n    diameter: 0.4375,\n    area: 0.115,\n    elasticModulus: 28500,\n    breakingStrength: 31.0,\n    grade: \"270\",\n    isDefault: true,\n  },\n  {\n    name: \"1/2\\\" Grade 270\",\n    diameter: 0.500,\n    area: 0.153,\n    elasticModulus: 28500,\n    breakingStrength: 41.3,\n    grade: \"270\",\n    isDefault: true,\n  },\n  {\n    name: \"0.6\\\" Grade 270\",\n    diameter: 0.600,\n    area: 0.217,\n    elasticModulus: 28500,\n    breakingStrength: 58.6,\n    grade: \"270\",\n    isDefault: true,\n  },\n];\n\nconst firebaseSync = new FirebaseSync<StrandDefinition>('strandLibrary');\n\nexport const useStrandLibraryStore = create<StrandLibraryState>()((set, get) => ({\n  strands: [],\n  loading: false,\n  initialized: false,\n\n  initialize: async () => {\n    if (get().initialized) return;\n\n    set({ loading: true });\n\n    try {\n      // Fetch initial data\n      const strands = await firebaseSync.fetchAll();\n      set({ strands, loading: false, initialized: true });\n\n      // Subscribe to real-time updates\n      firebaseSync.subscribe((updatedStrands) => {\n        set({ strands: updatedStrands });\n      });\n\n      // Seed default strands if empty\n      if (strands.length === 0) {\n        await get().seedDefaultStrands();\n      }\n    } catch (error) {\n      console.error('Failed to initialize strand library:', error);\n      set({ loading: false, initialized: true });\n    }\n  },\n\n  addStrand: async (strand) => {\n    const id = `strand-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n    const newStrand: StrandDefinition = {\n      ...strand,\n      id,\n      createdAt: Date.now(),\n    };\n\n    // Optimistically update UI\n    set((state) => ({\n      strands: [...state.strands, newStrand],\n    }));\n\n    try {\n      await firebaseSync.set(id, newStrand);\n    } catch (error) {\n      // Revert on error\n      set((state) => ({\n        strands: state.strands.filter((s) => s.id !== id),\n      }));\n      throw error;\n    }\n  },\n\n  updateStrand: async (id, strand) => {\n    const oldStrand = get().strands.find((s) => s.id === id);\n\n    // Optimistically update UI\n    set((state) => ({\n      strands: state.strands.map((s) =>\n        s.id === id ? { ...s, ...strand } : s\n      ),\n    }));\n\n    try {\n      await firebaseSync.set(id, strand);\n    } catch (error) {\n      // Revert on error\n      if (oldStrand) {\n        set((state) => ({\n          strands: state.strands.map((s) => (s.id === id ? oldStrand : s)),\n        }));\n      }\n      throw error;\n    }\n  },\n\n  removeStrand: async (id) => {\n    const oldStrand = get().strands.find((s) => s.id === id);\n\n    // Optimistically update UI\n    set((state) => ({\n      strands: state.strands.filter((s) => s.id !== id),\n    }));\n\n    try {\n      await firebaseSync.delete(id);\n    } catch (error) {\n      // Revert on error\n      if (oldStrand) {\n        set((state) => ({\n          strands: [...state.strands, oldStrand],\n        }));\n      }\n      throw error;\n    }\n  },\n\n  getStrandById: (id) => {\n    return get().strands.find((s) => s.id === id);\n  },\n\n  getStrandsByDiameter: (diameter) => {\n    return get().strands.filter((s) => Math.abs(s.diameter - diameter) < 0.001);\n  },\n\n  seedDefaultStrands: async () => {\n    const state = get();\n\n    // Check if we need to add Grade 250 strands (migration)\n    const hasGrade250 = state.strands.some(s => s.grade === \"250\");\n\n    if (state.strands.length === 0) {\n      // Fresh install - add all default strands\n      for (const strand of DEFAULT_STRANDS) {\n        await state.addStrand(strand);\n      }\n    } else if (!hasGrade250) {\n      // Existing installation without Grade 250 - add only Grade 250 strands\n      const grade250Strands = DEFAULT_STRANDS.filter(s => s.grade === \"250\");\n      for (const strand of grade250Strands) {\n        await state.addStrand(strand);\n      }\n    }\n  },\n}));\n","import React, { useState } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  ScrollView,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n  TouchableWithoutFeedback,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useStrandLibraryStore } from \"../state/strandLibraryStore\";\n\ntype StressingCalculatorScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"StressingCalculator\"\n>;\n\ninterface Props {\n  navigation: StressingCalculatorScreenNavigationProp;\n}\n\nexport default function StressingCalculatorScreen({ navigation }: Props) {\n  const insets = useSafeAreaInsets();\n  \n  // Get strands from library\n  const strands = useStrandLibraryStore((state) => state.strands);\n  const getStrandById = useStrandLibraryStore((state) => state.getStrandById);\n\n  // Input states\n  const [jackingForce, setJackingForce] = useState(\"\");\n  const [bedLength, setBedLength] = useState(\"\");\n  const [selectedStrandId, setSelectedStrandId] = useState<string>(\n    strands.length > 0 ? strands[0].id : \"\"\n  );\n  const [numberOfStrands, setNumberOfStrands] = useState(\"\");\n  const [bedShortening, setBedShortening] = useState(\"\");\n  const [frictionLoss, setFrictionLoss] = useState(\"\");\n  const [anchorSetLoss, setAnchorSetLoss] = useState(\"\");\n  const [showStrandPicker, setShowStrandPicker] = useState(false);\n\n  const handleCalculate = () => {\n    // Validate inputs\n    if (!jackingForce || !bedLength || !numberOfStrands || !selectedStrandId) {\n      // Validation feedback already shown via UI\n      return;\n    }\n\n    // Navigate to results screen\n    navigation.navigate(\"StressingResults\", {\n      jackingForce: parseFloat(jackingForce),\n      bedLength: parseFloat(bedLength),\n      strandId: selectedStrandId,\n      numberOfStrands: parseInt(numberOfStrands),\n      bedShortening: bedShortening ? parseFloat(bedShortening) : undefined,\n      frictionLoss: frictionLoss ? parseFloat(frictionLoss) : undefined,\n      anchorSetLoss: anchorSetLoss ? parseFloat(anchorSetLoss) : undefined,\n    });\n  };\n  \n  const selectedStrand = selectedStrandId ? getStrandById(selectedStrandId) : null;\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-white\"\n      style={{ paddingTop: insets.top }}\n    >\n      <ScrollView\n        className=\"flex-1\"\n        contentContainerStyle={{ paddingBottom: 40 }}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        {/* Header */}\n        <View className=\"px-6 py-4 border-b border-gray-200\">\n          <Text className=\"text-gray-900 text-2xl font-bold\">\n            Stressing Force & Elongation\n          </Text>\n          <Text className=\"text-gray-600 text-sm mt-1\">\n            Calculate expected strand elongation measurement\n          </Text>\n        </View>\n\n        {/* Info Banner */}\n        <View className=\"px-6 mt-4 mb-3\">\n          <View className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#3B82F6\" />\n              <Text className=\"text-blue-900 text-xs ml-2 flex-1\">\n                Enter the total jacking force, bed dimensions, and strand details to calculate what the elongation gauge should read for a single strand during prestressing.\n              </Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Required Inputs */}\n        <View className=\"px-6\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Required Information\n          </Text>\n\n          {/* Jacking Force */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Total Jacking Force (kips) *\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 120.5\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={jackingForce}\n              onChangeText={setJackingForce}\n              keyboardType=\"decimal-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Total force applied to all strands (1 kip = 1,000 lbs)\n            </Text>\n          </View>\n\n          {/* Bed Length */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Bed Length (feet) *\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 400\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={bedLength}\n              onChangeText={setBedLength}\n              keyboardType=\"decimal-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Distance between anchorages\n            </Text>\n          </View>\n\n          {/* Strand Selection */}\n          <View className=\"mb-4\">\n            <View className=\"flex-row justify-between items-center mb-1.5\">\n              <Text className=\"text-gray-700 text-sm font-medium\">\n                Strand Type *\n              </Text>\n              <Pressable\n                onPress={() => navigation.navigate(\"StrandLibrary\")}\n                className=\"flex-row items-center\"\n              >\n                <Ionicons name=\"library\" size={14} color=\"#3B82F6\" />\n                <Text className=\"text-blue-500 text-xs ml-1\">Manage Library</Text>\n              </Pressable>\n            </View>\n            \n            {strands.length === 0 ? (\n              <View className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                <Text className=\"text-yellow-900 text-sm mb-2\">\n                  No strands available in library\n                </Text>\n                <Pressable\n                  onPress={() => navigation.navigate(\"StrandLibrary\")}\n                  className=\"bg-yellow-500 rounded-lg py-2 px-4 items-center\"\n                >\n                  <Text className=\"text-white text-sm font-medium\">\n                    Add Strands to Library\n                  </Text>\n                </Pressable>\n              </View>\n            ) : (\n              <Pressable\n                className=\"bg-white border border-gray-300 rounded-lg px-4 py-3\"\n                onPress={() => setShowStrandPicker(true)}\n              >\n                <View className=\"flex-row justify-between items-center\">\n                  <View className=\"flex-1\">\n                    <Text className=\"text-gray-900 text-base font-medium\">\n                      {selectedStrand?.name || \"Select a strand\"}\n                    </Text>\n                    {selectedStrand && (\n                      <Text className=\"text-gray-500 text-xs mt-1\">\n                        {selectedStrand.diameter}\"  {selectedStrand.area.toFixed(3)} in  Grade {selectedStrand.grade}\n                      </Text>\n                    )}\n                  </View>\n                  <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n                </View>\n              </Pressable>\n            )}\n          </View>\n\n          {/* Number of Strands */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Number of Strands *\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 7\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={numberOfStrands}\n              onChangeText={setNumberOfStrands}\n              keyboardType=\"number-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Total number of strands being stressed\n            </Text>\n          </View>\n        </View>\n\n        {/* Optional Inputs */}\n        <View className=\"px-6 mt-2\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Optional Adjustments\n          </Text>\n\n          {/* Bed Shortening */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Bed Shortening (inches)\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 0.125\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={bedShortening}\n              onChangeText={setBedShortening}\n              keyboardType=\"decimal-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Elastic compression of the bed during stressing\n            </Text>\n          </View>\n\n          {/* Friction Loss */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Friction Loss (%)\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 1.5\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={frictionLoss}\n              onChangeText={setFrictionLoss}\n              keyboardType=\"decimal-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Typical range: 0.5-2% for long beds\n            </Text>\n          </View>\n\n          {/* Anchor Set Loss */}\n          <View className=\"mb-4\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-1.5\">\n              Anchor Set Loss (inches)\n            </Text>\n            <TextInput\n              className=\"bg-white border border-gray-300 rounded-lg px-4 py-3 text-base\"\n              placeholder=\"e.g., 0.25\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              value={anchorSetLoss}\n              onChangeText={setAnchorSetLoss}\n              keyboardType=\"decimal-pad\"\n            />\n            <Text className=\"text-gray-500 text-xs mt-1\">\n              Slip at anchorage during lock-off\n            </Text>\n          </View>\n        </View>\n\n        {/* Calculate Button */}\n        <View className=\"px-6 mt-2\">\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n            onPress={handleCalculate}\n          >\n            <View className=\"flex-row items-center\">\n              <Ionicons name=\"calculator\" size={20} color=\"white\" />\n              <Text className=\"text-white text-base font-semibold ml-2\">\n                Calculate Elongation\n              </Text>\n            </View>\n          </Pressable>\n        </View>\n      </ScrollView>\n\n      {/* Strand Picker Modal */}\n      <Modal\n        visible={showStrandPicker}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowStrandPicker(false)}\n      >\n        <TouchableWithoutFeedback onPress={() => setShowStrandPicker(false)}>\n          <View className=\"flex-1 bg-black/50 justify-end\">\n            <TouchableWithoutFeedback>\n              <View className=\"bg-white rounded-t-3xl\" style={{ paddingBottom: insets.bottom + 20 }}>\n                {/* Header */}\n                <View className=\"flex-row justify-between items-center px-6 py-4 border-b border-gray-200\">\n                  <Text className=\"text-gray-900 text-lg font-bold\">\n                    Select Strand\n                  </Text>\n                  <Pressable onPress={() => setShowStrandPicker(false)}>\n                    <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                  </Pressable>\n                </View>\n\n                {/* Strand List */}\n                <ScrollView className=\"max-h-96\">\n                  {strands.map((strand) => (\n                    <Pressable\n                      key={strand.id}\n                      className={`px-6 py-4 border-b border-gray-100 ${\n                        selectedStrandId === strand.id ? \"bg-blue-50\" : \"\"\n                      }`}\n                      onPress={() => {\n                        setSelectedStrandId(strand.id);\n                        setShowStrandPicker(false);\n                      }}\n                    >\n                      <View className=\"flex-row justify-between items-center\">\n                        <View className=\"flex-1\">\n                          <Text className=\"text-gray-900 text-base font-semibold\">\n                            {strand.name}\n                          </Text>\n                          <Text className=\"text-gray-600 text-sm mt-1\">\n                            {strand.diameter}\" diameter  {strand.area.toFixed(3)} in  {strand.breakingStrength.toFixed(1)} kips\n                          </Text>\n                          {strand.isDefault && (\n                            <Text className=\"text-gray-400 text-xs mt-0.5\">\n                              Standard (ASTM A416)\n                            </Text>\n                          )}\n                        </View>\n                        {selectedStrandId === strand.id && (\n                          <Ionicons name=\"checkmark-circle\" size={24} color=\"#3B82F6\" />\n                        )}\n                      </View>\n                    </Pressable>\n                  ))}\n                </ScrollView>\n              </View>\n            </TouchableWithoutFeedback>\n          </View>\n        </TouchableWithoutFeedback>\n      </Modal>\n    </KeyboardAvoidingView>\n  );\n}\n","/**\n * Stressing Force and Elongation Calculator Utilities\n * \n * Standard prestressing strand properties based on ASTM A416 Grade 270\n * and industry-standard practices for hollow-core concrete manufacturing\n */\n\n// Standard strand properties\nexport interface StrandProperties {\n  diameter: number; // inches\n  area: number; // square inches\n  elasticModulus: number; // ksi (1000 psi)\n  breakingStrength: number; // kips (1000 lbs)\n  yieldStrength: number; // kips\n}\n\n// Standard 7-wire prestressing strand properties (ASTM A416 Grade 270)\nexport const STRAND_PROPERTIES: Record<string, StrandProperties> = {\n  \"3/8\": {\n    diameter: 0.375,\n    area: 0.080, // sq in\n    elasticModulus: 28500, // ksi\n    breakingStrength: 23.0, // kips\n    yieldStrength: 20.7, // kips (90% of breaking)\n  },\n  \"1/2\": {\n    diameter: 0.500,\n    area: 0.153, // sq in\n    elasticModulus: 28500, // ksi\n    breakingStrength: 41.3, // kips\n    yieldStrength: 37.2, // kips (90% of breaking)\n  },\n  \"0.6\": {\n    diameter: 0.600,\n    area: 0.217, // sq in\n    elasticModulus: 28500, // ksi\n    breakingStrength: 58.6, // kips\n    yieldStrength: 52.7, // kips (90% of breaking)\n  },\n};\n\nexport interface ElongationInputs {\n  jackingForce: number; // Total jacking force in kips\n  bedLength: number; // Bed length in feet\n  strandSize: \"3/8\" | \"1/2\" | \"0.6\"; // Strand diameter\n  numberOfStrands: number; // Number of strands being pulled\n  bedShortening?: number; // Bed shortening in inches (optional)\n  frictionLoss?: number; // Friction loss as percentage (optional)\n  anchorSetLoss?: number; // Anchor set loss in inches (optional)\n}\n\nexport interface ElongationResults {\n  theoreticalElongation: number; // inches\n  bedShortening: number; // inches\n  frictionLoss: number; // inches\n  anchorSetLoss: number; // inches\n  totalElongation: number; // inches\n  forcePerStrand: number; // kips\n  stressPerStrand: number; // ksi\n}\n\n/**\n * Calculate theoretical elongation using formula:\n * Elongation = (Force  Length) / (Area  Elastic Modulus)\n * \n * @param force - Force in kips\n * @param length - Length in inches\n * @param area - Cross-sectional area in sq inches\n * @param elasticModulus - Elastic modulus in ksi\n * @returns Elongation in inches\n */\nexport function calculateTheoreticalElongation(\n  force: number,\n  length: number,\n  area: number,\n  elasticModulus: number\n): number {\n  return (force * length) / (area * elasticModulus);\n}\n\n/**\n * Calculate expected elongation with all factors\n */\nexport function calculateElongation(inputs: ElongationInputs): ElongationResults {\n  const strandProps = STRAND_PROPERTIES[inputs.strandSize];\n\n  // Convert bed length from feet to inches\n  const bedLengthInches = inputs.bedLength * 12;\n\n  // Calculate force per strand\n  const forcePerStrand = inputs.jackingForce / inputs.numberOfStrands;\n\n  // Calculate stress per strand\n  const stressPerStrand = forcePerStrand / strandProps.area;\n\n  // Calculate theoretical elongation for one strand\n  // Elongation = (Force  Length) / (Area  Elastic Modulus)\n  const theoreticalElongation = calculateTheoreticalElongation(\n    forcePerStrand,\n    bedLengthInches,\n    strandProps.area,\n    strandProps.elasticModulus\n  );\n\n  // Bed shortening (elastic compression of the bed during stressing)\n  const bedShortening = inputs.bedShortening || 0;\n\n  // Friction loss (typically 0.5-2% of length for long beds)\n  const frictionLossPercent = inputs.frictionLoss || 0;\n  const frictionLoss = (frictionLossPercent / 100) * theoreticalElongation;\n\n  // Anchor set loss (slip at anchorage during lock-off)\n  const anchorSetLoss = inputs.anchorSetLoss || 0;\n\n  // Total elongation = theoretical + bed shortening - friction - anchor set\n  const totalElongation =\n    theoreticalElongation + bedShortening - frictionLoss - anchorSetLoss;\n\n  return {\n    theoreticalElongation,\n    bedShortening,\n    frictionLoss,\n    anchorSetLoss,\n    totalElongation,\n    forcePerStrand,\n    stressPerStrand,\n  };\n}\n\n/**\n * Calculate required jacking force for a desired elongation\n */\nexport function calculateRequiredForce(\n  targetElongation: number,\n  bedLength: number,\n  strandSize: \"3/8\" | \"1/2\" | \"0.6\",\n  numberOfStrands: number,\n  bedShortening: number = 0\n): number {\n  const strandProps = STRAND_PROPERTIES[strandSize];\n  const bedLengthInches = bedLength * 12;\n\n  // Adjust for bed shortening\n  const adjustedElongation = targetElongation - bedShortening;\n\n  // Force per strand = (Elongation  Area  Elastic Modulus) / Length\n  const forcePerStrand =\n    (adjustedElongation * strandProps.area * strandProps.elasticModulus) /\n    bedLengthInches;\n\n  // Total force\n  return forcePerStrand * numberOfStrands;\n}\n\n/**\n * Format a number to a specific decimal place with units\n */\nexport function formatValue(value: number, decimals: number = 3, unit: string = \"\"): string {\n  return `${value.toFixed(decimals)}${unit}`;\n}\n","import React, { useMemo } from \"react\";\nimport { View, Text, ScrollView, Pressable } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useStrandLibraryStore } from \"../state/strandLibraryStore\";\nimport { calculateTheoreticalElongation, formatValue } from \"../utils/stressing-calculations\";\n\ntype StressingResultsScreenNavigationProp = NativeStackNavigationProp<\n  RootStackParamList,\n  \"StressingResults\"\n>;\ntype StressingResultsScreenRouteProp = RouteProp<\n  RootStackParamList,\n  \"StressingResults\"\n>;\n\ninterface Props {\n  navigation: StressingResultsScreenNavigationProp;\n  route: StressingResultsScreenRouteProp;\n}\n\nexport default function StressingResultsScreen({ navigation, route }: Props) {\n  const insets = useSafeAreaInsets();\n  const inputs = route.params;\n  \n  // Get strand from library\n  const getStrandById = useStrandLibraryStore((state) => state.getStrandById);\n  const strand = getStrandById(inputs.strandId);\n\n  // Calculate elongation\n  const results = useMemo(() => {\n    if (!strand) {\n      return null;\n    }\n\n    // Convert bed length from feet to inches\n    const bedLengthInches = inputs.bedLength * 12;\n\n    // Calculate force per strand\n    const forcePerStrand = inputs.jackingForce / inputs.numberOfStrands;\n\n    // Calculate stress per strand\n    const stressPerStrand = forcePerStrand / strand.area;\n\n    // Calculate theoretical elongation for one strand\n    const theoreticalElongation = calculateTheoreticalElongation(\n      forcePerStrand,\n      bedLengthInches,\n      strand.area,\n      strand.elasticModulus\n    );\n\n    // Bed shortening (elastic compression of the bed during stressing)\n    const bedShortening = inputs.bedShortening || 0;\n\n    // Friction loss (typically 0.5-2% of length for long beds)\n    const frictionLossPercent = inputs.frictionLoss || 0;\n    const frictionLoss = (frictionLossPercent / 100) * theoreticalElongation;\n\n    // Anchor set loss (slip at anchorage during lock-off)\n    const anchorSetLoss = inputs.anchorSetLoss || 0;\n\n    // Total elongation = theoretical + bed shortening - friction - anchor set\n    const totalElongation =\n      theoreticalElongation + bedShortening - frictionLoss - anchorSetLoss;\n\n    return {\n      theoreticalElongation,\n      bedShortening,\n      frictionLoss,\n      anchorSetLoss,\n      totalElongation,\n      forcePerStrand,\n      stressPerStrand,\n    };\n  }, [inputs, strand]);\n\n  if (!strand || !results) {\n    return (\n      <View className=\"flex-1 bg-white items-center justify-center\" style={{ paddingTop: insets.top }}>\n        <Ionicons name=\"alert-circle\" size={48} color=\"#EF4444\" />\n        <Text className=\"text-gray-900 text-lg font-bold mt-4\">\n          Strand Not Found\n        </Text>\n        <Text className=\"text-gray-600 text-sm mt-2 px-6 text-center\">\n          The selected strand is no longer available in the library.\n        </Text>\n        <Pressable\n          className=\"bg-blue-500 rounded-xl py-3 px-6 mt-6\"\n          onPress={() => navigation.goBack()}\n        >\n          <Text className=\"text-white text-base font-semibold\">\n            Go Back\n          </Text>\n        </Pressable>\n      </View>\n    );\n  }\n\n  return (\n    <View className=\"flex-1 bg-white\" style={{ paddingTop: insets.top }}>\n      <ScrollView className=\"flex-1\" contentContainerStyle={{ paddingBottom: 20 }}>\n        {/* Header */}\n        <View className=\"px-6 py-4 border-b border-gray-200\">\n          <Text className=\"text-gray-900 text-2xl font-bold\">\n            Elongation Results\n          </Text>\n          <Text className=\"text-gray-600 text-sm mt-1\">\n            {strand.name}  {inputs.numberOfStrands} strands  {inputs.bedLength}\" bed\n          </Text>\n        </View>\n\n        {/* Main Result - Total Elongation */}\n        <View className=\"px-6 mt-4\">\n          <View className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-500\">\n            <Text className=\"text-gray-700 text-sm font-medium mb-2\">\n              Expected Elongation (Per Strand)\n            </Text>\n            <Text className=\"text-blue-600 text-4xl font-bold\">\n              {formatValue(results.totalElongation, 3, '\"')}\n            </Text>\n            <Text className=\"text-gray-600 text-xs mt-2\">\n              Measurement reading on gauge/dial\n            </Text>\n          </View>\n        </View>\n\n        {/* Elongation Breakdown */}\n        <View className=\"px-6 mt-4\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Elongation Breakdown\n          </Text>\n\n          {/* Theoretical Elongation */}\n          <View className=\"bg-green-50 rounded-lg p-4 mb-2\">\n            <View className=\"flex-row justify-between items-center\">\n              <Text className=\"text-gray-700 text-sm font-medium\">\n                Theoretical Elongation\n              </Text>\n              <Text className=\"text-green-600 text-lg font-bold\">\n                +{formatValue(results.theoreticalElongation, 3, '\"')}\n              </Text>\n            </View>\n            <Text className=\"text-gray-600 text-xs mt-1\">\n              Based on elastic deformation formula\n            </Text>\n          </View>\n\n          {/* Bed Shortening */}\n          {results.bedShortening > 0 && (\n            <View className=\"bg-blue-50 rounded-lg p-4 mb-2\">\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-gray-700 text-sm font-medium\">\n                  Bed Shortening\n                </Text>\n                <Text className=\"text-blue-600 text-lg font-bold\">\n                  +{formatValue(results.bedShortening, 3, '\"')}\n                </Text>\n              </View>\n              <Text className=\"text-gray-600 text-xs mt-1\">\n                Elastic compression of casting bed\n              </Text>\n            </View>\n          )}\n\n          {/* Friction Loss */}\n          {results.frictionLoss > 0 && (\n            <View className=\"bg-orange-50 rounded-lg p-4 mb-2\">\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-gray-700 text-sm font-medium\">\n                  Friction Loss\n                </Text>\n                <Text className=\"text-orange-600 text-lg font-bold\">\n                  -{formatValue(results.frictionLoss, 3, '\"')}\n                </Text>\n              </View>\n              <Text className=\"text-gray-600 text-xs mt-1\">\n                Loss due to friction along bed length\n              </Text>\n            </View>\n          )}\n\n          {/* Anchor Set Loss */}\n          {results.anchorSetLoss > 0 && (\n            <View className=\"bg-purple-50 rounded-lg p-4 mb-2\">\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-gray-700 text-sm font-medium\">\n                  Anchor Set Loss\n                </Text>\n                <Text className=\"text-purple-600 text-lg font-bold\">\n                  -{formatValue(results.anchorSetLoss, 3, '\"')}\n                </Text>\n              </View>\n              <Text className=\"text-gray-600 text-xs mt-1\">\n                Slip during anchorage lock-off\n              </Text>\n            </View>\n          )}\n        </View>\n\n        {/* Force & Stress Details */}\n        <View className=\"px-6 mt-4\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Force & Stress Analysis\n          </Text>\n\n          <View className=\"flex-row gap-2 mb-2\">\n            {/* Force Per Strand */}\n            <View className=\"flex-1 bg-gray-50 rounded-lg p-3\">\n              <Text className=\"text-gray-600 text-xs mb-1\">Force/Strand</Text>\n              <Text className=\"text-gray-900 text-base font-bold\">\n                {formatValue(results.forcePerStrand, 2, \" kips\")}\n              </Text>\n              <Text className=\"text-gray-500 text-xs mt-0.5\">\n                {formatValue(results.forcePerStrand * 1000, 0, \" lbs\")}\n              </Text>\n            </View>\n\n            {/* Stress Per Strand */}\n            <View className=\"flex-1 bg-gray-50 rounded-lg p-3\">\n              <Text className=\"text-gray-600 text-xs mb-1\">Stress/Strand</Text>\n              <Text className=\"text-gray-900 text-base font-bold\">\n                {formatValue(results.stressPerStrand, 1, \" ksi\")}\n              </Text>\n              <Text className=\"text-gray-500 text-xs mt-0.5\">\n                {formatValue(results.stressPerStrand * 1000, 0, \" psi\")}\n              </Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Strand Properties Reference */}\n        <View className=\"px-6 mt-4\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Strand Properties\n          </Text>\n\n          <View className=\"bg-gray-50 rounded-lg p-4\">\n            <View className=\"flex-row justify-between mb-2\">\n              <Text className=\"text-gray-600 text-sm\">Name</Text>\n              <Text className=\"text-gray-900 text-sm font-semibold\">\n                {strand.name}\n              </Text>\n            </View>\n            <View className=\"flex-row justify-between mb-2\">\n              <Text className=\"text-gray-600 text-sm\">Diameter</Text>\n              <Text className=\"text-gray-900 text-sm font-semibold\">\n                {formatValue(strand.diameter, 3, '\"')}\n              </Text>\n            </View>\n            <View className=\"flex-row justify-between mb-2\">\n              <Text className=\"text-gray-600 text-sm\">Cross-Sectional Area</Text>\n              <Text className=\"text-gray-900 text-sm font-semibold\">\n                {formatValue(strand.area, 3, \" in\")}\n              </Text>\n            </View>\n            <View className=\"flex-row justify-between mb-2\">\n              <Text className=\"text-gray-600 text-sm\">Elastic Modulus</Text>\n              <Text className=\"text-gray-900 text-sm font-semibold\">\n                {formatValue(strand.elasticModulus, 0, \" ksi\")}\n              </Text>\n            </View>\n            <View className=\"flex-row justify-between\">\n              <Text className=\"text-gray-600 text-sm\">Minimum Breaking Strength</Text>\n              <Text className=\"text-gray-900 text-sm font-semibold\">\n                {formatValue(strand.breakingStrength, 1, \" kips\")} ({formatValue(strand.breakingStrength * 1000, 0, \" lbs\")})\n              </Text>\n            </View>\n            {strand.grade && (\n              <View className=\"flex-row justify-between mt-2\">\n                <Text className=\"text-gray-600 text-sm\">Grade</Text>\n                <Text className=\"text-gray-900 text-sm font-semibold\">\n                  {strand.grade} ksi\n                </Text>\n              </View>\n            )}\n            {strand.isDefault && (\n              <Text className=\"text-gray-500 text-xs mt-3\">\n                Based on ASTM A416 Grade {strand.grade} standards\n              </Text>\n            )}\n          </View>\n        </View>\n\n        {/* Action Buttons */}\n        <View className=\"px-6 mt-6\">\n          <Pressable\n            className=\"bg-gray-100 rounded-xl py-4 items-center active:bg-gray-200 mb-3\"\n            onPress={() => navigation.goBack()}\n          >\n            <Text className=\"text-gray-700 text-base font-semibold\">\n              Back to Calculator\n            </Text>\n          </Pressable>\n\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n            onPress={() => navigation.navigate(\"Dashboard\")}\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              Return to Dashboard\n            </Text>\n          </Pressable>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  TextInput,\n  KeyboardAvoidingView,\n  Platform,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useStrandLibraryStore, StrandDefinition } from \"../state/strandLibraryStore\";\nimport ConfirmModal from \"../components/ConfirmModal\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\n\nexport default function StrandLibraryScreen() {\n  const navigation = useNavigation<NativeStackNavigationProp<RootStackParamList>>();\n  const insets = useSafeAreaInsets();\n  const { strands, loading, initialize, addStrand, updateStrand, removeStrand } = useStrandLibraryStore();\n\n  // Initialize Firebase sync\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingStrand, setEditingStrand] = useState<StrandDefinition | null>(null);\n  const [deleteConfirmId, setDeleteConfirmId] = useState<string | null>(null);\n\n  // Form state\n  const [formName, setFormName] = useState(\"\");\n  const [formDiameter, setFormDiameter] = useState(\"\");\n  const [formArea, setFormArea] = useState(\"\");\n  const [formElasticModulus, setFormElasticModulus] = useState(\"28500\");\n  const [formBreakingStrength, setFormBreakingStrength] = useState(\"\");\n  const [formGrade, setFormGrade] = useState(\"270\");\n\n  const resetForm = () => {\n    setFormName(\"\");\n    setFormDiameter(\"\");\n    setFormArea(\"\");\n    setFormElasticModulus(\"28500\");\n    setFormBreakingStrength(\"\");\n    setFormGrade(\"270\");\n  };\n\n  const handleAdd = () => {\n    setEditingStrand(null);\n    resetForm();\n    setShowAddModal(true);\n  };\n\n  const handleEdit = (strand: StrandDefinition) => {\n    setEditingStrand(strand);\n    setFormName(strand.name);\n    setFormDiameter(strand.diameter.toString());\n    setFormArea(strand.area.toString());\n    setFormElasticModulus(strand.elasticModulus.toString());\n    setFormBreakingStrength(strand.breakingStrength.toString());\n    setFormGrade(strand.grade || \"\");\n    setShowAddModal(true);\n  };\n\n  const handleSave = () => {\n    // Validation\n    if (!formName || !formDiameter || !formArea || !formElasticModulus || !formBreakingStrength) {\n      alert(\"Please fill in all required fields\");\n      return;\n    }\n\n    const strandData = {\n      name: formName,\n      diameter: parseFloat(formDiameter),\n      area: parseFloat(formArea),\n      elasticModulus: parseFloat(formElasticModulus),\n      breakingStrength: parseFloat(formBreakingStrength),\n      grade: formGrade || undefined,\n      isDefault: false,\n    };\n\n    if (editingStrand) {\n      updateStrand(editingStrand.id, strandData);\n    } else {\n      addStrand(strandData);\n    }\n\n    setShowAddModal(false);\n    resetForm();\n  };\n\n  const handleDelete = (id: string) => {\n    removeStrand(id);\n    setDeleteConfirmId(null);\n  };\n\n  // Separate default and custom strands\n  const defaultStrands = strands.filter((s) => s.isDefault);\n  const customStrands = strands.filter((s) => !s.isDefault);\n\n  return (\n    <View className=\"flex-1 bg-gray-50\" style={{ paddingTop: insets.top }}>\n      <ScrollView className=\"flex-1\" contentContainerStyle={{ paddingBottom: 20 }}>\n        {/* Header */}\n        <View className=\"px-6 py-4 bg-white border-b border-gray-200\">\n          <Text className=\"text-gray-900 text-2xl font-bold\">Strand Library</Text>\n          <Text className=\"text-gray-600 text-sm mt-1\">\n            Manage strand definitions and properties\n          </Text>\n        </View>\n\n        {/* Add Button */}\n        <View className=\"px-6 mt-4\">\n          <Pressable\n            className=\"bg-blue-500 rounded-xl py-3 items-center active:bg-blue-600 flex-row justify-center\"\n            onPress={handleAdd}\n          >\n            <Ionicons name=\"add-circle-outline\" size={20} color=\"white\" />\n            <Text className=\"text-white text-base font-semibold ml-2\">\n              Add Custom Strand\n            </Text>\n          </Pressable>\n        </View>\n\n        {/* Navigate to Strand Patterns Button */}\n        <View className=\"px-6 mt-3\">\n          <Pressable\n            className=\"bg-purple-500 rounded-xl py-3 items-center active:bg-purple-600 flex-row justify-center\"\n            onPress={() => navigation.navigate(\"StrandPatterns\")}\n          >\n            <Ionicons name=\"albums-outline\" size={20} color=\"white\" />\n            <Text className=\"text-white text-base font-semibold ml-2\">\n              Manage Strand Patterns\n            </Text>\n          </Pressable>\n          <Text className=\"text-gray-500 text-xs mt-2 text-center\">\n            Strand patterns define configurations of multiple strands used in tools\n          </Text>\n        </View>\n\n        {/* Default Strands */}\n        <View className=\"px-6 mt-4\">\n          <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n            Standard Strands (ASTM A416)\n          </Text>\n\n          {defaultStrands.map((strand) => (\n            <View\n              key={strand.id}\n              className=\"bg-white rounded-lg p-4 mb-3 border border-gray-200\"\n            >\n              <View className=\"flex-row justify-between items-start mb-2\">\n                <View className=\"flex-1\">\n                  <Text className=\"text-gray-900 text-base font-bold\">\n                    {strand.name}\n                  </Text>\n                  {strand.grade && (\n                    <Text className=\"text-gray-500 text-xs mt-0.5\">\n                      Grade {strand.grade} ksi\n                    </Text>\n                  )}\n                </View>\n              </View>\n\n              <View className=\"flex-row flex-wrap gap-3 mt-2\">\n                <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                  <Text className=\"text-gray-500 text-xs\">Diameter</Text>\n                  <Text className=\"text-gray-900 text-sm font-semibold\">\n                    {strand.diameter}\"\n                  </Text>\n                </View>\n\n                <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                  <Text className=\"text-gray-500 text-xs\">Area</Text>\n                  <Text className=\"text-gray-900 text-sm font-semibold\">\n                    {strand.area} in\n                  </Text>\n                </View>\n\n                <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                  <Text className=\"text-gray-500 text-xs\">Elastic Modulus</Text>\n                  <Text className=\"text-gray-900 text-sm font-semibold\">\n                    {strand.elasticModulus.toLocaleString()} ksi\n                  </Text>\n                </View>\n\n                <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                  <Text className=\"text-gray-500 text-xs\">Breaking Strength</Text>\n                  <Text className=\"text-gray-900 text-sm font-semibold\">\n                    {strand.breakingStrength} kips ({(strand.breakingStrength * 1000).toLocaleString()} lbs)\n                  </Text>\n                </View>\n              </View>\n            </View>\n          ))}\n        </View>\n\n        {/* Custom Strands */}\n        {customStrands.length > 0 && (\n          <View className=\"px-6 mt-4\">\n            <Text className=\"text-gray-900 text-lg font-semibold mb-3\">\n              Custom Strands\n            </Text>\n\n            {customStrands.map((strand) => (\n              <View\n                key={strand.id}\n                className=\"bg-white rounded-lg p-4 mb-3 border border-gray-200\"\n              >\n                <View className=\"flex-row justify-between items-start mb-2\">\n                  <View className=\"flex-1\">\n                    <Text className=\"text-gray-900 text-base font-bold\">\n                      {strand.name}\n                    </Text>\n                    {strand.grade && (\n                      <Text className=\"text-gray-500 text-xs mt-0.5\">\n                        Grade {strand.grade} ksi\n                      </Text>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row gap-2\">\n                    <Pressable\n                      className=\"bg-blue-100 rounded-full p-2\"\n                      onPress={() => handleEdit(strand)}\n                    >\n                      <Ionicons name=\"pencil\" size={16} color=\"#3B82F6\" />\n                    </Pressable>\n\n                    <Pressable\n                      className=\"bg-red-100 rounded-full p-2\"\n                      onPress={() => setDeleteConfirmId(strand.id)}\n                    >\n                      <Ionicons name=\"trash\" size={16} color=\"#EF4444\" />\n                    </Pressable>\n                  </View>\n                </View>\n\n                <View className=\"flex-row flex-wrap gap-3 mt-2\">\n                  <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                    <Text className=\"text-gray-500 text-xs\">Diameter</Text>\n                    <Text className=\"text-gray-900 text-sm font-semibold\">\n                      {strand.diameter}\"\n                    </Text>\n                  </View>\n\n                  <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                    <Text className=\"text-gray-500 text-xs\">Area</Text>\n                    <Text className=\"text-gray-900 text-sm font-semibold\">\n                      {strand.area} in\n                    </Text>\n                  </View>\n\n                  <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                    <Text className=\"text-gray-500 text-xs\">Elastic Modulus</Text>\n                    <Text className=\"text-gray-900 text-sm font-semibold\">\n                      {strand.elasticModulus.toLocaleString()} ksi\n                    </Text>\n                  </View>\n\n                  <View className=\"bg-gray-50 rounded px-3 py-1.5\">\n                    <Text className=\"text-gray-500 text-xs\">Breaking Strength</Text>\n                    <Text className=\"text-gray-900 text-sm font-semibold\">\n                      {strand.breakingStrength} kips ({(strand.breakingStrength * 1000).toLocaleString()} lbs)\n                    </Text>\n                  </View>\n                </View>\n              </View>\n            ))}\n          </View>\n        )}\n      </ScrollView>\n\n      {/* Add/Edit Modal */}\n      {showAddModal && (\n        <View className=\"absolute inset-0 bg-black/50 justify-center items-center\">\n          <KeyboardAvoidingView\n            behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n            className=\"w-11/12 max-w-lg\"\n          >\n            <View className=\"bg-white rounded-xl p-6\">\n              <Text className=\"text-gray-900 text-xl font-bold mb-4\">\n                {editingStrand ? \"Edit Strand\" : \"Add Custom Strand\"}\n              </Text>\n\n              <ScrollView className=\"max-h-96\" showsVerticalScrollIndicator={false}>\n                {/* Name */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Name *\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder='e.g., \"1/2 inch Grade 270\"'\n                    value={formName}\n                    onChangeText={setFormName}\n                  />\n                </View>\n\n                {/* Diameter */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Diameter (inches) *\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder=\"e.g., 0.5\"\n                    value={formDiameter}\n                    onChangeText={setFormDiameter}\n                    keyboardType=\"decimal-pad\"\n                  />\n                </View>\n\n                {/* Area */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Cross-Sectional Area (in) *\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder=\"e.g., 0.153\"\n                    value={formArea}\n                    onChangeText={setFormArea}\n                    keyboardType=\"decimal-pad\"\n                  />\n                </View>\n\n                {/* Elastic Modulus */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Elastic Modulus (ksi) *\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder=\"e.g., 28500\"\n                    value={formElasticModulus}\n                    onChangeText={setFormElasticModulus}\n                    keyboardType=\"decimal-pad\"\n                  />\n                </View>\n\n                {/* Breaking Strength */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Minimum Breaking Strength (kips) *\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder=\"e.g., 41.3\"\n                    value={formBreakingStrength}\n                    onChangeText={setFormBreakingStrength}\n                    keyboardType=\"decimal-pad\"\n                  />\n                  <Text className=\"text-gray-500 text-xs mt-1\">\n                    1 kip = 1,000 lbs\n                  </Text>\n                </View>\n\n                {/* Grade */}\n                <View className=\"mb-3\">\n                  <Text className=\"text-gray-700 text-sm font-medium mb-1\">\n                    Grade (optional)\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2\"\n                    placeholder=\"e.g., 270\"\n                    value={formGrade}\n                    onChangeText={setFormGrade}\n                  />\n                </View>\n              </ScrollView>\n\n              {/* Buttons */}\n              <View className=\"flex-row gap-3 mt-4\">\n                <Pressable\n                  className=\"flex-1 bg-gray-100 rounded-lg py-3 items-center\"\n                  onPress={() => {\n                    setShowAddModal(false);\n                    resetForm();\n                  }}\n                >\n                  <Text className=\"text-gray-700 font-semibold\">Cancel</Text>\n                </Pressable>\n\n                <Pressable\n                  className=\"flex-1 bg-blue-500 rounded-lg py-3 items-center active:bg-blue-600\"\n                  onPress={handleSave}\n                >\n                  <Text className=\"text-white font-semibold\">\n                    {editingStrand ? \"Update\" : \"Add\"}\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n          </KeyboardAvoidingView>\n        </View>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmModal\n        visible={deleteConfirmId !== null}\n        title=\"Delete Strand\"\n        message=\"Are you sure you want to delete this strand definition? This action cannot be undone.\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        confirmStyle=\"destructive\"\n        onConfirm={() => deleteConfirmId && handleDelete(deleteConfirmId)}\n        onCancel={() => setDeleteConfirmId(null)}\n      />\n    </View>\n  );\n}\n","import { AggregateConfig } from '../types/aggregate-gradation';\n\n// Standard sieve sizes mapping name to size in mm\nexport const STANDARD_SIEVES: Record<string, number> = {\n  '1\"': 25,\n  '3/4\"': 19,\n  '1/2\"': 12.5,\n  '3/8\"': 9.5,\n  '#4': 4.75,\n  '#8': 2.36,\n  '#16': 1.18,\n  '#30': 0.6,\n  '#50': 0.3,\n  '#100': 0.15,\n  '#200': 0.075,\n  'Pan': 0,\n};\n\n// Default aggregate configurations - from original HTML app\nexport const DEFAULT_AGGREGATES: Record<string, AggregateConfig> = {\n  'Keystone #7': {\n    type: 'Coarse',\n    sieves: [\n      { name: '3/4\"', size: 19, weightRetained: '', c33Lower: 90, c33Upper: 100 },\n      { name: '1/2\"', size: 12.5, weightRetained: '', c33Lower: 20, c33Upper: 55 },\n      { name: '3/8\"', size: 9.5, weightRetained: '', c33Lower: 0, c33Upper: 15 },\n      { name: '#4', size: 4.75, weightRetained: '', c33Lower: 0, c33Upper: 5 },\n      { name: '#8', size: 2.36, weightRetained: '', c33Lower: '-', c33Upper: '-' },\n      { name: 'Pan', size: 0, weightRetained: '', c33Lower: '-', c33Upper: '-' },\n    ],\n  },\n  'Kraemer 9/16\"': {\n    type: 'Coarse',\n    sieves: [\n      { name: '3/4\"', size: 19, weightRetained: '', c33Lower: 100, c33Upper: 100 },\n      { name: '1/2\"', size: 12.5, weightRetained: '', c33Lower: 90, c33Upper: 100 },\n      { name: '3/8\"', size: 9.5, weightRetained: '', c33Lower: 40, c33Upper: 70 },\n      { name: '#4', size: 4.75, weightRetained: '', c33Lower: 0, c33Upper: 15 },\n      { name: '#8', size: 2.36, weightRetained: '', c33Lower: 0, c33Upper: 5 },\n      { name: 'Pan', size: 0, weightRetained: '', c33Lower: '-', c33Upper: '-' },\n    ],\n  },\n  '#9 Gravel (St. Croix)': {\n    type: 'Coarse',\n    sieves: [\n      { name: '1/2\"', size: 12.5, weightRetained: '', c33Lower: 100, c33Upper: 100 },\n      { name: '3/8\"', size: 9.5, weightRetained: '', c33Lower: 85, c33Upper: 100 },\n      { name: '#4', size: 4.75, weightRetained: '', c33Lower: 10, c33Upper: 30 },\n      { name: '#8', size: 2.36, weightRetained: '', c33Lower: 0, c33Upper: 10 },\n      { name: '#16', size: 1.18, weightRetained: '', c33Lower: 0, c33Upper: 5 },\n      { name: 'Pan', size: 0, weightRetained: '', c33Lower: '-', c33Upper: '-' },\n    ],\n  },\n  'Concrete Sand': {\n    type: 'Fine',\n    sieves: [\n      { name: '3/8\"', size: 9.5, weightRetained: '', c33Lower: 100, c33Upper: 100 },\n      { name: '#4', size: 4.75, weightRetained: '', c33Lower: 95, c33Upper: 100 },\n      { name: '#8', size: 2.36, weightRetained: '', c33Lower: 80, c33Upper: 100 },\n      { name: '#16', size: 1.18, weightRetained: '', c33Lower: 50, c33Upper: 85 },\n      { name: '#30', size: 0.6, weightRetained: '', c33Lower: 25, c33Upper: 60 },\n      { name: '#50', size: 0.3, weightRetained: '', c33Lower: 10, c33Upper: 30 },\n      { name: '#100', size: 0.15, weightRetained: '', c33Lower: 2, c33Upper: 10 },\n      { name: 'Pan', size: 0, weightRetained: '', c33Lower: '-', c33Upper: '-' },\n    ],\n  },\n};\n\n// Get sieve list by aggregate type\nexport const getSieveList = (type: 'Fine' | 'Coarse'): string[] => {\n  if (type === 'Fine') {\n    return ['3/8\"', '#4', '#8', '#16', '#30', '#50', '#100', '#200', 'Pan'];\n  } else {\n    return ['2\"', '1 1/2\"', '1\"', '3/4\"', '1/2\"', '3/8\"', '#4', '#8', 'Pan'];\n  }\n};\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AggregateConfig, TestRecord } from '../types/aggregate-gradation';\nimport { DEFAULT_AGGREGATES } from '../utils/aggregate-gradation-constants';\n\ninterface AggregateGradationState {\n  // Data\n  aggregates: Record<string, AggregateConfig>;\n  testHistory: TestRecord[];\n  defaultAggregates: string[];\n  \n  // Aggregate management actions\n  addAggregate: (name: string, config: AggregateConfig) => void;\n  updateAggregate: (name: string, config: AggregateConfig) => void;\n  deleteAggregate: (name: string) => void;\n  \n  // Test management actions\n  addTest: (test: TestRecord) => void;\n  updateTest: (id: string, updates: Partial<TestRecord>) => void;\n  deleteTest: (id: string) => void;\n  clearAllTests: () => void;\n  \n  // Default aggregates management\n  setDefaultAggregates: (names: string[]) => void;\n  \n  // Utility actions\n  getAggregate: (name: string) => AggregateConfig | undefined;\n  getTest: (id: string) => TestRecord | undefined;\n}\n\nexport const useAggregateGradationStore = create<AggregateGradationState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      aggregates: DEFAULT_AGGREGATES,\n      testHistory: [],\n      defaultAggregates: ['Concrete Sand', 'Keystone #7'],\n      \n      // Aggregate management\n      addAggregate: (name, config) =>\n        set((state) => ({\n          aggregates: { ...state.aggregates, [name]: config },\n        })),\n      \n      updateAggregate: (name, config) =>\n        set((state) => ({\n          aggregates: { ...state.aggregates, [name]: config },\n        })),\n      \n      deleteAggregate: (name) =>\n        set((state) => {\n          const { [name]: deleted, ...remaining } = state.aggregates;\n          return {\n            aggregates: remaining,\n            defaultAggregates: state.defaultAggregates.filter(n => n !== name),\n          };\n        }),\n      \n      // Test management\n      addTest: (test) =>\n        set((state) => ({\n          testHistory: [test, ...state.testHistory].slice(0, 100), // Keep last 100 tests\n        })),\n      \n      updateTest: (id, updates) =>\n        set((state) => ({\n          testHistory: state.testHistory.map((test) =>\n            test.id === id ? { ...test, ...updates } : test\n          ),\n        })),\n      \n      deleteTest: (id) =>\n        set((state) => ({\n          testHistory: state.testHistory.filter((test) => test.id !== id),\n        })),\n      \n      clearAllTests: () => set({ testHistory: [] }),\n      \n      // Default aggregates\n      setDefaultAggregates: (names) =>\n        set({ defaultAggregates: names.slice(0, 8) }), // Max 8 defaults\n      \n      // Utilities\n      getAggregate: (name) => get().aggregates[name],\n      getTest: (id) => get().testHistory.find((test) => test.id === id),\n    }),\n    {\n      name: 'aggregate-gradation-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n","import React from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AggregateGradation'>;\n};\n\nconst AggregateGradationScreen: React.FC<Props> = ({ navigation }) => {\n  const { aggregates } = useAggregateGradationStore();\n  const aggregateList = Object.entries(aggregates);\n\n  const handleAggregateSelect = (name: string) => {\n    navigation.navigate('GradationTest', { aggregateName: name });\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Aggregate List */}\n        <View className=\"px-4 py-6\">\n          <Text className=\"text-lg font-semibold text-gray-800 mb-3\">\n            Available Aggregates\n          </Text>\n\n          {aggregateList.length === 0 ? (\n            <View className=\"bg-white rounded-lg p-6 items-center\">\n              <Ionicons name=\"warning-outline\" size={48} color=\"#9ca3af\" />\n              <Text className=\"text-gray-500 mt-3 text-center\">\n                No aggregates configured. Visit Admin Panel to add aggregates.\n              </Text>\n            </View>\n          ) : (\n            <View className=\"gap-3\">\n              {aggregateList.map(([name, config]) => (\n                <Pressable\n                  key={name}\n                  onPress={() => handleAggregateSelect(name)}\n                  className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-center justify-between\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-lg font-semibold text-gray-800\">\n                        {name}\n                      </Text>\n                      <View className=\"flex-row items-center gap-2 mt-1\">\n                        <View\n                          className={`px-2 py-1 rounded ${\n                            config.type === 'Fine'\n                              ? 'bg-green-100'\n                              : 'bg-blue-100'\n                          }`}\n                        >\n                          <Text\n                            className={`text-xs font-medium ${\n                              config.type === 'Fine'\n                                ? 'text-green-700'\n                                : 'text-blue-700'\n                            }`}\n                          >\n                            {config.type}\n                          </Text>\n                        </View>\n                        <Text className=\"text-sm text-gray-500\">\n                          {config.sieves.length} sieves\n                        </Text>\n                      </View>\n                      {config.maxDecant && (\n                        <Text className=\"text-xs text-gray-500 mt-1\">\n                          Max Decant: {config.maxDecant}%\n                        </Text>\n                      )}\n                    </View>\n                    <View className=\"w-10 h-10 bg-orange-100 rounded-full items-center justify-center\">\n                      <Ionicons name=\"chevron-forward\" size={20} color=\"#ea580c\" />\n                    </View>\n                  </View>\n                </Pressable>\n              ))}\n            </View>\n          )}\n        </View>\n\n        {/* Info Section */}\n        <View className=\"px-4 pb-6\">\n          <View className=\"bg-blue-50 rounded-lg p-4\">\n            <View className=\"flex-row gap-2\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#2563eb\" />\n              <View className=\"flex-1\">\n                <Text className=\"text-sm text-blue-900 font-medium mb-1\">\n                  About Gradation Testing\n                </Text>\n                <Text className=\"text-sm text-blue-800\">\n                  This tool helps you perform sieve analysis on aggregates to determine their gradation. Results are automatically checked against ASTM C33 specifications.\n                </Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default AggregateGradationScreen;\n","import React, { useState, useRef } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  TextInput,\n  KeyboardAvoidingView,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RouteProp } from '@react-navigation/native';\nimport { RootStackParamList } from '../navigation/types';\nimport { SieveData } from '../types/aggregate-gradation';\nimport { \n  calculateTestData, \n  calculateFinenessModulus, \n  calculateDecant, \n  checkC33Compliance \n} from '../utils/aggregate-gradation-calculations';\nimport ConfirmModal from '../components/ConfirmModal';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'GradationTest'>;\n  route: RouteProp<RootStackParamList, 'GradationTest'>;\n};\n\nconst GradationTestScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { aggregateName } = route.params;\n  const { aggregates, addTest } = useAggregateGradationStore();\n  \n  const aggregate = aggregates[aggregateName];\n  \n  // Format date as MM/DD/YYYY\n  const formatDate = (date: Date): string => {\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    const year = date.getFullYear();\n    return `${month}/${day}/${year}`;\n  };\n  \n  const [date, setDate] = useState(formatDate(new Date()));\n  const [sieveData, setSieveData] = useState<SieveData[]>(\n    aggregate.sieves.map(s => ({ ...s, weightRetained: '' }))\n  );\n  const [washedWeight, setWashedWeight] = useState('');\n  const [noProduction, setNoProduction] = useState(false);\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  \n  const inputRefs = useRef<(TextInput | null)[]>([]);\n\n  // Calculate total weight\n  const totalWeight = sieveData.reduce((sum, sieve) => {\n    const weight = parseFloat(sieve.weightRetained as string);\n    return sum + (isNaN(weight) ? 0 : weight);\n  }, 0);\n\n  const handleWeightChange = (index: number, value: string) => {\n    // Allow only numbers and decimal point\n    if (value && !/^\\d*\\.?\\d*$/.test(value)) return;\n    \n    const newSieveData = [...sieveData];\n    newSieveData[index].weightRetained = value;\n    setSieveData(newSieveData);\n  };\n\n  const handleDateShortcut = (daysAgo: number) => {\n    const newDate = new Date();\n    newDate.setDate(newDate.getDate() - daysAgo);\n    setDate(formatDate(newDate));\n  };\n\n  const handleSaveTest = () => {\n    // Validate that at least one weight is entered\n    const hasData = sieveData.some(s => s.weightRetained && parseFloat(s.weightRetained as string) > 0);\n    if (!hasData) {\n      Alert.alert('Validation Error', 'Please enter at least one sieve weight');\n      return;\n    }\n\n    // Calculate results\n    const calculatedSieves = calculateTestData(sieveData);\n    const finenessModulus = calculateFinenessModulus(aggregate.type, calculatedSieves);\n    const decant = aggregate.type === 'Fine' && washedWeight \n      ? calculateDecant(calculatedSieves, parseFloat(washedWeight))\n      : undefined;\n    const passC33 = checkC33Compliance(calculatedSieves);\n\n    // Create test record\n    const testRecord = {\n      id: Date.now().toString(),\n      timestamp: Date.now(),\n      aggregateName,\n      date,\n      sieveData: calculatedSieves,\n      totalWeight,\n      washedWeight: parseFloat(washedWeight) || undefined,\n      finenessModulus,\n      decant,\n      passC33,\n    };\n\n    addTest(testRecord);\n    navigation.replace('GradationResults', { testId: testRecord.id });\n  };\n\n  const handleCancel = () => {\n    const hasData = sieveData.some(s => s.weightRetained && parseFloat(s.weightRetained as string) > 0);\n    if (hasData) {\n      setShowCancelModal(true);\n    } else {\n      navigation.goBack();\n    }\n  };\n\n  const handleConfirmCancel = () => {\n    setShowCancelModal(false);\n    navigation.goBack();\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      className=\"flex-1 bg-gray-50\"\n    >\n      <View className=\"flex-1\">\n        <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n            {/* Date and Production Status */}\n            <View className=\"bg-white p-4 border-b border-gray-200\">\n              <Text className=\"text-sm font-medium text-gray-700 mb-2\">Test Date</Text>\n              <TextInput\n                cursorColor=\"#000000\"\n                value={date}\n                onChangeText={setDate}\n                placeholder=\"MM/DD/YYYY\"\n                className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base\"\n              />\n              \n              {/* Date Shortcuts */}\n              <View className=\"flex-row gap-2 mt-2\">\n                <Pressable\n                  onPress={() => handleDateShortcut(0)}\n                  className=\"bg-blue-100 px-3 py-1 rounded active:bg-blue-200\"\n                >\n                  <Text className=\"text-xs text-blue-700\">Today</Text>\n                </Pressable>\n                <Pressable\n                  onPress={() => handleDateShortcut(1)}\n                  className=\"bg-blue-100 px-3 py-1 rounded active:bg-blue-200\"\n                >\n                  <Text className=\"text-xs text-blue-700\">Yesterday</Text>\n                </Pressable>\n                <Pressable\n                  onPress={() => handleDateShortcut(7)}\n                  className=\"bg-blue-100 px-3 py-1 rounded active:bg-blue-200\"\n                >\n                  <Text className=\"text-xs text-blue-700\">Last Week</Text>\n                </Pressable>\n              </View>\n\n              {/* No Production Toggle */}\n              <Pressable\n                onPress={() => setNoProduction(!noProduction)}\n                className=\"flex-row items-center mt-4\"\n              >\n                <View\n                  className={`w-5 h-5 rounded border-2 mr-2 items-center justify-center ${\n                    noProduction ? 'bg-orange-600 border-orange-600' : 'border-gray-400'\n                  }`}\n                >\n                  {noProduction && <Ionicons name=\"checkmark\" size={14} color=\"white\" />}\n                </View>\n                <Text className=\"text-sm text-gray-700\">No Production</Text>\n              </Pressable>\n            </View>\n\n            {/* Sieve Data Entry */}\n            <View className=\"bg-white mt-4 p-4\">\n              <Text className=\"text-base font-semibold text-gray-800 mb-3\">\n                Sieve Data (grams)\n              </Text>\n              \n              {sieveData.map((sieve, index) => (\n                <View key={index} className=\"mb-3\">\n                  <View className=\"flex-row items-center justify-between mb-1\">\n                    <Text className=\"text-sm font-medium text-gray-700\">\n                      {sieve.name}\n                    </Text>\n                    <Text className=\"text-xs text-gray-500\">\n                      {sieve.size > 0 ? `${sieve.size}mm` : ''}\n                    </Text>\n                  </View>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    ref={ref => { if (ref) inputRefs.current[index] = ref; }}\n                    value={sieve.weightRetained as string}\n                    onChangeText={value => handleWeightChange(index, value)}\n                    placeholder=\"0\"\n                    keyboardType=\"decimal-pad\"\n                    returnKeyType={index < sieveData.length - 1 ? 'next' : 'done'}\n                    onSubmitEditing={() => {\n                      if (index < sieveData.length - 1) {\n                        inputRefs.current[index + 1]?.focus();\n                      }\n                    }}\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base\"\n                  />\n                </View>\n              ))}\n\n              {/* Washed Weight for Fine Aggregates */}\n              {aggregate.type === 'Fine' && (\n                <View className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <Text className=\"text-sm font-medium text-gray-700 mb-1\">\n                    Washed Weight (g)\n                  </Text>\n                  <TextInput\n                    cursorColor=\"#000000\"\n                    value={washedWeight}\n                    onChangeText={setWashedWeight}\n                    placeholder=\"0\"\n                    keyboardType=\"decimal-pad\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base\"\n                  />\n                </View>\n              )}\n\n              {/* Total Weight Display */}\n              <View className=\"mt-4 pt-4 border-t border-gray-200\">\n                <View className=\"flex-row justify-between items-center\">\n                  <Text className=\"text-base font-semibold text-gray-800\">Total Weight:</Text>\n                  <Text className=\"text-lg font-bold text-orange-600\">\n                    {totalWeight.toFixed(2)} g\n                  </Text>\n                </View>\n              </View>\n            </View>\n\n            {/* Info Box */}\n            <View className=\"p-4\">\n              <View className=\"bg-blue-50 rounded-lg p-3\">\n                <View className=\"flex-row gap-2\">\n                  <Ionicons name=\"information-circle\" size={18} color=\"#2563eb\" />\n                  <Text className=\"flex-1 text-sm text-blue-800\">\n                    Enter the weight retained on each sieve. Press Tab or Next to move between fields.\n                  </Text>\n                </View>\n              </View>\n            </View>\n          </ScrollView>\n\n          {/* Bottom Action Buttons */}\n          <View className=\"bg-white border-t border-gray-200 p-4 gap-3\">\n            <Pressable\n              onPress={handleSaveTest}\n              className=\"bg-orange-600 rounded-lg py-3 items-center active:bg-orange-700\"\n            >\n              <Text className=\"text-white font-semibold text-base\">Calculate Results</Text>\n            </Pressable>\n            \n            <Pressable\n              onPress={handleCancel}\n              className=\"border border-gray-300 rounded-lg py-3 items-center active:bg-gray-50\"\n            >\n              <Text className=\"text-gray-700 font-medium text-base\">Cancel</Text>\n            </Pressable>\n          </View>\n        </View>\n\n      {/* Cancel Confirmation Modal */}\n      <ConfirmModal\n        visible={showCancelModal}\n        title=\"Discard Test Data?\"\n        message=\"You have unsaved data. Are you sure you want to cancel?\"\n        confirmText=\"Discard\"\n        cancelText=\"Continue Editing\"\n        onConfirm={handleConfirmCancel}\n        onCancel={() => setShowCancelModal(false)}\n        confirmStyle=\"destructive\"\n      />\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default GradationTestScreen;\n","import { SieveData, ChartDataPoint } from '../types/aggregate-gradation';\n\n/**\n * Calculate test data percentages from weight retained values\n * Exactly as implemented in the original HTML app\n */\nexport function calculateTestData(sieveData: SieveData[]): SieveData[] {\n  const totalWeight = sieveData.reduce(\n    (sum, row) => sum + (parseFloat(row.weightRetained as string) || 0),\n    0\n  );\n\n  let cumulativeRetained = 0;\n\n  return sieveData.map((row) => {\n    const weight = parseFloat(row.weightRetained as string) || 0;\n    const percentRetained = totalWeight > 0 ? (weight / totalWeight) * 100 : 0;\n    cumulativeRetained += percentRetained;\n    const percentPassing = 100 - cumulativeRetained;\n\n    return {\n      ...row,\n      percentRetained: percentRetained.toFixed(0),\n      cumulativeRetained: cumulativeRetained.toFixed(0),\n      percentPassing: percentPassing.toFixed(0),\n    };\n  });\n}\n\n/**\n * Calculate fineness modulus for fine aggregates\n * Exactly as implemented in the original HTML app\n */\nexport function calculateFinenessModulus(\n  aggregateType: 'Fine' | 'Coarse',\n  sieveData: SieveData[]\n): string {\n  if (aggregateType !== 'Fine') return 'N/A';\n\n  const fmSieves = ['3/8\"', '#4', '#8', '#16', '#30', '#50', '#100'];\n  const fmSum = sieveData\n    .filter((row) => fmSieves.includes(row.name))\n    .reduce((sum, row) => sum + parseFloat(row.cumulativeRetained || '0'), 0);\n\n  return (fmSum / 100).toFixed(2);\n}\n\n/**\n * Calculate decant percentage\n * Exactly as implemented in the original HTML app\n */\nexport function calculateDecant(\n  sieveData: SieveData[],\n  washedWeight: number\n): string {\n  const totalWeight = sieveData.reduce(\n    (sum, row) => sum + (parseFloat(row.weightRetained as string) || 0),\n    0\n  );\n  const washed = parseFloat(washedWeight.toString()) || 0;\n\n  if (totalWeight > 0 && washed <= totalWeight) {\n    return (((totalWeight - washed) / totalWeight) * 100).toFixed(2);\n  }\n\n  return '0.00';\n}\n\n/**\n * Prepare chart data from sieve data\n * Exactly as implemented in the original HTML app\n */\nexport function prepareChartData(sieveData: SieveData[]): ChartDataPoint[] {\n  return sieveData\n    .filter((row) => row.size > 0)\n    .map((row) => {\n      const data: ChartDataPoint = {\n        size: row.size,\n        sieve: row.name,\n        percentPassing: parseFloat(row.percentPassing || '0'),\n      };\n\n      if (row.c33Lower !== '-' && row.c33Lower !== null) {\n        data.c33Lower = row.c33Lower as number;\n      }\n      if (row.c33Upper !== '-' && row.c33Upper !== null) {\n        data.c33Upper = row.c33Upper as number;\n      }\n\n      return data;\n    })\n    .reverse();\n}\n\n/**\n * Format date for display\n * Exactly as implemented in the original HTML app\n */\nexport function formatDateForDisplay(dateString: string): string {\n  const [year, month, day] = dateString.split('-').map(Number);\n  const localDate = new Date(year, month - 1, day);\n  return localDate.toLocaleDateString();\n}\n\n/**\n * Validate if test passes C33 limits\n */\nexport function checkC33Compliance(sieveData: SieveData[]): boolean {\n  for (const sieve of sieveData) {\n    const passing = parseFloat(sieve.percentPassing || '0');\n    \n    if (sieve.c33Lower !== '-' && sieve.c33Lower !== null) {\n      if (passing < (sieve.c33Lower as number)) {\n        return false;\n      }\n    }\n    \n    if (sieve.c33Upper !== '-' && sieve.c33Upper !== null) {\n      if (passing > (sieve.c33Upper as number)) {\n        return false;\n      }\n    }\n  }\n  \n  return true;\n}\n","import React from 'react';\nimport { View, Text, Dimensions } from 'react-native';\nimport Svg, { Line, Polyline, Circle, Text as SvgText, Rect } from 'react-native-svg';\nimport { ChartDataPoint } from '../types/aggregate-gradation';\n\ninterface GradationChartProps {\n  chartData: ChartDataPoint[];\n  showC33Limits?: boolean;\n}\n\nconst GradationChart: React.FC<GradationChartProps> = ({ chartData, showC33Limits = true }) => {\n  const screenWidth = Dimensions.get('window').width;\n  const chartWidth = screenWidth - 48; // Account for padding\n  const chartHeight = 300;\n  const padding = { top: 20, right: 30, bottom: 50, left: 50 };\n  \n  const plotWidth = chartWidth - padding.left - padding.right;\n  const plotHeight = chartHeight - padding.top - padding.bottom;\n\n  // Filter out points with no data\n  const validData = chartData.filter(d => d.percentPassing !== null && d.percentPassing !== undefined);\n  \n  if (validData.length === 0) {\n    return (\n      <View className=\"bg-white rounded-lg p-4 items-center justify-center\" style={{ height: chartHeight }}>\n        <Text className=\"text-gray-500\">No data to display</Text>\n      </View>\n    );\n  }\n\n  // Calculate scales - logarithmic for X (sieve sizes), linear for Y (percent passing)\n  const minSize = Math.min(...validData.map(d => d.size).filter(s => s > 0));\n  const maxSize = Math.max(...validData.map(d => d.size));\n  \n  // Create logarithmic scale for X axis\n  const getX = (size: number): number => {\n    if (size <= 0) return padding.left; // Pan at the left edge\n    const logMin = Math.log10(minSize);\n    const logMax = Math.log10(maxSize);\n    const logSize = Math.log10(size);\n    return padding.left + ((logSize - logMin) / (logMax - logMin)) * plotWidth;\n  };\n\n  // Linear scale for Y axis (0-100%)\n  const getY = (percent: number): number => {\n    return chartHeight - padding.bottom - (percent / 100) * plotHeight;\n  };\n\n  // Generate polyline points for the gradation curve\n  const curvePoints = validData\n    .map(d => `${getX(d.size)},${getY(d.percentPassing)}`)\n    .join(' ');\n\n  // Generate polyline points for C33 upper limit\n  const upperLimitPoints = validData\n    .filter(d => d.c33Upper !== null && d.c33Upper !== undefined)\n    .map(d => `${getX(d.size)},${getY(d.c33Upper!)}`)\n    .join(' ');\n\n  // Generate polyline points for C33 lower limit\n  const lowerLimitPoints = validData\n    .filter(d => d.c33Lower !== null && d.c33Lower !== undefined)\n    .map(d => `${getX(d.size)},${getY(d.c33Lower!)}`)\n    .join(' ');\n\n  // Y-axis labels (0, 25, 50, 75, 100)\n  const yLabels = [0, 25, 50, 75, 100];\n\n  // X-axis labels (sieve names)\n  const xLabels = validData.map(d => ({\n    name: d.sieve,\n    x: getX(d.size),\n  }));\n\n  return (\n    <View className=\"bg-white rounded-lg p-4\">\n      <Text className=\"text-lg font-semibold text-gray-800 mb-2\">Gradation Curve</Text>\n      <Svg width={chartWidth} height={chartHeight}>\n        {/* Background */}\n        <Rect x={0} y={0} width={chartWidth} height={chartHeight} fill=\"#fafafa\" />\n        \n        {/* Grid lines - Y axis */}\n        {yLabels.map(percent => {\n          const y = getY(percent);\n          return (\n            <Line\n              key={`grid-y-${percent}`}\n              x1={padding.left}\n              y1={y}\n              x2={chartWidth - padding.right}\n              y2={y}\n              stroke=\"#e0e0e0\"\n              strokeWidth=\"1\"\n            />\n          );\n        })}\n\n        {/* Grid lines - X axis */}\n        {xLabels.map((label, i) => (\n          <Line\n            key={`grid-x-${i}`}\n            x1={label.x}\n            y1={padding.top}\n            x2={label.x}\n            y2={chartHeight - padding.bottom}\n            stroke=\"#e0e0e0\"\n            strokeWidth=\"1\"\n          />\n        ))}\n\n        {/* C33 Upper Limit */}\n        {showC33Limits && upperLimitPoints && (\n          <Polyline\n            points={upperLimitPoints}\n            fill=\"none\"\n            stroke=\"#ef4444\"\n            strokeWidth=\"2\"\n            strokeDasharray=\"4,4\"\n          />\n        )}\n\n        {/* C33 Lower Limit */}\n        {showC33Limits && lowerLimitPoints && (\n          <Polyline\n            points={lowerLimitPoints}\n            fill=\"none\"\n            stroke=\"#ef4444\"\n            strokeWidth=\"2\"\n            strokeDasharray=\"4,4\"\n          />\n        )}\n\n        {/* Gradation Curve */}\n        <Polyline\n          points={curvePoints}\n          fill=\"none\"\n          stroke=\"#ea580c\"\n          strokeWidth=\"3\"\n        />\n\n        {/* Data points */}\n        {validData.map((d, i) => (\n          <Circle\n            key={`point-${i}`}\n            cx={getX(d.size)}\n            cy={getY(d.percentPassing)}\n            r=\"4\"\n            fill=\"#ea580c\"\n            stroke=\"#fff\"\n            strokeWidth=\"2\"\n          />\n        ))}\n\n        {/* Y-axis labels */}\n        {yLabels.map(percent => {\n          const y = getY(percent);\n          return (\n            <SvgText\n              key={`label-y-${percent}`}\n              x={padding.left - 10}\n              y={y + 4}\n              fontSize=\"12\"\n              fill=\"#666\"\n              textAnchor=\"end\"\n            >\n              {percent}\n            </SvgText>\n          );\n        })}\n\n        {/* X-axis labels */}\n        {xLabels.map((label, i) => (\n          <SvgText\n            key={`label-x-${i}`}\n            x={label.x}\n            y={chartHeight - padding.bottom + 20}\n            fontSize=\"10\"\n            fill=\"#666\"\n            textAnchor=\"middle\"\n            transform={`rotate(-45, ${label.x}, ${chartHeight - padding.bottom + 20})`}\n          >\n            {label.name}\n          </SvgText>\n        ))}\n\n        {/* Axis titles */}\n        <SvgText\n          x={padding.left - 35}\n          y={chartHeight / 2}\n          fontSize=\"14\"\n          fill=\"#333\"\n          textAnchor=\"middle\"\n          transform={`rotate(-90, ${padding.left - 35}, ${chartHeight / 2})`}\n        >\n          Percent Passing (%)\n        </SvgText>\n        \n        <SvgText\n          x={chartWidth / 2}\n          y={chartHeight - 5}\n          fontSize=\"14\"\n          fill=\"#333\"\n          textAnchor=\"middle\"\n        >\n          Sieve Size\n        </SvgText>\n      </Svg>\n\n      {/* Legend */}\n      <View className=\"flex-row justify-center mt-3 gap-4\">\n        <View className=\"flex-row items-center gap-2\">\n          <View className=\"w-6 h-0.5 bg-orange-600\" />\n          <Text className=\"text-xs text-gray-600\">Test Data</Text>\n        </View>\n        {showC33Limits && (\n          <View className=\"flex-row items-center gap-2\">\n            <View className=\"w-6 h-0.5 bg-red-500 border-dashed\" style={{ borderStyle: 'dashed', borderWidth: 1, borderColor: '#ef4444', height: 0 }} />\n            <Text className=\"text-xs text-gray-600\">C33 Limits</Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nexport default GradationChart;\n","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  Share,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RouteProp } from '@react-navigation/native';\nimport { RootStackParamList } from '../navigation/types';\nimport GradationChart from '../components/GradationChart';\nimport { prepareChartData } from '../utils/aggregate-gradation-calculations';\nimport ConfirmModal from '../components/ConfirmModal';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'GradationResults'>;\n  route: RouteProp<RootStackParamList, 'GradationResults'>;\n};\n\nconst GradationResultsScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { testId } = route.params;\n  const { getTest, deleteTest, aggregates } = useAggregateGradationStore();\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  \n  const test = getTest(testId);\n\n  if (!test) {\n    return (\n      <View className=\"flex-1 bg-gray-50 items-center justify-center p-6\">\n        <Ionicons name=\"warning-outline\" size={64} color=\"#9ca3af\" />\n        <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n          Test record not found\n        </Text>\n        <Pressable\n          onPress={() => navigation.navigate('AggregateGradation')}\n          className=\"bg-orange-600 px-6 py-3 rounded-lg mt-6\"\n        >\n          <Text className=\"text-white font-semibold\">Back to Home</Text>\n        </Pressable>\n      </View>\n    );\n  }\n\n  const aggregate = aggregates[test.aggregateName];\n  const chartData = prepareChartData(test.sieveData);\n\n  const handleShare = async () => {\n    try {\n      const shareText = `Aggregate Gradation Test Results\n      \nAggregate: ${test.aggregateName}\nDate: ${test.date}\nTotal Weight: ${test.totalWeight.toFixed(2)}g\n${test.finenessModulus ? `Fineness Modulus: ${test.finenessModulus}` : ''}\n${test.decant ? `Decant: ${test.decant}%` : ''}\nC33 Compliance: ${test.passC33 ? 'PASS' : 'FAIL'}\n\nSieve Data:\n${test.sieveData.map(s => `${s.name}: ${s.weightRetained}g (${s.percentPassing}% passing)`).join('\\n')}`;\n\n      await Share.share({\n        message: shareText,\n        title: 'Gradation Test Results',\n      });\n    } catch (error) {\n      console.error('Error sharing:', error);\n    }\n  };\n\n  const handleDelete = () => {\n    setShowDeleteModal(true);\n  };\n\n  const handleConfirmDelete = () => {\n    deleteTest(testId);\n    setShowDeleteModal(false);\n    navigation.navigate('AggregateGradation');\n    Alert.alert('Success', 'Test record deleted successfully');\n  };\n\n  const handleNewTest = () => {\n    navigation.navigate('GradationTest', { aggregateName: test.aggregateName });\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Pass/Fail Banner */}\n        <View className={`p-4 ${test.passC33 ? 'bg-green-100' : 'bg-red-100'}`}>\n          <View className=\"flex-row items-center justify-center gap-2\">\n            <Ionicons\n              name={test.passC33 ? 'checkmark-circle' : 'close-circle'}\n              size={24}\n              color={test.passC33 ? '#16a34a' : '#dc2626'}\n            />\n            <Text className={`text-lg font-bold ${test.passC33 ? 'text-green-700' : 'text-red-700'}`}>\n              {test.passC33 ? 'PASSES' : 'FAILS'} C33 Specifications\n            </Text>\n          </View>\n        </View>\n\n        {/* Key Results */}\n        <View className=\"bg-white p-4 mt-4 mx-4 rounded-lg shadow-sm\">\n          <Text className=\"text-lg font-semibold text-gray-800 mb-3\">Test Summary</Text>\n          \n          <View className=\"gap-3\">\n            <View className=\"flex-row justify-between items-center\">\n              <Text className=\"text-sm text-gray-600\">Total Weight:</Text>\n              <Text className=\"text-base font-semibold text-gray-800\">\n                {test.totalWeight.toFixed(2)} g\n              </Text>\n            </View>\n\n            {test.finenessModulus && (\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-sm text-gray-600\">Fineness Modulus:</Text>\n                <Text className=\"text-base font-semibold text-gray-800\">\n                  {test.finenessModulus}\n                </Text>\n              </View>\n            )}\n\n            {test.decant && (\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-sm text-gray-600\">Decant:</Text>\n                <Text\n                  className={`text-base font-semibold ${\n                    aggregate?.maxDecant && parseFloat(test.decant) > aggregate.maxDecant\n                      ? 'text-red-600'\n                      : 'text-gray-800'\n                  }`}\n                >\n                  {test.decant}%\n                  {aggregate?.maxDecant && parseFloat(test.decant) > aggregate.maxDecant && ' '}\n                </Text>\n              </View>\n            )}\n\n            {test.washedWeight && (\n              <View className=\"flex-row justify-between items-center\">\n                <Text className=\"text-sm text-gray-600\">Washed Weight:</Text>\n                <Text className=\"text-base font-semibold text-gray-800\">\n                  {test.washedWeight.toFixed(2)} g\n                </Text>\n              </View>\n            )}\n          </View>\n        </View>\n\n        {/* Chart */}\n        <View className=\"mx-4 mt-4\">\n          <GradationChart chartData={chartData} showC33Limits={true} />\n        </View>\n\n        {/* Detailed Data Table */}\n        <View className=\"bg-white p-4 mt-4 mx-4 rounded-lg shadow-sm mb-6\">\n          <Text className=\"text-lg font-semibold text-gray-800 mb-3\">Sieve Analysis</Text>\n          \n          {/* Table Header */}\n          <View className=\"flex-row bg-gray-100 p-2 rounded-t-lg\">\n            <Text className=\"flex-1 text-xs font-semibold text-gray-700\">Sieve</Text>\n            <Text className=\"w-16 text-xs font-semibold text-gray-700 text-right\">Retained</Text>\n            <Text className=\"w-16 text-xs font-semibold text-gray-700 text-right\">% Ret</Text>\n            <Text className=\"w-16 text-xs font-semibold text-gray-700 text-right\">% Pass</Text>\n          </View>\n\n          {/* Table Rows */}\n          {test.sieveData.map((sieve, index) => {\n            const isOutOfSpec =\n              sieve.percentPassing &&\n              sieve.c33Lower !== '-' &&\n              sieve.c33Upper !== '-' &&\n              (parseFloat(sieve.percentPassing) < (sieve.c33Lower as number) ||\n                parseFloat(sieve.percentPassing) > (sieve.c33Upper as number));\n\n            return (\n              <View\n                key={index}\n                className={`flex-row p-2 border-b border-gray-200 ${isOutOfSpec ? 'bg-red-50' : ''}`}\n              >\n                <View className=\"flex-1\">\n                  <Text className=\"text-sm text-gray-800 font-medium\">{sieve.name}</Text>\n                  {sieve.c33Lower !== '-' && sieve.c33Upper !== '-' && (\n                    <Text className=\"text-xs text-gray-500\">\n                      C33: {sieve.c33Lower}-{sieve.c33Upper}%\n                    </Text>\n                  )}\n                </View>\n                <Text className=\"w-16 text-sm text-gray-800 text-right\">\n                  {parseFloat(sieve.weightRetained as string).toFixed(0)}\n                </Text>\n                <Text className=\"w-16 text-sm text-gray-800 text-right\">\n                  {sieve.percentRetained || '-'}\n                </Text>\n                <Text\n                  className={`w-16 text-sm text-right font-medium ${\n                    isOutOfSpec ? 'text-red-600' : 'text-gray-800'\n                  }`}\n                >\n                  {sieve.percentPassing || '-'}\n                  {isOutOfSpec && ' '}\n                </Text>\n              </View>\n            );\n          })}\n        </View>\n      </ScrollView>\n\n      {/* Bottom Action Buttons */}\n      <View className=\"bg-white border-t border-gray-200 p-4 gap-3\">\n        <View className=\"flex-row gap-3\">\n          <Pressable\n            onPress={handleShare}\n            className=\"flex-1 bg-blue-600 rounded-lg py-3 items-center active:bg-blue-700 flex-row justify-center gap-2\"\n          >\n            <Ionicons name=\"share-outline\" size={20} color=\"white\" />\n            <Text className=\"text-white font-semibold\">Share</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={handleDelete}\n            className=\"flex-1 bg-red-600 rounded-lg py-3 items-center active:bg-red-700 flex-row justify-center gap-2\"\n          >\n            <Ionicons name=\"trash-outline\" size={20} color=\"white\" />\n            <Text className=\"text-white font-semibold\">Delete</Text>\n          </Pressable>\n        </View>\n\n        <Pressable\n          onPress={handleNewTest}\n          className=\"bg-orange-600 rounded-lg py-3 items-center active:bg-orange-700\"\n        >\n          <Text className=\"text-white font-semibold\">New Test</Text>\n        </Pressable>\n\n        <Pressable\n          onPress={() => navigation.navigate('AggregateGradation')}\n          className=\"border border-gray-300 rounded-lg py-3 items-center active:bg-gray-50\"\n        >\n          <Text className=\"text-gray-700 font-medium\">Back to Home</Text>\n        </Pressable>\n      </View>\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmModal\n        visible={showDeleteModal}\n        title=\"Delete Test Record?\"\n        message=\"This action cannot be undone. Are you sure you want to delete this test?\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        onConfirm={handleConfirmDelete}\n        onCancel={() => setShowDeleteModal(false)}\n        confirmStyle=\"destructive\"\n      />\n    </View>\n  );\n};\n\nexport default GradationResultsScreen;\n","import React, { useState, useMemo } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  TextInput,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport ConfirmModal from '../components/ConfirmModal';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'GradationHistory'>;\n};\n\nconst GradationHistoryScreen: React.FC<Props> = ({ navigation }) => {\n  const { testHistory, aggregates, clearAllTests } = useAggregateGradationStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterAggregate, setFilterAggregate] = useState<string>('all');\n  const [filterCompliance, setFilterCompliance] = useState<string>('all');\n  const [showClearModal, setShowClearModal] = useState(false);\n\n  // Get unique aggregate names from history\n  const aggregateNames = useMemo(() => {\n    const names = new Set(testHistory.map(t => t.aggregateName));\n    return Array.from(names).sort();\n  }, [testHistory]);\n\n  // Filter tests based on search and filters\n  const filteredTests = useMemo(() => {\n    return testHistory.filter(test => {\n      // Search filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesSearch =\n          test.aggregateName.toLowerCase().includes(query) ||\n          test.date.includes(query) ||\n          test.id.includes(query);\n        if (!matchesSearch) return false;\n      }\n\n      // Aggregate filter\n      if (filterAggregate !== 'all' && test.aggregateName !== filterAggregate) {\n        return false;\n      }\n\n      // Compliance filter\n      if (filterCompliance === 'pass' && !test.passC33) return false;\n      if (filterCompliance === 'fail' && test.passC33) return false;\n\n      return true;\n    });\n  }, [testHistory, searchQuery, filterAggregate, filterCompliance]);\n\n  const handleTestPress = (testId: string) => {\n    navigation.navigate('GradationResults', { testId });\n  };\n\n  const handleClearAll = () => {\n    setShowClearModal(true);\n  };\n\n  const handleConfirmClear = () => {\n    clearAllTests();\n    setShowClearModal(false);\n    Alert.alert('Success', 'All test records have been cleared');\n  };\n\n  const formatTimestamp = (timestamp: number): string => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      {/* Search Bar */}\n      <View className=\"bg-white p-4 border-b border-gray-200\">\n        <View className=\"bg-gray-100 rounded-lg flex-row items-center px-3\">\n          <Ionicons name=\"search\" size={20} color=\"#9ca3af\" />\n          <TextInput\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholder=\"Search by aggregate, date, or ID...\"\n            placeholderTextColor=\"#9ca3af\"\n            cursorColor=\"#000000\"\n            className=\"flex-1 py-2 px-2 text-base\"\n          />\n          {searchQuery.length > 0 && (\n            <Pressable onPress={() => setSearchQuery('')}>\n              <Ionicons name=\"close-circle\" size={20} color=\"#9ca3af\" />\n            </Pressable>\n          )}\n        </View>\n      </View>\n\n      {/* Filters */}\n      <View className=\"bg-white p-4 border-b border-gray-200\">\n        <View className=\"flex-row gap-3\">\n          {/* Aggregate Filter */}\n          <View className=\"flex-1\">\n            <Text className=\"text-xs font-medium text-gray-600 mb-1\">Aggregate</Text>\n            <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n              <View className=\"flex-row gap-2\">\n                <Pressable\n                  onPress={() => setFilterAggregate('all')}\n                  className={`px-3 py-1.5 rounded-full ${\n                    filterAggregate === 'all' ? 'bg-orange-600' : 'bg-gray-200'\n                  }`}\n                >\n                  <Text\n                    className={`text-xs font-medium ${\n                      filterAggregate === 'all' ? 'text-white' : 'text-gray-700'\n                    }`}\n                  >\n                    All\n                  </Text>\n                </Pressable>\n                {aggregateNames.map(name => (\n                  <Pressable\n                    key={name}\n                    onPress={() => setFilterAggregate(name)}\n                    className={`px-3 py-1.5 rounded-full ${\n                      filterAggregate === name ? 'bg-orange-600' : 'bg-gray-200'\n                    }`}\n                  >\n                    <Text\n                      className={`text-xs font-medium ${\n                        filterAggregate === name ? 'text-white' : 'text-gray-700'\n                      }`}\n                    >\n                      {name}\n                    </Text>\n                  </Pressable>\n                ))}\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n\n        {/* Compliance Filter */}\n        <View className=\"flex-row gap-2 mt-3\">\n          <Pressable\n            onPress={() => setFilterCompliance('all')}\n            className={`px-4 py-1.5 rounded-full ${\n              filterCompliance === 'all' ? 'bg-orange-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text\n              className={`text-xs font-medium ${\n                filterCompliance === 'all' ? 'text-white' : 'text-gray-700'\n              }`}\n            >\n              All Tests\n            </Text>\n          </Pressable>\n          <Pressable\n            onPress={() => setFilterCompliance('pass')}\n            className={`px-4 py-1.5 rounded-full ${\n              filterCompliance === 'pass' ? 'bg-green-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text\n              className={`text-xs font-medium ${\n                filterCompliance === 'pass' ? 'text-white' : 'text-gray-700'\n              }`}\n            >\n              Passed\n            </Text>\n          </Pressable>\n          <Pressable\n            onPress={() => setFilterCompliance('fail')}\n            className={`px-4 py-1.5 rounded-full ${\n              filterCompliance === 'fail' ? 'bg-red-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text\n              className={`text-xs font-medium ${\n                filterCompliance === 'fail' ? 'text-white' : 'text-gray-700'\n              }`}\n            >\n              Failed\n            </Text>\n          </Pressable>\n        </View>\n\n        {/* Results Count */}\n        <View className=\"mt-3 flex-row justify-between items-center\">\n          <Text className=\"text-sm text-gray-600\">\n            {filteredTests.length} {filteredTests.length === 1 ? 'test' : 'tests'} found\n          </Text>\n          {testHistory.length > 0 && (\n            <Pressable onPress={handleClearAll} className=\"flex-row items-center gap-1\">\n              <Ionicons name=\"trash-outline\" size={16} color=\"#ef4444\" />\n              <Text className=\"text-sm text-red-500 font-medium\">Clear All</Text>\n            </Pressable>\n          )}\n        </View>\n      </View>\n\n      {/* Test List */}\n      <ScrollView className=\"flex-1\">\n        {filteredTests.length === 0 ? (\n          <View className=\"flex-1 items-center justify-center p-8 mt-20\">\n            <Ionicons name=\"document-text-outline\" size={64} color=\"#9ca3af\" />\n            <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n              {testHistory.length === 0\n                ? 'No test records yet'\n                : 'No tests match your filters'}\n            </Text>\n            <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n              {testHistory.length === 0\n                ? 'Start a new test to see it here'\n                : 'Try adjusting your search or filters'}\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            {filteredTests.map(test => {\n              const aggregate = aggregates[test.aggregateName];\n              return (\n                <Pressable\n                  key={test.id}\n                  onPress={() => handleTestPress(test.id)}\n                  className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row justify-between items-start mb-2\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-lg font-semibold text-gray-800\">\n                        {test.aggregateName}\n                      </Text>\n                      <Text className=\"text-sm text-gray-500 mt-0.5\">\n                        {test.date}  {formatTimestamp(test.timestamp)}\n                      </Text>\n                    </View>\n                    <View\n                      className={`px-2 py-1 rounded ${\n                        test.passC33 ? 'bg-green-100' : 'bg-red-100'\n                      }`}\n                    >\n                      <Text\n                        className={`text-xs font-semibold ${\n                          test.passC33 ? 'text-green-700' : 'text-red-700'\n                        }`}\n                      >\n                        {test.passC33 ? 'PASS' : 'FAIL'}\n                      </Text>\n                    </View>\n                  </View>\n\n                  <View className=\"flex-row gap-4 mt-2\">\n                    {aggregate && (\n                      <View className=\"flex-row items-center gap-1\">\n                        <Ionicons name=\"layers-outline\" size={14} color=\"#6b7280\" />\n                        <Text className=\"text-xs text-gray-600\">{aggregate.type}</Text>\n                      </View>\n                    )}\n                    <View className=\"flex-row items-center gap-1\">\n                      <Ionicons name=\"scale-outline\" size={14} color=\"#6b7280\" />\n                      <Text className=\"text-xs text-gray-600\">\n                        {test.totalWeight.toFixed(0)}g\n                      </Text>\n                    </View>\n                    {test.finenessModulus && (\n                      <View className=\"flex-row items-center gap-1\">\n                        <Ionicons name=\"analytics-outline\" size={14} color=\"#6b7280\" />\n                        <Text className=\"text-xs text-gray-600\">FM: {test.finenessModulus}</Text>\n                      </View>\n                    )}\n                    {test.decant && (\n                      <View className=\"flex-row items-center gap-1\">\n                        <Ionicons name=\"water-outline\" size={14} color=\"#6b7280\" />\n                        <Text className=\"text-xs text-gray-600\">D: {test.decant}%</Text>\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row items-center justify-between mt-3 pt-3 border-t border-gray-100\">\n                    <Text className=\"text-xs text-gray-500\">ID: {test.id.slice(-8)}</Text>\n                    <Ionicons name=\"chevron-forward\" size={16} color=\"#9ca3af\" />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n\n      {/* Clear All Confirmation Modal */}\n      <ConfirmModal\n        visible={showClearModal}\n        title=\"Clear All Test Records?\"\n        message=\"This will permanently delete all test records. This action cannot be undone.\"\n        confirmText=\"Clear All\"\n        cancelText=\"Cancel\"\n        onConfirm={handleConfirmClear}\n        onCancel={() => setShowClearModal(false)}\n        confirmStyle=\"destructive\"\n      />\n    </View>\n  );\n};\n\nexport default GradationHistoryScreen;\n","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { DEFAULT_AGGREGATES } from '../utils/aggregate-gradation-constants';\nimport ConfirmModal from '../components/ConfirmModal';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'GradationAdmin'>;\n};\n\nconst GradationAdminScreen: React.FC<Props> = ({ navigation }) => {\n  const { aggregates, deleteAggregate, addAggregate } = useAggregateGradationStore();\n  const [expandedAggregate, setExpandedAggregate] = useState<string | null>(null);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [aggregateToDelete, setAggregateToDelete] = useState<string | null>(null);\n\n  const aggregateList = Object.entries(aggregates);\n  const defaultAggregateNames = Object.keys(DEFAULT_AGGREGATES);\n\n  const handleDeleteAggregate = (name: string) => {\n    setAggregateToDelete(name);\n    setShowDeleteModal(true);\n  };\n\n  const handleConfirmDelete = () => {\n    if (aggregateToDelete) {\n      deleteAggregate(aggregateToDelete);\n      setShowDeleteModal(false);\n      setAggregateToDelete(null);\n      Alert.alert('Success', 'Aggregate configuration deleted');\n    }\n  };\n\n  const handleRestoreDefaults = () => {\n    Alert.alert(\n      'Restore Default Aggregates',\n      'This will restore all 4 default aggregate configurations. Custom aggregates will not be affected.',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Restore',\n          onPress: () => {\n            Object.entries(DEFAULT_AGGREGATES).forEach(([name, config]) => {\n              addAggregate(name, config);\n            });\n            Alert.alert('Success', 'Default aggregates restored');\n          },\n        },\n      ]\n    );\n  };\n\n  const toggleExpanded = (name: string) => {\n    setExpandedAggregate(expandedAggregate === name ? null : name);\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Action Buttons */}\n        <View className=\"p-4 gap-3\">\n          <Pressable\n            onPress={() => navigation.navigate('GradationAddEditAggregate', {})}\n            className=\"bg-orange-600 rounded-lg p-4 flex-row items-center justify-center gap-2 active:bg-orange-700\"\n          >\n            <Ionicons name=\"add-circle\" size={20} color=\"white\" />\n            <Text className=\"text-white font-semibold\">Add New Aggregate</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={handleRestoreDefaults}\n            className=\"bg-blue-600 rounded-lg p-4 flex-row items-center justify-center gap-2 active:bg-blue-700\"\n          >\n            <Ionicons name=\"refresh\" size={20} color=\"white\" />\n            <Text className=\"text-white font-semibold\">Restore Default Aggregates</Text>\n          </Pressable>\n\n          <View className=\"bg-yellow-50 rounded-lg p-3 border border-yellow-200\">\n            <View className=\"flex-row gap-2\">\n              <Ionicons name=\"information-circle\" size={18} color=\"#d97706\" />\n              <Text className=\"flex-1 text-sm text-yellow-800\">\n                Default aggregates are: {defaultAggregateNames.join(', ')}. You can delete and restore them as needed.\n              </Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Aggregates List */}\n        <View className=\"px-4 pb-6\">\n          <Text className=\"text-lg font-semibold text-gray-800 mb-3\">\n            Configured Aggregates ({aggregateList.length})\n          </Text>\n\n          {aggregateList.length === 0 ? (\n            <View className=\"bg-white rounded-lg p-6 items-center\">\n              <Ionicons name=\"warning-outline\" size={48} color=\"#9ca3af\" />\n              <Text className=\"text-gray-500 mt-3 text-center\">\n                No aggregates configured. Restore defaults to get started.\n              </Text>\n            </View>\n          ) : (\n            <View className=\"gap-3\">\n              {aggregateList.map(([name, config]) => {\n                const isExpanded = expandedAggregate === name;\n                const isDefault = defaultAggregateNames.includes(name);\n\n                return (\n                  <View key={name} className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n                    {/* Header */}\n                    <Pressable\n                      onPress={() => toggleExpanded(name)}\n                      className=\"p-4 active:bg-gray-50\"\n                    >\n                      <View className=\"flex-row items-center justify-between\">\n                        <View className=\"flex-1\">\n                          <View className=\"flex-row items-center gap-2\">\n                            <Text className=\"text-lg font-semibold text-gray-800\">{name}</Text>\n                            {isDefault && (\n                              <View className=\"bg-blue-100 px-2 py-0.5 rounded\">\n                                <Text className=\"text-xs font-medium text-blue-700\">Default</Text>\n                              </View>\n                            )}\n                          </View>\n                          <View className=\"flex-row items-center gap-3 mt-1\">\n                            <View\n                              className={`px-2 py-1 rounded ${\n                                config.type === 'Fine' ? 'bg-green-100' : 'bg-blue-100'\n                              }`}\n                            >\n                              <Text\n                                className={`text-xs font-medium ${\n                                  config.type === 'Fine' ? 'text-green-700' : 'text-blue-700'\n                                }`}\n                              >\n                                {config.type}\n                              </Text>\n                            </View>\n                            <Text className=\"text-sm text-gray-600\">\n                              {config.sieves.length} sieves\n                            </Text>\n                            {config.maxDecant && (\n                              <Text className=\"text-sm text-gray-600\">\n                                Max Decant: {config.maxDecant}%\n                              </Text>\n                            )}\n                          </View>\n                        </View>\n                        <Ionicons\n                          name={isExpanded ? 'chevron-up' : 'chevron-down'}\n                          size={24}\n                          color=\"#9ca3af\"\n                        />\n                      </View>\n                    </Pressable>\n\n                    {/* Expanded Content */}\n                    {isExpanded && (\n                      <View className=\"border-t border-gray-200\">\n                        {/* Sieve Configuration Table */}\n                        <View className=\"p-4\">\n                          <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                            Sieve Configuration\n                          </Text>\n\n                          {/* Table Header */}\n                          <View className=\"flex-row bg-gray-100 p-2 rounded-t-lg\">\n                            <Text className=\"flex-1 text-xs font-semibold text-gray-700\">\n                              Sieve\n                            </Text>\n                            <Text className=\"w-20 text-xs font-semibold text-gray-700 text-right\">\n                              Size (mm)\n                            </Text>\n                            <Text className=\"w-24 text-xs font-semibold text-gray-700 text-right\">\n                              C33 Lower\n                            </Text>\n                            <Text className=\"w-24 text-xs font-semibold text-gray-700 text-right\">\n                              C33 Upper\n                            </Text>\n                          </View>\n\n                          {/* Table Rows */}\n                          {config.sieves.map((sieve, index) => (\n                            <View\n                              key={index}\n                              className=\"flex-row p-2 border-b border-gray-200\"\n                            >\n                              <Text className=\"flex-1 text-sm text-gray-800 font-medium\">\n                                {sieve.name}\n                              </Text>\n                              <Text className=\"w-20 text-sm text-gray-600 text-right\">\n                                {sieve.size > 0 ? sieve.size : '-'}\n                              </Text>\n                              <Text className=\"w-24 text-sm text-gray-600 text-right\">\n                                {sieve.c33Lower !== '-' ? `${sieve.c33Lower}%` : '-'}\n                              </Text>\n                              <Text className=\"w-24 text-sm text-gray-600 text-right\">\n                                {sieve.c33Upper !== '-' ? `${sieve.c33Upper}%` : '-'}\n                              </Text>\n                            </View>\n                          ))}\n                        </View>\n\n                        {/* Actions */}\n                        <View className=\"p-4 border-t border-gray-200 bg-gray-50 flex-row gap-3\">\n                          <Pressable\n                            onPress={() => navigation.navigate('GradationAddEditAggregate', { aggregateName: name })}\n                            className=\"flex-1 bg-blue-600 rounded-lg py-2 px-4 flex-row items-center justify-center gap-2 active:bg-blue-700\"\n                          >\n                            <Ionicons name=\"create-outline\" size={18} color=\"white\" />\n                            <Text className=\"text-white font-semibold\">Edit</Text>\n                          </Pressable>\n\n                          <Pressable\n                            onPress={() => handleDeleteAggregate(name)}\n                            className=\"flex-1 bg-red-600 rounded-lg py-2 px-4 flex-row items-center justify-center gap-2 active:bg-red-700\"\n                          >\n                            <Ionicons name=\"trash-outline\" size={18} color=\"white\" />\n                            <Text className=\"text-white font-semibold\">Delete</Text>\n                          </Pressable>\n                        </View>\n                      </View>\n                    )}\n                  </View>\n                );\n              })}\n            </View>\n          )}\n        </View>\n\n        {/* Info Section */}\n        <View className=\"px-4 pb-6\">\n          <View className=\"bg-blue-50 rounded-lg p-4\">\n            <View className=\"flex-row gap-2\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#2563eb\" />\n              <View className=\"flex-1\">\n                <Text className=\"text-sm text-blue-900 font-medium mb-1\">\n                  About Aggregate Configuration\n                </Text>\n                <Text className=\"text-sm text-blue-800\">\n                  Each aggregate has specific sieve sizes and C33 specification limits (ASTM C33). The gradation test results are automatically checked against these limits.\n                </Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmModal\n        visible={showDeleteModal}\n        title=\"Delete Aggregate?\"\n        message={`Are you sure you want to delete \"${aggregateToDelete}\"? This will not affect existing test records.`}\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        onConfirm={handleConfirmDelete}\n        onCancel={() => {\n          setShowDeleteModal(false);\n          setAggregateToDelete(null);\n        }}\n        confirmStyle=\"destructive\"\n      />\n    </View>\n  );\n};\n\nexport default GradationAdminScreen;\n","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  Pressable,\n  TextInput,\n  Alert,\n  KeyboardAvoidingView,\n  Platform,\n  Modal,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateGradationStore } from '../state/aggregateGradationStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RouteProp } from '@react-navigation/native';\nimport { RootStackParamList } from '../navigation/types';\nimport { AggregateConfig, SieveData } from '../types/aggregate-gradation';\nimport { STANDARD_SIEVES } from '../utils/aggregate-gradation-constants';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'GradationAddEditAggregate'>;\n  route: RouteProp<RootStackParamList, 'GradationAddEditAggregate'>;\n};\n\nconst GradationAddEditAggregateScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { aggregateName } = route.params || {};\n  const { aggregates, addAggregate, updateAggregate } = useAggregateGradationStore();\n  \n  const isEdit = !!aggregateName;\n  const existingAggregate = isEdit ? aggregates[aggregateName!] : null;\n\n  const [name, setName] = useState(aggregateName || '');\n  const [type, setType] = useState<'Fine' | 'Coarse'>(existingAggregate?.type || 'Fine');\n  const [maxDecant, setMaxDecant] = useState(existingAggregate?.maxDecant?.toString() || '');\n  const [maxFM, setMaxFM] = useState(existingAggregate?.maxFinenessModulus?.toString() || '');\n  const [showAddSieveModal, setShowAddSieveModal] = useState(false);\n  const [focusedField, setFocusedField] = useState<string | null>(null);\n  const [tempValues, setTempValues] = useState<{ [key: string]: string }>({});\n  \n  // Initialize sieves based on existing or empty\n  const initializeSieves = (): SieveData[] => {\n    if (isEdit && existingAggregate) {\n      return existingAggregate.sieves;\n    }\n    // Start with Pan only for new aggregates\n    return [{\n      name: 'Pan',\n      size: 0,\n      weightRetained: '',\n      c33Lower: '-',\n      c33Upper: '-',\n    }];\n  };\n\n  const [sieves, setSieves] = useState<SieveData[]>(initializeSieves());\n\n  const handleTypeChange = (newType: 'Fine' | 'Coarse') => {\n    setType(newType);\n  };\n\n  const getAvailableSieves = (): string[] => {\n    const usedSieveNames = sieves.map(s => s.name);\n    return Object.keys(STANDARD_SIEVES).filter(\n      sieveName => sieveName !== 'Pan' && !usedSieveNames.includes(sieveName)\n    );\n  };\n\n  const handleAddSieve = (sieveName: string) => {\n    const newSieve: SieveData = {\n      name: sieveName,\n      size: STANDARD_SIEVES[sieveName],\n      weightRetained: '',\n      c33Lower: '-',\n      c33Upper: '-',\n    };\n    \n    // Insert in order by size (largest to smallest), before Pan\n    const newSieves = [...sieves];\n    const panIndex = newSieves.findIndex(s => s.name === 'Pan');\n    \n    if (panIndex !== -1) {\n      // Find correct position before Pan\n      let insertIndex = 0;\n      for (let i = 0; i < panIndex; i++) {\n        if (newSieves[i].size > newSieve.size) {\n          insertIndex = i + 1;\n        }\n      }\n      newSieves.splice(insertIndex, 0, newSieve);\n    } else {\n      newSieves.push(newSieve);\n    }\n    \n    setSieves(newSieves);\n    setShowAddSieveModal(false);\n  };\n\n  const handleRemoveSieve = (index: number) => {\n    const sieve = sieves[index];\n    if (sieve.name === 'Pan') {\n      Alert.alert('Cannot Remove', 'Pan sieve is required and cannot be removed');\n      return;\n    }\n    \n    Alert.alert(\n      'Remove Sieve',\n      `Remove ${sieve.name} sieve from this aggregate?`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Remove',\n          style: 'destructive',\n          onPress: () => {\n            const newSieves = sieves.filter((_, i) => i !== index);\n            setSieves(newSieves);\n          },\n        },\n      ]\n    );\n  };\n\n  const handleSieveChange = (index: number, field: 'c33Lower' | 'c33Upper', value: string) => {\n    const fieldKey = `${index}-${field}`;\n    \n    // Store temporary value while editing\n    setTempValues(prev => ({ ...prev, [fieldKey]: value }));\n    \n    if (value === '') {\n      // Keep empty while typing\n      return;\n    }\n    \n    const newSieves = [...sieves];\n    if (value === '-') {\n      newSieves[index][field] = '-';\n    } else {\n      const numValue = parseFloat(value);\n      if (!isNaN(numValue)) {\n        newSieves[index][field] = numValue;\n      }\n    }\n    setSieves(newSieves);\n  };\n\n  const handleSieveFocus = (index: number, field: 'c33Lower' | 'c33Upper') => {\n    const fieldKey = `${index}-${field}`;\n    const currentValue = sieves[index][field];\n    const displayValue = currentValue === '-' ? '-' : currentValue?.toString() || '';\n    \n    setFocusedField(fieldKey);\n    setTempValues(prev => ({ ...prev, [fieldKey]: displayValue }));\n  };\n\n  const handleSieveBlur = (index: number, field: 'c33Lower' | 'c33Upper') => {\n    const fieldKey = `${index}-${field}`;\n    const tempValue = tempValues[fieldKey];\n    \n    setFocusedField(null);\n    \n    // If empty or just whitespace, revert to previous value or '-'\n    if (!tempValue || tempValue.trim() === '') {\n      const newSieves = [...sieves];\n      // Keep the original value\n      setSieves(newSieves);\n      setTempValues(prev => {\n        const newTemp = { ...prev };\n        delete newTemp[fieldKey];\n        return newTemp;\n      });\n      return;\n    }\n    \n    // Otherwise, apply the value\n    const newSieves = [...sieves];\n    if (tempValue === '-') {\n      newSieves[index][field] = '-';\n    } else {\n      const numValue = parseFloat(tempValue);\n      if (!isNaN(numValue)) {\n        newSieves[index][field] = numValue;\n      } else {\n        // Invalid number, revert\n        newSieves[index][field] = sieves[index][field];\n      }\n    }\n    setSieves(newSieves);\n    \n    // Clear temp value\n    setTempValues(prev => {\n      const newTemp = { ...prev };\n      delete newTemp[fieldKey];\n      return newTemp;\n    });\n  };\n\n  const getSieveDisplayValue = (index: number, field: 'c33Lower' | 'c33Upper'): string => {\n    const fieldKey = `${index}-${field}`;\n    \n    // If this field is focused, show temp value\n    if (focusedField === fieldKey) {\n      return tempValues[fieldKey] || '';\n    }\n    \n    // Otherwise show the actual value\n    const value = sieves[index][field];\n    return value === '-' ? '-' : value?.toString() || '';\n  };\n\n  const handleSave = () => {\n    // Validation\n    if (!name.trim()) {\n      Alert.alert('Error', 'Please enter an aggregate name');\n      return;\n    }\n\n    if (!isEdit && aggregates[name]) {\n      Alert.alert('Error', 'An aggregate with this name already exists');\n      return;\n    }\n\n    const config: AggregateConfig = {\n      type,\n      sieves,\n      maxDecant: maxDecant ? parseFloat(maxDecant) : null,\n      maxFinenessModulus: maxFM ? parseFloat(maxFM) : null,\n    };\n\n    if (isEdit) {\n      updateAggregate(name, config);\n      Alert.alert('Success', 'Aggregate updated successfully');\n    } else {\n      addAggregate(name, config);\n      Alert.alert('Success', 'Aggregate added successfully');\n    }\n\n    navigation.goBack();\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      className=\"flex-1 bg-gray-50\"\n    >\n      <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n        {/* Basic Info Section */}\n        <View className=\"bg-white p-4 mb-4\">\n          <Text className=\"text-lg font-semibold text-gray-800 mb-4\">\n            Basic Information\n          </Text>\n\n          {/* Name */}\n          <View className=\"mb-4\">\n            <Text className=\"text-sm font-medium text-gray-700 mb-1\">\n              Aggregate Name *\n            </Text>\n            <TextInput\n              cursorColor=\"#000000\"\n              value={name}\n              onChangeText={setName}\n              placeholder=\"e.g., Concrete Sand\"\n              editable={!isEdit}\n              className={`bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base ${\n                isEdit ? 'opacity-50' : ''\n              }`}\n            />\n            {isEdit && (\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Name cannot be changed after creation\n              </Text>\n            )}\n          </View>\n\n          {/* Type */}\n          <View className=\"mb-4\">\n            <Text className=\"text-sm font-medium text-gray-700 mb-2\">\n              Aggregate Type *\n            </Text>\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={() => handleTypeChange('Fine')}\n                className={`flex-1 py-3 rounded-lg border-2 ${\n                  type === 'Fine'\n                    ? 'bg-green-50 border-green-500'\n                    : 'bg-white border-gray-300'\n                }`}\n              >\n                <Text\n                  className={`text-center font-semibold ${\n                    type === 'Fine' ? 'text-green-700' : 'text-gray-600'\n                  }`}\n                >\n                  Fine Aggregate\n                </Text>\n              </Pressable>\n\n              <Pressable\n                onPress={() => handleTypeChange('Coarse')}\n                className={`flex-1 py-3 rounded-lg border-2 ${\n                  type === 'Coarse'\n                    ? 'bg-blue-50 border-blue-500'\n                    : 'bg-white border-gray-300'\n                }`}\n              >\n                <Text\n                  className={`text-center font-semibold ${\n                    type === 'Coarse' ? 'text-blue-700' : 'text-gray-600'\n                  }`}\n                >\n                  Coarse Aggregate\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n\n          {/* Max Decant (Fine only) */}\n          {type === 'Fine' && (\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-medium text-gray-700 mb-1\">\n                Max Decant (%)\n              </Text>\n              <TextInput\n                cursorColor=\"#000000\"\n                value={maxDecant}\n                onChangeText={setMaxDecant}\n                placeholder=\"Optional\"\n                keyboardType=\"decimal-pad\"\n                className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base\"\n              />\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Maximum allowable decant percentage for this aggregate\n              </Text>\n            </View>\n          )}\n\n          {/* Max Fineness Modulus (Fine only) */}\n          {type === 'Fine' && (\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-medium text-gray-700 mb-1\">\n                Max Fineness Modulus\n              </Text>\n              <TextInput\n                cursorColor=\"#000000\"\n                value={maxFM}\n                onChangeText={setMaxFM}\n                placeholder=\"Optional\"\n                keyboardType=\"decimal-pad\"\n                className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base\"\n              />\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Maximum allowable fineness modulus for this aggregate\n              </Text>\n            </View>\n          )}\n        </View>\n\n        {/* Sieve Configuration */}\n        <View className=\"bg-white p-4 mb-4\">\n          <View className=\"flex-row items-center justify-between mb-2\">\n            <Text className=\"text-lg font-semibold text-gray-800\">\n              Sieve Configuration & C33 Limits\n            </Text>\n            <Pressable\n              onPress={() => setShowAddSieveModal(true)}\n              className=\"bg-blue-600 rounded-lg px-3 py-2 flex-row items-center gap-1 active:bg-blue-700\"\n            >\n              <Ionicons name=\"add-circle\" size={16} color=\"white\" />\n              <Text className=\"text-white text-xs font-semibold\">Add Sieve</Text>\n            </Pressable>\n          </View>\n          <Text className=\"text-sm text-gray-600 mb-4\">\n            Configure ASTM C33 cumulative passing percentage limits for each sieve. Use \"-\" for no limit.\n          </Text>\n\n          {/* Table Header */}\n          <View className=\"flex-row bg-gray-100 p-2 rounded-t-lg\">\n            <Text className=\"w-8 text-xs font-semibold text-gray-700\"></Text>\n            <Text className=\"flex-1 text-xs font-semibold text-gray-700\">Sieve</Text>\n            <Text className=\"w-24 text-xs font-semibold text-gray-700 text-center\">\n              Lower %\n            </Text>\n            <Text className=\"w-24 text-xs font-semibold text-gray-700 text-center\">\n              Upper %\n            </Text>\n          </View>\n\n          {/* Sieve Rows */}\n          {sieves.map((sieve, index) => (\n            <View\n              key={index}\n              className=\"flex-row items-center p-2 border-b border-gray-200\"\n            >\n              {/* Remove Button */}\n              <View className=\"w-8\">\n                {sieve.name !== 'Pan' && (\n                  <Pressable onPress={() => handleRemoveSieve(index)} className=\"p-1\">\n                    <Ionicons name=\"close-circle\" size={20} color=\"#ef4444\" />\n                  </Pressable>\n                )}\n              </View>\n\n              <View className=\"flex-1\">\n                <Text className=\"text-sm font-medium text-gray-800\">{sieve.name}</Text>\n                <Text className=\"text-xs text-gray-500\">\n                  {sieve.size > 0 ? `${sieve.size}mm` : 'Pan'}\n                </Text>\n              </View>\n\n              <View className=\"w-24 px-1\">\n                <TextInput\n                  cursorColor=\"#000000\"\n                  value={getSieveDisplayValue(index, 'c33Lower')}\n                  onChangeText={value => handleSieveChange(index, 'c33Lower', value)}\n                  onFocus={() => handleSieveFocus(index, 'c33Lower')}\n                  onBlur={() => handleSieveBlur(index, 'c33Lower')}\n                  placeholder=\"-\"\n                  keyboardType=\"decimal-pad\"\n                  selectTextOnFocus\n                  className=\"bg-gray-50 border border-gray-300 rounded px-2 py-1 text-sm text-center\"\n                />\n              </View>\n\n              <View className=\"w-24 px-1\">\n                <TextInput\n                  cursorColor=\"#000000\"\n                  value={getSieveDisplayValue(index, 'c33Upper')}\n                  onChangeText={value => handleSieveChange(index, 'c33Upper', value)}\n                  onFocus={() => handleSieveFocus(index, 'c33Upper')}\n                  onBlur={() => handleSieveBlur(index, 'c33Upper')}\n                  placeholder=\"-\"\n                  keyboardType=\"decimal-pad\"\n                  selectTextOnFocus\n                  className=\"bg-gray-50 border border-gray-300 rounded px-2 py-1 text-sm text-center\"\n                />\n              </View>\n            </View>\n          ))}\n        </View>\n\n        {/* Info */}\n        <View className=\"px-4 pb-6\">\n          <View className=\"bg-blue-50 rounded-lg p-3\">\n            <View className=\"flex-row gap-2\">\n              <Ionicons name=\"information-circle\" size={18} color=\"#2563eb\" />\n              <Text className=\"flex-1 text-sm text-blue-800\">\n                C33 limits define the acceptable range for cumulative passing percentages.\n                Tests will automatically check compliance against these limits.\n              </Text>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Bottom Actions */}\n      <View className=\"bg-white border-t border-gray-200 p-4 gap-3\">\n        <Pressable\n          onPress={handleSave}\n          className=\"bg-orange-600 rounded-lg py-3 items-center active:bg-orange-700\"\n        >\n          <Text className=\"text-white font-semibold text-base\">\n            {isEdit ? 'Update Aggregate' : 'Add Aggregate'}\n          </Text>\n        </Pressable>\n\n        <Pressable\n          onPress={() => navigation.goBack()}\n          className=\"border border-gray-300 rounded-lg py-3 items-center active:bg-gray-50\"\n        >\n          <Text className=\"text-gray-700 font-medium text-base\">Cancel</Text>\n        </Pressable>\n      </View>\n\n      {/* Add Sieve Modal */}\n      <Modal\n        visible={showAddSieveModal}\n        transparent\n        animationType=\"fade\"\n        onRequestClose={() => setShowAddSieveModal(false)}\n      >\n        <Pressable\n          className=\"flex-1 items-center justify-center\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n          onPress={() => setShowAddSieveModal(false)}\n        >\n          <Pressable\n            className=\"bg-white rounded-2xl mx-5 w-80 max-h-96\"\n            onPress={(e) => e.stopPropagation()}\n          >\n            <View className=\"p-5 border-b border-gray-200\">\n              <Text className=\"text-xl font-bold text-gray-900\">Add Sieve</Text>\n              <Text className=\"text-sm text-gray-600 mt-1\">\n                Select a sieve to add to this aggregate\n              </Text>\n            </View>\n\n            <ScrollView className=\"max-h-80\">\n              {getAvailableSieves().length === 0 ? (\n                <View className=\"p-8 items-center\">\n                  <Ionicons name=\"checkmark-circle\" size={48} color=\"#10b981\" />\n                  <Text className=\"text-gray-600 mt-3 text-center\">\n                    All available sieves have been added\n                  </Text>\n                </View>\n              ) : (\n                <View className=\"p-2\">\n                  {getAvailableSieves().map(sieveName => (\n                    <Pressable\n                      key={sieveName}\n                      onPress={() => handleAddSieve(sieveName)}\n                      className=\"p-4 border-b border-gray-200 active:bg-gray-50\"\n                    >\n                      <View className=\"flex-row items-center justify-between\">\n                        <View>\n                          <Text className=\"text-base font-semibold text-gray-800\">\n                            {sieveName}\n                          </Text>\n                          <Text className=\"text-sm text-gray-500\">\n                            {STANDARD_SIEVES[sieveName]}mm\n                          </Text>\n                        </View>\n                        <Ionicons name=\"add-circle-outline\" size={24} color=\"#2563eb\" />\n                      </View>\n                    </Pressable>\n                  ))}\n                </View>\n              )}\n            </ScrollView>\n\n            <View className=\"p-4 border-t border-gray-200\">\n              <Pressable\n                onPress={() => setShowAddSieveModal(false)}\n                className=\"bg-gray-200 rounded-lg py-3 items-center active:bg-gray-300\"\n              >\n                <Text className=\"text-gray-700 font-semibold\">Close</Text>\n              </Pressable>\n            </View>\n          </Pressable>\n        </Pressable>\n      </Modal>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default GradationAddEditAggregateScreen;\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateLibraryStore } from '../state/aggregateLibraryStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { AggregateLibraryItem } from '../types/aggregate-library';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AggregateLibrary'>;\n};\n\nconst AggregateLibraryScreen: React.FC<Props> = ({ navigation }) => {\n  const { getAllAggregates, searchAggregates, isAggregateComplete } = useAggregateLibraryStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterType, setFilterType] = useState<'all' | 'Fine' | 'Coarse'>('all');\n  const [filterComplete, setFilterComplete] = useState<'all' | 'complete' | 'incomplete'>('all');\n\n  const aggregates = searchQuery ? searchAggregates(searchQuery) : getAllAggregates();\n\n  const filteredAggregates = useMemo(() => {\n    return aggregates.filter(agg => {\n      if (filterType !== 'all' && agg.type !== filterType) return false;\n      \n      if (filterComplete === 'complete' && !isAggregateComplete(agg.id)) return false;\n      if (filterComplete === 'incomplete' && isAggregateComplete(agg.id)) return false;\n      \n      return true;\n    });\n  }, [aggregates, filterType, filterComplete, isAggregateComplete]);\n\n  const stats = useMemo(() => {\n    const all = getAllAggregates();\n    return {\n      total: all.length,\n      fine: all.filter(a => a.type === 'Fine').length,\n      coarse: all.filter(a => a.type === 'Coarse').length,\n      complete: all.filter(a => isAggregateComplete(a.id)).length,\n      incomplete: all.filter(a => !isAggregateComplete(a.id)).length,\n    };\n  }, [getAllAggregates, isAggregateComplete]);\n\n  const handleAggregatePress = (aggregate: AggregateLibraryItem) => {\n    navigation.navigate('AggregateLibraryDetail', { aggregateId: aggregate.id });\n  };\n\n  const handleAddNew = () => {\n    navigation.navigate('AggregateLibraryAddEdit', {});\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      {/* Stats Cards */}\n      <View className=\"bg-white p-4 border-b border-gray-200\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-blue-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-blue-600\">{stats.total}</Text>\n            <Text className=\"text-xs text-blue-700\">Total</Text>\n          </View>\n          <View className=\"flex-1 bg-green-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-green-600\">{stats.fine}</Text>\n            <Text className=\"text-xs text-green-700\">Fine</Text>\n          </View>\n          <View className=\"flex-1 bg-purple-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-purple-600\">{stats.coarse}</Text>\n            <Text className=\"text-xs text-purple-700\">Coarse</Text>\n          </View>\n          <View className=\"flex-1 bg-orange-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-orange-600\">{stats.incomplete}</Text>\n            <Text className=\"text-xs text-orange-700\">Incomplete</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Search & Add */}\n      <View className=\"bg-white p-4 border-b border-gray-200 gap-3\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-gray-100 rounded-lg flex-row items-center px-3\">\n            <Ionicons name=\"search\" size={20} color=\"#9ca3af\" />\n            <TextInput\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholder=\"Search aggregates...\"\n              placeholderTextColor=\"#9ca3af\"\n              cursorColor=\"#000000\"\n              className=\"flex-1 py-2 px-2 text-base\"\n            />\n            {searchQuery.length > 0 && (\n              <Pressable onPress={() => setSearchQuery('')}>\n                <Ionicons name=\"close-circle\" size={20} color=\"#9ca3af\" />\n              </Pressable>\n            )}\n          </View>\n\n          <Pressable\n            onPress={handleAddNew}\n            className=\"bg-blue-600 rounded-lg px-4 items-center justify-center active:bg-blue-700\"\n          >\n            <Ionicons name=\"add\" size={24} color=\"white\" />\n          </Pressable>\n        </View>\n\n        {/* Filters */}\n        <View className=\"flex-row gap-2\">\n          <Pressable\n            onPress={() => setFilterType('all')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterType === 'all' ? 'bg-gray-800' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterType === 'all' ? 'text-white' : 'text-gray-700'\n            }`}>All Types</Text>\n          </Pressable>\n          \n          <Pressable\n            onPress={() => setFilterType('Fine')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterType === 'Fine' ? 'bg-green-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterType === 'Fine' ? 'text-white' : 'text-gray-700'\n            }`}>Fine</Text>\n          </Pressable>\n          \n          <Pressable\n            onPress={() => setFilterType('Coarse')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterType === 'Coarse' ? 'bg-purple-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterType === 'Coarse' ? 'text-white' : 'text-gray-700'\n            }`}>Coarse</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterComplete(filterComplete === 'incomplete' ? 'all' : 'incomplete')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterComplete === 'incomplete' ? 'bg-orange-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterComplete === 'incomplete' ? 'text-white' : 'text-gray-700'\n            }`}>Incomplete</Text>\n          </Pressable>\n        </View>\n\n        <Text className=\"text-xs text-gray-600\">\n          {filteredAggregates.length} {filteredAggregates.length === 1 ? 'aggregate' : 'aggregates'}\n        </Text>\n      </View>\n\n      {/* Aggregate List */}\n      <ScrollView className=\"flex-1\">\n        {filteredAggregates.length === 0 ? (\n          <View className=\"flex-1 items-center justify-center p-8 mt-20\">\n            <Ionicons name=\"flask-outline\" size={64} color=\"#9ca3af\" />\n            <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n              {aggregates.length === 0 ? 'No aggregates yet' : 'No aggregates match your filters'}\n            </Text>\n            <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n              {aggregates.length === 0 ? 'Tap + to add your first aggregate' : 'Try adjusting your search or filters'}\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            {filteredAggregates.map(aggregate => {\n              const isComplete = isAggregateComplete(aggregate.id);\n              \n              return (\n                <Pressable\n                  key={aggregate.id}\n                  onPress={() => handleAggregatePress(aggregate)}\n                  className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-start justify-between mb-2\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-lg font-semibold text-gray-800\">\n                        {aggregate.name}\n                      </Text>\n                      {aggregate.source && (\n                        <Text className=\"text-sm text-gray-500 mt-0.5\">\n                          {aggregate.source}\n                        </Text>\n                      )}\n                    </View>\n                    \n                    {!isComplete && (\n                      <View className=\"bg-orange-100 px-2 py-1 rounded\">\n                        <Text className=\"text-xs font-semibold text-orange-700\">\n                          INCOMPLETE\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row flex-wrap gap-2 mt-2\">\n                    <View className={`px-2 py-1 rounded ${\n                      aggregate.type === 'Fine' ? 'bg-green-100' : 'bg-purple-100'\n                    }`}>\n                      <Text className={`text-xs font-medium ${\n                        aggregate.type === 'Fine' ? 'text-green-700' : 'text-purple-700'\n                      }`}>\n                        {aggregate.type}\n                      </Text>\n                    </View>\n\n                    {aggregate.colorFamily && (\n                      <View className=\"px-2 py-1 rounded bg-gray-100\">\n                        <Text className=\"text-xs font-medium text-gray-700\">\n                          {aggregate.colorFamily}\n                        </Text>\n                      </View>\n                    )}\n\n                    {aggregate.finenessModulus !== undefined && (\n                      <View className=\"px-2 py-1 rounded bg-blue-100\">\n                        <Text className=\"text-xs font-medium text-blue-700\">\n                          FM: {aggregate.finenessModulus}\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row items-center justify-between mt-3 pt-3 border-t border-gray-100\">\n                    <Text className=\"text-xs text-gray-500\">\n                      Updated {new Date(aggregate.updatedAt).toLocaleDateString()}\n                    </Text>\n                    <Ionicons name=\"chevron-forward\" size={16} color=\"#9ca3af\" />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default AggregateLibraryScreen;\n","import React from 'react';\nimport { View, Text, ScrollView, Pressable, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateLibraryStore } from '../state/aggregateLibraryStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AggregateLibraryDetail'>;\n  route: RouteProp<RootStackParamList, 'AggregateLibraryDetail'>;\n};\n\nconst AggregateLibraryDetailScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { aggregateId } = route.params;\n  const { getAggregate, deleteAggregate, isAggregateComplete, toggleFavorite, duplicateAggregate, trackAccess } = useAggregateLibraryStore();\n  \n  const aggregate = getAggregate(aggregateId);\n\n  // Track access when viewing\n  React.useEffect(() => {\n    if (aggregateId) {\n      trackAccess(aggregateId);\n    }\n  }, [aggregateId, trackAccess]);\n\n  if (!aggregate) {\n    return (\n      <View className=\"flex-1 bg-gray-50 items-center justify-center p-8\">\n        <Ionicons name=\"alert-circle-outline\" size={64} color=\"#9ca3af\" />\n        <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n          Aggregate not found\n        </Text>\n        <Pressable\n          onPress={() => navigation.goBack()}\n          className=\"mt-6 bg-blue-600 rounded-lg px-6 py-3 active:bg-blue-700\"\n        >\n          <Text className=\"text-white font-semibold\">Go Back</Text>\n        </Pressable>\n      </View>\n    );\n  }\n\n  const isComplete = isAggregateComplete(aggregateId);\n\n  const handleEdit = () => {\n    navigation.navigate('AggregateLibraryAddEdit', { aggregateId });\n  };\n\n  const handleDelete = () => {\n    Alert.alert(\n      'Delete Aggregate',\n      `Are you sure you want to delete \"${aggregate.name}\"? This action cannot be undone.`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Delete',\n          style: 'destructive',\n          onPress: () => {\n            deleteAggregate(aggregateId);\n            navigation.goBack();\n          },\n        },\n      ]\n    );\n  };\n\n  const handleDuplicate = async () => {\n    const duplicated = await duplicateAggregate(aggregateId);\n    if (duplicated) {\n      Alert.alert(\n        'Duplicate Created',\n        `\"${duplicated.name}\" has been created. Would you like to edit it now?`,\n        [\n          { text: 'Not Now', style: 'cancel' },\n          {\n            text: 'Edit',\n            onPress: () => navigation.replace('AggregateLibraryAddEdit', { aggregateId: duplicated.id }),\n          },\n        ]\n      );\n    }\n  };\n\n  const handleToggleFavorite = () => {\n    toggleFavorite(aggregateId);\n  };\n\n  const renderField = (label: string, value: string | number | null | undefined, unit?: string) => {\n    if (value === null || value === undefined) return null;\n    \n    return (\n      <View className=\"mb-3\">\n        <Text className=\"text-xs text-gray-500 mb-0.5\">{label}</Text>\n        <Text className=\"text-base text-gray-900 font-medium\">\n          {value}{unit ? ` ${unit}` : ''}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderSection = (title: string, content: React.ReactNode, isEmpty?: boolean) => {\n    if (isEmpty) return null;\n    \n    return (\n      <View className=\"bg-white rounded-lg p-4 mb-3 shadow-sm\">\n        <Text className=\"text-lg font-semibold text-gray-900 mb-3\">{title}</Text>\n        {content}\n      </View>\n    );\n  };\n\n  const hasPhysical = !!(\n    aggregate.finenessModulus ||\n    aggregate.dryRoddedUnitWeight ||\n    aggregate.percentVoids ||\n    aggregate.absorption ||\n    aggregate.moistureContent ||\n    aggregate.maxSize\n  );\n\n  const hasSpecificGravity = !!(\n    aggregate.specificGravityBulkSSD ||\n    aggregate.specificGravityBulkDry ||\n    aggregate.specificGravityApparent\n  );\n\n  const hasPerformance = !!(\n    aggregate.laAbrasion ||\n    aggregate.soundness ||\n    aggregate.deleteriousMaterials ||\n    aggregate.organicImpurities ||\n    aggregate.clayLumps\n  );\n\n  const hasChemical = !!(\n    aggregate.asrReactivity ||\n    aggregate.chlorideContent ||\n    aggregate.sulfateContent\n  );\n\n  const hasProduction = !!(\n    aggregate.costPerTon ||\n    aggregate.costPerYard ||\n    aggregate.lastTestDate ||\n    aggregate.certifications ||\n    aggregate.notes\n  );\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Header Card */}\n        <View className=\"bg-white p-4 border-b border-gray-200\">\n          <View className=\"flex-row items-start justify-between mb-2\">\n            <View className=\"flex-1\">\n              <Text className=\"text-2xl font-bold text-gray-900 mb-1\">\n                {aggregate.name}\n              </Text>\n              {aggregate.source && (\n                <Text className=\"text-base text-gray-600\">{aggregate.source}</Text>\n              )}\n            </View>\n            \n            {!isComplete && (\n              <View className=\"bg-orange-100 px-3 py-1.5 rounded-lg\">\n                <Text className=\"text-xs font-semibold text-orange-700\">\n                  INCOMPLETE\n                </Text>\n              </View>\n            )}\n          </View>\n\n          <View className=\"flex-row flex-wrap gap-2 mt-3\">\n            <View className={`px-3 py-1.5 rounded-full ${\n              aggregate.type === 'Fine' ? 'bg-green-100' : 'bg-purple-100'\n            }`}>\n              <Text className={`text-sm font-semibold ${\n                aggregate.type === 'Fine' ? 'text-green-700' : 'text-purple-700'\n              }`}>\n                {aggregate.type}\n              </Text>\n            </View>\n\n            {aggregate.colorFamily && (\n              <View className=\"px-3 py-1.5 rounded-full bg-gray-100\">\n                <Text className=\"text-sm font-semibold text-gray-700\">\n                  {aggregate.colorFamily}\n                </Text>\n              </View>\n            )}\n\n            {aggregate.stockpileNumber && (\n              <View className=\"px-3 py-1.5 rounded-full bg-blue-100\">\n                <Text className=\"text-sm font-semibold text-blue-700\">\n                  {aggregate.stockpileNumber}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {!isComplete && (\n            <View className=\"mt-4 bg-orange-50 rounded-lg p-3 border border-orange-200\">\n              <View className=\"flex-row items-start\">\n                <Ionicons name=\"warning\" size={18} color=\"#c2410c\" />\n                <Text className=\"flex-1 text-xs text-orange-700 ml-2\">\n                  This aggregate is missing required data. Tap Edit to complete the profile.\n                </Text>\n              </View>\n            </View>\n          )}\n        </View>\n\n        <View className=\"p-4\">\n          {/* Physical Properties */}\n          {renderSection(\n            'Physical Properties',\n            <>\n              {aggregate.type === 'Fine' && renderField('Fineness Modulus', aggregate.finenessModulus)}\n              {renderField('Dry-Rodded Unit Weight', aggregate.dryRoddedUnitWeight, 'lb/ft')}\n              {renderField('Percent Voids', aggregate.percentVoids, '%')}\n              {renderField('Absorption', aggregate.absorption, '%')}\n              {renderField('Moisture Content', aggregate.moistureContent, '%')}\n              {renderField('Maximum Size', aggregate.maxSize, 'in')}\n            </>,\n            !hasPhysical\n          )}\n\n          {/* Specific Gravity */}\n          {renderSection(\n            'Specific Gravity',\n            <>\n              {renderField('Bulk (SSD)', aggregate.specificGravityBulkSSD)}\n              {renderField('Bulk (Dry)', aggregate.specificGravityBulkDry)}\n              {renderField('Apparent', aggregate.specificGravityApparent)}\n            </>,\n            !hasSpecificGravity\n          )}\n\n          {/* Performance Properties */}\n          {renderSection(\n            'Performance Properties',\n            <>\n              {renderField('LA Abrasion', aggregate.laAbrasion, '%')}\n              {renderField('Soundness', aggregate.soundness, '%')}\n              {renderField('Deleterious Materials', aggregate.deleteriousMaterials, '%')}\n              {renderField('Organic Impurities', aggregate.organicImpurities)}\n              {renderField('Clay Lumps', aggregate.clayLumps, '%')}\n            </>,\n            !hasPerformance\n          )}\n\n          {/* Chemical Properties */}\n          {renderSection(\n            'Chemical Properties',\n            <>\n              {renderField('ASR Reactivity', aggregate.asrReactivity)}\n              {renderField('Chloride Content', aggregate.chlorideContent, '%')}\n              {renderField('Sulfate Content', aggregate.sulfateContent, '%')}\n            </>,\n            !hasChemical\n          )}\n\n          {/* Production & Admin */}\n          {renderSection(\n            'Production & Admin',\n            <>\n              {renderField('Cost Per Ton', aggregate.costPerTon, '$')}\n              {renderField('Cost Per Cubic Yard', aggregate.costPerYard, '$')}\n              {renderField('Last Test Date', aggregate.lastTestDate)}\n              {renderField('Certifications', aggregate.certifications)}\n              {aggregate.notes && (\n                <View className=\"mb-3\">\n                  <Text className=\"text-xs text-gray-500 mb-0.5\">Notes</Text>\n                  <Text className=\"text-base text-gray-900\">{aggregate.notes}</Text>\n                </View>\n              )}\n            </>,\n            !hasProduction\n          )}\n\n          {/* Metadata */}\n          <View className=\"bg-gray-100 rounded-lg p-3 mt-2\">\n            <Text className=\"text-xs text-gray-600\">\n              Created: {new Date(aggregate.createdAt).toLocaleDateString()} at {new Date(aggregate.createdAt).toLocaleTimeString()}\n            </Text>\n            <Text className=\"text-xs text-gray-600 mt-1\">\n              Last Updated: {new Date(aggregate.updatedAt).toLocaleDateString()} at {new Date(aggregate.updatedAt).toLocaleTimeString()}\n            </Text>\n          </View>\n\n          {/* Action Buttons */}\n          <View className=\"gap-3 mt-6 mb-8\">\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleEdit}\n                className=\"flex-1 bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"pencil\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Edit</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleToggleFavorite}\n                className={`rounded-lg px-6 py-4 items-center flex-row ${\n                  aggregate.isFavorite ? 'bg-yellow-500 active:bg-yellow-600' : 'bg-gray-400 active:bg-gray-500'\n                }`}\n              >\n                <Ionicons name={aggregate.isFavorite ? \"star\" : \"star-outline\"} size={20} color=\"white\" />\n              </Pressable>\n            </View>\n\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleDuplicate}\n                className=\"flex-1 bg-green-600 rounded-lg py-4 items-center active:bg-green-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"copy\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Duplicate</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleDelete}\n                className=\"bg-red-600 rounded-lg px-6 py-4 items-center active:bg-red-700 flex-row\"\n              >\n                <Ionicons name=\"trash\" size={20} color=\"white\" />\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default AggregateLibraryDetailScreen;\n","/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThis is a custom audio transcription service that uses a custom API endpoint maintained by Vibecode.\nYou can use this function to transcribe audio files, and it will return the text of the audio file.\n*/\n\n/**\n * Transcribe an audio file\n * @param localAudioUri - The local URI of the audio file to transcribe. Obtained via the expo-av library.\n * @returns The text of the audio file\n */\nexport const transcribeAudio = async (localAudioUri: string) => {\n  try {\n    // Create FormData for the audio file\n    const formData = new FormData();\n    formData.append(\"file\", {\n      uri: localAudioUri,\n      type: \"audio/m4a\",\n      name: \"recording.m4a\",\n    } as any);\n    formData.append(\"model\", \"gpt-4o-transcribe\");\n    formData.append(\"language\", \"en\");\n\n    const OPENAI_API_KEY = process.env.EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY;\n    if (!OPENAI_API_KEY) {\n      throw new Error(\"OPENAI_API_KEY is not set\");\n    }\n\n    // Use Vibecode proxy endpoint for better performance\n    const apiUrl = process.env.OPENAI_BASE_URL\n      ? `${process.env.OPENAI_BASE_URL}/audio/transcriptions`\n      : \"https://api.openai.com/v1/audio/transcriptions\";\n\n    // API call to OpenAI's gpt-4o-transcribe\n    const response = await fetch(apiUrl, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${OPENAI_API_KEY}`,\n      },\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`Transcription failed: ${errorText}`);\n    }\n\n    const result = await response.json();\n    return result.text;\n  } catch (error) {\n    console.error(\"Transcription error:\", error);\n    throw error;\n  }\n};\n","import React, { useState } from 'react';\nimport { Pressable, View, Text, ActivityIndicator } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Audio } from 'expo-av';\nimport { transcribeAudio } from '../api/transcribe-audio';\n\ninterface VoiceInputButtonProps {\n  onTranscriptionComplete: (text: string) => void;\n  buttonSize?: number;\n  buttonColor?: string;\n  style?: any;\n}\n\nexport const VoiceInputButton: React.FC<VoiceInputButtonProps> = ({\n  onTranscriptionComplete,\n  buttonSize = 40,\n  buttonColor = '#3B82F6',\n  style,\n}) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [isTranscribing, setIsTranscribing] = useState(false);\n  const [recording, setRecording] = useState<Audio.Recording | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const startRecording = async () => {\n    try {\n      setError(null);\n      \n      // Request permissions\n      const permission = await Audio.requestPermissionsAsync();\n      if (permission.status !== 'granted') {\n        setError('Microphone permission denied');\n        return;\n      }\n\n      // Configure audio mode\n      await Audio.setAudioModeAsync({\n        allowsRecordingIOS: true,\n        playsInSilentModeIOS: true,\n      });\n\n      // Start recording\n      const { recording: newRecording } = await Audio.Recording.createAsync(\n        Audio.RecordingOptionsPresets.HIGH_QUALITY\n      );\n      \n      setRecording(newRecording);\n      setIsRecording(true);\n    } catch (err) {\n      console.error('Failed to start recording:', err);\n      setError('Failed to start recording');\n    }\n  };\n\n  const stopRecording = async () => {\n    try {\n      if (!recording) return;\n\n      setIsRecording(false);\n      await recording.stopAndUnloadAsync();\n      await Audio.setAudioModeAsync({\n        allowsRecordingIOS: false,\n      });\n\n      const uri = recording.getURI();\n      if (!uri) {\n        setError('No audio recorded');\n        return;\n      }\n\n      // Transcribe the audio\n      setIsTranscribing(true);\n      const transcription = await transcribeAudio(uri);\n      \n      if (transcription && transcription.trim()) {\n        onTranscriptionComplete(transcription.trim());\n      }\n\n      setIsTranscribing(false);\n      setRecording(null);\n    } catch (err) {\n      console.error('Failed to process recording:', err);\n      setError('Failed to transcribe audio');\n      setIsTranscribing(false);\n      setRecording(null);\n    }\n  };\n\n  const handlePress = () => {\n    if (isRecording) {\n      stopRecording();\n    } else if (!isTranscribing) {\n      startRecording();\n    }\n  };\n\n  return (\n    <View style={style}>\n      <Pressable\n        onPress={handlePress}\n        disabled={isTranscribing}\n        className=\"items-center justify-center rounded-full active:opacity-80\"\n        style={{\n          width: buttonSize,\n          height: buttonSize,\n          backgroundColor: isRecording ? '#EF4444' : buttonColor,\n        }}\n      >\n        {isTranscribing ? (\n          <ActivityIndicator color=\"white\" size=\"small\" />\n        ) : (\n          <Ionicons\n            name={isRecording ? 'stop' : 'mic'}\n            size={buttonSize * 0.5}\n            color=\"white\"\n          />\n        )}\n      </Pressable>\n      \n      {isRecording && (\n        <View className=\"absolute -bottom-6 left-1/2 -ml-12 w-24\">\n          <Text className=\"text-xs text-center text-red-600 font-semibold\">\n            Recording...\n          </Text>\n        </View>\n      )}\n      \n      {isTranscribing && (\n        <View className=\"absolute -bottom-6 left-1/2 -ml-16 w-32\">\n          <Text className=\"text-xs text-center text-blue-600 font-semibold\">\n            Transcribing...\n          </Text>\n        </View>\n      )}\n      \n      {error && (\n        <View className=\"absolute -bottom-6 left-1/2 -ml-20 w-40\">\n          <Text className=\"text-xs text-center text-red-600 font-semibold\">\n            {error}\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n};\n","import React from 'react';\nimport { View, Text, TextInput, TextInputProps } from 'react-native';\nimport { VoiceInputButton } from './VoiceInputButton';\n\ninterface VoiceTextInputProps extends TextInputProps {\n  label: string;\n  value: string;\n  onChangeText: (text: string) => void;\n  required?: boolean;\n  placeholder?: string;\n  multiline?: boolean;\n  enableVoiceInput?: boolean;\n}\n\nexport const VoiceTextInput: React.FC<VoiceTextInputProps> = ({\n  label,\n  value,\n  onChangeText,\n  required = false,\n  placeholder,\n  multiline = false,\n  enableVoiceInput = false,\n  ...textInputProps\n}) => {\n  const handleVoiceTranscription = (transcription: string) => {\n    // Append to existing text if there is any\n    if (value.trim()) {\n      onChangeText(`${value}\\n${transcription}`);\n    } else {\n      onChangeText(transcription);\n    }\n  };\n\n  return (\n    <View className=\"mb-4\">\n      <View className=\"flex-row items-center justify-between mb-1\">\n        <View className=\"flex-row items-center\">\n          <Text className=\"text-sm font-medium text-gray-700\">{label}</Text>\n          {required && <Text className=\"text-red-500 ml-1\">*</Text>}\n        </View>\n        \n        {enableVoiceInput && multiline && (\n          <VoiceInputButton\n            onTranscriptionComplete={handleVoiceTranscription}\n            buttonSize={32}\n            buttonColor=\"#3B82F6\"\n          />\n        )}\n      </View>\n      \n      <TextInput\n        value={value}\n        onChangeText={onChangeText}\n        placeholder={placeholder}\n        placeholderTextColor=\"#9ca3af\"\n        multiline={multiline}\n        numberOfLines={multiline ? 6 : 1}\n        selectTextOnFocus\n        cursorColor=\"#000000\"\n        className={`bg-white border border-gray-300 rounded-lg px-3 py-2.5 text-base ${\n          multiline ? 'min-h-[120px]' : ''\n        }`}\n        {...textInputProps}\n      />\n      \n      {enableVoiceInput && multiline && (\n        <Text className=\"text-xs text-gray-500 mt-1\">\n          Tap the microphone to record voice input\n        </Text>\n      )}\n    </View>\n  );\n};\n","import React from 'react';\nimport { View, Text } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { ValidationWarning } from '../utils/dataValidation';\n\ninterface ValidationWarningsProps {\n  warnings: ValidationWarning[];\n}\n\nexport const ValidationWarnings: React.FC<ValidationWarningsProps> = ({ warnings }) => {\n  if (warnings.length === 0) {\n    return null;\n  }\n\n  return (\n    <View className=\"mb-4\">\n      {warnings.map((warning, index) => (\n        <View\n          key={index}\n          className={`rounded-lg p-3 mb-2 flex-row items-start ${\n            warning.severity === 'warning'\n              ? 'bg-yellow-50 border border-yellow-200'\n              : 'bg-blue-50 border border-blue-200'\n          }`}\n        >\n          <Ionicons\n            name={warning.severity === 'warning' ? 'warning' : 'information-circle'}\n            size={20}\n            color={warning.severity === 'warning' ? '#f59e0b' : '#3b82f6'}\n            style={{ marginTop: 2 }}\n          />\n          <View className=\"flex-1 ml-2\">\n            <Text\n              className={`text-xs font-semibold mb-0.5 ${\n                warning.severity === 'warning' ? 'text-yellow-900' : 'text-blue-900'\n              }`}\n            >\n              {warning.field}\n            </Text>\n            <Text\n              className={`text-xs ${\n                warning.severity === 'warning' ? 'text-yellow-700' : 'text-blue-700'\n              }`}\n            >\n              {warning.message}\n            </Text>\n          </View>\n        </View>\n      ))}\n    </View>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput, Alert, KeyboardAvoidingView, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAggregateLibraryStore } from '../state/aggregateLibraryStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\nimport { AggregateLibraryItem } from '../types/aggregate-library';\nimport { VoiceTextInput } from '../components/VoiceTextInput';\nimport { ValidationWarnings } from '../components/ValidationWarnings';\nimport { validateAggregateData } from '../utils/dataValidation';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AggregateLibraryAddEdit'>;\n  route: RouteProp<RootStackParamList, 'AggregateLibraryAddEdit'>;\n};\n\nconst AggregateLibraryAddEditScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { aggregateId } = route.params;\n  const { getAggregate, addAggregate, updateAggregate } = useAggregateLibraryStore();\n  \n  const isEditing = !!aggregateId;\n  const existingAggregate = isEditing ? getAggregate(aggregateId) : undefined;\n\n  // Form state\n  const [name, setName] = useState(existingAggregate?.name || '');\n  const [type, setType] = useState<'Fine' | 'Coarse'>(existingAggregate?.type || 'Fine');\n  \n  // Physical Properties\n  const [finenessModulus, setFinenessModulus] = useState(existingAggregate?.finenessModulus?.toString() || '');\n  const [dryRoddedUnitWeight, setDryRoddedUnitWeight] = useState(existingAggregate?.dryRoddedUnitWeight?.toString() || '');\n  const [percentVoids, setPercentVoids] = useState(existingAggregate?.percentVoids?.toString() || '');\n  const [absorption, setAbsorption] = useState(existingAggregate?.absorption?.toString() || '');\n  const [moistureContent, setMoistureContent] = useState(existingAggregate?.moistureContent?.toString() || '');\n  const [maxSize, setMaxSize] = useState(existingAggregate?.maxSize?.toString() || '');\n  \n  // Specific Gravity\n  const [sgBulkSSD, setSgBulkSSD] = useState(existingAggregate?.specificGravityBulkSSD?.toString() || '');\n  const [sgBulkDry, setSgBulkDry] = useState(existingAggregate?.specificGravityBulkDry?.toString() || '');\n  const [sgApparent, setSgApparent] = useState(existingAggregate?.specificGravityApparent?.toString() || '');\n  \n  // Optional Properties\n  const [colorFamily, setColorFamily] = useState<AggregateLibraryItem['colorFamily']>(existingAggregate?.colorFamily || null);\n  const [source, setSource] = useState(existingAggregate?.source || '');\n  const [stockpileNumber, setStockpileNumber] = useState(existingAggregate?.stockpileNumber || '');\n  \n  // Performance Properties\n  const [laAbrasion, setLaAbrasion] = useState(existingAggregate?.laAbrasion?.toString() || '');\n  const [soundness, setSoundness] = useState(existingAggregate?.soundness?.toString() || '');\n  const [deleteriousMaterials, setDeleteriousMaterials] = useState(existingAggregate?.deleteriousMaterials?.toString() || '');\n  const [organicImpurities, setOrganicImpurities] = useState(existingAggregate?.organicImpurities || '');\n  const [clayLumps, setClayLumps] = useState(existingAggregate?.clayLumps?.toString() || '');\n  \n  // Chemical Properties\n  const [asrReactivity, setAsrReactivity] = useState<AggregateLibraryItem['asrReactivity']>(existingAggregate?.asrReactivity || null);\n  const [chlorideContent, setChlorideContent] = useState(existingAggregate?.chlorideContent?.toString() || '');\n  const [sulfateContent, setSulfateContent] = useState(existingAggregate?.sulfateContent?.toString() || '');\n  \n  // Production Data\n  const [costPerTon, setCostPerTon] = useState(existingAggregate?.costPerTon?.toString() || '');\n  const [costPerYard, setCostPerYard] = useState(existingAggregate?.costPerYard?.toString() || '');\n  const [lastTestDate, setLastTestDate] = useState(existingAggregate?.lastTestDate || '');\n  const [certifications, setCertifications] = useState(existingAggregate?.certifications || '');\n  const [notes, setNotes] = useState(existingAggregate?.notes || '');\n\n  // Real-time validation warnings\n  const validationWarnings = useMemo(() => {\n    const parseNumber = (value: string) => {\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? undefined : parsed;\n    };\n\n    return validateAggregateData({\n      dryRoddedUnitWeight: parseNumber(dryRoddedUnitWeight),\n      percentVoids: parseNumber(percentVoids),\n      absorption: parseNumber(absorption),\n      sgBulkSSD: parseNumber(sgBulkSSD),\n      sgBulkOvenDry: parseNumber(sgBulkDry),\n      sgApparent: parseNumber(sgApparent),\n      finenessModulus: parseNumber(finenessModulus),\n    });\n  }, [dryRoddedUnitWeight, percentVoids, absorption, sgBulkSSD, sgBulkDry, sgApparent, finenessModulus]);\n\n  const handleSave = () => {\n    if (!name.trim()) {\n      Alert.alert('Required Field', 'Please enter an aggregate name');\n      return;\n    }\n\n    const parseNumber = (value: string) => {\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? undefined : parsed;\n    };\n\n    const aggregateData: Omit<AggregateLibraryItem, 'id' | 'createdAt' | 'updatedAt'> = {\n      name: name.trim(),\n      type,\n      finenessModulus: parseNumber(finenessModulus),\n      dryRoddedUnitWeight: parseNumber(dryRoddedUnitWeight),\n      percentVoids: parseNumber(percentVoids),\n      absorption: parseNumber(absorption),\n      moistureContent: parseNumber(moistureContent),\n      maxSize: parseNumber(maxSize),\n      specificGravityBulkSSD: parseNumber(sgBulkSSD),\n      specificGravityBulkDry: parseNumber(sgBulkDry),\n      specificGravityApparent: parseNumber(sgApparent),\n      colorFamily,\n      source: source.trim() || undefined,\n      stockpileNumber: stockpileNumber.trim() || undefined,\n      laAbrasion: parseNumber(laAbrasion),\n      soundness: parseNumber(soundness),\n      deleteriousMaterials: parseNumber(deleteriousMaterials),\n      organicImpurities: organicImpurities.trim() || undefined,\n      clayLumps: parseNumber(clayLumps),\n      asrReactivity,\n      chlorideContent: parseNumber(chlorideContent),\n      sulfateContent: parseNumber(sulfateContent),\n      costPerTon: parseNumber(costPerTon),\n      costPerYard: parseNumber(costPerYard),\n      lastTestDate: lastTestDate.trim() || undefined,\n      certifications: certifications.trim() || undefined,\n      notes: notes.trim() || undefined,\n    };\n\n    if (isEditing) {\n      updateAggregate(aggregateId, aggregateData);\n    } else {\n      const newAggregate: AggregateLibraryItem = {\n        ...aggregateData,\n        id: Date.now().toString(),\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n      };\n      addAggregate(newAggregate);\n    }\n\n    navigation.goBack();\n  };\n\n  const renderTextInput = (\n    label: string,\n    value: string,\n    setValue: (value: string) => void,\n    options: {\n      required?: boolean;\n      placeholder?: string;\n      keyboardType?: 'default' | 'numeric' | 'decimal-pad';\n      multiline?: boolean;\n    } = {}\n  ) => (\n    <View className=\"mb-4\">\n      <View className=\"flex-row items-center mb-1\">\n        <Text className=\"text-sm font-medium text-gray-700\">{label}</Text>\n        {options?.required && (\n          <Text className=\"text-red-500 ml-1\">*</Text>\n        )}\n      </View>\n      <TextInput\n        value={value}\n        onChangeText={setValue}\n        placeholder={options?.placeholder}\n        placeholderTextColor=\"#9ca3af\"\n        cursorColor=\"#000000\"\n        keyboardType={options?.keyboardType || 'default'}\n        multiline={options?.multiline}\n        numberOfLines={options?.multiline ? 4 : 1}\n        selectTextOnFocus\n        className={`bg-white border border-gray-300 rounded-lg px-3 py-2.5 text-base ${\n          options?.multiline ? 'min-h-[80px]' : ''\n        }`}\n      />\n    </View>\n  );\n\n  const renderSection = (title: string, children: React.ReactNode, description?: string) => (\n    <View className=\"mb-6\">\n      <View className=\"mb-3\">\n        <Text className=\"text-lg font-semibold text-gray-900\">{title}</Text>\n        {description && (\n          <Text className=\"text-xs text-gray-600 mt-0.5\">{description}</Text>\n        )}\n      </View>\n      {children}\n    </View>\n  );\n\n  return (\n    <KeyboardAvoidingView \n      className=\"flex-1 bg-gray-50\"\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n      keyboardVerticalOffset={90}\n    >\n      <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n        <View className=\"p-4\">\n          {/* Basic Information */}\n          {renderSection(\n            'Basic Information',\n            <>\n              {renderTextInput('Name', name, setName, { \n                required: true, \n                placeholder: 'e.g., Keystone #7, Smith Quarry Sand' \n              })}\n              \n              <View className=\"mb-4\">\n                <View className=\"flex-row items-center mb-1\">\n                  <Text className=\"text-sm font-medium text-gray-700\">Type</Text>\n                  <Text className=\"text-red-500 ml-1\">*</Text>\n                </View>\n                <View className=\"flex-row gap-3\">\n                  <Pressable\n                    onPress={() => setType('Fine')}\n                    className={`flex-1 py-3 rounded-lg border-2 ${\n                      type === 'Fine' \n                        ? 'bg-green-50 border-green-600' \n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-center font-semibold ${\n                      type === 'Fine' ? 'text-green-700' : 'text-gray-700'\n                    }`}>\n                      Fine\n                    </Text>\n                  </Pressable>\n                  \n                  <Pressable\n                    onPress={() => setType('Coarse')}\n                    className={`flex-1 py-3 rounded-lg border-2 ${\n                      type === 'Coarse' \n                        ? 'bg-purple-50 border-purple-600' \n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-center font-semibold ${\n                      type === 'Coarse' ? 'text-purple-700' : 'text-gray-700'\n                    }`}>\n                      Coarse\n                    </Text>\n                  </Pressable>\n                </View>\n              </View>\n\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-medium text-gray-700 mb-1\">Color Family</Text>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"flex-row gap-2\">\n                  {['Brown', 'Red', 'Black', 'Grey', 'White', 'Mixed'].map((color) => (\n                    <Pressable\n                      key={color}\n                      onPress={() => setColorFamily(color as typeof colorFamily)}\n                      className={`px-4 py-2 rounded-full border ${\n                        colorFamily === color\n                          ? 'bg-gray-800 border-gray-800'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text className={`text-sm font-medium ${\n                        colorFamily === color ? 'text-white' : 'text-gray-700'\n                      }`}>\n                        {color}\n                      </Text>\n                    </Pressable>\n                  ))}\n                  {colorFamily && (\n                    <Pressable\n                      onPress={() => setColorFamily(null)}\n                      className=\"px-4 py-2 rounded-full bg-gray-200\"\n                    >\n                      <Text className=\"text-sm font-medium text-gray-700\">Clear</Text>\n                    </Pressable>\n                  )}\n                </ScrollView>\n              </View>\n\n              {renderTextInput('Source (Quarry/Supplier)', source, setSource, { \n                placeholder: 'e.g., Smith Quarry, ABC Materials' \n              })}\n              \n              {renderTextInput('Stockpile Number', stockpileNumber, setStockpileNumber, { \n                placeholder: 'e.g., SP-4, A23' \n              })}\n            </>\n          )}\n\n          {/* Physical Properties */}\n          {renderSection(\n            'Physical Properties',\n            <>\n              {type === 'Fine' && (\n                renderTextInput(\n                  'Fineness Modulus',\n                  finenessModulus,\n                  setFinenessModulus,\n                  { required: true, keyboardType: 'decimal-pad', placeholder: 'e.g., 2.8' }\n                )\n              )}\n              \n              {renderTextInput(\n                'Dry-Rodded Unit Weight',\n                dryRoddedUnitWeight,\n                setDryRoddedUnitWeight,\n                { required: true, keyboardType: 'decimal-pad', placeholder: 'lb/ft' }\n              )}\n              \n              {renderTextInput(\n                'Percent Voids',\n                percentVoids,\n                setPercentVoids,\n                { required: true, keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Absorption',\n                absorption,\n                setAbsorption,\n                { required: true, keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Moisture Content',\n                moistureContent,\n                setMoistureContent,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Maximum Size',\n                maxSize,\n                setMaxSize,\n                { keyboardType: 'decimal-pad', placeholder: 'inches' }\n              )}\n            </>\n          )}\n\n          {/* Specific Gravity */}\n          {renderSection(\n            'Specific Gravity',\n            <>\n              {renderTextInput(\n                'Bulk (SSD)',\n                sgBulkSSD,\n                setSgBulkSSD,\n                { required: true, keyboardType: 'decimal-pad', placeholder: 'e.g., 2.65' }\n              )}\n              \n              {renderTextInput(\n                'Bulk (Dry)',\n                sgBulkDry,\n                setSgBulkDry,\n                { required: true, keyboardType: 'decimal-pad', placeholder: 'e.g., 2.62' }\n              )}\n              \n              {renderTextInput(\n                'Apparent',\n                sgApparent,\n                setSgApparent,\n                { required: true, keyboardType: 'decimal-pad', placeholder: 'e.g., 2.70' }\n              )}\n            </>\n          )}\n\n          {/* Validation Warnings */}\n          {validationWarnings.length > 0 && (\n            <View className=\"mb-4\">\n              <ValidationWarnings warnings={validationWarnings} />\n            </View>\n          )}\n\n          {/* Performance Properties */}\n          {renderSection(\n            'Performance Properties',\n            <>\n              {renderTextInput(\n                'LA Abrasion',\n                laAbrasion,\n                setLaAbrasion,\n                { keyboardType: 'decimal-pad', placeholder: '% (for coarse aggregates)' }\n              )}\n              \n              {renderTextInput(\n                'Soundness',\n                soundness,\n                setSoundness,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Deleterious Materials',\n                deleteriousMaterials,\n                setDeleteriousMaterials,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Organic Impurities',\n                organicImpurities,\n                setOrganicImpurities,\n                { placeholder: 'e.g., Pass, Fail, Light Straw' }\n              )}\n              \n              {renderTextInput(\n                'Clay Lumps',\n                clayLumps,\n                setClayLumps,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n            </>\n          )}\n\n          {/* Chemical Properties */}\n          {renderSection(\n            'Chemical Properties',\n            <>\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-medium text-gray-700 mb-1\">ASR Reactivity</Text>\n                <View className=\"flex-row flex-wrap gap-2\">\n                  {(['Low', 'Moderate', 'High', 'Not Tested'] as const).map((level) => (\n                    <Pressable\n                      key={level}\n                      onPress={() => setAsrReactivity(level)}\n                      className={`px-4 py-2 rounded-full border ${\n                        asrReactivity === level\n                          ? 'bg-gray-800 border-gray-800'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text className={`text-sm font-medium ${\n                        asrReactivity === level ? 'text-white' : 'text-gray-700'\n                      }`}>\n                        {level}\n                      </Text>\n                    </Pressable>\n                  ))}\n                  {asrReactivity && (\n                    <Pressable\n                      onPress={() => setAsrReactivity(null)}\n                      className=\"px-4 py-2 rounded-full bg-gray-200\"\n                    >\n                      <Text className=\"text-sm font-medium text-gray-700\">Clear</Text>\n                    </Pressable>\n                  )}\n                </View>\n              </View>\n\n              {renderTextInput(\n                'Chloride Content',\n                chlorideContent,\n                setChlorideContent,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n              \n              {renderTextInput(\n                'Sulfate Content',\n                sulfateContent,\n                setSulfateContent,\n                { keyboardType: 'decimal-pad', placeholder: '%' }\n              )}\n            </>\n          )}\n\n          {/* Production Data */}\n          {renderSection(\n            'Production & Admin',\n            <>\n              {renderTextInput(\n                'Cost Per Ton',\n                costPerTon,\n                setCostPerTon,\n                { keyboardType: 'decimal-pad', placeholder: '$' }\n              )}\n              \n              {renderTextInput(\n                'Cost Per Cubic Yard',\n                costPerYard,\n                setCostPerYard,\n                { keyboardType: 'decimal-pad', placeholder: '$' }\n              )}\n              \n              {renderTextInput(\n                'Last Test Date',\n                lastTestDate,\n                setLastTestDate,\n                { placeholder: 'YYYY-MM-DD or MM/DD/YYYY' }\n              )}\n              \n              {renderTextInput(\n                'Certifications',\n                certifications,\n                setCertifications,\n                { placeholder: 'e.g., ASTM C33, AASHTO M6' }\n              )}\n              \n              <VoiceTextInput\n                label=\"Notes\"\n                value={notes}\n                onChangeText={setNotes}\n                multiline\n                enableVoiceInput\n                placeholder=\"Additional notes or comments\"\n                autoCapitalize=\"sentences\"\n              />\n            </>\n          )}\n\n          {/* Save Button */}\n          <Pressable\n            onPress={handleSave}\n            className=\"bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 mb-4\"\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              {isEditing ? 'Update Aggregate' : 'Save Aggregate'}\n            </Text>\n          </Pressable>\n\n          {/* Info Note */}\n          <View className=\"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-8\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#3b82f6\" />\n              <Text className=\"flex-1 text-xs text-blue-700 ml-2\">\n                Incomplete aggregates can be saved and updated later. Required fields: Name, Type, Dry-Rodded Unit Weight, Percent Voids, Absorption, and all Specific Gravity values. Fine aggregates also require Fineness Modulus.\n              </Text>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default AggregateLibraryAddEditScreen;\n","/**\n * Data validation utilities for library items\n * Provides soft warnings (non-blocking) for unusual values\n */\n\nexport interface ValidationWarning {\n  field: string;\n  message: string;\n  severity: 'warning' | 'info';\n}\n\n/**\n * Validate admixture data\n */\nexport const validateAdmixData = (data: {\n  specificGravity?: number;\n  costPerGallon?: number;\n  percentWater?: number;\n}): ValidationWarning[] => {\n  const warnings: ValidationWarning[] = [];\n\n  // Specific Gravity validation\n  if (data.specificGravity !== undefined) {\n    if (data.specificGravity < 0.8 || data.specificGravity > 2.0) {\n      warnings.push({\n        field: 'Specific Gravity',\n        message: `Value ${data.specificGravity.toFixed(2)} is outside typical range (0.8-2.0). Please verify this is correct.`,\n        severity: 'warning',\n      });\n    } else if (data.specificGravity < 1.0 || data.specificGravity > 1.5) {\n      warnings.push({\n        field: 'Specific Gravity',\n        message: `Value ${data.specificGravity.toFixed(2)} is unusual but acceptable. Most admixtures are between 1.0-1.5.`,\n        severity: 'info',\n      });\n    }\n  }\n\n  // Cost Per Gallon validation\n  if (data.costPerGallon !== undefined) {\n    if (data.costPerGallon < 0) {\n      warnings.push({\n        field: 'Cost Per Gallon',\n        message: 'Cost cannot be negative. Please check your entry.',\n        severity: 'warning',\n      });\n    } else if (data.costPerGallon > 100) {\n      warnings.push({\n        field: 'Cost Per Gallon',\n        message: `$${data.costPerGallon.toFixed(2)} per gallon is unusually high. Please verify this is correct.`,\n        severity: 'warning',\n      });\n    } else if (data.costPerGallon === 0) {\n      warnings.push({\n        field: 'Cost Per Gallon',\n        message: 'Cost is set to zero. Is this intentional?',\n        severity: 'info',\n      });\n    }\n  }\n\n  // Percent Water validation\n  if (data.percentWater !== undefined) {\n    if (data.percentWater < 0 || data.percentWater > 100) {\n      warnings.push({\n        field: 'Percent Water',\n        message: 'Percentage must be between 0 and 100.',\n        severity: 'warning',\n      });\n    } else if (data.percentWater > 90) {\n      warnings.push({\n        field: 'Percent Water',\n        message: `${data.percentWater}% water content is very high. Please verify this is correct.`,\n        severity: 'info',\n      });\n    }\n  }\n\n  return warnings;\n};\n\n/**\n * Validate aggregate data\n */\nexport const validateAggregateData = (data: {\n  dryRoddedUnitWeight?: number;\n  percentVoids?: number;\n  absorption?: number;\n  sgBulkSSD?: number;\n  sgBulkOvenDry?: number;\n  sgApparent?: number;\n  finenessModulus?: number;\n}): ValidationWarning[] => {\n  const warnings: ValidationWarning[] = [];\n\n  // Dry-Rodded Unit Weight (typical range: 85-120 lb/ft)\n  if (data.dryRoddedUnitWeight !== undefined) {\n    if (data.dryRoddedUnitWeight < 50 || data.dryRoddedUnitWeight > 150) {\n      warnings.push({\n        field: 'Dry-Rodded Unit Weight',\n        message: `${data.dryRoddedUnitWeight} lb/ft is outside typical range (85-120 lb/ft). Please verify.`,\n        severity: 'warning',\n      });\n    }\n  }\n\n  // Percent Voids (typical range: 30-50%)\n  if (data.percentVoids !== undefined) {\n    if (data.percentVoids < 0 || data.percentVoids > 100) {\n      warnings.push({\n        field: 'Percent Voids',\n        message: 'Percentage must be between 0 and 100.',\n        severity: 'warning',\n      });\n    } else if (data.percentVoids < 20 || data.percentVoids > 60) {\n      warnings.push({\n        field: 'Percent Voids',\n        message: `${data.percentVoids}% is outside typical range (30-50%). Please verify.`,\n        severity: 'info',\n      });\n    }\n  }\n\n  // Absorption (typical range: 0.2-5%)\n  if (data.absorption !== undefined) {\n    if (data.absorption < 0 || data.absorption > 20) {\n      warnings.push({\n        field: 'Absorption',\n        message: `${data.absorption}% is outside typical range (0.2-5%). Please verify.`,\n        severity: 'warning',\n      });\n    }\n  }\n\n  // Specific Gravity validations (typical range: 2.3-3.0)\n  const sgFields = [\n    { value: data.sgBulkSSD, name: 'SG Bulk SSD' },\n    { value: data.sgBulkOvenDry, name: 'SG Bulk Oven Dry' },\n    { value: data.sgApparent, name: 'SG Apparent' },\n  ];\n\n  sgFields.forEach(({ value, name }) => {\n    if (value !== undefined) {\n      if (value < 1.5 || value > 4.0) {\n        warnings.push({\n          field: name,\n          message: `${value.toFixed(2)} is outside typical range (2.3-3.0). Please verify.`,\n          severity: 'warning',\n        });\n      }\n    }\n  });\n\n  // Fineness Modulus (typical range: 2.3-3.1 for fine aggregates)\n  if (data.finenessModulus !== undefined) {\n    if (data.finenessModulus < 1.5 || data.finenessModulus > 4.0) {\n      warnings.push({\n        field: 'Fineness Modulus',\n        message: `${data.finenessModulus.toFixed(2)} is outside typical range (2.3-3.1). Please verify.`,\n        severity: 'warning',\n      });\n    }\n  }\n\n  return warnings;\n};\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAdmixLibraryStore } from '../state/admixLibraryStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { AdmixLibraryItem, AdmixClass } from '../types/admix-library';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AdmixLibrary'>;\n};\n\nconst AdmixLibraryScreen: React.FC<Props> = ({ navigation }) => {\n  const { getAllAdmixes, searchAdmixes, isAdmixComplete } = useAdmixLibraryStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterClass, setFilterClass] = useState<'all' | AdmixClass>('all');\n  const [filterComplete, setFilterComplete] = useState<'all' | 'complete' | 'incomplete'>('all');\n\n  const admixes = searchQuery ? searchAdmixes(searchQuery) : getAllAdmixes();\n\n  const filteredAdmixes = useMemo(() => {\n    return admixes.filter(admix => {\n      if (filterClass !== 'all' && admix.class !== filterClass) return false;\n      \n      if (filterComplete === 'complete' && !isAdmixComplete(admix.id)) return false;\n      if (filterComplete === 'incomplete' && isAdmixComplete(admix.id)) return false;\n      \n      return true;\n    });\n  }, [admixes, filterClass, filterComplete, isAdmixComplete]);\n\n  const stats = useMemo(() => {\n    const all = getAllAdmixes();\n    return {\n      total: all.length,\n      complete: all.filter(a => isAdmixComplete(a.id)).length,\n      incomplete: all.filter(a => !isAdmixComplete(a.id)).length,\n    };\n  }, [getAllAdmixes, isAdmixComplete]);\n\n  const handleAdmixPress = (admix: AdmixLibraryItem) => {\n    navigation.navigate('AdmixLibraryDetail', { admixId: admix.id });\n  };\n\n  const handleAddNew = () => {\n    navigation.navigate('AdmixLibraryAddEdit', {});\n  };\n\n  const classColors: Record<AdmixClass, { bg: string; text: string }> = {\n    'Water Reducer': { bg: 'bg-blue-100', text: 'text-blue-700' },\n    'High-Range Water Reducer': { bg: 'bg-indigo-100', text: 'text-indigo-700' },\n    'Air Entrainer': { bg: 'bg-cyan-100', text: 'text-cyan-700' },\n    'Accelerator': { bg: 'bg-red-100', text: 'text-red-700' },\n    'Retarder': { bg: 'bg-orange-100', text: 'text-orange-700' },\n    'Corrosion Inhibitor': { bg: 'bg-yellow-100', text: 'text-yellow-700' },\n    'Shrinkage Reducer': { bg: 'bg-green-100', text: 'text-green-700' },\n    'Viscosity Modifier': { bg: 'bg-purple-100', text: 'text-purple-700' },\n    'Other': { bg: 'bg-gray-100', text: 'text-gray-700' },\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      {/* Stats Cards */}\n      <View className=\"bg-white p-4 border-b border-gray-200\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-blue-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-blue-600\">{stats.total}</Text>\n            <Text className=\"text-xs text-blue-700\">Total</Text>\n          </View>\n          <View className=\"flex-1 bg-green-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-green-600\">{stats.complete}</Text>\n            <Text className=\"text-xs text-green-700\">Complete</Text>\n          </View>\n          <View className=\"flex-1 bg-orange-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-orange-600\">{stats.incomplete}</Text>\n            <Text className=\"text-xs text-orange-700\">Incomplete</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Search & Add */}\n      <View className=\"bg-white p-4 border-b border-gray-200 gap-3\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-gray-100 rounded-lg flex-row items-center px-3\">\n            <Ionicons name=\"search\" size={20} color=\"#9ca3af\" />\n            <TextInput\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholder=\"Search admixes...\"\n              placeholderTextColor=\"#9ca3af\"\n              cursorColor=\"#000000\"\n              className=\"flex-1 py-2 px-2 text-base\"\n            />\n            {searchQuery.length > 0 && (\n              <Pressable onPress={() => setSearchQuery('')}>\n                <Ionicons name=\"close-circle\" size={20} color=\"#9ca3af\" />\n              </Pressable>\n            )}\n          </View>\n\n          <Pressable\n            onPress={handleAddNew}\n            className=\"bg-blue-600 rounded-lg px-4 items-center justify-center active:bg-blue-700\"\n          >\n            <Ionicons name=\"add\" size={24} color=\"white\" />\n          </Pressable>\n        </View>\n\n        {/* Filters */}\n        <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"flex-row gap-2\">\n          <Pressable\n            onPress={() => setFilterClass('all')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'all' ? 'bg-gray-800' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'all' ? 'text-white' : 'text-gray-700'\n            }`}>All Classes</Text>\n          </Pressable>\n          \n          <Pressable\n            onPress={() => setFilterClass('Water Reducer')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'Water Reducer' ? 'bg-blue-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'Water Reducer' ? 'text-white' : 'text-gray-700'\n            }`}>WR</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterClass('High-Range Water Reducer')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'High-Range Water Reducer' ? 'bg-indigo-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'High-Range Water Reducer' ? 'text-white' : 'text-gray-700'\n            }`}>HRWR</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterClass('Air Entrainer')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'Air Entrainer' ? 'bg-cyan-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'Air Entrainer' ? 'text-white' : 'text-gray-700'\n            }`}>AE</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterClass('Accelerator')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'Accelerator' ? 'bg-red-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'Accelerator' ? 'text-white' : 'text-gray-700'\n            }`}>Accel</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterClass('Retarder')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterClass === 'Retarder' ? 'bg-orange-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterClass === 'Retarder' ? 'text-white' : 'text-gray-700'\n            }`}>Retard</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterComplete(filterComplete === 'incomplete' ? 'all' : 'incomplete')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterComplete === 'incomplete' ? 'bg-orange-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterComplete === 'incomplete' ? 'text-white' : 'text-gray-700'\n            }`}>Incomplete</Text>\n          </Pressable>\n        </ScrollView>\n\n        <Text className=\"text-xs text-gray-600\">\n          {filteredAdmixes.length} {filteredAdmixes.length === 1 ? 'admixture' : 'admixtures'}\n        </Text>\n      </View>\n\n      {/* Admix List */}\n      <ScrollView className=\"flex-1\">\n        {filteredAdmixes.length === 0 ? (\n          <View className=\"flex-1 items-center justify-center p-8 mt-20\">\n            <Ionicons name=\"water-outline\" size={64} color=\"#9ca3af\" />\n            <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n              {admixes.length === 0 ? 'No admixtures yet' : 'No admixtures match your filters'}\n            </Text>\n            <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n              {admixes.length === 0 ? 'Tap + to add your first admixture' : 'Try adjusting your search or filters'}\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            {filteredAdmixes.map(admix => {\n              const isComplete = isAdmixComplete(admix.id);\n              const colors = classColors[admix.class];\n              \n              return (\n                <Pressable\n                  key={admix.id}\n                  onPress={() => handleAdmixPress(admix)}\n                  className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-start justify-between mb-2\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-lg font-semibold text-gray-800\">\n                        {admix.name}\n                      </Text>\n                      <Text className=\"text-sm text-gray-500 mt-0.5\">\n                        {admix.manufacturer}\n                      </Text>\n                    </View>\n                    \n                    {!isComplete && (\n                      <View className=\"bg-orange-100 px-2 py-1 rounded\">\n                        <Text className=\"text-xs font-semibold text-orange-700\">\n                          INCOMPLETE\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row flex-wrap gap-2 mt-2\">\n                    <View className={`px-2 py-1 rounded ${colors.bg}`}>\n                      <Text className={`text-xs font-medium ${colors.text}`}>\n                        {admix.class}\n                      </Text>\n                    </View>\n\n                    {admix.specificGravityDisplay && (\n                      <View className=\"px-2 py-1 rounded bg-gray-100\">\n                        <Text className=\"text-xs font-medium text-gray-700\">\n                          SG: {admix.specificGravityDisplay}\n                        </Text>\n                      </View>\n                    )}\n\n                    {admix.costPerGallon !== undefined && (\n                      <View className=\"px-2 py-1 rounded bg-green-100\">\n                        <Text className=\"text-xs font-medium text-green-700\">\n                          ${admix.costPerGallon}/gal\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  <View className=\"flex-row items-center justify-between mt-3 pt-3 border-t border-gray-100\">\n                    <Text className=\"text-xs text-gray-500\">\n                      Updated {new Date(admix.updatedAt).toLocaleDateString()}\n                    </Text>\n                    <Ionicons name=\"chevron-forward\" size={16} color=\"#9ca3af\" />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default AdmixLibraryScreen;\n","import React, { useState } from 'react';\nimport { View, Text, ScrollView, Pressable, Alert, Linking, Modal, Image } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAdmixLibraryStore } from '../state/admixLibraryStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AdmixLibraryDetail'>;\n  route: RouteProp<RootStackParamList, 'AdmixLibraryDetail'>;\n};\n\nconst AdmixLibraryDetailScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { admixId } = route.params;\n  const { getAdmix, deleteAdmix, isAdmixComplete, toggleFavorite, duplicateAdmix, trackAccess } = useAdmixLibraryStore();\n  \n  const [viewingPhotoIndex, setViewingPhotoIndex] = useState<number | null>(null);\n  \n  const admix = getAdmix(admixId);\n\n  // Track access when viewing\n  React.useEffect(() => {\n    if (admixId) {\n      trackAccess(admixId);\n    }\n  }, [admixId, trackAccess]);\n\n  if (!admix) {\n    return (\n      <View className=\"flex-1 bg-gray-50 items-center justify-center p-8\">\n        <Ionicons name=\"alert-circle-outline\" size={64} color=\"#9ca3af\" />\n        <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n          Admixture not found\n        </Text>\n        <Pressable\n          onPress={() => navigation.goBack()}\n          className=\"mt-6 bg-blue-600 rounded-lg px-6 py-3 active:bg-blue-700\"\n        >\n          <Text className=\"text-white font-semibold\">Go Back</Text>\n        </Pressable>\n      </View>\n    );\n  }\n\n  const isComplete = isAdmixComplete(admixId);\n\n  const handleEdit = () => {\n    navigation.navigate('AdmixLibraryAddEdit', { admixId });\n  };\n\n  const handleDelete = () => {\n    Alert.alert(\n      'Delete Admixture',\n      `Are you sure you want to delete \"${admix.name}\"? This action cannot be undone.`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Delete',\n          style: 'destructive',\n          onPress: () => {\n            deleteAdmix(admixId);\n            navigation.goBack();\n          },\n        },\n      ]\n    );\n  };\n\n  const handleOpenUrl = async (url: string) => {\n    const supported = await Linking.canOpenURL(url);\n    if (supported) {\n      await Linking.openURL(url);\n    } else {\n      Alert.alert('Error', 'Cannot open this URL');\n    }\n  };\n\n  const handleCallPhone = (phone: string) => {\n    Linking.openURL(`tel:${phone}`);\n  };\n\n  const handleEmailSalesRep = (email: string) => {\n    Linking.openURL(`mailto:${email}`);\n  };\n\n  const handleDuplicate = async () => {\n    const duplicated = await duplicateAdmix(admixId);\n    if (duplicated) {\n      Alert.alert(\n        'Duplicate Created',\n        `\"${duplicated.name}\" has been created. Would you like to edit it now?`,\n        [\n          { text: 'Not Now', style: 'cancel' },\n          {\n            text: 'Edit',\n            onPress: () => navigation.replace('AdmixLibraryAddEdit', { admixId: duplicated.id }),\n          },\n        ]\n      );\n    }\n  };\n\n  const handleToggleFavorite = () => {\n    toggleFavorite(admixId);\n  };\n\n  const renderField = (label: string, value: string | number | null | undefined, unit?: string) => {\n    if (value === null || value === undefined) return null;\n    \n    return (\n      <View className=\"mb-3\">\n        <Text className=\"text-xs text-gray-500 mb-0.5\">{label}</Text>\n        <Text className=\"text-base text-gray-900 font-medium\">\n          {value}{unit ? ` ${unit}` : ''}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderSection = (title: string, content: React.ReactNode, isEmpty?: boolean) => {\n    if (isEmpty) return null;\n    \n    return (\n      <View className=\"bg-white rounded-lg p-4 mb-3 shadow-sm\">\n        <Text className=\"text-lg font-semibold text-gray-900 mb-3\">{title}</Text>\n        {content}\n      </View>\n    );\n  };\n\n  const hasOptionalData = !!(\n    admix.dosageRateRecommendations ||\n    admix.costPerGallon ||\n    admix.percentWater ||\n    admix.notes\n  );\n\n  const hasDataSheets = !!(admix.technicalDataSheetUrl || admix.safetyDataSheetUrl);\n\n  const hasSalesRepInfo = !!(admix.salesRepName || admix.salesRepPhone || admix.salesRepEmail);\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Header Card */}\n        <View className=\"bg-white p-4 border-b border-gray-200\">\n          <View className=\"flex-row items-start justify-between mb-2\">\n            <View className=\"flex-1\">\n              <Text className=\"text-2xl font-bold text-gray-900 mb-1\">\n                {admix.name}\n              </Text>\n              <Text className=\"text-base text-gray-600\">{admix.manufacturer}</Text>\n            </View>\n            \n            {!isComplete && (\n              <View className=\"bg-orange-100 px-3 py-1.5 rounded-lg\">\n                <Text className=\"text-xs font-semibold text-orange-700\">\n                  INCOMPLETE\n                </Text>\n              </View>\n            )}\n          </View>\n\n          <View className=\"flex-row flex-wrap gap-2 mt-3\">\n            <View className=\"px-3 py-1.5 rounded-full bg-blue-100\">\n              <Text className=\"text-sm font-semibold text-blue-700\">\n                {admix.class}\n              </Text>\n            </View>\n\n            {admix.specificGravityDisplay && (\n              <View className=\"px-3 py-1.5 rounded-full bg-gray-100\">\n                <Text className=\"text-sm font-semibold text-gray-700\">\n                  SG: {admix.specificGravityDisplay}\n                  {admix.specificGravityDisplay.includes('-') && admix.specificGravity && (\n                    <Text className=\"text-xs text-gray-600\"> (avg: {admix.specificGravity.toFixed(3)})</Text>\n                  )}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {!isComplete && (\n            <View className=\"mt-4 bg-orange-50 rounded-lg p-3 border border-orange-200\">\n              <View className=\"flex-row items-start\">\n                <Ionicons name=\"warning\" size={18} color=\"#c2410c\" />\n                <Text className=\"flex-1 text-xs text-orange-700 ml-2\">\n                  This admixture is missing required data. Tap Edit to complete the profile.\n                </Text>\n              </View>\n            </View>\n          )}\n        </View>\n\n        <View className=\"p-4\">\n          {/* Optional Data */}\n          {renderSection(\n            'Product Information',\n            <>\n              {admix.dosageRateRecommendations && (\n                <View className=\"mb-3\">\n                  <Text className=\"text-xs text-gray-500 mb-0.5\">Dosage Rate Recommendations</Text>\n                  <Text className=\"text-base text-gray-900\">{admix.dosageRateRecommendations}</Text>\n                </View>\n              )}\n              {renderField('Cost Per Gallon', admix.costPerGallon, '$')}\n              {renderField('Percent Water', admix.percentWater, '%')}\n              {admix.notes && (\n                <View className=\"mb-3\">\n                  <Text className=\"text-xs text-gray-500 mb-0.5\">Notes</Text>\n                  <Text className=\"text-base text-gray-900\">{admix.notes}</Text>\n                </View>\n              )}\n            </>,\n            !hasOptionalData\n          )}\n\n          {/* Data Sheets */}\n          {renderSection(\n            'Technical Documentation',\n            <>\n              {admix.technicalDataSheetUrl && (\n                <Pressable\n                  onPress={() => handleOpenUrl(admix.technicalDataSheetUrl!)}\n                  className=\"flex-row items-center justify-between bg-blue-50 rounded-lg p-3 mb-2 active:bg-blue-100\"\n                >\n                  <View className=\"flex-row items-center flex-1\">\n                    <Ionicons name=\"document-text\" size={20} color=\"#2563eb\" />\n                    <Text className=\"text-blue-700 font-medium ml-2 flex-1\">\n                      Technical Data Sheet\n                    </Text>\n                  </View>\n                  <Ionicons name=\"open-outline\" size={20} color=\"#2563eb\" />\n                </Pressable>\n              )}\n\n              {admix.safetyDataSheetUrl && (\n                <Pressable\n                  onPress={() => handleOpenUrl(admix.safetyDataSheetUrl!)}\n                  className=\"flex-row items-center justify-between bg-red-50 rounded-lg p-3 active:bg-red-100\"\n                >\n                  <View className=\"flex-row items-center flex-1\">\n                    <Ionicons name=\"shield-checkmark\" size={20} color=\"#dc2626\" />\n                    <Text className=\"text-red-700 font-medium ml-2 flex-1\">\n                      Safety Data Sheet\n                    </Text>\n                  </View>\n                  <Ionicons name=\"open-outline\" size={20} color=\"#dc2626\" />\n                </Pressable>\n              )}\n            </>,\n            !hasDataSheets\n          )}\n\n          {/* Sales Rep Contact */}\n          {renderSection(\n            'Sales Representative',\n            <>\n              {renderField('Name', admix.salesRepName)}\n              \n              {admix.salesRepPhone && (\n                <View className=\"mb-3\">\n                  <Text className=\"text-xs text-gray-500 mb-0.5\">Phone</Text>\n                  <Pressable onPress={() => handleCallPhone(admix.salesRepPhone!)}>\n                    <Text className=\"text-base text-blue-600 font-medium\">\n                      {admix.salesRepPhone}\n                    </Text>\n                  </Pressable>\n                </View>\n              )}\n\n              {admix.salesRepEmail && (\n                <View className=\"mb-3\">\n                  <Text className=\"text-xs text-gray-500 mb-0.5\">Email</Text>\n                  <Pressable onPress={() => handleEmailSalesRep(admix.salesRepEmail!)}>\n                    <Text className=\"text-base text-blue-600 font-medium\">\n                      {admix.salesRepEmail}\n                    </Text>\n                  </Pressable>\n                </View>\n              )}\n            </>,\n            !hasSalesRepInfo\n          )}\n\n          {/* Photo Gallery */}\n          {admix.photoUris && admix.photoUris.length > 0 && (\n            <View className=\"mb-4\">\n              <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Photos</Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                className=\"flex-row\"\n                contentContainerStyle={{ gap: 8 }}\n              >\n                {admix.photoUris.map((uri, index) => (\n                  <Pressable\n                    key={index}\n                    onPress={() => setViewingPhotoIndex(index)}\n                    className=\"relative active:opacity-80\"\n                  >\n                    <Image\n                      source={{ uri }}\n                      className=\"w-32 h-32 rounded-lg\"\n                      resizeMode=\"cover\"\n                    />\n                  </Pressable>\n                ))}\n              </ScrollView>\n            </View>\n          )}\n\n          {/* Metadata */}\n          <View className=\"bg-gray-100 rounded-lg p-3 mt-2\">\n            <Text className=\"text-xs text-gray-600\">\n              Created: {new Date(admix.createdAt).toLocaleDateString()} at {new Date(admix.createdAt).toLocaleTimeString()}\n            </Text>\n            <Text className=\"text-xs text-gray-600 mt-1\">\n              Last Updated: {new Date(admix.updatedAt).toLocaleDateString()} at {new Date(admix.updatedAt).toLocaleTimeString()}\n            </Text>\n          </View>\n\n          {/* Action Buttons */}\n          <View className=\"gap-3 mt-6 mb-8\">\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleEdit}\n                className=\"flex-1 bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"pencil\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Edit</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleToggleFavorite}\n                className={`rounded-lg px-6 py-4 items-center flex-row ${\n                  admix.isFavorite ? 'bg-yellow-500 active:bg-yellow-600' : 'bg-gray-400 active:bg-gray-500'\n                }`}\n              >\n                <Ionicons name={admix.isFavorite ? \"star\" : \"star-outline\"} size={20} color=\"white\" />\n              </Pressable>\n            </View>\n\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleDuplicate}\n                className=\"flex-1 bg-green-600 rounded-lg py-4 items-center active:bg-green-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"copy\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Duplicate</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleDelete}\n                className=\"bg-red-600 rounded-lg px-6 py-4 items-center active:bg-red-700 flex-row\"\n              >\n                <Ionicons name=\"trash\" size={20} color=\"white\" />\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Photo Viewer Modal */}\n      {viewingPhotoIndex !== null && admix.photoUris && (\n        <Modal\n          visible={true}\n          animationType=\"fade\"\n          transparent\n          onRequestClose={() => setViewingPhotoIndex(null)}\n        >\n          <View className=\"flex-1 bg-black\">\n            <Pressable\n              onPress={() => setViewingPhotoIndex(null)}\n              className=\"absolute top-12 right-4 z-10 bg-black/50 rounded-full p-2\"\n            >\n              <Ionicons name=\"close\" size={32} color=\"white\" />\n            </Pressable>\n            \n            <Image\n              source={{ uri: admix.photoUris[viewingPhotoIndex] }}\n              className=\"flex-1\"\n              resizeMode=\"contain\"\n            />\n            \n            <View className=\"absolute bottom-8 left-0 right-0 items-center\">\n              <Text className=\"text-white text-sm bg-black/50 px-4 py-2 rounded-full\">\n                {viewingPhotoIndex + 1} / {admix.photoUris.length}\n              </Text>\n            </View>\n          </View>\n        </Modal>\n      )}\n    </View>\n  );\n};\n\nexport default AdmixLibraryDetailScreen;\n","/**\n * Formats a phone number string to (000) 000-0000 format\n * Accepts any 10-digit format and auto-formats it\n * @param value - Raw phone number string\n * @returns Formatted phone number string\n */\nexport const formatPhoneNumber = (value: string): string => {\n  // Remove all non-digit characters\n  const digits = value.replace(/\\D/g, '');\n  \n  // Only format if we have digits\n  if (digits.length === 0) return '';\n  \n  // Format based on length\n  if (digits.length <= 3) {\n    return `(${digits}`;\n  } else if (digits.length <= 6) {\n    return `(${digits.slice(0, 3)}) ${digits.slice(3)}`;\n  } else if (digits.length <= 10) {\n    return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6, 10)}`;\n  } else {\n    // Limit to 10 digits\n    return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6, 10)}`;\n  }\n};\n\n/**\n * Extracts just the digits from a formatted phone number\n * @param formatted - Formatted phone number string\n * @returns Raw digits only\n */\nexport const unformatPhoneNumber = (formatted: string): string => {\n  return formatted.replace(/\\D/g, '');\n};\n\n/**\n * Validates if a phone number has exactly 10 digits\n * @param value - Phone number string (formatted or unformatted)\n * @returns true if valid 10-digit phone number\n */\nexport const isValidPhoneNumber = (value: string): boolean => {\n  const digits = value.replace(/\\D/g, '');\n  return digits.length === 10;\n};\n","/**\n * Parses specific gravity input (single value or range) and returns calculated value\n * @param input - User input like \"1.05\" or \"1.05-1.08\" or \"1.05 - 1.08\"\n * @returns Object with display string and calculated midpoint value\n */\nexport const parseSpecificGravity = (\n  input: string\n): { display: string; calculated: number | undefined } => {\n  const trimmed = input.trim();\n  \n  if (!trimmed) {\n    return { display: '', calculated: undefined };\n  }\n\n  // Check for range patterns: \"1.05-1.08\", \"1.05 - 1.08\", \"1.05- 1.08\", \"1.05 -1.08\"\n  const rangeMatch = trimmed.match(/^(\\d+\\.?\\d*)\\s*-\\s*(\\d+\\.?\\d*)$/);\n  \n  if (rangeMatch) {\n    const lower = parseFloat(rangeMatch[1]);\n    const upper = parseFloat(rangeMatch[2]);\n    \n    if (!isNaN(lower) && !isNaN(upper)) {\n      const midpoint = (lower + upper) / 2;\n      // Format display consistently\n      const display = `${lower}-${upper}`;\n      return { display, calculated: midpoint };\n    }\n  }\n  \n  // Single value\n  const single = parseFloat(trimmed);\n  if (!isNaN(single)) {\n    return { display: trimmed, calculated: single };\n  }\n  \n  // Invalid input\n  return { display: trimmed, calculated: undefined };\n};\n\n/**\n * Validates if a specific gravity input is valid\n * @param input - User input\n * @returns true if valid single value or range\n */\nexport const isValidSpecificGravity = (input: string): boolean => {\n  const { calculated } = parseSpecificGravity(input);\n  return calculated !== undefined;\n};\n\n/**\n * Gets the calculated specific gravity value for use in calculations\n * @param item - Admix library item\n * @returns Calculated SG value (midpoint if range, single value otherwise)\n */\nexport const getCalculatedSpecificGravity = (specificGravityDisplay?: string): number | undefined => {\n  if (!specificGravityDisplay) return undefined;\n  const { calculated } = parseSpecificGravity(specificGravityDisplay);\n  return calculated;\n};\n","import React from 'react';\nimport { View, Text, Pressable, Image, ScrollView, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport * as ImagePicker from 'expo-image-picker';\n\ninterface PhotoAttachmentsProps {\n  photoUris: string[];\n  onPhotosChange: (uris: string[]) => void;\n  maxPhotos?: number;\n}\n\nexport const PhotoAttachments: React.FC<PhotoAttachmentsProps> = ({\n  photoUris,\n  onPhotosChange,\n  maxPhotos = 10,\n}) => {\n  const requestPermissions = async () => {\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert(\n        'Permission Required',\n        'Please grant photo library access to add photos.'\n      );\n      return false;\n    }\n    return true;\n  };\n\n  const pickImage = async () => {\n    if (photoUris.length >= maxPhotos) {\n      Alert.alert('Limit Reached', `Maximum ${maxPhotos} photos allowed.`);\n      return;\n    }\n\n    const hasPermission = await requestPermissions();\n    if (!hasPermission) return;\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsMultipleSelection: true,\n      quality: 0.8,\n      selectionLimit: maxPhotos - photoUris.length,\n    });\n\n    if (!result.canceled && result.assets) {\n      const newUris = result.assets.map(asset => asset.uri);\n      onPhotosChange([...photoUris, ...newUris]);\n    }\n  };\n\n  const takePhoto = async () => {\n    if (photoUris.length >= maxPhotos) {\n      Alert.alert('Limit Reached', `Maximum ${maxPhotos} photos allowed.`);\n      return;\n    }\n\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert(\n        'Permission Required',\n        'Please grant camera access to take photos.'\n      );\n      return;\n    }\n\n    const result = await ImagePicker.launchCameraAsync({\n      mediaTypes: ['images'],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets && result.assets[0]) {\n      onPhotosChange([...photoUris, result.assets[0].uri]);\n    }\n  };\n\n  const removePhoto = (index: number) => {\n    const newUris = photoUris.filter((_, i) => i !== index);\n    onPhotosChange(newUris);\n  };\n\n  const showPhotoOptions = () => {\n    Alert.alert(\n      'Add Photo',\n      'Choose a photo source',\n      [\n        { text: 'Take Photo', onPress: takePhoto },\n        { text: 'Choose from Library', onPress: pickImage },\n        { text: 'Cancel', style: 'cancel' },\n      ]\n    );\n  };\n\n  return (\n    <View className=\"mb-4\">\n      <View className=\"flex-row items-center justify-between mb-2\">\n        <Text className=\"text-sm font-medium text-gray-700\">\n          Photos ({photoUris.length}/{maxPhotos})\n        </Text>\n        {photoUris.length < maxPhotos && (\n          <Pressable\n            onPress={showPhotoOptions}\n            className=\"bg-blue-600 rounded-full px-3 py-1.5 flex-row items-center active:bg-blue-700\"\n          >\n            <Ionicons name=\"camera\" size={16} color=\"white\" />\n            <Text className=\"text-white text-xs font-semibold ml-1\">Add Photo</Text>\n          </Pressable>\n        )}\n      </View>\n\n      {photoUris.length === 0 ? (\n        <View className=\"bg-gray-100 rounded-lg p-6 items-center justify-center border-2 border-dashed border-gray-300\">\n          <Ionicons name=\"images-outline\" size={40} color=\"#9ca3af\" />\n          <Text className=\"text-sm text-gray-600 mt-2\">No photos attached</Text>\n          <Text className=\"text-xs text-gray-500 mt-1\">Tap \"Add Photo\" to attach images</Text>\n        </View>\n      ) : (\n        <ScrollView \n          horizontal \n          showsHorizontalScrollIndicator={false}\n          className=\"flex-row\"\n          contentContainerStyle={{ gap: 8 }}\n        >\n          {photoUris.map((uri, index) => (\n            <View key={index} className=\"relative\">\n              <Image\n                source={{ uri }}\n                className=\"w-24 h-24 rounded-lg\"\n                resizeMode=\"cover\"\n              />\n              <Pressable\n                onPress={() => removePhoto(index)}\n                className=\"absolute -top-2 -right-2 bg-red-600 rounded-full p-1 shadow-lg active:bg-red-700\"\n              >\n                <Ionicons name=\"close\" size={16} color=\"white\" />\n              </Pressable>\n            </View>\n          ))}\n        </ScrollView>\n      )}\n    </View>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput, KeyboardAvoidingView, Platform, Modal } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useAdmixLibraryStore } from '../state/admixLibraryStore';\nimport { useContactsStore } from '../state/contactsStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\nimport { AdmixLibraryItem, AdmixClass } from '../types/admix-library';\nimport { formatPhoneNumber } from '../utils/phoneFormatter';\nimport { parseSpecificGravity } from '../utils/specificGravityParser';\nimport { VoiceTextInput } from '../components/VoiceTextInput';\nimport { PhotoAttachments } from '../components/PhotoAttachments';\nimport { ValidationWarnings } from '../components/ValidationWarnings';\nimport { validateAdmixData } from '../utils/dataValidation';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'AdmixLibraryAddEdit'>;\n  route: RouteProp<RootStackParamList, 'AdmixLibraryAddEdit'>;\n};\n\nconst AdmixLibraryAddEditScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { admixId } = route.params;\n  const { getAdmix, addAdmix, updateAdmix } = useAdmixLibraryStore();\n  const { getAllContacts } = useContactsStore();\n  \n  const isEditing = !!admixId;\n  const existingAdmix = isEditing ? getAdmix(admixId) : undefined;\n\n  // Form state\n  const [name, setName] = useState(existingAdmix?.name || '');\n  const [manufacturer, setManufacturer] = useState(existingAdmix?.manufacturer || '');\n  const [admixClass, setAdmixClass] = useState<AdmixClass>(existingAdmix?.class || 'Water Reducer');\n  const [specificGravityInput, setSpecificGravityInput] = useState(existingAdmix?.specificGravityDisplay || '');\n  \n  // Optional fields\n  const [dosageRateRecommendations, setDosageRateRecommendations] = useState(existingAdmix?.dosageRateRecommendations || '');\n  const [costPerGallon, setCostPerGallon] = useState(existingAdmix?.costPerGallon?.toString() || '');\n  const [percentWater, setPercentWater] = useState(existingAdmix?.percentWater?.toString() || '');\n  const [technicalDataSheetUrl, setTechnicalDataSheetUrl] = useState(existingAdmix?.technicalDataSheetUrl || '');\n  const [safetyDataSheetUrl, setSafetyDataSheetUrl] = useState(existingAdmix?.safetyDataSheetUrl || '');\n  const [salesRepName, setSalesRepName] = useState(existingAdmix?.salesRepName || '');\n  const [salesRepPhone, setSalesRepPhone] = useState(existingAdmix?.salesRepPhone || '');\n  const [salesRepEmail, setSalesRepEmail] = useState(existingAdmix?.salesRepEmail || '');\n  const [notes, setNotes] = useState(existingAdmix?.notes || '');\n  const [photoUris, setPhotoUris] = useState<string[]>(existingAdmix?.photoUris || []);\n\n  // Contact picker modal\n  const [showContactPicker, setShowContactPicker] = useState(false);\n  \n  // Quick-add contact modal\n  const [showQuickAddContact, setShowQuickAddContact] = useState(false);\n  const [quickContactName, setQuickContactName] = useState('');\n  const [quickContactCompany, setQuickContactCompany] = useState('');\n  const [quickContactRole, setQuickContactRole] = useState('');\n  const [quickContactPhone, setQuickContactPhone] = useState('');\n  const [quickContactEmail, setQuickContactEmail] = useState('');\n  const [quickContactNotes, setQuickContactNotes] = useState('');\n\n  const handlePhoneChange = (value: string) => {\n    setSalesRepPhone(formatPhoneNumber(value));\n  };\n\n  const handleSpecificGravityChange = (value: string) => {\n    // Only allow numbers, decimal point, and dash\n    const filtered = value.replace(/[^0-9.\\-]/g, '');\n    setSpecificGravityInput(filtered);\n  };\n\n  const handleSelectContact = (contactId: string) => {\n    const { getContact } = useContactsStore.getState();\n    const contact = getContact(contactId);\n    if (contact) {\n      setSalesRepName(contact.name);\n      setSalesRepPhone(contact.phone || '');\n      setSalesRepEmail(contact.email || '');\n      setShowContactPicker(false);\n    }\n  };\n\n  const handleQuickAddContact = () => {\n    const { addContact } = useContactsStore.getState();\n    \n    if (!quickContactName.trim()) {\n      return; // Name is required\n    }\n\n    const newContact = {\n      id: Date.now().toString(),\n      name: quickContactName.trim(),\n      company: quickContactCompany.trim() || undefined,\n      role: quickContactRole.trim() || undefined,\n      phone: quickContactPhone.trim() || undefined,\n      email: quickContactEmail.trim() || undefined,\n      notes: quickContactNotes.trim() || undefined,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    };\n\n    addContact(newContact);\n\n    // Auto-fill the sales rep fields with the new contact\n    setSalesRepName(newContact.name);\n    setSalesRepPhone(newContact.phone || '');\n    setSalesRepEmail(newContact.email || '');\n\n    // Clear modal fields and close\n    setQuickContactName('');\n    setQuickContactCompany('');\n    setQuickContactRole('');\n    setQuickContactPhone('');\n    setQuickContactEmail('');\n    setQuickContactNotes('');\n    setShowQuickAddContact(false);\n  };\n\n  // Real-time validation warnings\n  const validationWarnings = useMemo(() => {\n    const parseNumber = (value: string) => {\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? undefined : parsed;\n    };\n\n    const sgParsed = parseSpecificGravity(specificGravityInput);\n\n    return validateAdmixData({\n      specificGravity: sgParsed.calculated,\n      costPerGallon: parseNumber(costPerGallon),\n      percentWater: parseNumber(percentWater),\n    });\n  }, [specificGravityInput, costPerGallon, percentWater]);\n\n  const handleSave = () => {\n    const parseNumber = (value: string) => {\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? undefined : parsed;\n    };\n\n    // Parse specific gravity range/value\n    const sgParsed = parseSpecificGravity(specificGravityInput);\n\n    const admixData: Omit<AdmixLibraryItem, 'id' | 'createdAt' | 'updatedAt'> = {\n      name: name.trim(),\n      manufacturer: manufacturer.trim(),\n      class: admixClass,\n      specificGravityDisplay: sgParsed.display || undefined,\n      specificGravity: sgParsed.calculated,\n      dosageRateRecommendations: dosageRateRecommendations.trim() || undefined,\n      costPerGallon: parseNumber(costPerGallon),\n      percentWater: parseNumber(percentWater),\n      technicalDataSheetUrl: technicalDataSheetUrl.trim() || undefined,\n      safetyDataSheetUrl: safetyDataSheetUrl.trim() || undefined,\n      salesRepName: salesRepName.trim() || undefined,\n      salesRepPhone: salesRepPhone.trim() || undefined,\n      salesRepEmail: salesRepEmail.trim() || undefined,\n      notes: notes.trim() || undefined,\n      photoUris: photoUris.length > 0 ? photoUris : undefined,\n    };\n\n    if (isEditing) {\n      updateAdmix(admixId, admixData);\n    } else {\n      const newAdmix: AdmixLibraryItem = {\n        ...admixData,\n        id: Date.now().toString(),\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n      };\n      addAdmix(newAdmix);\n    }\n\n    navigation.goBack();\n  };\n\n  const renderTextInput = (\n    label: string,\n    value: string,\n    setValue: (value: string) => void,\n    options: {\n      required?: boolean;\n      placeholder?: string;\n      keyboardType?: 'default' | 'numeric' | 'decimal-pad' | 'email-address' | 'phone-pad' | 'url';\n      multiline?: boolean;\n      autoCapitalize?: 'none' | 'sentences' | 'words' | 'characters';\n    } = {}\n  ) => (\n    <View className=\"mb-4\">\n      <View className=\"flex-row items-center mb-1\">\n        <Text className=\"text-sm font-medium text-gray-700\">{label}</Text>\n        {options?.required && (\n          <Text className=\"text-red-500 ml-1\">*</Text>\n        )}\n      </View>\n      <TextInput\n        value={value}\n        onChangeText={setValue}\n        placeholder={options?.placeholder}\n        placeholderTextColor=\"#9ca3af\"\n        cursorColor=\"#000000\"\n        keyboardType={options?.keyboardType || 'default'}\n        autoCapitalize={options?.autoCapitalize || 'sentences'}\n        multiline={options?.multiline}\n        numberOfLines={options?.multiline ? 6 : 1}\n        selectTextOnFocus\n        className={`bg-white border border-gray-300 rounded-lg px-3 py-2.5 text-base ${\n          options?.multiline ? 'min-h-[120px]' : ''\n        }`}\n      />\n    </View>\n  );\n\n  const renderSection = (title: string, children: React.ReactNode, description?: string) => (\n    <View className=\"mb-6\">\n      <View className=\"mb-3\">\n        <Text className=\"text-lg font-semibold text-gray-900\">{title}</Text>\n        {description && (\n          <Text className=\"text-xs text-gray-600 mt-0.5\">{description}</Text>\n        )}\n      </View>\n      {children}\n    </View>\n  );\n\n  const admixClasses: AdmixClass[] = [\n    'Water Reducer',\n    'High-Range Water Reducer',\n    'Air Entrainer',\n    'Accelerator',\n    'Retarder',\n    'Corrosion Inhibitor',\n    'Shrinkage Reducer',\n    'Viscosity Modifier',\n    'Other',\n  ];\n\n  return (\n    <KeyboardAvoidingView \n      className=\"flex-1 bg-gray-50\"\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n      keyboardVerticalOffset={90}\n    >\n      <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n        <View className=\"p-4\">\n          {/* Basic Information */}\n          {renderSection(\n            'Basic Information',\n            <>\n              {renderTextInput('Name', name, setName, { \n                required: true, \n                placeholder: 'e.g., Glenium 7500, WRDA 64' \n              })}\n              \n              {renderTextInput('Manufacturer', manufacturer, setManufacturer, { \n                required: true, \n                placeholder: 'e.g., BASF, GCP Applied Technologies' \n              })}\n\n              <View className=\"mb-4\">\n                <View className=\"flex-row items-center mb-1\">\n                  <Text className=\"text-sm font-medium text-gray-700\">Class of Admixture</Text>\n                  <Text className=\"text-red-500 ml-1\">*</Text>\n                </View>\n                <ScrollView \n                  horizontal \n                  showsHorizontalScrollIndicator={false} \n                  className=\"flex-row gap-2\"\n                  contentContainerStyle={{ paddingBottom: 4 }}\n                >\n                  {admixClasses.map((cls) => (\n                    <Pressable\n                      key={cls}\n                      onPress={() => setAdmixClass(cls)}\n                      className={`px-4 py-2.5 rounded-lg border ${\n                        admixClass === cls\n                          ? 'bg-blue-600 border-blue-600'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text className={`text-sm font-medium whitespace-nowrap ${\n                        admixClass === cls ? 'text-white' : 'text-gray-700'\n                      }`}>\n                        {cls}\n                      </Text>\n                    </Pressable>\n                  ))}\n                </ScrollView>\n              </View>\n\n              {renderTextInput(\n                'Specific Gravity',\n                specificGravityInput,\n                handleSpecificGravityChange,\n                { keyboardType: 'default', placeholder: 'e.g., 1.05 or 1.05-1.08' }\n              )}\n            </>,\n            'Required fields marked with *'\n          )}\n\n          {/* Product Information */}\n          {renderSection(\n            'Product Information',\n            <>\n              <VoiceTextInput\n                label=\"Dosage Rate Recommendations\"\n                value={dosageRateRecommendations}\n                onChangeText={setDosageRateRecommendations}\n                multiline\n                enableVoiceInput\n                placeholder=\"Paste text from technical data sheet...&#10;e.g., &quot;2-10 oz/cwt (130-650 mL/100 kg) of cementitious material&quot;\"\n                autoCapitalize=\"sentences\"\n              />\n\n              {renderTextInput(\n                'Cost Per Gallon',\n                costPerGallon,\n                setCostPerGallon,\n                { keyboardType: 'decimal-pad', placeholder: '$ per gallon' }\n              )}\n\n              {renderTextInput(\n                'Percent Water',\n                percentWater,\n                setPercentWater,\n                { keyboardType: 'decimal-pad', placeholder: '% water content' }\n              )}\n            </>,\n            'Optional product details'\n          )}\n\n          {/* Validation Warnings */}\n          {validationWarnings.length > 0 && (\n            <View className=\"mb-4\">\n              <ValidationWarnings warnings={validationWarnings} />\n            </View>\n          )}\n\n          {/* Technical Documentation */}\n          {renderSection(\n            'Technical Documentation',\n            <>\n              {renderTextInput(\n                'Technical Data Sheet URL',\n                technicalDataSheetUrl,\n                setTechnicalDataSheetUrl,\n                { \n                  keyboardType: 'url', \n                  placeholder: 'https://...',\n                  autoCapitalize: 'none'\n                }\n              )}\n\n              {renderTextInput(\n                'Safety Data Sheet URL',\n                safetyDataSheetUrl,\n                setSafetyDataSheetUrl,\n                { \n                  keyboardType: 'url', \n                  placeholder: 'https://...',\n                  autoCapitalize: 'none'\n                }\n              )}\n            </>,\n            'Links to product documentation'\n          )}\n\n          {/* Sales Representative */}\n          {renderSection(\n            'Sales Representative',\n            <>\n              <View className=\"flex-row gap-2 mb-4\">\n                <Pressable\n                  onPress={() => setShowContactPicker(true)}\n                  className=\"flex-1 bg-blue-50 border-2 border-blue-600 rounded-lg py-3 px-4 flex-row items-center justify-center active:bg-blue-100\"\n                >\n                  <Ionicons name=\"people\" size={20} color=\"#2563eb\" />\n                  <Text className=\"text-blue-700 font-semibold ml-2\">Select Contact</Text>\n                </Pressable>\n\n                <Pressable\n                  onPress={() => setShowQuickAddContact(true)}\n                  className=\"flex-1 bg-green-50 border-2 border-green-600 rounded-lg py-3 px-4 flex-row items-center justify-center active:bg-green-100\"\n                >\n                  <Ionicons name=\"person-add\" size={20} color=\"#16a34a\" />\n                  <Text className=\"text-green-700 font-semibold ml-2\">Quick Add</Text>\n                </Pressable>\n              </View>\n\n              {renderTextInput(\n                'Name',\n                salesRepName,\n                setSalesRepName,\n                { placeholder: 'e.g., John Smith' }\n              )}\n\n              {renderTextInput(\n                'Phone',\n                salesRepPhone,\n                handlePhoneChange,\n                { keyboardType: 'phone-pad', placeholder: '(555) 123-4567' }\n              )}\n\n              {renderTextInput(\n                'Email',\n                salesRepEmail,\n                setSalesRepEmail,\n                { \n                  keyboardType: 'email-address', \n                  placeholder: 'e.g., john.smith@company.com',\n                  autoCapitalize: 'none'\n                }\n              )}\n            </>,\n            'Contact information for ordering or support'\n          )}\n\n          {/* Notes */}\n          {renderSection(\n            'Additional Notes',\n            <>\n              <VoiceTextInput\n                label=\"Notes\"\n                value={notes}\n                onChangeText={setNotes}\n                multiline\n                enableVoiceInput\n                placeholder=\"Any additional information...\"\n                autoCapitalize=\"sentences\"\n              />\n            </>\n          )}\n\n          {/* Photo Attachments */}\n          {renderSection(\n            'Photo Attachments',\n            <>\n              <PhotoAttachments\n                photoUris={photoUris}\n                onPhotosChange={setPhotoUris}\n                maxPhotos={10}\n              />\n            </>,\n            'Attach product photos, labels, or documentation'\n          )}\n\n          {/* Save Button */}\n          <Pressable\n            onPress={handleSave}\n            className=\"bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 mb-4\"\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              {isEditing ? 'Update Admixture' : 'Save Admixture'}\n            </Text>\n          </Pressable>\n\n          {/* Info Note */}\n          <View className=\"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-8\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#3b82f6\" />\n              <Text className=\"flex-1 text-xs text-blue-700 ml-2\">\n                Incomplete admixtures can be saved and updated later. Required fields: Name, Manufacturer, Class, and Specific Gravity. All other fields are optional.\n              </Text>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Contact Picker Modal */}\n      <Modal\n        visible={showContactPicker}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={() => setShowContactPicker(false)}\n      >\n        <View className=\"flex-1 bg-gray-50\">\n          <View className=\"bg-white p-4 border-b border-gray-200 flex-row items-center justify-between\">\n            <Text className=\"text-xl font-bold text-gray-900\">Select Contact</Text>\n            <Pressable onPress={() => setShowContactPicker(false)}>\n              <Ionicons name=\"close\" size={28} color=\"#111827\" />\n            </Pressable>\n          </View>\n\n          <ScrollView className=\"flex-1\">\n            {getAllContacts().length === 0 ? (\n              <View className=\"items-center justify-center p-8 mt-20\">\n                <Ionicons name=\"people-outline\" size={64} color=\"#9ca3af\" />\n                <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n                  No contacts yet\n                </Text>\n                <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n                  Add contacts first to select them here\n                </Text>\n              </View>\n            ) : (\n              <View className=\"p-4 gap-3\">\n                {getAllContacts().map(contact => (\n                  <Pressable\n                    key={contact.id}\n                    onPress={() => handleSelectContact(contact.id)}\n                    className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                  >\n                    <Text className=\"text-lg font-semibold text-gray-800\">{contact.name}</Text>\n                    {contact.company && (\n                      <Text className=\"text-sm text-gray-500 mt-0.5\">{contact.company}</Text>\n                    )}\n                    {contact.role && (\n                      <Text className=\"text-xs text-gray-500 mt-0.5\">{contact.role}</Text>\n                    )}\n                    {(contact.phone || contact.email) && (\n                      <View className=\"flex-row flex-wrap gap-3 mt-2 pt-2 border-t border-gray-100\">\n                        {contact.phone && (\n                          <Text className=\"text-xs text-gray-600\">{contact.phone}</Text>\n                        )}\n                        {contact.email && (\n                          <Text className=\"text-xs text-gray-600\">{contact.email}</Text>\n                        )}\n                      </View>\n                    )}\n                  </Pressable>\n                ))}\n              </View>\n            )}\n          </ScrollView>\n        </View>\n      </Modal>\n\n      {/* Quick Add Contact Modal */}\n      <Modal\n        visible={showQuickAddContact}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={() => setShowQuickAddContact(false)}\n      >\n        <KeyboardAvoidingView \n          className=\"flex-1 bg-gray-50\"\n          behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n        >\n          <View className=\"bg-white p-4 border-b border-gray-200 flex-row items-center justify-between\">\n            <Text className=\"text-xl font-bold text-gray-900\">Quick Add Contact</Text>\n            <Pressable onPress={() => setShowQuickAddContact(false)}>\n              <Ionicons name=\"close\" size={28} color=\"#111827\" />\n            </Pressable>\n          </View>\n\n          <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n            <View className=\"p-4\">\n              {renderTextInput('Name', quickContactName, setQuickContactName, {\n                required: true,\n                placeholder: 'e.g., John Smith'\n              })}\n\n              {renderTextInput('Company', quickContactCompany, setQuickContactCompany, {\n                placeholder: 'e.g., BASF Construction Chemicals'\n              })}\n\n              {renderTextInput('Role', quickContactRole, setQuickContactRole, {\n                placeholder: 'e.g., Sales Representative'\n              })}\n\n              {renderTextInput('Phone', quickContactPhone, (value) => {\n                setQuickContactPhone(formatPhoneNumber(value));\n              }, {\n                keyboardType: 'phone-pad',\n                placeholder: '(555) 123-4567'\n              })}\n\n              {renderTextInput('Email', quickContactEmail, setQuickContactEmail, {\n                keyboardType: 'email-address',\n                placeholder: 'e.g., john.smith@company.com',\n                autoCapitalize: 'none'\n              })}\n\n              <VoiceTextInput\n                label=\"Notes\"\n                value={quickContactNotes}\n                onChangeText={setQuickContactNotes}\n                multiline\n                enableVoiceInput\n                placeholder=\"Additional information...\"\n                autoCapitalize=\"sentences\"\n              />\n\n              <Pressable\n                onPress={handleQuickAddContact}\n                disabled={!quickContactName.trim()}\n                className={`rounded-lg py-4 items-center ${\n                  quickContactName.trim()\n                    ? 'bg-green-600 active:bg-green-700'\n                    : 'bg-gray-300'\n                }`}\n              >\n                <Text className={`text-base font-semibold ${\n                  quickContactName.trim() ? 'text-white' : 'text-gray-500'\n                }`}>\n                  Add Contact & Use\n                </Text>\n              </Pressable>\n\n              <View className=\"bg-blue-50 rounded-lg p-4 border border-blue-200 mt-4\">\n                <View className=\"flex-row items-start\">\n                  <Ionicons name=\"information-circle\" size={20} color=\"#3b82f6\" />\n                  <Text className=\"flex-1 text-xs text-blue-700 ml-2\">\n                    This will save the contact and automatically fill in the sales representative fields above.\n                  </Text>\n                </View>\n              </View>\n            </View>\n          </ScrollView>\n        </KeyboardAvoidingView>\n      </Modal>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default AdmixLibraryAddEditScreen;\n","import React, { useState, useMemo } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useContactsStore } from '../state/contactsStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { ContactItem } from '../types/contacts';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'Contacts'>;\n};\n\nconst ContactsScreen: React.FC<Props> = ({ navigation }) => {\n  const { getAllContacts, searchContacts, isContactComplete } = useContactsStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterComplete, setFilterComplete] = useState<'all' | 'complete' | 'incomplete'>('all');\n\n  const contacts = searchQuery ? searchContacts(searchQuery) : getAllContacts();\n\n  const filteredContacts = useMemo(() => {\n    return contacts.filter(contact => {\n      if (filterComplete === 'complete' && !isContactComplete(contact.id)) return false;\n      if (filterComplete === 'incomplete' && isContactComplete(contact.id)) return false;\n      return true;\n    });\n  }, [contacts, filterComplete, isContactComplete]);\n\n  const stats = useMemo(() => {\n    const all = getAllContacts();\n    return {\n      total: all.length,\n      complete: all.filter(c => isContactComplete(c.id)).length,\n      incomplete: all.filter(c => !isContactComplete(c.id)).length,\n    };\n  }, [getAllContacts, isContactComplete]);\n\n  const handleContactPress = (contact: ContactItem) => {\n    navigation.navigate('ContactDetail', { contactId: contact.id });\n  };\n\n  const handleAddNew = () => {\n    navigation.navigate('ContactAddEdit', {});\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      {/* Stats Cards */}\n      <View className=\"bg-white p-4 border-b border-gray-200\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-blue-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-blue-600\">{stats.total}</Text>\n            <Text className=\"text-xs text-blue-700\">Total</Text>\n          </View>\n          <View className=\"flex-1 bg-green-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-green-600\">{stats.complete}</Text>\n            <Text className=\"text-xs text-green-700\">Complete</Text>\n          </View>\n          <View className=\"flex-1 bg-orange-50 rounded-lg p-3\">\n            <Text className=\"text-2xl font-bold text-orange-600\">{stats.incomplete}</Text>\n            <Text className=\"text-xs text-orange-700\">Incomplete</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Search & Add */}\n      <View className=\"bg-white p-4 border-b border-gray-200 gap-3\">\n        <View className=\"flex-row gap-2\">\n          <View className=\"flex-1 bg-gray-100 rounded-lg flex-row items-center px-3\">\n            <Ionicons name=\"search\" size={20} color=\"#9ca3af\" />\n            <TextInput\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholder=\"Search contacts...\"\n              placeholderTextColor=\"#9ca3af\"\n              cursorColor=\"#000000\"\n              className=\"flex-1 py-2 px-2 text-base\"\n            />\n            {searchQuery.length > 0 && (\n              <Pressable onPress={() => setSearchQuery('')}>\n                <Ionicons name=\"close-circle\" size={20} color=\"#9ca3af\" />\n              </Pressable>\n            )}\n          </View>\n\n          <Pressable\n            onPress={handleAddNew}\n            className=\"bg-blue-600 rounded-lg px-4 items-center justify-center active:bg-blue-700\"\n          >\n            <Ionicons name=\"add\" size={24} color=\"white\" />\n          </Pressable>\n        </View>\n\n        {/* Filters */}\n        <View className=\"flex-row gap-2\">\n          <Pressable\n            onPress={() => setFilterComplete('all')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterComplete === 'all' ? 'bg-gray-800' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterComplete === 'all' ? 'text-white' : 'text-gray-700'\n            }`}>All</Text>\n          </Pressable>\n\n          <Pressable\n            onPress={() => setFilterComplete(filterComplete === 'incomplete' ? 'all' : 'incomplete')}\n            className={`px-3 py-1.5 rounded-full ${\n              filterComplete === 'incomplete' ? 'bg-orange-600' : 'bg-gray-200'\n            }`}\n          >\n            <Text className={`text-xs font-medium ${\n              filterComplete === 'incomplete' ? 'text-white' : 'text-gray-700'\n            }`}>Incomplete</Text>\n          </Pressable>\n        </View>\n\n        <Text className=\"text-xs text-gray-600\">\n          {filteredContacts.length} {filteredContacts.length === 1 ? 'contact' : 'contacts'}\n        </Text>\n      </View>\n\n      {/* Contact List */}\n      <ScrollView className=\"flex-1\">\n        {filteredContacts.length === 0 ? (\n          <View className=\"flex-1 items-center justify-center p-8 mt-20\">\n            <Ionicons name=\"people-outline\" size={64} color=\"#9ca3af\" />\n            <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n              {contacts.length === 0 ? 'No contacts yet' : 'No contacts match your filters'}\n            </Text>\n            <Text className=\"text-sm text-gray-500 mt-2 text-center\">\n              {contacts.length === 0 ? 'Tap + to add your first contact' : 'Try adjusting your search or filters'}\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            {filteredContacts.map(contact => {\n              const isComplete = isContactComplete(contact.id);\n              \n              return (\n                <Pressable\n                  key={contact.id}\n                  onPress={() => handleContactPress(contact)}\n                  className=\"bg-white rounded-lg p-4 shadow-sm active:bg-gray-50\"\n                >\n                  <View className=\"flex-row items-start justify-between mb-2\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-lg font-semibold text-gray-800\">\n                        {contact.name}\n                      </Text>\n                      {contact.company && (\n                        <Text className=\"text-sm text-gray-500 mt-0.5\">\n                          {contact.company}\n                        </Text>\n                      )}\n                      {contact.role && (\n                        <Text className=\"text-xs text-gray-500 mt-0.5\">\n                          {contact.role}\n                        </Text>\n                      )}\n                    </View>\n                    \n                    {!isComplete && (\n                      <View className=\"bg-orange-100 px-2 py-1 rounded\">\n                        <Text className=\"text-xs font-semibold text-orange-700\">\n                          INCOMPLETE\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n\n                  {(contact.phone || contact.email) && (\n                    <View className=\"flex-row flex-wrap gap-3 mt-2 pt-2 border-t border-gray-100\">\n                      {contact.phone && (\n                        <View className=\"flex-row items-center\">\n                          <Ionicons name=\"call-outline\" size={14} color=\"#6b7280\" />\n                          <Text className=\"text-xs text-gray-600 ml-1\">{contact.phone}</Text>\n                        </View>\n                      )}\n                      {contact.email && (\n                        <View className=\"flex-row items-center\">\n                          <Ionicons name=\"mail-outline\" size={14} color=\"#6b7280\" />\n                          <Text className=\"text-xs text-gray-600 ml-1\">{contact.email}</Text>\n                        </View>\n                      )}\n                    </View>\n                  )}\n\n                  <View className=\"flex-row items-center justify-end mt-2\">\n                    <Ionicons name=\"chevron-forward\" size={16} color=\"#9ca3af\" />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default ContactsScreen;\n","import React from 'react';\nimport { View, Text, ScrollView, Pressable, Alert, Linking } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useContactsStore } from '../state/contactsStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'ContactDetail'>;\n  route: RouteProp<RootStackParamList, 'ContactDetail'>;\n};\n\nconst ContactDetailScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { contactId } = route.params;\n  const { getContact, deleteContact, isContactComplete, toggleFavorite, duplicateContact, trackAccess } = useContactsStore();\n  \n  const contact = getContact(contactId);\n\n  // Track access when viewing\n  React.useEffect(() => {\n    if (contactId) {\n      trackAccess(contactId);\n    }\n  }, [contactId, trackAccess]);\n\n  if (!contact) {\n    return (\n      <View className=\"flex-1 bg-gray-50 items-center justify-center p-8\">\n        <Ionicons name=\"alert-circle-outline\" size={64} color=\"#9ca3af\" />\n        <Text className=\"text-lg text-gray-600 mt-4 text-center\">\n          Contact not found\n        </Text>\n        <Pressable\n          onPress={() => navigation.goBack()}\n          className=\"mt-6 bg-blue-600 rounded-lg px-6 py-3 active:bg-blue-700\"\n        >\n          <Text className=\"text-white font-semibold\">Go Back</Text>\n        </Pressable>\n      </View>\n    );\n  }\n\n  const isComplete = isContactComplete(contactId);\n\n  const handleEdit = () => {\n    navigation.navigate('ContactAddEdit', { contactId });\n  };\n\n  const handleDelete = () => {\n    Alert.alert(\n      'Delete Contact',\n      `Are you sure you want to delete \"${contact.name}\"? This action cannot be undone.`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Delete',\n          style: 'destructive',\n          onPress: () => {\n            deleteContact(contactId);\n            navigation.goBack();\n          },\n        },\n      ]\n    );\n  };\n\n  const handleCallPhone = () => {\n    if (contact.phone) {\n      Linking.openURL(`tel:${contact.phone}`);\n    }\n  };\n\n  const handleSendEmail = () => {\n    if (contact.email) {\n      Linking.openURL(`mailto:${contact.email}`);\n    }\n  };\n\n  const handleDuplicate = async () => {\n    const duplicated = await duplicateContact(contactId);\n    if (duplicated) {\n      Alert.alert(\n        'Duplicate Created',\n        `\"${duplicated.name}\" has been created. Would you like to edit it now?`,\n        [\n          { text: 'Not Now', style: 'cancel' },\n          {\n            text: 'Edit',\n            onPress: () => navigation.replace('ContactAddEdit', { contactId: duplicated.id }),\n          },\n        ]\n      );\n    }\n  };\n\n  const handleToggleFavorite = () => {\n    toggleFavorite(contactId);\n  };\n\n  return (\n    <View className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        {/* Header Card */}\n        <View className=\"bg-white p-4 border-b border-gray-200\">\n          <View className=\"flex-row items-start justify-between mb-2\">\n            <View className=\"flex-1\">\n              <Text className=\"text-2xl font-bold text-gray-900 mb-1\">\n                {contact.name}\n              </Text>\n              {contact.company && (\n                <Text className=\"text-base text-gray-600\">{contact.company}</Text>\n              )}\n              {contact.role && (\n                <Text className=\"text-sm text-gray-500 mt-1\">{contact.role}</Text>\n              )}\n            </View>\n            \n            {!isComplete && (\n              <View className=\"bg-orange-100 px-3 py-1.5 rounded-lg\">\n                <Text className=\"text-xs font-semibold text-orange-700\">\n                  INCOMPLETE\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {!isComplete && (\n            <View className=\"mt-4 bg-orange-50 rounded-lg p-3 border border-orange-200\">\n              <View className=\"flex-row items-start\">\n                <Ionicons name=\"warning\" size={18} color=\"#c2410c\" />\n                <Text className=\"flex-1 text-xs text-orange-700 ml-2\">\n                  This contact is missing required data (phone and email). Tap Edit to complete the profile.\n                </Text>\n              </View>\n            </View>\n          )}\n        </View>\n\n        <View className=\"p-4\">\n          {/* Contact Information */}\n          <View className=\"bg-white rounded-lg p-4 mb-3 shadow-sm\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Contact Information</Text>\n            \n            {contact.phone && (\n              <Pressable\n                onPress={handleCallPhone}\n                className=\"flex-row items-center justify-between bg-blue-50 rounded-lg p-3 mb-2 active:bg-blue-100\"\n              >\n                <View className=\"flex-row items-center flex-1\">\n                  <Ionicons name=\"call\" size={20} color=\"#2563eb\" />\n                  <Text className=\"text-blue-700 font-medium ml-3 flex-1\">\n                    {contact.phone}\n                  </Text>\n                </View>\n                <Ionicons name=\"chevron-forward\" size={20} color=\"#2563eb\" />\n              </Pressable>\n            )}\n\n            {contact.email && (\n              <Pressable\n                onPress={handleSendEmail}\n                className=\"flex-row items-center justify-between bg-green-50 rounded-lg p-3 active:bg-green-100\"\n              >\n                <View className=\"flex-row items-center flex-1\">\n                  <Ionicons name=\"mail\" size={20} color=\"#059669\" />\n                  <Text className=\"text-green-700 font-medium ml-3 flex-1\">\n                    {contact.email}\n                  </Text>\n                </View>\n                <Ionicons name=\"chevron-forward\" size={20} color=\"#059669\" />\n              </Pressable>\n            )}\n          </View>\n\n          {/* Notes */}\n          {contact.notes && (\n            <View className=\"bg-white rounded-lg p-4 mb-3 shadow-sm\">\n              <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Notes</Text>\n              <Text className=\"text-base text-gray-700\">{contact.notes}</Text>\n            </View>\n          )}\n\n          {/* Metadata */}\n          <View className=\"bg-gray-100 rounded-lg p-3 mt-2\">\n            <Text className=\"text-xs text-gray-600\">\n              Created: {new Date(contact.createdAt).toLocaleDateString()} at {new Date(contact.createdAt).toLocaleTimeString()}\n            </Text>\n            <Text className=\"text-xs text-gray-600 mt-1\">\n              Last Updated: {new Date(contact.updatedAt).toLocaleDateString()} at {new Date(contact.updatedAt).toLocaleTimeString()}\n            </Text>\n          </View>\n\n          {/* Action Buttons */}\n          <View className=\"gap-3 mt-6 mb-8\">\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleEdit}\n                className=\"flex-1 bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"pencil\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Edit</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleToggleFavorite}\n                className={`rounded-lg px-6 py-4 items-center flex-row ${\n                  contact.isFavorite ? 'bg-yellow-500 active:bg-yellow-600' : 'bg-gray-400 active:bg-gray-500'\n                }`}\n              >\n                <Ionicons name={contact.isFavorite ? \"star\" : \"star-outline\"} size={20} color=\"white\" />\n              </Pressable>\n            </View>\n\n            <View className=\"flex-row gap-3\">\n              <Pressable\n                onPress={handleDuplicate}\n                className=\"flex-1 bg-green-600 rounded-lg py-4 items-center active:bg-green-700 flex-row justify-center\"\n              >\n                <Ionicons name=\"copy\" size={20} color=\"white\" />\n                <Text className=\"text-white text-base font-semibold ml-2\">Duplicate</Text>\n              </Pressable>\n\n              <Pressable\n                onPress={handleDelete}\n                className=\"bg-red-600 rounded-lg px-6 py-4 items-center active:bg-red-700 flex-row\"\n              >\n                <Ionicons name=\"trash\" size={20} color=\"white\" />\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default ContactDetailScreen;\n","import React, { useState } from 'react';\nimport { View, Text, ScrollView, Pressable, TextInput, KeyboardAvoidingView, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useContactsStore } from '../state/contactsStore';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { RouteProp } from '@react-navigation/native';\nimport { ContactItem } from '../types/contacts';\nimport { formatPhoneNumber } from '../utils/phoneFormatter';\nimport { VoiceTextInput } from '../components/VoiceTextInput';\n\ntype Props = {\n  navigation: NativeStackNavigationProp<RootStackParamList, 'ContactAddEdit'>;\n  route: RouteProp<RootStackParamList, 'ContactAddEdit'>;\n};\n\nconst ContactAddEditScreen: React.FC<Props> = ({ navigation, route }) => {\n  const { contactId } = route.params;\n  const { getContact, addContact, updateContact } = useContactsStore();\n  \n  const isEditing = !!contactId;\n  const existingContact = isEditing ? getContact(contactId) : undefined;\n\n  // Form state\n  const [name, setName] = useState(existingContact?.name || '');\n  const [company, setCompany] = useState(existingContact?.company || '');\n  const [role, setRole] = useState(existingContact?.role || '');\n  const [phone, setPhone] = useState(existingContact?.phone || '');\n  const [email, setEmail] = useState(existingContact?.email || '');\n  const [notes, setNotes] = useState(existingContact?.notes || '');\n\n  const handlePhoneChange = (value: string) => {\n    setPhone(formatPhoneNumber(value));\n  };\n\n  const handleSave = () => {\n    const contactData: Omit<ContactItem, 'id' | 'createdAt' | 'updatedAt'> = {\n      name: name.trim(),\n      company: company.trim() || undefined,\n      role: role.trim() || undefined,\n      phone: phone.trim() || undefined,\n      email: email.trim() || undefined,\n      notes: notes.trim() || undefined,\n    };\n\n    if (isEditing) {\n      updateContact(contactId, contactData);\n    } else {\n      const newContact: ContactItem = {\n        ...contactData,\n        id: Date.now().toString(),\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n      };\n      addContact(newContact);\n    }\n\n    navigation.goBack();\n  };\n\n  const renderTextInput = (\n    label: string,\n    value: string,\n    setValue: (value: string) => void,\n    options: {\n      required?: boolean;\n      placeholder?: string;\n      keyboardType?: 'default' | 'email-address' | 'phone-pad';\n      multiline?: boolean;\n      autoCapitalize?: 'none' | 'sentences' | 'words' | 'characters';\n    } = {}\n  ) => (\n    <View className=\"mb-4\">\n      <View className=\"flex-row items-center mb-1\">\n        <Text className=\"text-sm font-medium text-gray-700\">{label}</Text>\n        {options?.required && (\n          <Text className=\"text-red-500 ml-1\">*</Text>\n        )}\n      </View>\n      <TextInput\n        value={value}\n        onChangeText={setValue}\n        placeholder={options?.placeholder}\n        placeholderTextColor=\"#9ca3af\"\n        cursorColor=\"#000000\"\n        keyboardType={options?.keyboardType || 'default'}\n        autoCapitalize={options?.autoCapitalize || 'sentences'}\n        multiline={options?.multiline}\n        numberOfLines={options?.multiline ? 4 : 1}\n        selectTextOnFocus\n        className={`bg-white border border-gray-300 rounded-lg px-3 py-2.5 text-base ${\n          options?.multiline ? 'min-h-[80px]' : ''\n        }`}\n      />\n    </View>\n  );\n\n  return (\n    <KeyboardAvoidingView \n      className=\"flex-1 bg-gray-50\"\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n      keyboardVerticalOffset={90}\n    >\n      <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n        <View className=\"p-4\">\n          {/* Basic Information */}\n          <View className=\"mb-6\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Basic Information</Text>\n            \n            {renderTextInput('Name', name, setName, { \n              required: true,\n              placeholder: 'e.g., John Smith',\n              autoCapitalize: 'words'\n            })}\n            \n            {renderTextInput('Company', company, setCompany, { \n              placeholder: 'e.g., BASF Corporation',\n              autoCapitalize: 'words'\n            })}\n            \n            {renderTextInput('Role', role, setRole, { \n              placeholder: 'e.g., Admix Salesperson, Aggregate Supplier',\n            })}\n          </View>\n\n          {/* Contact Information */}\n          <View className=\"mb-6\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Contact Information</Text>\n            \n            {renderTextInput('Phone', phone, handlePhoneChange, { \n              required: true,\n              keyboardType: 'phone-pad',\n              placeholder: '(555) 123-4567'\n            })}\n            \n            {renderTextInput('Email', email, setEmail, { \n              required: true,\n              keyboardType: 'email-address',\n              placeholder: 'john.smith@company.com',\n              autoCapitalize: 'none'\n            })}\n          </View>\n\n          {/* Notes */}\n          <View className=\"mb-6\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">Additional Notes</Text>\n            \n            <VoiceTextInput\n              label=\"Notes\"\n              value={notes}\n              onChangeText={setNotes}\n              multiline\n              enableVoiceInput\n              placeholder=\"Any additional information...\"\n              autoCapitalize=\"sentences\"\n            />\n          </View>\n\n          {/* Save Button */}\n          <Pressable\n            onPress={handleSave}\n            className=\"bg-blue-600 rounded-lg py-4 items-center active:bg-blue-700 mb-4\"\n          >\n            <Text className=\"text-white text-base font-semibold\">\n              {isEditing ? 'Update Contact' : 'Save Contact'}\n            </Text>\n          </Pressable>\n\n          {/* Info Note */}\n          <View className=\"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-8\">\n            <View className=\"flex-row items-start\">\n              <Ionicons name=\"information-circle\" size={20} color=\"#3b82f6\" />\n              <Text className=\"flex-1 text-xs text-blue-700 ml-2\">\n                Incomplete contacts can be saved and updated later. Required fields: Name, Phone, and Email. All other fields are optional.\n              </Text>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default ContactAddEditScreen;\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n  QualityLogEntry,\n  QualityIssue,\n  IssueCode,\n  Department,\n  DepartmentType,\n  ProductionItem,\n  QualityMetrics,\n  IssueStatus,\n  IssueSeverity,\n} from '../types/quality-log';\n\ninterface QualityLogState {\n  // Data\n  logs: QualityLogEntry[];\n  issueCodes: IssueCode[];\n  departments: Department[];\n  \n  // Quality Log Operations\n  addLog: (log: Omit<QualityLogEntry, 'id' | 'createdAt' | 'updatedAt'>) => string;\n  updateLog: (id: string, updates: Partial<QualityLogEntry>) => void;\n  deleteLog: (id: string) => void;\n  getLog: (id: string) => QualityLogEntry | undefined;\n  getLogsByDepartment: (department: DepartmentType) => QualityLogEntry[];\n  getLogsByDateRange: (startDate: number, endDate: number, department?: DepartmentType) => QualityLogEntry[];\n  \n  // Issue Operations\n  addIssueToLog: (logId: string, issue: Omit<QualityIssue, 'id' | 'createdAt' | 'updatedAt'>) => void;\n  updateIssue: (logId: string, issueId: string, updates: Partial<QualityIssue>) => void;\n  deleteIssue: (logId: string, issueId: string) => void;\n  resolveIssue: (logId: string, issueId: string, resolvedBy: string, actionTaken: string) => void;\n  \n  // Production Item Operations\n  addProductionItem: (logId: string, item: Omit<ProductionItem, 'id'>) => void;\n  updateProductionItem: (logId: string, itemId: string, updates: Partial<ProductionItem>) => void;\n  deleteProductionItem: (logId: string, itemId: string) => void;\n  \n  // Issue Code Library Operations\n  addIssueCode: (code: Omit<IssueCode, 'id' | 'createdAt' | 'updatedAt'>) => void;\n  updateIssueCode: (id: string, updates: Partial<IssueCode>) => void;\n  deleteIssueCode: (id: string) => void;\n  getIssueCodeByCode: (code: number) => IssueCode | undefined;\n  getIssueCodesByDepartment: (department?: DepartmentType) => IssueCode[];\n  \n  // Department Operations\n  addDepartment: (name: DepartmentType) => void;\n  toggleDepartmentActive: (id: string) => void;\n  getActiveDepartments: () => Department[];\n  \n  // Analytics/Metrics\n  getMetrics: (department: DepartmentType, startDate: number, endDate: number) => QualityMetrics;\n  \n  // Utility\n  clearAllData: () => void;\n  initializeDefaultData: () => void;\n}\n\nexport const useQualityLogStore = create<QualityLogState>()(\n  persist(\n    (set, get) => ({\n      logs: [],\n      issueCodes: [],\n      departments: [],\n      \n      // Quality Log Operations\n      addLog: (log) => {\n        const id = `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newLog: QualityLogEntry = {\n          ...log,\n          id,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n        \n        set((state) => ({\n          logs: [...state.logs, newLog],\n        }));\n        \n        return id;\n      },\n      \n      updateLog: (id, updates) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === id\n              ? { ...log, ...updates, updatedAt: Date.now() }\n              : log\n          ),\n        }));\n      },\n      \n      deleteLog: (id) => {\n        set((state) => ({\n          logs: state.logs.filter((log) => log.id !== id),\n        }));\n      },\n      \n      getLog: (id) => {\n        return get().logs.find((log) => log.id === id);\n      },\n      \n      getLogsByDepartment: (department) => {\n        return get().logs.filter((log) => log.department === department)\n          .sort((a, b) => b.date - a.date);\n      },\n      \n      getLogsByDateRange: (startDate, endDate, department) => {\n        return get().logs.filter((log) => {\n          const inRange = log.date >= startDate && log.date <= endDate;\n          const inDepartment = department ? log.department === department : true;\n          return inRange && inDepartment;\n        }).sort((a, b) => b.date - a.date);\n      },\n      \n      // Issue Operations\n      addIssueToLog: (logId, issue) => {\n        const issueId = `issue-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newIssue: QualityIssue = {\n          ...issue,\n          id: issueId,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n        \n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  issues: [...(log.issues || []), newIssue],\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      updateIssue: (logId, issueId, updates) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  issues: (log.issues || []).map((issue) =>\n                    issue.id === issueId\n                      ? { ...issue, ...updates, updatedAt: Date.now() }\n                      : issue\n                  ),\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      deleteIssue: (logId, issueId) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  issues: (log.issues || []).filter((issue) => issue.id !== issueId),\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      resolveIssue: (logId, issueId, resolvedBy, actionTaken) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  issues: (log.issues || []).map((issue) =>\n                    issue.id === issueId\n                      ? {\n                          ...issue,\n                          status: 'Resolved' as IssueStatus,\n                          resolvedBy,\n                          resolvedAt: Date.now(),\n                          actionTaken,\n                          updatedAt: Date.now(),\n                        }\n                      : issue\n                  ),\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      // Production Item Operations\n      addProductionItem: (logId, item) => {\n        const itemId = `item-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newItem: ProductionItem = {\n          ...item,\n          id: itemId,\n        };\n        \n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  productionItems: [...(log.productionItems || []), newItem],\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      updateProductionItem: (logId, itemId, updates) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  productionItems: (log.productionItems || []).map((item) =>\n                    item.id === itemId ? { ...item, ...updates } : item\n                  ),\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      deleteProductionItem: (logId, itemId) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === logId\n              ? {\n                  ...log,\n                  productionItems: (log.productionItems || []).filter((item) => item.id !== itemId),\n                  updatedAt: Date.now(),\n                }\n              : log\n          ),\n        }));\n      },\n      \n      // Issue Code Library Operations\n      addIssueCode: (code) => {\n        const id = `code-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newCode: IssueCode = {\n          ...code,\n          id,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n        \n        set((state) => ({\n          issueCodes: [...state.issueCodes, newCode],\n        }));\n      },\n      \n      updateIssueCode: (id, updates) => {\n        set((state) => ({\n          issueCodes: state.issueCodes.map((code) =>\n            code.id === id\n              ? { ...code, ...updates, updatedAt: Date.now() }\n              : code\n          ),\n        }));\n      },\n      \n      deleteIssueCode: (id) => {\n        set((state) => ({\n          issueCodes: state.issueCodes.filter((code) => code.id !== id),\n        }));\n      },\n      \n      getIssueCodeByCode: (code) => {\n        return get().issueCodes.find((ic) => ic.code === code);\n      },\n      \n      getIssueCodesByDepartment: (department) => {\n        if (!department) {\n          return get().issueCodes;\n        }\n        return get().issueCodes.filter(\n          (code) => !code.department || code.department === department\n        );\n      },\n      \n      // Department Operations\n      addDepartment: (name) => {\n        const id = `dept-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newDept: Department = {\n          id,\n          name,\n          isActive: true,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n        \n        set((state) => ({\n          departments: [...state.departments, newDept],\n        }));\n      },\n      \n      toggleDepartmentActive: (id) => {\n        set((state) => ({\n          departments: state.departments.map((dept) =>\n            dept.id === id\n              ? { ...dept, isActive: !dept.isActive, updatedAt: Date.now() }\n              : dept\n          ),\n        }));\n      },\n      \n      getActiveDepartments: () => {\n        return get().departments.filter((dept) => dept.isActive);\n      },\n      \n      // Analytics/Metrics\n      getMetrics: (department, startDate, endDate) => {\n        const logs = get().getLogsByDateRange(startDate, endDate, department);\n        \n        const totalLogs = logs.length;\n        const allIssues = logs.flatMap((log) => log.issues || []);\n        const totalIssues = allIssues.length;\n        \n        // Issues by status\n        const issuesByStatus: Record<IssueStatus, number> = {\n          'Open': 0,\n          'In Progress': 0,\n          'Resolved': 0,\n          'Deferred': 0,\n          'Rejected': 0,\n        };\n        \n        allIssues.forEach((issue) => {\n          if (issue) issuesByStatus[issue.status]++;\n        });\n        \n        // Issues by severity\n        const issuesBySeverity: Record<IssueSeverity, number> = {\n          'Critical': 0,\n          'Major': 0,\n          'Minor': 0,\n          'Observation': 0,\n        };\n        \n        allIssues.forEach((issue) => {\n          if (issue) issuesBySeverity[issue.severity]++;\n        });\n        \n        // Issues by code\n        const codeCount: Record<number, { title: string; count: number }> = {};\n        allIssues.forEach((issue) => {\n          if (issue && issue.issueCode) {\n            if (!codeCount[issue.issueCode]) {\n              codeCount[issue.issueCode] = { title: issue.issueTitle, count: 0 };\n            }\n            codeCount[issue.issueCode].count++;\n          }\n        });\n        \n        const issuesByCode = Object.entries(codeCount)\n          .map(([code, data]) => ({\n            code: parseInt(code),\n            title: data.title,\n            count: data.count,\n          }))\n          .sort((a, b) => b.count - a.count);\n        \n        // Calculate metrics\n        const averageIssuesPerLog = totalLogs > 0 ? totalIssues / totalLogs : 0;\n        const criticalIssueCount = issuesBySeverity['Critical'];\n        const resolutionRate = totalIssues > 0\n          ? (issuesByStatus['Resolved'] / totalIssues) * 100\n          : 0;\n        \n        return {\n          department,\n          startDate,\n          endDate,\n          totalLogs,\n          totalIssues,\n          issuesByStatus,\n          issuesBySeverity,\n          issuesByCode,\n          averageIssuesPerLog,\n          criticalIssueCount,\n          resolutionRate,\n        };\n      },\n      \n      // Utility\n      clearAllData: () => {\n        set({\n          logs: [],\n          issueCodes: [],\n          departments: [],\n        });\n      },\n      \n      initializeDefaultData: () => {\n        const state = get();\n        \n        // Initialize departments if none exist\n        if (state.departments.length === 0) {\n          const defaultDepartments: DepartmentType[] = ['Flexicore', 'Wall Panels', 'Extruded', 'Precast'];\n          defaultDepartments.forEach((name) => {\n            state.addDepartment(name);\n          });\n        }\n        \n        // Initialize common issue codes if none exist\n        if (state.issueCodes.length === 0) {\n          const defaultCodes = [\n            { \n              code: 101, \n              title: 'Concrete Segregation', \n              severity: 'Major' as IssueSeverity, \n              description: 'Separation of coarse aggregates from concrete mix',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n            { \n              code: 102, \n              title: 'Surface Defects', \n              severity: 'Minor' as IssueSeverity, \n              description: 'Minor surface imperfections or blemishes',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n            { \n              code: 103, \n              title: 'Honeycomb', \n              severity: 'Critical' as IssueSeverity, \n              description: 'Voids in concrete due to incomplete consolidation',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Columns', 'Wall Panels'] as any[]\n            },\n            { \n              code: 201, \n              title: 'Dimensional Variance', \n              severity: 'Major' as IssueSeverity, \n              description: 'Product dimensions outside tolerance',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n            { \n              code: 202, \n              title: 'Cracking', \n              severity: 'Critical' as IssueSeverity, \n              description: 'Structural or surface cracks in product',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n            { \n              code: 203, \n              title: 'Spalling', \n              severity: 'Major' as IssueSeverity, \n              description: 'Flaking or chipping of concrete surface',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Columns', 'Wall Panels'] as any[]\n            },\n            { \n              code: 301, \n              title: 'Color Variation', \n              severity: 'Minor' as IssueSeverity, \n              description: 'Inconsistent coloring in finished product',\n              applicableProducts: ['Wall Panels'] as any[]\n            },\n            { \n              code: 302, \n              title: 'Embedded Items Misplaced', \n              severity: 'Major' as IssueSeverity, \n              description: 'Inserts, anchors, or embeds not in correct position',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Columns', 'Wall Panels'] as any[]\n            },\n            { \n              code: 401, \n              title: 'Form Damage', \n              severity: 'Observation' as IssueSeverity, \n              description: 'Mold or form showing signs of wear or damage',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n            { \n              code: 402, \n              title: 'Release Agent Issue', \n              severity: 'Minor' as IssueSeverity, \n              description: 'Problem with form release application',\n              applicableProducts: ['Beams', 'Hollow Core Slabs', 'Solid Slabs', 'Stadia', 'Columns', 'Wall Panels', 'Stairs'] as any[]\n            },\n          ];\n          \n          defaultCodes.forEach((codeData) => {\n            state.addIssueCode(codeData);\n          });\n        }\n      },\n    }),\n    {\n      name: 'quality-log-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n","import { View, Text, Pressable, ScrollView } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { DepartmentType } from \"../types/quality-log\";\nimport { useEffect } from \"react\";\nimport { useAuthStore } from \"../state/authStore\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"QualityLogDashboard\">;\n\nexport default function QualityLogDashboardScreen({ navigation }: Props) {\n  const initializeDefaultData = useQualityLogStore((s) => s.initializeDefaultData);\n  const departments = useQualityLogStore((s) => s.departments);\n  const logs = useQualityLogStore((s) => s.logs);\n  const currentUser = useAuthStore((s) => s.currentUser);\n  const isAdmin = currentUser?.role === \"admin\";\n\n  useEffect(() => {\n    // Initialize default departments and issue codes on first load\n    initializeDefaultData();\n  }, []);\n\n  const getDepartmentStats = (dept: DepartmentType) => {\n    const deptLogs = logs.filter((log) => log.department === dept);\n    const totalIssues = deptLogs.reduce((sum, log) => sum + (log.issues?.length || 0), 0);\n    const openIssues = deptLogs.reduce(\n      (sum, log) =>\n        sum + (log.issues?.filter((issue) => issue.status === \"Open\").length || 0),\n      0\n    );\n    const criticalIssues = deptLogs.reduce(\n      (sum, log) =>\n        sum +\n        (log.issues?.filter((issue) => issue.severity === \"Critical\").length || 0),\n      0\n    );\n\n    return { totalLogs: deptLogs.length, totalIssues, openIssues, criticalIssues };\n  };\n\n  const activeDepartments = departments.filter((d) => d.isActive);\n\n  const departmentColors: Record<DepartmentType, { bg: string; text: string; icon: string }> = {\n    Flexicore: { bg: \"#DBEAFE\", text: \"#1E40AF\", icon: \"#3B82F6\" },\n    \"Wall Panels\": { bg: \"#D1FAE5\", text: \"#065F46\", icon: \"#10B981\" },\n    Extruded: { bg: \"#FEF3C7\", text: \"#92400E\", icon: \"#F59E0B\" },\n    Precast: { bg: \"#E0E7FF\", text: \"#3730A3\", icon: \"#6366F1\" },\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      <ScrollView className=\"flex-1\">\n        <View className=\"p-6\">\n          {/* Header */}\n          <View className=\"mb-6\">\n            <View className=\"flex-row items-center justify-between mb-2\">\n              <Text className=\"text-3xl font-bold text-gray-900\">\n                Quality Logs\n              </Text>\n              <Pressable\n                onPress={() => navigation.navigate(\"QualityLogSearch\")}\n                className=\"bg-blue-600 rounded-full p-2\"\n              >\n                <Ionicons name=\"search\" size={24} color=\"#FFFFFF\" />\n              </Pressable>\n            </View>\n            <Text className=\"text-base text-gray-600\">\n              Track quality issues and metrics by department\n            </Text>\n          </View>\n\n          {/* Department Cards */}\n          <View className=\"mb-6\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">\n              Departments\n            </Text>\n            {activeDepartments.length === 0 ? (\n              <View className=\"bg-white rounded-2xl p-6 shadow-sm\">\n                <Text className=\"text-gray-600 text-center\">\n                  No active departments. Contact admin to set up departments.\n                </Text>\n              </View>\n            ) : (\n              <View className=\"gap-3\">\n                {activeDepartments.map((dept) => {\n                  const stats = getDepartmentStats(dept.name);\n                  const colors = departmentColors[dept.name];\n\n                  return (\n                    <Pressable\n                      key={dept.id}\n                      onPress={() =>\n                        navigation.navigate(\"QualityLogList\", {\n                          department: dept.name,\n                        })\n                      }\n                      className=\"bg-white rounded-2xl p-5 shadow-sm active:opacity-70\"\n                    >\n                      <View className=\"flex-row items-center justify-between mb-3\">\n                        <View className=\"flex-row items-center gap-3\">\n                          <View\n                            className=\"rounded-full p-2\"\n                            style={{ backgroundColor: colors.bg }}\n                          >\n                            <Ionicons\n                              name=\"business\"\n                              size={24}\n                              color={colors.icon}\n                            />\n                          </View>\n                          <Text\n                            className=\"text-xl font-semibold\"\n                            style={{ color: colors.text }}\n                          >\n                            {dept.name}\n                          </Text>\n                        </View>\n                        <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n                      </View>\n\n                      {/* Stats */}\n                      <View className=\"flex-row gap-4 mt-2\">\n                        <View className=\"flex-1\">\n                          <Text className=\"text-2xl font-bold text-gray-900\">\n                            {stats.totalLogs}\n                          </Text>\n                          <Text className=\"text-xs text-gray-500\">Total Logs</Text>\n                        </View>\n                        <View className=\"flex-1\">\n                          <Text className=\"text-2xl font-bold text-blue-600\">\n                            {stats.totalIssues}\n                          </Text>\n                          <Text className=\"text-xs text-gray-500\">Issues</Text>\n                        </View>\n                        <View className=\"flex-1\">\n                          <Text className=\"text-2xl font-bold text-orange-600\">\n                            {stats.openIssues}\n                          </Text>\n                          <Text className=\"text-xs text-gray-500\">Open</Text>\n                        </View>\n                        <View className=\"flex-1\">\n                          <Text className=\"text-2xl font-bold text-red-600\">\n                            {stats.criticalIssues}\n                          </Text>\n                          <Text className=\"text-xs text-gray-500\">Critical</Text>\n                        </View>\n                      </View>\n                    </Pressable>\n                  );\n                })}\n              </View>\n            )}\n          </View>\n\n          {/* Quick Actions */}\n          <View className=\"mb-6\">\n            <Text className=\"text-lg font-semibold text-gray-900 mb-3\">\n              Quick Actions\n            </Text>\n            <View className=\"gap-3\">\n              <Pressable\n                onPress={() => navigation.navigate(\"QualityLogMetrics\")}\n                className=\"bg-white rounded-2xl p-5 shadow-sm active:opacity-70 flex-row items-center justify-between\"\n              >\n                <View className=\"flex-row items-center gap-3\">\n                  <View className=\"bg-purple-100 rounded-full p-2\">\n                    <Ionicons name=\"stats-chart\" size={24} color=\"#9333EA\" />\n                  </View>\n                  <View>\n                    <Text className=\"text-base font-semibold text-gray-900\">\n                      View Metrics\n                    </Text>\n                    <Text className=\"text-sm text-gray-500\">\n                      Analytics and trends\n                    </Text>\n                  </View>\n                </View>\n                <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n              </Pressable>\n\n              {isAdmin && (\n                <Pressable\n                  onPress={() => navigation.navigate(\"IssueCodeLibrary\")}\n                  className=\"bg-white rounded-2xl p-5 shadow-sm active:opacity-70 flex-row items-center justify-between\"\n                >\n                  <View className=\"flex-row items-center gap-3\">\n                    <View className=\"bg-indigo-100 rounded-full p-2\">\n                      <Ionicons name=\"code-slash\" size={24} color=\"#4F46E5\" />\n                    </View>\n                    <View>\n                      <Text className=\"text-base font-semibold text-gray-900\">\n                        Issue Code Library\n                      </Text>\n                      <Text className=\"text-sm text-gray-500\">\n                        Manage issue codes\n                      </Text>\n                    </View>\n                  </View>\n                  <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n                </Pressable>\n              )}\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, Pressable, ScrollView, Keyboard } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { DepartmentType } from \"../types/quality-log\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"QualityLogList\">;\n\nexport default function QualityLogListScreen({ navigation, route }: Props) {\n  const { department } = route.params;\n  const getLogsByDepartment = useQualityLogStore((s) => s.getLogsByDepartment);\n  const deleteLog = useQualityLogStore((s) => s.deleteLog);\n\n  const logs = getLogsByDepartment(department as DepartmentType);\n\n  const formatDate = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Good\":\n        return { bg: \"#D1FAE5\", text: \"#065F46\" };\n      case \"Issues Found\":\n        return { bg: \"#FED7AA\", text: \"#9A3412\" };\n      case \"Critical Issues\":\n        return { bg: \"#FEE2E2\", text: \"#991B1B\" };\n      default:\n        return { bg: \"#F3F4F6\", text: \"#374151\" };\n    }\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView\n        style={{ flex: 1 }}\n        keyboardShouldPersistTaps=\"handled\"\n        onScrollBeginDrag={() => Keyboard.dismiss()}\n      >\n        <View style={{ padding: 24 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 24 }}>\n            <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\", marginBottom: 8 }}>\n              {department} Logs\n            </Text>\n            <Text style={{ fontSize: 16, color: \"#6B7280\" }}>\n              {logs.length} {logs.length === 1 ? \"entry\" : \"entries\"}\n            </Text>\n          </View>\n\n          {/* Add New Button */}\n          <Pressable\n            onPress={() =>\n              navigation.navigate(\"QualityLogAddEdit\", { department })\n            }\n            style={{\n              backgroundColor: \"#3B82F6\",\n              borderRadius: 16,\n              padding: 16,\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 24,\n              shadowColor: \"#000\",\n              shadowOffset: { width: 0, height: 2 },\n              shadowOpacity: 0.1,\n              shadowRadius: 4,\n              elevation: 3,\n            }}\n          >\n            <Ionicons name=\"add-circle\" size={24} color=\"#FFFFFF\" />\n            <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\", marginLeft: 8 }}>\n              Create New Log Entry\n            </Text>\n          </Pressable>\n\n          {/* Log Entries */}\n          {logs.length === 0 ? (\n            <View\n              style={{\n                backgroundColor: \"#FFFFFF\",\n                borderRadius: 16,\n                padding: 32,\n                alignItems: \"center\",\n                shadowColor: \"#000\",\n                shadowOffset: { width: 0, height: 1 },\n                shadowOpacity: 0.05,\n                shadowRadius: 2,\n                elevation: 1,\n              }}\n            >\n              <Ionicons name=\"document-text-outline\" size={48} color=\"#9CA3AF\" />\n              <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginTop: 12 }}>\n                No Log Entries Yet\n              </Text>\n              <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8, textAlign: \"center\" }}>\n                Create your first log entry to track quality issues and production data.\n              </Text>\n            </View>\n          ) : (\n            <View style={{ gap: 12 }}>\n              {logs.map((log) => {\n                const statusColor = getStatusColor(log.overallStatus);\n                const openIssues = log.issues?.filter((i) => i.status === \"Open\").length || 0;\n                const criticalIssues = log.issues?.filter(\n                  (i) => i.severity === \"Critical\"\n                ).length || 0;\n\n                return (\n                  <Pressable\n                    key={log.id}\n                    onPress={() =>\n                      navigation.navigate(\"QualityLogDetail\", { logId: log.id })\n                    }\n                    style={{\n                      backgroundColor: \"#FFFFFF\",\n                      borderRadius: 16,\n                      padding: 16,\n                      shadowColor: \"#000\",\n                      shadowOffset: { width: 0, height: 1 },\n                      shadowOpacity: 0.05,\n                      shadowRadius: 2,\n                      elevation: 1,\n                    }}\n                  >\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                      <View style={{ flex: 1 }}>\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8, marginBottom: 4 }}>\n                          <Ionicons name=\"calendar-outline\" size={16} color=\"#6B7280\" />\n                          <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\" }}>\n                            {formatDate(log.date)}\n                          </Text>\n                        </View>\n\n                        {/* Status Badge */}\n                        <View\n                          style={{\n                            backgroundColor: statusColor.bg,\n                            alignSelf: \"flex-start\",\n                            paddingHorizontal: 12,\n                            paddingVertical: 4,\n                            borderRadius: 12,\n                            marginTop: 8,\n                          }}\n                        >\n                          <Text style={{ fontSize: 12, fontWeight: \"600\", color: statusColor.text }}>\n                            {log.overallStatus}\n                          </Text>\n                        </View>\n                      </View>\n\n                      <Ionicons name=\"chevron-forward\" size={24} color=\"#9CA3AF\" />\n                    </View>\n\n                    {/* Production Items */}\n                    {log.productionItems && log.productionItems.length > 0 && (\n                      <View style={{ marginBottom: 12 }}>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#6B7280\", marginBottom: 6 }}>\n                          Production: {log.productionItems.length}{\" \"}\n                          {log.productionItems.length === 1 ? \"item\" : \"items\"}\n                        </Text>\n                        <View style={{ gap: 4 }}>\n                          {log.productionItems.slice(0, 2).map((item) => (\n                            <View key={item.id} style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                              <View\n                                style={{\n                                  width: 4,\n                                  height: 4,\n                                  borderRadius: 2,\n                                  backgroundColor: \"#9CA3AF\",\n                                }}\n                              />\n                              <Text style={{ fontSize: 13, color: \"#6B7280\" }}>\n                                {item.jobName}\n                                {item.pieceNumber ? ` - ${item.pieceNumber}` : \"\"}\n                              </Text>\n                            </View>\n                          ))}\n                          {log.productionItems.length > 2 && (\n                            <Text style={{ fontSize: 12, color: \"#9CA3AF\", marginTop: 2 }}>\n                              +{log.productionItems.length - 2} more\n                            </Text>\n                          )}\n                        </View>\n                      </View>\n                    )}\n\n                    {/* Issue Stats */}\n                    {log.issues && log.issues.length > 0 && (\n                      <View style={{ flexDirection: \"row\", gap: 16, marginTop: 8, paddingTop: 12, borderTopWidth: 1, borderTopColor: \"#F3F4F6\" }}>\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                          <Ionicons name=\"alert-circle-outline\" size={16} color=\"#6B7280\" />\n                          <Text style={{ fontSize: 13, color: \"#6B7280\" }}>\n                            {log.issues.length} {log.issues.length === 1 ? \"issue\" : \"issues\"}\n                          </Text>\n                        </View>\n                        {openIssues > 0 && (\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                            <Ionicons name=\"time-outline\" size={16} color=\"#F59E0B\" />\n                            <Text style={{ fontSize: 13, color: \"#F59E0B\", fontWeight: \"600\" }}>\n                              {openIssues} open\n                            </Text>\n                          </View>\n                        )}\n                        {criticalIssues > 0 && (\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                            <Ionicons name=\"warning\" size={16} color=\"#EF4444\" />\n                            <Text style={{ fontSize: 13, color: \"#EF4444\", fontWeight: \"600\" }}>\n                              {criticalIssues} critical\n                            </Text>\n                          </View>\n                        )}\n                      </View>\n                    )}\n                  </Pressable>\n                );\n              })}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, Pressable, ScrollView, Alert } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { useState } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"QualityLogDetail\">;\n\nexport default function QualityLogDetailScreen({ navigation, route }: Props) {\n  const { logId } = route.params;\n  const getLog = useQualityLogStore((s) => s.getLog);\n  const deleteLog = useQualityLogStore((s) => s.deleteLog);\n  const resolveIssue = useQualityLogStore((s) => s.resolveIssue);\n  const [showOptions, setShowOptions] = useState(false);\n\n  const log = getLog(logId);\n\n  if (!log) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n        <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\", padding: 24 }}>\n          <Ionicons name=\"alert-circle-outline\" size={64} color=\"#9CA3AF\" />\n          <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginTop: 16 }}>\n            Log Not Found\n          </Text>\n          <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8, textAlign: \"center\" }}>\n            The quality log you are looking for does not exist.\n          </Text>\n          <Pressable\n            onPress={() => navigation.goBack()}\n            style={{\n              marginTop: 24,\n              backgroundColor: \"#3B82F6\",\n              paddingHorizontal: 24,\n              paddingVertical: 12,\n              borderRadius: 12,\n            }}\n          >\n            <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>Go Back</Text>\n          </Pressable>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  const formatDate = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleDateString(\"en-US\", {\n      weekday: \"long\",\n      month: \"long\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  const formatTime = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Open\":\n        return { bg: \"#FEF3C7\", text: \"#92400E\" };\n      case \"In Progress\":\n        return { bg: \"#DBEAFE\", text: \"#1E40AF\" };\n      case \"Resolved\":\n        return { bg: \"#D1FAE5\", text: \"#065F46\" };\n      case \"Deferred\":\n        return { bg: \"#E5E7EB\", text: \"#374151\" };\n      case \"Rejected\":\n        return { bg: \"#FEE2E2\", text: \"#991B1B\" };\n      default:\n        return { bg: \"#F3F4F6\", text: \"#6B7280\" };\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"Critical\":\n        return { bg: \"#FEE2E2\", text: \"#991B1B\", icon: \"#EF4444\" };\n      case \"Major\":\n        return { bg: \"#FED7AA\", text: \"#9A3412\", icon: \"#F97316\" };\n      case \"Minor\":\n        return { bg: \"#FEF3C7\", text: \"#92400E\", icon: \"#F59E0B\" };\n      case \"Observation\":\n        return { bg: \"#E0E7FF\", text: \"#3730A3\", icon: \"#6366F1\" };\n      default:\n        return { bg: \"#F3F4F6\", text: \"#6B7280\", icon: \"#9CA3AF\" };\n    }\n  };\n\n  const handleDelete = () => {\n    Alert.alert(\n      \"Delete Log Entry\",\n      \"Are you sure you want to delete this log entry? This action cannot be undone.\",\n      [\n        { text: \"Cancel\", style: \"cancel\" },\n        {\n          text: \"Delete\",\n          style: \"destructive\",\n          onPress: () => {\n            deleteLog(logId);\n            navigation.goBack();\n          },\n        },\n      ]\n    );\n  };\n\n  const overallStatusColor = {\n    Good: { bg: \"#D1FAE5\", text: \"#065F46\" },\n    \"Issues Found\": { bg: \"#FED7AA\", text: \"#9A3412\" },\n    \"Critical Issues\": { bg: \"#FEE2E2\", text: \"#991B1B\" },\n  }[log.overallStatus] || { bg: \"#F3F4F6\", text: \"#6B7280\" };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 24 }}>\n          {/* Header with Date and Status */}\n          <View style={{ marginBottom: 24 }}>\n            <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 8 }}>\n              <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\" }}>\n                {log.department}\n              </Text>\n              <Pressable\n                onPress={handleDelete}\n                style={{\n                  backgroundColor: \"#FEE2E2\",\n                  padding: 8,\n                  borderRadius: 8,\n                }}\n              >\n                <Ionicons name=\"trash-outline\" size={20} color=\"#991B1B\" />\n              </Pressable>\n            </View>\n            <Text style={{ fontSize: 16, color: \"#6B7280\", marginBottom: 12 }}>\n              {formatDate(log.date)}\n            </Text>\n            <View\n              style={{\n                backgroundColor: overallStatusColor.bg,\n                alignSelf: \"flex-start\",\n                paddingHorizontal: 16,\n                paddingVertical: 8,\n                borderRadius: 12,\n              }}\n            >\n              <Text style={{ fontSize: 14, fontWeight: \"600\", color: overallStatusColor.text }}>\n                {log.overallStatus}\n              </Text>\n            </View>\n          </View>\n\n          {/* Production Items */}\n          {log.productionItems && log.productionItems.length > 0 && (\n            <View style={{ marginBottom: 24 }}>\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  Production Items\n                </Text>\n                <View\n                  style={{\n                    backgroundColor: \"#EFF6FF\",\n                    paddingHorizontal: 12,\n                    paddingVertical: 4,\n                    borderRadius: 12,\n                  }}\n                >\n                  <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#1E40AF\" }}>\n                    {log.productionItems.length}\n                  </Text>\n                </View>\n              </View>\n              <View style={{ gap: 12 }}>\n                {log.productionItems.map((item) => (\n                  <View\n                    key={item.id}\n                    style={{\n                      backgroundColor: \"#FFFFFF\",\n                      borderRadius: 12,\n                      padding: 16,\n                      borderWidth: 1,\n                      borderColor: \"#E5E7EB\",\n                    }}\n                  >\n                    <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8, marginBottom: 8 }}>\n                      <Ionicons name=\"cube-outline\" size={20} color=\"#3B82F6\" />\n                      <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\" }}>\n                        {item.jobName}\n                      </Text>\n                    </View>\n                    {item.jobNumber && (\n                      <View style={{ flexDirection: \"row\", gap: 16, marginTop: 8 }}>\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                          <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Job #:</Text>\n                          <Text style={{ fontSize: 12, fontWeight: \"500\", color: \"#111827\" }}>\n                            {item.jobNumber}\n                          </Text>\n                        </View>\n                        {item.pieceNumber && (\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}>\n                            <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Piece:</Text>\n                            <Text style={{ fontSize: 12, fontWeight: \"500\", color: \"#111827\" }}>\n                              {item.pieceNumber}\n                            </Text>\n                          </View>\n                        )}\n                      </View>\n                    )}\n                    {item.productType && (\n                      <View style={{ marginTop: 8 }}>\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Type: {item.productType}</Text>\n                      </View>\n                    )}\n                  </View>\n                ))}\n              </View>\n            </View>\n          )}\n\n          {/* Issues */}\n          <View style={{ marginBottom: 24 }}>\n            <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 12 }}>\n              <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                Quality Issues\n              </Text>\n              <View\n                style={{\n                  backgroundColor: (log.issues?.length ?? 0) === 0 ? \"#D1FAE5\" : \"#FED7AA\",\n                  paddingHorizontal: 12,\n                  paddingVertical: 4,\n                  borderRadius: 12,\n                }}\n              >\n                <Text\n                  style={{\n                    fontSize: 12,\n                    fontWeight: \"600\",\n                    color: (log.issues?.length ?? 0) === 0 ? \"#065F46\" : \"#9A3412\",\n                  }}\n                >\n                  {log.issues?.length ?? 0}\n                </Text>\n              </View>\n            </View>\n\n            {(log.issues?.length ?? 0) === 0 ? (\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderRadius: 12,\n                  padding: 24,\n                  alignItems: \"center\",\n                  borderWidth: 1,\n                  borderColor: \"#E5E7EB\",\n                }}\n              >\n                <Ionicons name=\"checkmark-circle\" size={48} color=\"#10B981\" />\n                <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginTop: 12 }}>\n                  No Issues Reported\n                </Text>\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 4 }}>\n                  All production items passed quality checks\n                </Text>\n              </View>\n            ) : (\n              <View style={{ gap: 12 }}>\n                {log.issues?.map((issue) => {\n                  const statusColor = getStatusColor(issue.status);\n                  const severityColor = getSeverityColor(issue.severity);\n\n                  return (\n                    <View\n                      key={issue.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 12,\n                        padding: 16,\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    >\n                      {/* Issue Header */}\n                      <View style={{ flexDirection: \"row\", alignItems: \"flex-start\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                        <View style={{ flex: 1 }}>\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8, marginBottom: 4 }}>\n                            <View\n                              style={{\n                                backgroundColor: severityColor.bg,\n                                paddingHorizontal: 8,\n                                paddingVertical: 2,\n                                borderRadius: 6,\n                              }}\n                            >\n                              <Text style={{ fontSize: 11, fontWeight: \"600\", color: severityColor.text }}>\n                                {issue.severity}\n                              </Text>\n                            </View>\n                            <View\n                              style={{\n                                backgroundColor: \"#F3F4F6\",\n                                paddingHorizontal: 8,\n                                paddingVertical: 2,\n                                borderRadius: 6,\n                              }}\n                            >\n                              <Text style={{ fontSize: 11, fontWeight: \"600\", color: \"#4B5563\" }}>\n                                #{issue.issueCode}\n                              </Text>\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginTop: 4 }}>\n                            {issue.issueTitle}\n                          </Text>\n                        </View>\n                        <View\n                          style={{\n                            backgroundColor: statusColor.bg,\n                            paddingHorizontal: 12,\n                            paddingVertical: 6,\n                            borderRadius: 8,\n                          }}\n                        >\n                          <Text style={{ fontSize: 12, fontWeight: \"600\", color: statusColor.text }}>\n                            {issue.status}\n                          </Text>\n                        </View>\n                      </View>\n\n                      {/* Issue Description */}\n                      <Text style={{ fontSize: 14, color: \"#4B5563\", marginBottom: 12, lineHeight: 20 }}>\n                        {issue.issueDescription}\n                      </Text>\n\n                      {/* Location */}\n                      {issue.location && (\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6, marginBottom: 8 }}>\n                          <Ionicons name=\"location-outline\" size={16} color=\"#6B7280\" />\n                          <Text style={{ fontSize: 13, color: \"#6B7280\" }}>{issue.location}</Text>\n                        </View>\n                      )}\n\n                      {/* Resolution Info */}\n                      {issue.status === \"Resolved\" && issue.actionTaken && (\n                        <View\n                          style={{\n                            backgroundColor: \"#F0FDF4\",\n                            borderRadius: 8,\n                            padding: 12,\n                            marginTop: 12,\n                            borderWidth: 1,\n                            borderColor: \"#BBF7D0\",\n                          }}\n                        >\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6, marginBottom: 6 }}>\n                            <Ionicons name=\"checkmark-circle\" size={16} color=\"#16A34A\" />\n                            <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#16A34A\" }}>\n                              Resolved\n                            </Text>\n                          </View>\n                          <Text style={{ fontSize: 13, color: \"#166534\", marginBottom: 4 }}>\n                            {issue.actionTaken}\n                          </Text>\n                          {issue.resolvedBy && (\n                            <Text style={{ fontSize: 11, color: \"#4D7C0F\" }}>\n                              By {issue.resolvedBy}  {formatTime(issue.resolvedAt || issue.updatedAt)}\n                            </Text>\n                          )}\n                        </View>\n                      )}\n                    </View>\n                  );\n                })}\n              </View>\n            )}\n          </View>\n\n          {/* Notes */}\n          {log.notes && (\n            <View style={{ marginBottom: 24 }}>\n              <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\", marginBottom: 12 }}>\n                Notes\n              </Text>\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderRadius: 12,\n                  padding: 16,\n                  borderWidth: 1,\n                  borderColor: \"#E5E7EB\",\n                }}\n              >\n                <Text style={{ fontSize: 14, color: \"#4B5563\", lineHeight: 20 }}>{log.notes}</Text>\n              </View>\n            </View>\n          )}\n\n          {/* Metadata */}\n          <View style={{ paddingTop: 16, borderTopWidth: 1, borderTopColor: \"#E5E7EB\" }}>\n            <Text style={{ fontSize: 12, color: \"#9CA3AF\" }}>\n              Created by {log.createdBy}\n            </Text>\n            <Text style={{ fontSize: 12, color: \"#9CA3AF\", marginTop: 4 }}>\n              {formatDate(log.createdAt)} at {formatTime(log.createdAt)}\n            </Text>\n            {log.updatedAt !== log.createdAt && (\n              <Text style={{ fontSize: 12, color: \"#9CA3AF\", marginTop: 4 }}>\n                Last updated: {formatDate(log.updatedAt)} at {formatTime(log.updatedAt)}\n              </Text>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import {\n  View,\n  Text,\n  Pressable,\n  ScrollView,\n  TextInput,\n  Modal,\n  Alert,\n} from \"react-native\";\nimport { SafeAreaView, useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { useState } from \"react\";\nimport { DepartmentType, ProductionItem, QualityIssue, IssueStatus, IssueSeverity } from \"../types/quality-log\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"QualityLogAddEdit\">;\n\nexport default function QualityLogAddEditScreen({ navigation, route }: Props) {\n  const { logId, department } = route.params || {};\n  const insets = useSafeAreaInsets();\n  \n  const getLog = useQualityLogStore((s) => s.getLog);\n  const addLog = useQualityLogStore((s) => s.addLog);\n  const updateLog = useQualityLogStore((s) => s.updateLog);\n  const getIssueCodesByDepartment = useQualityLogStore((s) => s.getIssueCodesByDepartment);\n  const currentUser = useAuthStore((s) => s.currentUser);\n\n  const existingLog = logId ? getLog(logId) : null;\n  const isEditing = !!existingLog;\n\n  // Form state\n  const [selectedDepartment, setSelectedDepartment] = useState<DepartmentType>(\n    existingLog?.department || (department as DepartmentType) || \"Flexicore\"\n  );\n  const [date, setDate] = useState(existingLog?.date || Date.now());\n  const [productionItems, setProductionItems] = useState<ProductionItem[]>(\n    existingLog?.productionItems || []\n  );\n  const [issues, setIssues] = useState<QualityIssue[]>(existingLog?.issues || []);\n  const [overallStatus, setOverallStatus] = useState<\"Good\" | \"Issues Found\" | \"Critical Issues\">(\n    existingLog?.overallStatus || \"Good\"\n  );\n  const [notes, setNotes] = useState(existingLog?.notes || \"\");\n\n  // Modal states\n  const [showProductionModal, setShowProductionModal] = useState(false);\n  const [showIssueModal, setShowIssueModal] = useState(false);\n  const [showIssueCodePicker, setShowIssueCodePicker] = useState(false);\n\n  // Production item form\n  const [prodJobName, setProdJobName] = useState(\"\");\n  const [prodJobNumber, setProdJobNumber] = useState(\"\");\n  const [prodPieceNumber, setProdPieceNumber] = useState(\"\");\n  const [prodProductType, setProdProductType] = useState(\"\");\n\n  // Issue form\n  const [issueCodeId, setIssueCodeId] = useState(\"\");\n  const [issueCode, setIssueCode] = useState<number | \"\">(\"\");\n  const [issueTitle, setIssueTitle] = useState(\"\");\n  const [issueDescription, setIssueDescription] = useState(\"\");\n  const [issueStatus, setIssueStatus] = useState<IssueStatus>(\"Open\");\n  const [issueSeverity, setIssueSeverity] = useState<IssueSeverity>(\"Minor\");\n  const [issueLocation, setIssueLocation] = useState(\"\");\n\n  const availableIssueCodes = getIssueCodesByDepartment(selectedDepartment);\n\n  const handleAddProductionItem = () => {\n    if (!prodJobName.trim()) {\n      Alert.alert(\"Error\", \"Please enter a job name\");\n      return;\n    }\n\n    const newItem: ProductionItem = {\n      id: `temp-${Date.now()}`,\n      jobName: prodJobName,\n      jobNumber: prodJobNumber || undefined,\n      pieceNumber: prodPieceNumber || undefined,\n      productType: prodProductType || undefined,\n      pourDate: date,\n      department: selectedDepartment,\n    };\n\n    setProductionItems([...productionItems, newItem]);\n    setProdJobName(\"\");\n    setProdJobNumber(\"\");\n    setProdPieceNumber(\"\");\n    setProdProductType(\"\");\n    setShowProductionModal(false);\n  };\n\n  const handleAddIssue = () => {\n    if (!issueCode || !issueTitle.trim() || !issueDescription.trim()) {\n      Alert.alert(\"Error\", \"Please fill in all required fields\");\n      return;\n    }\n\n    const newIssue: Omit<QualityIssue, \"id\" | \"createdAt\" | \"updatedAt\"> = {\n      issueCodeId: issueCodeId || `code-${issueCode}`,\n      issueCode: Number(issueCode),\n      issueTitle,\n      issueDescription,\n      status: issueStatus,\n      severity: issueSeverity,\n      location: issueLocation || undefined,\n    };\n\n    setIssues([...issues, { ...newIssue, id: `temp-${Date.now()}`, createdAt: Date.now(), updatedAt: Date.now() }]);\n    \n    // Reset form\n    setIssueCodeId(\"\");\n    setIssueCode(\"\");\n    setIssueTitle(\"\");\n    setIssueDescription(\"\");\n    setIssueStatus(\"Open\");\n    setIssueSeverity(\"Minor\");\n    setIssueLocation(\"\");\n    setShowIssueModal(false);\n\n    // Auto-update overall status\n    if (issueSeverity === \"Critical\") {\n      setOverallStatus(\"Critical Issues\");\n    } else if (overallStatus === \"Good\") {\n      setOverallStatus(\"Issues Found\");\n    }\n  };\n\n  const handleSave = () => {\n    if (!currentUser) {\n      Alert.alert(\"Error\", \"You must be logged in to create a log\");\n      return;\n    }\n\n    if (productionItems.length === 0) {\n      Alert.alert(\"Warning\", \"Are you sure you want to save without any production items?\", [\n        { text: \"Cancel\", style: \"cancel\" },\n        {\n          text: \"Save Anyway\",\n          onPress: () => performSave(),\n        },\n      ]);\n      return;\n    }\n\n    performSave();\n  };\n\n  const performSave = () => {\n    if (!currentUser) return;\n\n    if (isEditing && logId) {\n      updateLog(logId, {\n        department: selectedDepartment,\n        date,\n        productionItems,\n        issues,\n        overallStatus,\n        notes: notes || undefined,\n      });\n    } else {\n      addLog({\n        department: selectedDepartment,\n        date,\n        productionItems,\n        issues,\n        overallStatus,\n        notes: notes || undefined,\n        createdBy: currentUser.email,\n      });\n    }\n\n    navigation.goBack();\n  };\n\n  const selectIssueCode = (code: any) => {\n    setIssueCodeId(code.id);\n    setIssueCode(code.code);\n    setIssueTitle(code.title);\n    setIssueSeverity(code.severity);\n    setShowIssueCodePicker(false);\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <View style={{ flex: 1 }}>\n        <ScrollView\n          style={{ flex: 1 }}\n          keyboardShouldPersistTaps=\"handled\"\n          contentContainerStyle={{ padding: 24, paddingBottom: insets.bottom + 100 }}\n        >\n            {/* Department & Date */}\n            <View style={{ marginBottom: 24 }}>\n              <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                Department\n              </Text>\n              <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\" }}>\n                {selectedDepartment}\n              </Text>\n            </View>\n\n            {/* Production Items */}\n            <View style={{ marginBottom: 24 }}>\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\" }}>\n                  Production Items\n                </Text>\n                <Pressable\n                  onPress={() => setShowProductionModal(true)}\n                  style={{\n                    backgroundColor: \"#3B82F6\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\",\n                    gap: 6,\n                    paddingHorizontal: 12,\n                    paddingVertical: 8,\n                    borderRadius: 8,\n                  }}\n                >\n                  <Ionicons name=\"add\" size={18} color=\"#FFFFFF\" />\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 14, fontWeight: \"600\" }}>Add Item</Text>\n                </Pressable>\n              </View>\n\n              {productionItems.length === 0 ? (\n                <View\n                  style={{\n                    backgroundColor: \"#FFFFFF\",\n                    borderRadius: 12,\n                    padding: 24,\n                    alignItems: \"center\",\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                  }}\n                >\n                  <Ionicons name=\"cube-outline\" size={32} color=\"#9CA3AF\" />\n                  <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8 }}>\n                    No production items added yet\n                  </Text>\n                </View>\n              ) : (\n                <View style={{ gap: 8 }}>\n                  {productionItems.map((item, index) => (\n                    <View\n                      key={item.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 12,\n                        padding: 12,\n                        flexDirection: \"row\",\n                        alignItems: \"center\",\n                        justifyContent: \"space-between\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    >\n                      <View style={{ flex: 1 }}>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\" }}>\n                          {item.jobName}\n                        </Text>\n                        {item.pieceNumber && (\n                          <Text style={{ fontSize: 12, color: \"#6B7280\", marginTop: 2 }}>\n                            Piece: {item.pieceNumber}\n                          </Text>\n                        )}\n                      </View>\n                      <Pressable\n                        onPress={() => setProductionItems(productionItems.filter((_, i) => i !== index))}\n                        style={{\n                          backgroundColor: \"#FEE2E2\",\n                          padding: 8,\n                          borderRadius: 8,\n                        }}\n                      >\n                        <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                      </Pressable>\n                    </View>\n                  ))}\n                </View>\n              )}\n            </View>\n\n            {/* Quality Issues */}\n            <View style={{ marginBottom: 24 }}>\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\" }}>\n                  Quality Issues\n                </Text>\n                <Pressable\n                  onPress={() => setShowIssueModal(true)}\n                  style={{\n                    backgroundColor: \"#F59E0B\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\",\n                    gap: 6,\n                    paddingHorizontal: 12,\n                    paddingVertical: 8,\n                    borderRadius: 8,\n                  }}\n                >\n                  <Ionicons name=\"add\" size={18} color=\"#FFFFFF\" />\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 14, fontWeight: \"600\" }}>Add Issue</Text>\n                </Pressable>\n              </View>\n\n              {issues.length === 0 ? (\n                <View\n                  style={{\n                    backgroundColor: \"#FFFFFF\",\n                    borderRadius: 12,\n                    padding: 24,\n                    alignItems: \"center\",\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                  }}\n                >\n                  <Ionicons name=\"checkmark-circle-outline\" size={32} color=\"#10B981\" />\n                  <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8 }}>\n                    No issues reported\n                  </Text>\n                </View>\n              ) : (\n                <View style={{ gap: 8 }}>\n                  {issues.map((issue, index) => (\n                    <View\n                      key={issue.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 12,\n                        padding: 12,\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    >\n                      <View style={{ flexDirection: \"row\", alignItems: \"flex-start\", justifyContent: \"space-between\", marginBottom: 8 }}>\n                        <View style={{ flex: 1 }}>\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6, marginBottom: 4 }}>\n                            <Text style={{ fontSize: 11, fontWeight: \"600\", color: \"#6B7280\" }}>\n                              #{issue.issueCode}\n                            </Text>\n                            <Text style={{ fontSize: 11, fontWeight: \"600\", color: \"#9333EA\" }}>\n                              {issue.severity}\n                            </Text>\n                          </View>\n                          <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\", marginBottom: 4 }}>\n                            {issue.issueTitle}\n                          </Text>\n                          <Text style={{ fontSize: 13, color: \"#6B7280\" }} numberOfLines={2}>\n                            {issue.issueDescription}\n                          </Text>\n                        </View>\n                        <Pressable\n                          onPress={() => setIssues(issues.filter((_, i) => i !== index))}\n                          style={{\n                            backgroundColor: \"#FEE2E2\",\n                            padding: 8,\n                            borderRadius: 8,\n                            marginLeft: 8,\n                          }}\n                        >\n                          <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                        </Pressable>\n                      </View>\n                    </View>\n                  ))}\n                </View>\n              )}\n            </View>\n\n            {/* Overall Status */}\n            <View style={{ marginBottom: 24 }}>\n              <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                Overall Status\n              </Text>\n              <View style={{ flexDirection: \"row\", gap: 12 }}>\n                {([\"Good\", \"Issues Found\", \"Critical Issues\"] as const).map((statusOption) => (\n                  <Pressable\n                    key={statusOption}\n                    onPress={() => setOverallStatus(statusOption)}\n                    style={{\n                      flex: 1,\n                      backgroundColor: overallStatus === statusOption ? \"#3B82F6\" : \"#FFFFFF\",\n                      paddingVertical: 12,\n                      borderRadius: 12,\n                      alignItems: \"center\",\n                      borderWidth: 1,\n                      borderColor: overallStatus === statusOption ? \"#3B82F6\" : \"#E5E7EB\",\n                    }}\n                  >\n                    <Text\n                      style={{\n                        fontSize: 12,\n                        fontWeight: \"600\",\n                        color: overallStatus === statusOption ? \"#FFFFFF\" : \"#6B7280\",\n                        textAlign: \"center\",\n                      }}\n                    >\n                      {statusOption}\n                    </Text>\n                  </Pressable>\n                ))}\n              </View>\n            </View>\n\n            {/* Notes */}\n            <View style={{ marginBottom: 24 }}>\n              <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                Notes (Optional)\n              </Text>\n              <TextInput\n                value={notes}\n                onChangeText={setNotes}\n                placeholder=\"Add any additional notes...\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                multiline\n                numberOfLines={4}\n                textAlignVertical=\"top\"\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderRadius: 12,\n                  padding: 12,\n                  fontSize: 14,\n                  color: \"#111827\",\n                  borderWidth: 1,\n                  borderColor: \"#E5E7EB\",\n                  minHeight: 100,\n                }}\n              />\n            </View>\n          </ScrollView>\n\n          {/* Save Button */}\n          <View\n            style={{\n              position: \"absolute\",\n              bottom: 0,\n              left: 0,\n              right: 0,\n              backgroundColor: \"#FFFFFF\",\n              padding: 16,\n              paddingBottom: insets.bottom + 16,\n              borderTopWidth: 1,\n              borderTopColor: \"#E5E7EB\",\n            }}\n          >\n            <Pressable\n              onPress={handleSave}\n              style={{\n                backgroundColor: \"#10B981\",\n                paddingVertical: 16,\n                borderRadius: 12,\n                alignItems: \"center\",\n              }}\n            >\n              <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>\n                {isEditing ? \"Update Log Entry\" : \"Create Log Entry\"}\n              </Text>\n            </Pressable>\n          </View>\n\n          {/* Production Item Modal */}\n          <Modal visible={showProductionModal} animationType=\"slide\" transparent>\n            <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}>\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderTopLeftRadius: 24,\n                  borderTopRightRadius: 24,\n                  padding: 24,\n                  paddingBottom: insets.bottom + 24,\n                }}\n              >\n                  <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                    <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                      Add Production Item\n                    </Text>\n                    <Pressable onPress={() => setShowProductionModal(false)}>\n                      <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                    </Pressable>\n                  </View>\n\n                  <ScrollView style={{ maxHeight: 400 }} keyboardShouldPersistTaps=\"handled\">\n                    <View style={{ gap: 16 }}>\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Job Name *\n                        </Text>\n                        <TextInput\n                          value={prodJobName}\n                          onChangeText={setProdJobName}\n                          placeholder=\"Enter job name\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        />\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Job Number\n                        </Text>\n                        <TextInput\n                          value={prodJobNumber}\n                          onChangeText={setProdJobNumber}\n                          placeholder=\"Enter job number\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        />\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Piece Number\n                        </Text>\n                        <TextInput\n                          value={prodPieceNumber}\n                          onChangeText={setProdPieceNumber}\n                          placeholder=\"Enter piece number\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        />\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Product Type\n                        </Text>\n                        <TextInput\n                          value={prodProductType}\n                          onChangeText={setProdProductType}\n                          placeholder=\"e.g., Hollow Core Slab, Wall Panel\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        />\n                      </View>\n                    </View>\n                  </ScrollView>\n\n                  <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                    <Pressable\n                      onPress={() => setShowProductionModal(false)}\n                      style={{\n                        flex: 1,\n                        backgroundColor: \"#F3F4F6\",\n                        paddingVertical: 12,\n                        borderRadius: 12,\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                    </Pressable>\n                    <Pressable\n                      onPress={handleAddProductionItem}\n                      style={{\n                        flex: 1,\n                        backgroundColor: \"#3B82F6\",\n                        paddingVertical: 12,\n                        borderRadius: 12,\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>Add</Text>\n                    </Pressable>\n                  </View>\n                </View>\n            </View>\n          </Modal>\n\n          {/* Issue Modal */}\n          <Modal visible={showIssueModal} animationType=\"slide\" transparent>\n            <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}>\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderTopLeftRadius: 24,\n                  borderTopRightRadius: 24,\n                  padding: 24,\n                  paddingBottom: insets.bottom + 24,\n                }}\n              >\n                  <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                    <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                      Add Quality Issue\n                    </Text>\n                    <Pressable onPress={() => setShowIssueModal(false)}>\n                      <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                    </Pressable>\n                  </View>\n\n                  <ScrollView style={{ maxHeight: 500 }} keyboardShouldPersistTaps=\"handled\">\n                    <View style={{ gap: 16 }}>\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Issue Code *\n                        </Text>\n                        <Pressable\n                          onPress={() => setShowIssueCodePicker(true)}\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                            flexDirection: \"row\",\n                            alignItems: \"center\",\n                            justifyContent: \"space-between\",\n                          }}\n                        >\n                          <Text style={{ fontSize: 14, color: issueCode ? \"#111827\" : \"#9CA3AF\" }}>\n                            {issueCode ? `#${issueCode} - ${issueTitle}` : \"Select issue code\"}\n                          </Text>\n                          <Ionicons name=\"chevron-down\" size={20} color=\"#6B7280\" />\n                        </Pressable>\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Description *\n                        </Text>\n                        <TextInput\n                          value={issueDescription}\n                          onChangeText={setIssueDescription}\n                          placeholder=\"Describe the quality issue in detail...\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          multiline\n                          numberOfLines={4}\n                          textAlignVertical=\"top\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                            minHeight: 80,\n                          }}\n                        />\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Location\n                        </Text>\n                        <TextInput\n                          value={issueLocation}\n                          onChangeText={setIssueLocation}\n                          placeholder=\"e.g., Bay 3, Line 2\"\n                          placeholderTextColor=\"#9CA3AF\"\n                          cursorColor=\"#000000\"\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 12,\n                            fontSize: 14,\n                            color: \"#111827\",\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        />\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Severity\n                        </Text>\n                        <View style={{ flexDirection: \"row\", gap: 8 }}>\n                          {([\"Critical\", \"Major\", \"Minor\", \"Observation\"] as const).map((sev) => (\n                            <Pressable\n                              key={sev}\n                              onPress={() => setIssueSeverity(sev)}\n                              style={{\n                                flex: 1,\n                                backgroundColor: issueSeverity === sev ? \"#9333EA\" : \"#F3F4F6\",\n                                paddingVertical: 10,\n                                borderRadius: 8,\n                                alignItems: \"center\",\n                              }}\n                            >\n                              <Text\n                                style={{\n                                  fontSize: 11,\n                                  fontWeight: \"600\",\n                                  color: issueSeverity === sev ? \"#FFFFFF\" : \"#6B7280\",\n                                }}\n                              >\n                                {sev}\n                              </Text>\n                            </Pressable>\n                          ))}\n                        </View>\n                      </View>\n\n                      <View>\n                        <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                          Status\n                        </Text>\n                        <View style={{ flexDirection: \"row\", gap: 8, flexWrap: \"wrap\" }}>\n                          {([\"Open\", \"In Progress\", \"Resolved\", \"Deferred\"] as const).map((stat) => (\n                            <Pressable\n                              key={stat}\n                              onPress={() => setIssueStatus(stat)}\n                              style={{\n                                backgroundColor: issueStatus === stat ? \"#3B82F6\" : \"#F3F4F6\",\n                                paddingVertical: 8,\n                                paddingHorizontal: 12,\n                                borderRadius: 8,\n                              }}\n                            >\n                              <Text\n                                style={{\n                                  fontSize: 12,\n                                  fontWeight: \"600\",\n                                  color: issueStatus === stat ? \"#FFFFFF\" : \"#6B7280\",\n                                }}\n                              >\n                                {stat}\n                              </Text>\n                            </Pressable>\n                          ))}\n                        </View>\n                      </View>\n                    </View>\n                  </ScrollView>\n\n                  <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                    <Pressable\n                      onPress={() => setShowIssueModal(false)}\n                      style={{\n                        flex: 1,\n                        backgroundColor: \"#F3F4F6\",\n                        paddingVertical: 12,\n                        borderRadius: 12,\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                    </Pressable>\n                    <Pressable\n                      onPress={handleAddIssue}\n                      style={{\n                        flex: 1,\n                        backgroundColor: \"#F59E0B\",\n                        paddingVertical: 12,\n                        borderRadius: 12,\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>Add Issue</Text>\n                    </Pressable>\n                  </View>\n                </View>\n            </View>\n          </Modal>\n\n          {/* Issue Code Picker Modal */}\n          <Modal visible={showIssueCodePicker} animationType=\"slide\" transparent>\n            <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}>\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderTopLeftRadius: 24,\n                  borderTopRightRadius: 24,\n                  padding: 24,\n                  paddingBottom: insets.bottom + 24,\n                  maxHeight: \"70%\",\n                }}\n              >\n                <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 16 }}>\n                  <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                    Select Issue Code\n                  </Text>\n                  <Pressable onPress={() => setShowIssueCodePicker(false)}>\n                    <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                  </Pressable>\n                </View>\n\n                <ScrollView style={{ flex: 1 }}>\n                  {availableIssueCodes.length === 0 ? (\n                    <View style={{ padding: 32, alignItems: \"center\" }}>\n                      <Ionicons name=\"alert-circle-outline\" size={48} color=\"#9CA3AF\" />\n                      <Text style={{ fontSize: 16, color: \"#6B7280\", marginTop: 12, textAlign: \"center\" }}>\n                        No issue codes available. Contact admin to add issue codes.\n                      </Text>\n                    </View>\n                  ) : (\n                    <View style={{ gap: 8 }}>\n                      {availableIssueCodes.map((code) => (\n                        <Pressable\n                          key={code.id}\n                          onPress={() => selectIssueCode(code)}\n                          style={{\n                            backgroundColor: \"#F9FAFB\",\n                            borderRadius: 12,\n                            padding: 16,\n                            borderWidth: 1,\n                            borderColor: \"#E5E7EB\",\n                          }}\n                        >\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 6 }}>\n                            <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\" }}>\n                              #{code.code}\n                            </Text>\n                            <View\n                              style={{\n                                backgroundColor: code.severity === \"Critical\" ? \"#FEE2E2\" : code.severity === \"Major\" ? \"#FED7AA\" : code.severity === \"Minor\" ? \"#FEF3C7\" : \"#E0E7FF\",\n                                paddingHorizontal: 8,\n                                paddingVertical: 4,\n                                borderRadius: 6,\n                              }}\n                            >\n                              <Text\n                                style={{\n                                  fontSize: 11,\n                                  fontWeight: \"600\",\n                                  color: code.severity === \"Critical\" ? \"#991B1B\" : code.severity === \"Major\" ? \"#9A3412\" : code.severity === \"Minor\" ? \"#92400E\" : \"#3730A3\",\n                                }}\n                              >\n                                {code.severity}\n                              </Text>\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 14, fontWeight: \"500\", color: \"#111827\", marginBottom: 4 }}>\n                            {code.title}\n                          </Text>\n                          <Text style={{ fontSize: 12, color: \"#6B7280\" }} numberOfLines={2}>\n                            {code.description}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                  )}\n                </ScrollView>\n              </View>\n            </View>\n          </Modal>\n        </View>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, Pressable, ScrollView } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { useState } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"QualityLogMetrics\">;\n\nexport default function QualityLogMetricsScreen({ navigation }: Props) {\n  const departments = useQualityLogStore((s) => s.departments);\n  const logs = useQualityLogStore((s) => s.logs);\n  const getMetrics = useQualityLogStore((s) => s.getMetrics);\n  const [selectedDepartment, setSelectedDepartment] = useState<string | null>(null);\n\n  // Get last 30 days\n  const endDate = Date.now();\n  const startDate = endDate - 30 * 24 * 60 * 60 * 1000;\n\n  const overallStats = {\n    totalLogs: logs.length,\n    totalIssues: logs.reduce((sum, log) => sum + (log.issues?.length ?? 0), 0),\n    criticalIssues: logs.reduce(\n      (sum, log) =>\n        sum + (log.issues?.filter((i) => i.severity === \"Critical\").length ?? 0),\n      0\n    ),\n    openIssues: logs.reduce(\n      (sum, log) => sum + (log.issues?.filter((i) => i.status === \"Open\").length ?? 0),\n      0\n    ),\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 24 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 24 }}>\n            <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\", marginBottom: 8 }}>\n              Quality Metrics\n            </Text>\n            <Text style={{ fontSize: 16, color: \"#6B7280\" }}>\n              Last 30 days\n            </Text>\n          </View>\n\n          {/* Overall Stats */}\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 16,\n              padding: 20,\n              marginBottom: 24,\n              shadowColor: \"#000\",\n              shadowOffset: { width: 0, height: 2 },\n              shadowOpacity: 0.1,\n              shadowRadius: 4,\n              elevation: 3,\n            }}\n          >\n            <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginBottom: 16 }}>\n              Overall Summary\n            </Text>\n            <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 16 }}>\n              <View style={{ flex: 1, minWidth: 120 }}>\n                <Text style={{ fontSize: 32, fontWeight: \"700\", color: \"#3B82F6\" }}>\n                  {overallStats.totalLogs}\n                </Text>\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 4 }}>\n                  Total Logs\n                </Text>\n              </View>\n              <View style={{ flex: 1, minWidth: 120 }}>\n                <Text style={{ fontSize: 32, fontWeight: \"700\", color: \"#F59E0B\" }}>\n                  {overallStats.totalIssues}\n                </Text>\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 4 }}>\n                  Total Issues\n                </Text>\n              </View>\n              <View style={{ flex: 1, minWidth: 120 }}>\n                <Text style={{ fontSize: 32, fontWeight: \"700\", color: \"#EF4444\" }}>\n                  {overallStats.criticalIssues}\n                </Text>\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 4 }}>\n                  Critical\n                </Text>\n              </View>\n              <View style={{ flex: 1, minWidth: 120 }}>\n                <Text style={{ fontSize: 32, fontWeight: \"700\", color: \"#8B5CF6\" }}>\n                  {overallStats.openIssues}\n                </Text>\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 4 }}>\n                  Open Issues\n                </Text>\n              </View>\n            </View>\n          </View>\n\n          {/* Department Breakdown */}\n          <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\", marginBottom: 16 }}>\n            By Department\n          </Text>\n          <View style={{ gap: 12, marginBottom: 24 }}>\n            {departments.filter((d) => d.isActive).map((dept) => {\n              const deptLogs = logs.filter((log) => log.department === dept.name);\n              const deptIssues = deptLogs.reduce((sum, log) => sum + (log.issues?.length ?? 0), 0);\n              const deptCritical = deptLogs.reduce(\n                (sum, log) =>\n                  sum + (log.issues?.filter((i) => i.severity === \"Critical\").length ?? 0),\n                0\n              );\n\n              return (\n                <View\n                  key={dept.id}\n                  style={{\n                    backgroundColor: \"#FFFFFF\",\n                    borderRadius: 12,\n                    padding: 16,\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                  }}\n                >\n                  <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginBottom: 12 }}>\n                    {dept.name}\n                  </Text>\n                  <View style={{ flexDirection: \"row\", gap: 16 }}>\n                    <View>\n                      <Text style={{ fontSize: 24, fontWeight: \"700\", color: \"#3B82F6\" }}>\n                        {deptLogs.length}\n                      </Text>\n                      <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Logs</Text>\n                    </View>\n                    <View>\n                      <Text style={{ fontSize: 24, fontWeight: \"700\", color: \"#F59E0B\" }}>\n                        {deptIssues}\n                      </Text>\n                      <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Issues</Text>\n                    </View>\n                    {deptCritical > 0 && (\n                      <View>\n                        <Text style={{ fontSize: 24, fontWeight: \"700\", color: \"#EF4444\" }}>\n                          {deptCritical}\n                        </Text>\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Critical</Text>\n                      </View>\n                    )}\n                  </View>\n                </View>\n              );\n            })}\n          </View>\n\n          {/* Placeholder for Charts */}\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 16,\n              padding: 32,\n              alignItems: \"center\",\n              borderWidth: 1,\n              borderColor: \"#E5E7EB\",\n            }}\n          >\n            <Ionicons name=\"bar-chart-outline\" size={48} color=\"#9CA3AF\" />\n            <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginTop: 12 }}>\n              Detailed Analytics\n            </Text>\n            <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8, textAlign: \"center\" }}>\n              Charts and trend analysis will be displayed here\n            </Text>\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useQualityLogStore } from '../state/qualityLogStore';\nimport { QualityLogEntry, DepartmentType } from '../types/quality-log';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'QualityLogSearch'>;\n\ninterface SearchResult {\n  log: QualityLogEntry;\n  matchedField: string;\n}\n\nexport default function QualityLogSearchScreen({ navigation }: Props) {\n  const logs = useQualityLogStore((s) => s.logs);\n  \n  const [jobNumber, setJobNumber] = useState('');\n  const [jobName, setJobName] = useState('');\n  const [markNumber, setMarkNumber] = useState('');\n  const [idNumber, setIdNumber] = useState('');\n  const [issueCode, setIssueCode] = useState('');\n  \n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\n  const [hasSearched, setHasSearched] = useState(false);\n\n  const handleSearch = () => {\n    // Check if at least one field has input\n    const hasInput = jobNumber.trim() || jobName.trim() || markNumber.trim() || idNumber.trim() || issueCode.trim();\n    \n    if (!hasInput) {\n      setSearchResults([]);\n      setHasSearched(false);\n      return;\n    }\n\n    const results: SearchResult[] = [];\n\n    logs.forEach(log => {\n      let matches = false;\n      let matchedField = '';\n\n      // Check Extruded entries (which have the detailed fields)\n      if (log.extrudedEntries && log.extrudedEntries.length > 0) {\n        log.extrudedEntries.forEach(entry => {\n          let entryMatches = true;\n\n          // Check job number (if provided)\n          if (jobNumber.trim()) {\n            const query = jobNumber.trim().toLowerCase();\n            if (!entry.jobNumber.toLowerCase().includes(query)) {\n              entryMatches = false;\n            } else {\n              matchedField = 'Job Number';\n            }\n          }\n\n          // Check job name (if provided)\n          if (jobName.trim() && entryMatches) {\n            const query = jobName.trim().toLowerCase();\n            const entryJobName = (entry.jobName || '').toLowerCase();\n            if (!entryJobName.includes(query)) {\n              entryMatches = false;\n            } else {\n              matchedField = 'Job Name';\n            }\n          }\n\n          // Check mark number (if provided)\n          if (markNumber.trim() && entryMatches) {\n            const query = markNumber.trim().toLowerCase();\n            if (!entry.markNumber.toLowerCase().includes(query)) {\n              entryMatches = false;\n            } else {\n              matchedField = 'Mark Number';\n            }\n          }\n\n          // Check ID number (if provided)\n          if (idNumber.trim() && entryMatches) {\n            const query = idNumber.trim().toLowerCase();\n            if (!entry.idNumber.toLowerCase().includes(query)) {\n              entryMatches = false;\n            } else {\n              matchedField = 'ID Number';\n            }\n          }\n\n          // Check issue code (if provided)\n          if (issueCode.trim() && entryMatches) {\n            const query = issueCode.trim().toLowerCase();\n            const codeStr = entry.issueCode?.toString() || '';\n            const titleStr = entry.issueTitle || '';\n            if (!codeStr.includes(query) && !titleStr.toLowerCase().includes(query)) {\n              entryMatches = false;\n            } else {\n              matchedField = 'Issue Code';\n            }\n          }\n\n          if (entryMatches && !matches) {\n            matches = true;\n          }\n        });\n      }\n\n      // Also check legacy productionItems if they exist\n      if (!matches && log.productionItems && log.productionItems.length > 0) {\n        log.productionItems.forEach(item => {\n          let itemMatches = true;\n\n          // Check job number\n          if (jobNumber.trim()) {\n            const query = jobNumber.trim().toLowerCase();\n            const itemJobNumber = item.jobNumber || '';\n            if (!itemJobNumber.toLowerCase().includes(query)) {\n              itemMatches = false;\n            } else {\n              matchedField = 'Job Number';\n            }\n          }\n\n          // Check job name\n          if (jobName.trim() && itemMatches) {\n            const query = jobName.trim().toLowerCase();\n            if (!item.jobName.toLowerCase().includes(query)) {\n              itemMatches = false;\n            } else {\n              matchedField = 'Job Name';\n            }\n          }\n\n          // Check mark number\n          if (markNumber.trim() && itemMatches) {\n            const query = markNumber.trim().toLowerCase();\n            const itemMarkNumber = item.markNumber || '';\n            if (!itemMarkNumber.toLowerCase().includes(query)) {\n              itemMatches = false;\n            } else {\n              matchedField = 'Mark Number';\n            }\n          }\n\n          if (itemMatches && !matches) {\n            matches = true;\n          }\n        });\n      }\n\n      // Check issues for issue code search\n      if (!matches && issueCode.trim() && log.issues && log.issues.length > 0) {\n        const query = issueCode.trim().toLowerCase();\n        log.issues.forEach(issue => {\n          const codeStr = issue.issueCode?.toString() || '';\n          const titleStr = issue.issueTitle || '';\n          if (codeStr.includes(query) || titleStr.toLowerCase().includes(query)) {\n            matches = true;\n            matchedField = 'Issue Code';\n          }\n        });\n      }\n\n      if (matches) {\n        results.push({\n          log,\n          matchedField,\n        });\n      }\n    });\n\n    // Sort by date (most recent first)\n    results.sort((a, b) => b.log.date - a.log.date);\n\n    setSearchResults(results);\n    setHasSearched(true);\n  };\n\n  const handleClear = () => {\n    setJobNumber('');\n    setJobName('');\n    setMarkNumber('');\n    setIdNumber('');\n    setIssueCode('');\n    setSearchResults([]);\n    setHasSearched(false);\n  };\n\n  const formatDate = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Good':\n        return { bg: '#D1FAE5', text: '#065F46' };\n      case 'Issues Found':\n        return { bg: '#FED7AA', text: '#9A3412' };\n      case 'Critical Issues':\n        return { bg: '#FEE2E2', text: '#991B1B' };\n      default:\n        return { bg: '#F3F4F6', text: '#374151' };\n    }\n  };\n\n  const getDepartmentColor = (dept: DepartmentType) => {\n    switch (dept) {\n      case 'Flexicore':\n        return { bg: '#DBEAFE', text: '#1E40AF' };\n      case 'Wall Panels':\n        return { bg: '#D1FAE5', text: '#065F46' };\n      case 'Extruded':\n        return { bg: '#FEF3C7', text: '#92400E' };\n      case 'Precast':\n        return { bg: '#E0E7FF', text: '#3730A3' };\n      default:\n        return { bg: '#F3F4F6', text: '#6B7280' };\n    }\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"bg-white border-b border-gray-200 px-4 py-3\">\n        <View className=\"flex-row items-center justify-between mb-3\">\n          <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n            <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n          </Pressable>\n          <Text className=\"text-xl font-bold text-gray-900 flex-1 ml-2\">\n            Search Quality Logs\n          </Text>\n          <Pressable onPress={handleClear} className=\"px-3 py-2\">\n            <Text className=\"text-sm font-semibold text-gray-600\">Clear</Text>\n          </Pressable>\n        </View>\n      </View>\n\n      <ScrollView className=\"flex-1\">\n        {/* Search Fields */}\n        <View className=\"bg-white border-b border-gray-200 p-4 gap-4\">\n          {/* Job Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Job Number</Text>\n            <TextInput\n              value={jobNumber}\n              onChangeText={setJobNumber}\n              placeholder=\"Enter job number\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              keyboardType=\"number-pad\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Job Name */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Job Name</Text>\n            <TextInput\n              value={jobName}\n              onChangeText={setJobName}\n              placeholder=\"Enter job name\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Mark Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Mark Number</Text>\n            <TextInput\n              value={markNumber}\n              onChangeText={setMarkNumber}\n              placeholder=\"e.g., M1, H105\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* ID Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">ID Number</Text>\n            <TextInput\n              value={idNumber}\n              onChangeText={setIdNumber}\n              placeholder=\"Enter ID number\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Issue Code */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Issue Code</Text>\n            <TextInput\n              value={issueCode}\n              onChangeText={setIssueCode}\n              placeholder=\"Code number or title\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Search Button */}\n          <Pressable\n            onPress={handleSearch}\n            className=\"bg-blue-600 rounded-lg py-3 items-center\"\n          >\n            <Text className=\"text-white text-base font-semibold\">Search</Text>\n          </Pressable>\n        </View>\n\n        {/* Results */}\n        {!hasSearched ? (\n          <View className=\"items-center justify-center p-8 mt-12\">\n            <Ionicons name=\"search-outline\" size={64} color=\"#9CA3AF\" />\n            <Text className=\"text-gray-500 text-base mt-4 text-center font-semibold\">\n              Search Quality Logs\n            </Text>\n            <Text className=\"text-gray-400 text-sm mt-2 text-center px-4\">\n              Fill in one or more fields above and tap Search to find quality log entries\n            </Text>\n          </View>\n        ) : searchResults.length === 0 ? (\n          <View className=\"items-center justify-center p-8 mt-12\">\n            <Ionicons name=\"document-text-outline\" size={64} color=\"#9CA3AF\" />\n            <Text className=\"text-gray-500 text-base mt-4 text-center font-semibold\">\n              No Matches Found\n            </Text>\n            <Text className=\"text-gray-400 text-sm mt-2 text-center px-4\">\n              No quality logs match your search criteria\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            <Text className=\"text-sm font-semibold text-gray-500 mb-1\">\n              Found {searchResults.length} {searchResults.length === 1 ? 'result' : 'results'}\n            </Text>\n\n            {searchResults.map((result, index) => {\n              const statusColor = getStatusColor(result.log.overallStatus);\n              const deptColor = getDepartmentColor(result.log.department);\n              const openIssues = result.log.issues?.filter((i) => i.status === 'Open').length || 0;\n              const criticalIssues = result.log.issues?.filter((i) => i.severity === 'Critical').length || 0;\n              \n              return (\n                <Pressable\n                  key={`${result.log.id}-${index}`}\n                  onPress={() => navigation.navigate('QualityLogDetail', { logId: result.log.id })}\n                  className=\"bg-white rounded-xl p-4 border border-gray-200 active:bg-gray-50\"\n                >\n                  {/* Header with Date and Department */}\n                  <View className=\"flex-row items-center justify-between mb-3\">\n                    <View className=\"flex-row items-center gap-2\">\n                      <Ionicons name=\"calendar-outline\" size={16} color=\"#6B7280\" />\n                      <Text className=\"text-base font-bold text-gray-900\">\n                        {formatDate(result.log.date)}\n                      </Text>\n                    </View>\n                    <View style={{ backgroundColor: deptColor.bg }} className=\"px-3 py-1 rounded-full\">\n                      <Text style={{ color: deptColor.text }} className=\"text-xs font-bold\">\n                        {result.log.department}\n                      </Text>\n                    </View>\n                  </View>\n\n                  {/* Status Badge */}\n                  <View\n                    style={{ backgroundColor: statusColor.bg }}\n                    className=\"self-start px-3 py-1 rounded-full mb-3\"\n                  >\n                    <Text style={{ color: statusColor.text }} className=\"text-xs font-bold\">\n                      {result.log.overallStatus}\n                    </Text>\n                  </View>\n\n                  {/* Matched Field Indicator */}\n                  {result.matchedField && (\n                    <View className=\"flex-row items-center mb-2\">\n                      <Ionicons name=\"checkmark-circle\" size={14} color=\"#10B981\" />\n                      <Text className=\"text-xs text-gray-600 ml-1\">\n                        Matched: {result.matchedField}\n                      </Text>\n                    </View>\n                  )}\n\n                  {/* Production Items Count or Extruded Entries Count */}\n                  {result.log.extrudedEntries && result.log.extrudedEntries.length > 0 ? (\n                    <View className=\"flex-row items-center mb-2\">\n                      <Ionicons name=\"cube-outline\" size={14} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-600 ml-2\">\n                        {result.log.extrudedEntries.length} extruded {result.log.extrudedEntries.length === 1 ? 'entry' : 'entries'}\n                      </Text>\n                    </View>\n                  ) : result.log.productionItems && result.log.productionItems.length > 0 ? (\n                    <View className=\"flex-row items-center mb-2\">\n                      <Ionicons name=\"cube-outline\" size={14} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-600 ml-2\">\n                        {result.log.productionItems.length} production {result.log.productionItems.length === 1 ? 'item' : 'items'}\n                      </Text>\n                    </View>\n                  ) : null}\n\n                  {/* Issue Stats */}\n                  {result.log.issues && result.log.issues.length > 0 && (\n                    <View className=\"flex-row gap-4 mt-3 pt-3 border-t border-gray-100\">\n                      <View className=\"flex-row items-center gap-1\">\n                        <Ionicons name=\"alert-circle-outline\" size={16} color=\"#6B7280\" />\n                        <Text className=\"text-sm text-gray-600\">\n                          {result.log.issues.length} {result.log.issues.length === 1 ? 'issue' : 'issues'}\n                        </Text>\n                      </View>\n                      {openIssues > 0 && (\n                        <View className=\"flex-row items-center gap-1\">\n                          <Ionicons name=\"time-outline\" size={16} color=\"#F59E0B\" />\n                          <Text className=\"text-sm text-amber-600 font-semibold\">\n                            {openIssues} open\n                          </Text>\n                        </View>\n                      )}\n                      {criticalIssues > 0 && (\n                        <View className=\"flex-row items-center gap-1\">\n                          <Ionicons name=\"warning\" size={16} color=\"#EF4444\" />\n                          <Text className=\"text-sm text-red-600 font-semibold\">\n                            {criticalIssues} critical\n                          </Text>\n                        </View>\n                      )}\n                    </View>\n                  )}\n\n                  {/* Tap to view hint */}\n                  <View className=\"flex-row items-center justify-center mt-3 pt-3 border-t border-gray-100\">\n                    <Text className=\"text-xs text-blue-600 font-medium\">\n                      Tap to view details\n                    </Text>\n                    <Ionicons name=\"chevron-forward\" size={14} color=\"#3B82F6\" style={{ marginLeft: 4 }} />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, Pressable, ScrollView, TextInput, Modal, Alert } from \"react-native\";\nimport { SafeAreaView, useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useQualityLogStore } from \"../state/qualityLogStore\";\nimport { useProductLibraryStore } from \"../state/productLibraryStore\";\nimport { useState } from \"react\";\nimport { IssueSeverity, DepartmentType } from \"../types/quality-log\";\nimport { ProductType } from \"../types/product-library\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"IssueCodeLibrary\">;\n\nexport default function IssueCodeLibraryScreen({ navigation }: Props) {\n  const insets = useSafeAreaInsets();\n  const issueCodes = useQualityLogStore((s) => s.issueCodes);\n  const addIssueCode = useQualityLogStore((s) => s.addIssueCode);\n  const deleteIssueCode = useQualityLogStore((s) => s.deleteIssueCode);\n  const products = useProductLibraryStore((s) => s.products);\n\n  const [showModal, setShowModal] = useState(false);\n  const [code, setCode] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [severity, setSeverity] = useState<IssueSeverity>(\"Minor\");\n  const [department, setDepartment] = useState<DepartmentType | undefined>();\n  const [selectedProducts, setSelectedProducts] = useState<ProductType[]>([]);\n\n  const handleAdd = () => {\n    if (!code.trim() || !title.trim() || !description.trim()) {\n      Alert.alert(\"Error\", \"Please fill in all required fields\");\n      return;\n    }\n\n    const codeNum = parseInt(code);\n    if (isNaN(codeNum)) {\n      Alert.alert(\"Error\", \"Issue code must be a number\");\n      return;\n    }\n\n    if (selectedProducts.length === 0) {\n      Alert.alert(\"Warning\", \"No products selected. This issue code will not have tolerance references.\", [\n        { text: \"Cancel\", style: \"cancel\" },\n        { text: \"Save Anyway\", onPress: () => performAdd(codeNum) },\n      ]);\n      return;\n    }\n\n    performAdd(codeNum);\n  };\n\n  const performAdd = (codeNum: number) => {\n    addIssueCode({\n      code: codeNum,\n      title,\n      description,\n      severity,\n      department,\n      applicableProducts: selectedProducts,\n    });\n\n    // Reset form\n    setCode(\"\");\n    setTitle(\"\");\n    setDescription(\"\");\n    setSeverity(\"Minor\");\n    setDepartment(undefined);\n    setSelectedProducts([]);\n    setShowModal(false);\n  };\n\n  const handleDelete = (id: string) => {\n    Alert.alert(\"Delete Issue Code\", \"Are you sure you want to delete this issue code?\", [\n      { text: \"Cancel\", style: \"cancel\" },\n      {\n        text: \"Delete\",\n        style: \"destructive\",\n        onPress: () => deleteIssueCode(id),\n      },\n    ]);\n  };\n\n  const getSeverityColor = (sev: IssueSeverity) => {\n    switch (sev) {\n      case \"Critical\":\n        return { bg: \"#FEE2E2\", text: \"#991B1B\" };\n      case \"Major\":\n        return { bg: \"#FED7AA\", text: \"#9A3412\" };\n      case \"Minor\":\n        return { bg: \"#FEF3C7\", text: \"#92400E\" };\n      case \"Observation\":\n        return { bg: \"#E0E7FF\", text: \"#3730A3\" };\n    }\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 24 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 24 }}>\n            <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\", marginBottom: 8 }}>\n              Issue Code Library\n            </Text>\n            <Text style={{ fontSize: 16, color: \"#6B7280\" }}>\n              Manage standard issue codes for quality logging\n            </Text>\n          </View>\n\n          {/* Add Button */}\n          <Pressable\n            onPress={() => setShowModal(true)}\n            style={{\n              backgroundColor: \"#3B82F6\",\n              borderRadius: 16,\n              padding: 16,\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 24,\n              shadowColor: \"#000\",\n              shadowOffset: { width: 0, height: 2 },\n              shadowOpacity: 0.1,\n              shadowRadius: 4,\n              elevation: 3,\n            }}\n          >\n            <Ionicons name=\"add-circle\" size={24} color=\"#FFFFFF\" />\n            <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\", marginLeft: 8 }}>\n              Add Issue Code\n            </Text>\n          </Pressable>\n\n          {/* Issue Codes */}\n          {issueCodes.length === 0 ? (\n            <View\n              style={{\n                backgroundColor: \"#FFFFFF\",\n                borderRadius: 16,\n                padding: 32,\n                alignItems: \"center\",\n                borderWidth: 1,\n                borderColor: \"#E5E7EB\",\n              }}\n            >\n              <Ionicons name=\"code-slash-outline\" size={48} color=\"#9CA3AF\" />\n              <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginTop: 12 }}>\n                No Issue Codes Yet\n              </Text>\n              <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8, textAlign: \"center\" }}>\n                Add your first issue code to start standardizing quality issue tracking.\n              </Text>\n            </View>\n          ) : (\n            <View style={{ gap: 12 }}>\n              {issueCodes\n                .sort((a, b) => a.code - b.code)\n                .map((issueCode) => {\n                  const severityColor = getSeverityColor(issueCode.severity);\n\n                  return (\n                    <View\n                      key={issueCode.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 12,\n                        padding: 16,\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    >\n                      <View style={{ flexDirection: \"row\", alignItems: \"flex-start\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                        <View style={{ flex: 1 }}>\n                          <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8, marginBottom: 6 }}>\n                            <View\n                              style={{\n                                backgroundColor: \"#F3F4F6\",\n                                paddingHorizontal: 12,\n                                paddingVertical: 4,\n                                borderRadius: 8,\n                              }}\n                            >\n                              <Text style={{ fontSize: 16, fontWeight: \"700\", color: \"#111827\" }}>\n                                #{issueCode.code}\n                              </Text>\n                            </View>\n                            <View\n                              style={{\n                                backgroundColor: severityColor.bg,\n                                paddingHorizontal: 8,\n                                paddingVertical: 4,\n                                borderRadius: 6,\n                              }}\n                            >\n                              <Text style={{ fontSize: 11, fontWeight: \"600\", color: severityColor.text }}>\n                                {issueCode.severity}\n                              </Text>\n                            </View>\n                            {issueCode.department && (\n                              <View\n                                style={{\n                                  backgroundColor: \"#E0E7FF\",\n                                  paddingHorizontal: 8,\n                                  paddingVertical: 4,\n                                  borderRadius: 6,\n                                }}\n                              >\n                                <Text style={{ fontSize: 11, fontWeight: \"600\", color: \"#3730A3\" }}>\n                                  {issueCode.department}\n                                </Text>\n                              </View>\n                            )}\n                          </View>\n                          <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginBottom: 6 }}>\n                            {issueCode.title}\n                          </Text>\n                          <Text style={{ fontSize: 14, color: \"#6B7280\", lineHeight: 20 }}>\n                            {issueCode.description}\n                          </Text>\n                          {issueCode.applicableProducts && issueCode.applicableProducts.length > 0 && (\n                            <View style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 8, flexWrap: \"wrap\", gap: 4 }}>\n                              <Ionicons name=\"cube-outline\" size={14} color=\"#6366F1\" />\n                              <Text style={{ fontSize: 13, color: \"#6366F1\", fontWeight: \"500\" }}>\n                                Products:\n                              </Text>\n                              {issueCode.applicableProducts.map((product, idx) => (\n                                <Text key={idx} style={{ fontSize: 12, color: \"#6366F1\" }}>\n                                  {product}{idx < issueCode.applicableProducts.length - 1 ? \",\" : \"\"}\n                                </Text>\n                              ))}\n                            </View>\n                          )}\n                        </View>\n                        <Pressable\n                          onPress={() => handleDelete(issueCode.id)}\n                          style={{\n                            backgroundColor: \"#FEE2E2\",\n                            padding: 8,\n                            borderRadius: 8,\n                            marginLeft: 8,\n                          }}\n                        >\n                          <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                        </Pressable>\n                      </View>\n                    </View>\n                  );\n                })}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Add Modal */}\n      <Modal visible={showModal} animationType=\"slide\" transparent>\n        <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}>\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderTopLeftRadius: 24,\n              borderTopRightRadius: 24,\n              padding: 24,\n              paddingBottom: insets.bottom + 24,\n            }}\n          >\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  Add Issue Code\n                </Text>\n                <Pressable onPress={() => setShowModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n\n              <ScrollView style={{ maxHeight: 500 }} keyboardShouldPersistTaps=\"handled\">\n                <View style={{ gap: 16 }}>\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Issue Code Number *\n                    </Text>\n                    <TextInput\n                      value={code}\n                      onChangeText={setCode}\n                      placeholder=\"e.g., 101\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      keyboardType=\"number-pad\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Title *\n                    </Text>\n                    <TextInput\n                      value={title}\n                      onChangeText={setTitle}\n                      placeholder=\"e.g., Concrete Segregation\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Description *\n                    </Text>\n                    <TextInput\n                      value={description}\n                      onChangeText={setDescription}\n                      placeholder=\"Describe the issue in detail...\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      multiline\n                      numberOfLines={3}\n                      textAlignVertical=\"top\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                        minHeight: 80,\n                      }}\n                    />\n                  </View>\n\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Severity *\n                    </Text>\n                    <View style={{ flexDirection: \"row\", gap: 8 }}>\n                      {([\"Critical\", \"Major\", \"Minor\", \"Observation\"] as const).map((sev) => (\n                        <Pressable\n                          key={sev}\n                          onPress={() => setSeverity(sev)}\n                          style={{\n                            flex: 1,\n                            backgroundColor: severity === sev ? \"#9333EA\" : \"#F3F4F6\",\n                            paddingVertical: 10,\n                            borderRadius: 8,\n                            alignItems: \"center\",\n                          }}\n                        >\n                          <Text\n                            style={{\n                              fontSize: 11,\n                              fontWeight: \"600\",\n                              color: severity === sev ? \"#FFFFFF\" : \"#6B7280\",\n                            }}\n                          >\n                            {sev}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Department (Optional)\n                    </Text>\n                    <View style={{ flexDirection: \"row\", gap: 8, flexWrap: \"wrap\" }}>\n                      {([\"Flexicore\", \"Wall Panels\", \"Extruded\", \"Precast\"] as const).map((dept) => (\n                        <Pressable\n                          key={dept}\n                          onPress={() => setDepartment(department === dept ? undefined : dept)}\n                          style={{\n                            backgroundColor: department === dept ? \"#3B82F6\" : \"#F3F4F6\",\n                            paddingVertical: 8,\n                            paddingHorizontal: 12,\n                            borderRadius: 8,\n                          }}\n                        >\n                          <Text\n                            style={{\n                              fontSize: 12,\n                              fontWeight: \"600\",\n                              color: department === dept ? \"#FFFFFF\" : \"#6B7280\",\n                            }}\n                          >\n                            {dept}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                    <Text style={{ fontSize: 12, color: \"#9CA3AF\", marginTop: 6 }}>\n                      Leave unselected for global availability\n                    </Text>\n                  </View>\n\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Applicable Products\n                    </Text>\n                    <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}>\n                      {products.map((product) => {\n                        const isSelected = selectedProducts.includes(product.name);\n                        return (\n                          <Pressable\n                            key={product.id}\n                            onPress={() => {\n                              if (isSelected) {\n                                setSelectedProducts(selectedProducts.filter((p) => p !== product.name));\n                              } else {\n                                setSelectedProducts([...selectedProducts, product.name]);\n                              }\n                            }}\n                            style={{\n                              backgroundColor: isSelected ? \"#6366F1\" : \"#F3F4F6\",\n                              paddingVertical: 8,\n                              paddingHorizontal: 12,\n                              borderRadius: 8,\n                            }}\n                          >\n                            <Text\n                              style={{\n                                fontSize: 12,\n                                fontWeight: \"600\",\n                                color: isSelected ? \"#FFFFFF\" : \"#6B7280\",\n                              }}\n                            >\n                              {product.name}\n                            </Text>\n                          </Pressable>\n                        );\n                      })}\n                    </View>\n                    <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginTop: 8 }}>\n                      <Text style={{ fontSize: 12, color: \"#9CA3AF\" }}>\n                        Select products this issue applies to\n                      </Text>\n                      <Pressable\n                        onPress={() => navigation.navigate(\"ProductLibrary\")}\n                        style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\n                      >\n                        <Ionicons name=\"add-circle-outline\" size={16} color=\"#3B82F6\" />\n                        <Text style={{ fontSize: 12, color: \"#3B82F6\", fontWeight: \"500\" }}>\n                          Manage Products\n                        </Text>\n                      </Pressable>\n                    </View>\n                  </View>\n                </View>\n              </ScrollView>\n\n              <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                <Pressable\n                  onPress={() => setShowModal(false)}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#F3F4F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleAdd}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#3B82F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>Add Code</Text>\n                </Pressable>\n              </View>\n            </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, Pressable, ScrollView, TextInput, Modal, Keyboard, TouchableWithoutFeedback, Alert, KeyboardAvoidingView, Platform } from \"react-native\";\nimport { SafeAreaView, useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useProductLibraryStore } from \"../state/productLibraryStore\";\nimport { useState, useEffect } from \"react\";\nimport { ProductType, ToleranceSpec } from \"../types/product-library\";\nimport CrossSection8048 from \"../components/CrossSection8048\";\nimport CrossSection1048 from \"../components/CrossSection1048\";\nimport CrossSection1247 from \"../components/CrossSection1247\";\nimport CrossSection1250 from \"../components/CrossSection1250\";\nimport CrossSection1648 from \"../components/CrossSection1648\";\nimport CrossSection1650 from \"../components/CrossSection1650\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"ProductLibrary\">;\n\nexport default function ProductLibraryScreen({ navigation }: Props) {\n  const insets = useSafeAreaInsets();\n  const products = useProductLibraryStore((s) => s.products);\n  const initialize = useProductLibraryStore((s) => s.initialize);\n  const addProduct = useProductLibraryStore((s) => s.addProduct);\n  const updateProduct = useProductLibraryStore((s) => s.updateProduct);\n  const deleteProduct = useProductLibraryStore((s) => s.deleteProduct);\n  const addSubProduct = useProductLibraryStore((s) => s.addSubProduct);\n  const updateSubProduct = useProductLibraryStore((s) => s.updateSubProduct);\n  const deleteSubProduct = useProductLibraryStore((s) => s.deleteSubProduct);\n\n  // Initialize Firebase on mount\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [expandedProductId, setExpandedProductId] = useState<string | null>(null);\n  const [expandedSubProductId, setExpandedSubProductId] = useState<string | null>(null);\n\n  // Sub-product modal state\n  const [showSubProductModal, setShowSubProductModal] = useState(false);\n  const [editingSubProductId, setEditingSubProductId] = useState<string | null>(null);\n  const [currentProductId, setCurrentProductId] = useState<string | null>(null);\n  const [subProductName, setSubProductName] = useState(\"\");\n  const [subProductDescription, setSubProductDescription] = useState(\"\");\n  const [subProductTolerances, setSubProductTolerances] = useState<ToleranceSpec[]>([]);\n\n  // Cross-section properties\n  const [subProductArea, setSubProductArea] = useState(\"\");\n  const [subProductEffectiveWebWidth, setSubProductEffectiveWebWidth] = useState(\"\");\n  const [subProductMomentOfInertia, setSubProductMomentOfInertia] = useState(\"\");\n  const [subProductDistanceToBottomFiber, setSubProductDistanceToBottomFiber] = useState(\"\");\n\n  // Strength characteristics\n  const [subProductDeadLoad, setSubProductDeadLoad] = useState(\"\");\n  const [subProductDeadLoadPerLinearFoot, setSubProductDeadLoadPerLinearFoot] = useState<number | null>(null);\n  const [subProductFc28Day, setSubProductFc28Day] = useState(\"\");\n  const [subProductFciRelease, setSubProductFciRelease] = useState(\"\");\n  const [subProductFpu, setSubProductFpu] = useState(\"\");\n  const [subProductCrossSectionComponent, setSubProductCrossSectionComponent] = useState(\"\");\n\n  // Auto-calculate dead load per linear foot when dead load (PSF) changes\n  useEffect(() => {\n    const psfValue = parseFloat(subProductDeadLoad);\n    if (!isNaN(psfValue) && psfValue > 0) {\n      // Dead load per linear foot = (PSF  4 feet width)\n      // Using 4 feet as standard width (48 inches)\n      const plfValue = psfValue * 4;\n      setSubProductDeadLoadPerLinearFoot(plfValue);\n    } else {\n      setSubProductDeadLoadPerLinearFoot(null);\n    }\n  }, [subProductDeadLoad]);\n\n  // Form state\n  const [productType, setProductType] = useState<ProductType>(\"Beams\");\n  const [description, setDescription] = useState(\"\");\n  const [tolerances, setTolerances] = useState<ToleranceSpec[]>([]);\n  \n  // Tolerance form state\n  const [showToleranceModal, setShowToleranceModal] = useState(false);\n  const [editingToleranceIndex, setEditingToleranceIndex] = useState<number | null>(null);\n  const [dimension, setDimension] = useState(\"\");\n  const [minValue, setMinValue] = useState(\"\");\n  const [maxValue, setMaxValue] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  const productTypes: ProductType[] = [\n    \"Beams\",\n    \"Hollow Core Slabs\",\n    \"Solid Slabs\",\n    \"Stadia\",\n    \"Columns\",\n    \"Wall Panels\",\n    \"Stairs\",\n  ];\n\n  const handleAddTolerance = () => {\n    if (!dimension.trim() || !minValue.trim() || !maxValue.trim()) {\n      Alert.alert(\"Error\", \"Dimension, min value, and max value are required\");\n      return;\n    }\n\n    const newTolerance: ToleranceSpec = {\n      dimension: dimension.trim(),\n      min: minValue.trim(),\n      max: maxValue.trim(),\n      notes: notes.trim() || undefined,\n    };\n\n    // Check if we're editing sub-product tolerances\n    if (showSubProductModal) {\n      if (editingToleranceIndex !== null) {\n        setSubProductTolerances(subProductTolerances.map((t, i) => (i === editingToleranceIndex ? newTolerance : t)));\n      } else {\n        setSubProductTolerances([...subProductTolerances, newTolerance]);\n      }\n    } else {\n      // Otherwise, we're editing product tolerances\n      if (editingToleranceIndex !== null) {\n        setTolerances(tolerances.map((t, i) => (i === editingToleranceIndex ? newTolerance : t)));\n      } else {\n        setTolerances([...tolerances, newTolerance]);\n      }\n    }\n\n    // Reset tolerance form\n    setDimension(\"\");\n    setMinValue(\"\");\n    setMaxValue(\"\");\n    setNotes(\"\");\n    setEditingToleranceIndex(null);\n    setShowToleranceModal(false);\n  };\n\n  const handleEditTolerance = (index: number) => {\n    const tolerance = tolerances[index];\n    setDimension(tolerance.dimension);\n    setMinValue(tolerance.min);\n    setMaxValue(tolerance.max);\n    setNotes(tolerance.notes || \"\");\n    setEditingToleranceIndex(index);\n    setShowToleranceModal(true);\n  };\n\n  const handleDeleteTolerance = (index: number) => {\n    setTolerances(tolerances.filter((_, i) => i !== index));\n  };\n\n  const handleSaveProduct = () => {\n    if (!description.trim()) {\n      Alert.alert(\"Error\", \"Description is required\");\n      return;\n    }\n\n    if (tolerances.length === 0) {\n      Alert.alert(\"Warning\", \"Are you sure you want to save without any tolerances?\", [\n        { text: \"Cancel\", style: \"cancel\" },\n        { text: \"Save Anyway\", onPress: () => performSave() },\n      ]);\n      return;\n    }\n\n    performSave();\n  };\n\n  const performSave = () => {\n    // Check if product type already exists\n    const existingProduct = products.find((p) => p.name === productType && p.id !== editingId);\n    \n    if (existingProduct) {\n      Alert.alert(\"Error\", `A product of type \"${productType}\" already exists. Please edit the existing one.`);\n      return;\n    }\n\n    if (editingId) {\n      updateProduct(editingId, {\n        name: productType,\n        description,\n        tolerances,\n      });\n    } else {\n      addProduct({\n        name: productType,\n        description,\n        tolerances,\n        isActive: true,\n      });\n    }\n\n    resetForm();\n    setShowAddModal(false);\n  };\n\n  const resetForm = () => {\n    setProductType(\"Beams\");\n    setDescription(\"\");\n    setTolerances([]);\n    setEditingId(null);\n  };\n\n  const handleEdit = (productId: string) => {\n    const product = products.find((p) => p.id === productId);\n    if (!product) return;\n\n    setEditingId(productId);\n    setProductType(product.name);\n    setDescription(product.description || \"\");\n    setTolerances([...product.tolerances]);\n    setShowAddModal(true);\n  };\n\n  const handleDelete = (productId: string) => {\n    Alert.alert(\"Delete Product\", \"Are you sure you want to delete this product? This action cannot be undone.\", [\n      { text: \"Cancel\", style: \"cancel\" },\n      {\n        text: \"Delete\",\n        style: \"destructive\",\n        onPress: () => deleteProduct(productId),\n      },\n    ]);\n  };\n\n  // Sub-product handlers\n  const handleAddSubProduct = (productId: string) => {\n    setCurrentProductId(productId);\n    setSubProductName(\"\");\n    setSubProductDescription(\"\");\n    setSubProductTolerances([]);\n    setSubProductArea(\"\");\n    setSubProductEffectiveWebWidth(\"\");\n    setSubProductMomentOfInertia(\"\");\n    setSubProductDistanceToBottomFiber(\"\");\n    setSubProductDeadLoad(\"\");\n    setSubProductDeadLoadPerLinearFoot(null);\n    setSubProductFc28Day(\"\");\n    setSubProductFciRelease(\"\");\n    setSubProductFpu(\"\");\n    setSubProductCrossSectionComponent(\"\");\n    setEditingSubProductId(null);\n    setShowSubProductModal(true);\n  };\n\n  const handleEditSubProduct = (productId: string, subProductId: string) => {\n    const product = products.find((p) => p.id === productId);\n    const subProduct = product?.subProducts?.find((sp) => sp.id === subProductId);\n    if (!subProduct) return;\n\n    setCurrentProductId(productId);\n    setEditingSubProductId(subProductId);\n    setSubProductName(subProduct.name);\n    setSubProductDescription(subProduct.description || \"\");\n    setSubProductTolerances([...subProduct.tolerances]);\n    setSubProductArea(subProduct.area?.toString() || \"\");\n    setSubProductEffectiveWebWidth(subProduct.effectiveWebWidth?.toString() || \"\");\n    setSubProductMomentOfInertia(subProduct.momentOfInertia?.toString() || \"\");\n    setSubProductDistanceToBottomFiber(subProduct.distanceToBottomFiber?.toString() || \"\");\n    setSubProductDeadLoad(subProduct.deadLoad || \"\");\n    setSubProductDeadLoadPerLinearFoot(subProduct.deadLoadPerLinearFoot || null);\n    setSubProductFc28Day(subProduct.fc28Day?.toString() || \"\");\n    setSubProductFciRelease(subProduct.fciRelease?.toString() || \"\");\n    setSubProductFpu(subProduct.fpu?.toString() || \"\");\n    setSubProductCrossSectionComponent(subProduct.crossSectionComponent || \"\");\n    setShowSubProductModal(true);\n  };\n\n  const handleSaveSubProduct = () => {\n    if (!currentProductId || !subProductName.trim()) {\n      Alert.alert(\"Error\", \"Sub-product name is required\");\n      return;\n    }\n\n    const updates: any = {\n      name: subProductName,\n      description: subProductDescription,\n      tolerances: subProductTolerances,\n      area: subProductArea ? parseFloat(subProductArea) : undefined,\n      effectiveWebWidth: subProductEffectiveWebWidth ? parseFloat(subProductEffectiveWebWidth) : undefined,\n      momentOfInertia: subProductMomentOfInertia ? parseFloat(subProductMomentOfInertia) : undefined,\n      distanceToBottomFiber: subProductDistanceToBottomFiber ? parseFloat(subProductDistanceToBottomFiber) : undefined,\n      deadLoad: subProductDeadLoad || undefined,\n      deadLoadPerLinearFoot: subProductDeadLoadPerLinearFoot || undefined,\n      fc28Day: subProductFc28Day ? parseInt(subProductFc28Day) : undefined,\n      fciRelease: subProductFciRelease ? parseInt(subProductFciRelease) : undefined,\n      fpu: subProductFpu ? parseFloat(subProductFpu) : undefined,\n      crossSectionComponent: subProductCrossSectionComponent || undefined,\n    };\n\n    if (editingSubProductId) {\n      updateSubProduct(currentProductId, editingSubProductId, updates);\n    } else {\n      addSubProduct(currentProductId, {\n        ...updates,\n        isActive: true,\n      });\n    }\n\n    setShowSubProductModal(false);\n    setCurrentProductId(null);\n    setEditingSubProductId(null);\n    setSubProductName(\"\");\n    setSubProductDescription(\"\");\n    setSubProductTolerances([]);\n    setSubProductArea(\"\");\n    setSubProductEffectiveWebWidth(\"\");\n    setSubProductMomentOfInertia(\"\");\n    setSubProductDistanceToBottomFiber(\"\");\n    setSubProductDeadLoad(\"\");\n    setSubProductDeadLoadPerLinearFoot(null);\n    setSubProductFc28Day(\"\");\n    setSubProductFciRelease(\"\");\n    setSubProductFpu(\"\");\n    setSubProductCrossSectionComponent(\"\");\n  };\n\n  const handleDeleteSubProduct = (productId: string, subProductId: string) => {\n    Alert.alert(\"Delete Sub-Product\", \"Are you sure you want to delete this sub-product?\", [\n      { text: \"Cancel\", style: \"cancel\" },\n      {\n        text: \"Delete\",\n        style: \"destructive\",\n        onPress: () => deleteSubProduct(productId, subProductId),\n      },\n    ]);\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 24 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 24 }}>\n            <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\", marginBottom: 8 }}>\n              Product Library\n            </Text>\n            <Text style={{ fontSize: 16, color: \"#6B7280\" }}>\n              Manage product types and their tolerances\n            </Text>\n          </View>\n\n          {/* Add Button */}\n          <Pressable\n            onPress={() => {\n              resetForm();\n              setShowAddModal(true);\n            }}\n            style={{\n              backgroundColor: \"#3B82F6\",\n              borderRadius: 16,\n              padding: 16,\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 24,\n              shadowColor: \"#000\",\n              shadowOffset: { width: 0, height: 2 },\n              shadowOpacity: 0.1,\n              shadowRadius: 4,\n              elevation: 3,\n            }}\n          >\n            <Ionicons name=\"add-circle\" size={24} color=\"#FFFFFF\" />\n            <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\", marginLeft: 8 }}>\n              Add Product Type\n            </Text>\n          </Pressable>\n\n          {/* Products List */}\n          {products.length === 0 ? (\n            <View\n              style={{\n                backgroundColor: \"#FFFFFF\",\n                borderRadius: 16,\n                padding: 32,\n                alignItems: \"center\",\n                borderWidth: 1,\n                borderColor: \"#E5E7EB\",\n              }}\n            >\n              <Ionicons name=\"cube-outline\" size={48} color=\"#9CA3AF\" />\n              <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginTop: 12 }}>\n                No Products Yet\n              </Text>\n              <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8, textAlign: \"center\" }}>\n                Add your first product type to start tracking tolerances.\n              </Text>\n            </View>\n          ) : (\n            <View style={{ gap: 12 }}>\n              {products\n                .sort((a, b) => a.name.localeCompare(b.name))\n                .map((product) => {\n                  const isExpanded = expandedProductId === product.id;\n\n                  return (\n                    <View\n                      key={product.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 12,\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                        overflow: \"hidden\",\n                      }}\n                    >\n                      {/* Product Header */}\n                      <Pressable\n                        onPress={() => setExpandedProductId(isExpanded ? null : product.id)}\n                        style={{ padding: 16 }}\n                      >\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                          <View style={{ flex: 1 }}>\n                            <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginBottom: 4 }}>\n                              {product.name}\n                            </Text>\n                            <Text style={{ fontSize: 14, color: \"#6B7280\" }}>\n                              {product.description}\n                            </Text>\n                            <View style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 8, gap: 6 }}>\n                              <Ionicons name=\"resize-outline\" size={14} color=\"#6366F1\" />\n                              <Text style={{ fontSize: 13, color: \"#6366F1\", fontWeight: \"500\" }}>\n                                {product.tolerances.length} {product.tolerances.length === 1 ? \"tolerance\" : \"tolerances\"}\n                              </Text>\n                            </View>\n                          </View>\n                          <View style={{ flexDirection: \"row\", gap: 8, alignItems: \"center\" }}>\n                            <Pressable\n                              onPress={() => handleEdit(product.id)}\n                              style={{\n                                backgroundColor: \"#EFF6FF\",\n                                padding: 8,\n                                borderRadius: 8,\n                              }}\n                            >\n                              <Ionicons name=\"pencil\" size={16} color=\"#3B82F6\" />\n                            </Pressable>\n                            <Pressable\n                              onPress={() => handleDelete(product.id)}\n                              style={{\n                                backgroundColor: \"#FEE2E2\",\n                                padding: 8,\n                                borderRadius: 8,\n                              }}\n                            >\n                              <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                            </Pressable>\n                            <Ionicons\n                              name={isExpanded ? \"chevron-up\" : \"chevron-down\"}\n                              size={20}\n                              color=\"#6B7280\"\n                            />\n                          </View>\n                        </View>\n                      </Pressable>\n\n                      {/* Expanded Tolerances and Sub-Products */}\n                      {isExpanded && (\n                        <View style={{ padding: 16, paddingTop: 0 }}>\n                          {/* Sub-Products Section */}\n                          {(product.subProducts && product.subProducts.length > 0) && (\n                            <View style={{ marginBottom: 16, paddingTop: 16, borderTopWidth: 1, borderTopColor: \"#E5E7EB\" }}>\n                              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 12 }}>\n                                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\" }}>\n                                  Sub-Products ({product.subProducts.length}):\n                                </Text>\n                                <Pressable\n                                  onPress={() => handleAddSubProduct(product.id)}\n                                  style={{\n                                    backgroundColor: \"#10B981\",\n                                    paddingHorizontal: 10,\n                                    paddingVertical: 6,\n                                    borderRadius: 6,\n                                    flexDirection: \"row\",\n                                    alignItems: \"center\",\n                                    gap: 4,\n                                  }}\n                                >\n                                  <Ionicons name=\"add\" size={16} color=\"#FFFFFF\" />\n                                  <Text style={{ color: \"#FFFFFF\", fontSize: 12, fontWeight: \"600\" }}>Add Sub-Product</Text>\n                                </Pressable>\n                              </View>\n                              <View style={{ gap: 8 }}>\n                                {product.subProducts.map((subProduct) => {\n                                  const isSubExpanded = expandedSubProductId === subProduct.id;\n                                  return (\n                                    <View\n                                      key={subProduct.id}\n                                      style={{\n                                        backgroundColor: \"#F3F4F6\",\n                                        borderRadius: 8,\n                                        borderWidth: 1,\n                                        borderColor: \"#D1D5DB\",\n                                        overflow: \"hidden\",\n                                      }}\n                                    >\n                                      <Pressable\n                                        onPress={() => setExpandedSubProductId(isSubExpanded ? null : subProduct.id)}\n                                        style={{ padding: 12 }}\n                                      >\n                                        <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                                          <View style={{ flex: 1 }}>\n                                            <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\", marginBottom: 2 }}>\n                                              {subProduct.name}\n                                            </Text>\n                                            {subProduct.description && (\n                                              <Text style={{ fontSize: 13, color: \"#6B7280\" }}>\n                                                {subProduct.description}\n                                              </Text>\n                                            )}\n                                            <View style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 6, gap: 8, flexWrap: \"wrap\" }}>\n                                              {subProduct.deadLoad && (\n                                                <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 3 }}>\n                                                  <Ionicons name=\"scale-outline\" size={12} color=\"#8B5CF6\" />\n                                                  <Text style={{ fontSize: 11, color: \"#8B5CF6\", fontWeight: \"500\" }}>\n                                                    DL: {subProduct.deadLoad}\n                                                  </Text>\n                                                </View>\n                                              )}\n                                              {subProduct.fc28Day && (\n                                                <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 3 }}>\n                                                  <Ionicons name=\"cube-outline\" size={12} color=\"#F59E0B\" />\n                                                  <Text style={{ fontSize: 11, color: \"#F59E0B\", fontWeight: \"500\" }}>\n                                                    f'c: {subProduct.fc28Day} psi\n                                                  </Text>\n                                                </View>\n                                              )}\n                                              {subProduct.fciRelease && (\n                                                <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 3 }}>\n                                                  <Ionicons name=\"flash-outline\" size={12} color=\"#EF4444\" />\n                                                  <Text style={{ fontSize: 11, color: \"#EF4444\", fontWeight: \"500\" }}>\n                                                    f'ci: {subProduct.fciRelease} psi\n                                                  </Text>\n                                                </View>\n                                              )}\n                                              <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 3 }}>\n                                                <Ionicons name=\"resize-outline\" size={12} color=\"#10B981\" />\n                                                <Text style={{ fontSize: 11, color: \"#10B981\", fontWeight: \"500\" }}>\n                                                  {subProduct.tolerances.length} {subProduct.tolerances.length === 1 ? \"tolerance\" : \"tolerances\"}\n                                                </Text>\n                                              </View>\n                                            </View>\n                                          </View>\n                                          <View style={{ flexDirection: \"row\", gap: 6, alignItems: \"center\" }}>\n                                            <Pressable\n                                              onPress={() => handleEditSubProduct(product.id, subProduct.id)}\n                                              style={{\n                                                backgroundColor: \"#DBEAFE\",\n                                                padding: 6,\n                                                borderRadius: 6,\n                                              }}\n                                            >\n                                              <Ionicons name=\"pencil\" size={14} color=\"#2563EB\" />\n                                            </Pressable>\n                                            <Pressable\n                                              onPress={() => handleDeleteSubProduct(product.id, subProduct.id)}\n                                              style={{\n                                                backgroundColor: \"#FEE2E2\",\n                                                padding: 6,\n                                                borderRadius: 6,\n                                              }}\n                                            >\n                                              <Ionicons name=\"trash-outline\" size={14} color=\"#DC2626\" />\n                                            </Pressable>\n                                            <Ionicons\n                                              name={isSubExpanded ? \"chevron-up\" : \"chevron-down\"}\n                                              size={18}\n                                              color=\"#6B7280\"\n                                            />\n                                          </View>\n                                        </View>\n                                      </Pressable>\n\n                                      {/* Sub-Product Details */}\n                                      {isSubExpanded && (\n                                        <View style={{ padding: 12, paddingTop: 0, borderTopWidth: 1, borderTopColor: \"#D1D5DB\" }}>\n                                          {/* Cross-section illustration */}\n                                          {subProduct.crossSectionComponent && (\n                                            <View style={{ marginBottom: 12, backgroundColor: \"#F9FAFB\", padding: 12, borderRadius: 6, alignItems: \"center\" }}>\n                                              <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#4B5563\", marginBottom: 8, textAlign: \"center\" }}>\n                                                Cross Section (Cores & Webs)\n                                              </Text>\n                                              {/* Render the appropriate cross-section component */}\n                                              {subProduct.name === '8048' && (\n                                                <CrossSection8048 scale={4} showDimensions={false} />\n                                              )}\n                                              {subProduct.name === '1048' && (\n                                                <CrossSection1048 scale={4} showDimensions={false} />\n                                              )}\n                                              {subProduct.name === '1247' && (\n                                                <CrossSection1247 scale={4} showDimensions={false} />\n                                              )}\n                                              {subProduct.name === '1250' && (\n                                                <CrossSection1250 scale={4} showDimensions={false} />\n                                              )}\n                                              {subProduct.name === '1648' && (\n                                                <CrossSection1648 scale={4} showDimensions={false} />\n                                              )}\n                                              {subProduct.name === '1650' && (\n                                                <CrossSection1650 scale={4} showDimensions={false} />\n                                              )}\n                                            </View>\n                                          )}\n\n                                          {/* Cross-Section Properties */}\n                                          {(subProduct.area || subProduct.effectiveWebWidth || subProduct.momentOfInertia || subProduct.distanceToBottomFiber) && (\n                                            <View style={{ marginBottom: 12 }}>\n                                              <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#4B5563\", marginBottom: 8 }}>\n                                                Cross-Section Properties:\n                                              </Text>\n                                              <View style={{ gap: 6 }}>\n                                                {subProduct.area && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>A (Area):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#10B981\" }}>{subProduct.area} in</Text>\n                                                  </View>\n                                                )}\n                                                {subProduct.effectiveWebWidth && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>B<Text style={{ fontSize: 9 }}>w</Text> (Effective Web Width):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#10B981\" }}>{subProduct.effectiveWebWidth} in</Text>\n                                                  </View>\n                                                )}\n                                                {subProduct.momentOfInertia && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>I<Text style={{ fontSize: 9 }}>g</Text> (Moment of Inertia):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#10B981\" }}>{subProduct.momentOfInertia} in</Text>\n                                                  </View>\n                                                )}\n                                                {subProduct.distanceToBottomFiber && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Y<Text style={{ fontSize: 9 }}>b</Text> (Distance to Bottom):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#10B981\" }}>{subProduct.distanceToBottomFiber} in</Text>\n                                                  </View>\n                                                )}\n                                              </View>\n                                            </View>\n                                          )}\n\n                                          {/* Technical Specifications */}\n                                          {(subProduct.deadLoad || subProduct.deadLoadPerLinearFoot || subProduct.fc28Day || subProduct.fciRelease || subProduct.fpu) && (\n                                            <View style={{ marginBottom: 12 }}>\n                                              <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#4B5563\", marginBottom: 8 }}>\n                                                Strength Characteristics:\n                                              </Text>\n                                              <View style={{ gap: 6 }}>\n                                                {subProduct.deadLoad && (\n                                                  <View style={{ backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\n                                                      <Text style={{ fontSize: 12, color: \"#6B7280\" }}>Dead Load:</Text>\n                                                      <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#8B5CF6\" }}>{subProduct.deadLoad} psf</Text>\n                                                    </View>\n                                                    {subProduct.deadLoadPerLinearFoot && (\n                                                      <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginTop: 4 }}>\n                                                        <Text style={{ fontSize: 11, color: \"#9CA3AF\" }}>Per Linear Foot:</Text>\n                                                        <Text style={{ fontSize: 11, fontWeight: \"600\", color: \"#A78BFA\" }}>{subProduct.deadLoadPerLinearFoot.toFixed(1)} plf</Text>\n                                                      </View>\n                                                    )}\n                                                  </View>\n                                                )}\n                                                {subProduct.fc28Day && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>f'c (28-day):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#F59E0B\" }}>{subProduct.fc28Day} psi</Text>\n                                                  </View>\n                                                )}\n                                                {subProduct.fciRelease && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>f'ci (Release):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#EF4444\" }}>{subProduct.fciRelease} psi</Text>\n                                                  </View>\n                                                )}\n                                                {subProduct.fpu && (\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", backgroundColor: \"#FFFFFF\", padding: 8, borderRadius: 6 }}>\n                                                    <Text style={{ fontSize: 12, color: \"#6B7280\" }}>f'<Text style={{ fontSize: 9 }}>pu</Text> (Strand Strength):</Text>\n                                                    <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#EC4899\" }}>{subProduct.fpu} ksi</Text>\n                                                  </View>\n                                                )}\n                                              </View>\n                                            </View>\n                                          )}\n\n                                          {/* Tolerances */}\n                                          <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#4B5563\", marginBottom: 8 }}>\n                                            Tolerances:\n                                          </Text>\n                                          {subProduct.tolerances.length === 0 ? (\n                                            <Text style={{ fontSize: 12, color: \"#9CA3AF\", fontStyle: \"italic\" }}>\n                                              No tolerances defined\n                                            </Text>\n                                          ) : (\n                                            <View style={{ gap: 6 }}>\n                                              {subProduct.tolerances.map((tolerance, index) => (\n                                                <View\n                                                  key={index}\n                                                  style={{\n                                                    backgroundColor: \"#FFFFFF\",\n                                                    padding: 10,\n                                                    borderRadius: 6,\n                                                    borderWidth: 1,\n                                                    borderColor: \"#E5E7EB\",\n                                                  }}\n                                                >\n                                                  <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\n                                                    <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#111827\" }}>\n                                                      {tolerance.dimension}\n                                                    </Text>\n                                                    <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#10B981\" }}>\n                                                      {tolerance.min} to {tolerance.max}\n                                                    </Text>\n                                                  </View>\n                                                  {tolerance.notes && (\n                                                    <Text style={{ fontSize: 11, color: \"#6B7280\", marginTop: 4 }}>\n                                                      {tolerance.notes}\n                                                    </Text>\n                                                  )}\n                                                </View>\n                                              ))}\n                                            </View>\n                                          )}\n                                        </View>\n                                      )}\n                                    </View>\n                                  );\n                                })}\n                              </View>\n                            </View>\n                          )}\n\n                          {/* Add Sub-Product Button (if no sub-products yet) */}\n                          {(!product.subProducts || product.subProducts.length === 0) && (\n                            <View style={{ marginBottom: 16, paddingTop: 16, borderTopWidth: 1, borderTopColor: \"#E5E7EB\" }}>\n                              <Pressable\n                                onPress={() => handleAddSubProduct(product.id)}\n                                style={{\n                                  backgroundColor: \"#F0FDF4\",\n                                  padding: 12,\n                                  borderRadius: 8,\n                                  borderWidth: 1,\n                                  borderColor: \"#86EFAC\",\n                                  flexDirection: \"row\",\n                                  alignItems: \"center\",\n                                  justifyContent: \"center\",\n                                  gap: 6,\n                                }}\n                              >\n                                <Ionicons name=\"add-circle\" size={18} color=\"#10B981\" />\n                                <Text style={{ color: \"#10B981\", fontSize: 13, fontWeight: \"600\" }}>\n                                  Add Sub-Product Type\n                                </Text>\n                              </Pressable>\n                            </View>\n                          )}\n\n                          {/* Product-level Tolerances */}\n                          <View style={{ borderTopWidth: 1, borderTopColor: \"#E5E7EB\", paddingTop: 16 }}>\n                            <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 12 }}>\n                              Product Tolerances:\n                            </Text>\n                            {product.tolerances.length === 0 ? (\n                              <Text style={{ fontSize: 13, color: \"#9CA3AF\", fontStyle: \"italic\" }}>\n                                No tolerances defined\n                              </Text>\n                            ) : (\n                              <View style={{ gap: 8 }}>\n                                {product.tolerances.map((tolerance, index) => (\n                                  <View\n                                    key={index}\n                                    style={{\n                                      backgroundColor: \"#F9FAFB\",\n                                      padding: 12,\n                                      borderRadius: 8,\n                                      borderWidth: 1,\n                                      borderColor: \"#E5E7EB\",\n                                    }}\n                                  >\n                                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 4 }}>\n                                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\" }}>\n                                        {tolerance.dimension}\n                                      </Text>\n                                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#6366F1\" }}>\n                                        {tolerance.min} to {tolerance.max}\n                                      </Text>\n                                    </View>\n                                    {tolerance.notes && (\n                                      <Text style={{ fontSize: 12, color: \"#6B7280\", marginTop: 4 }}>\n                                        {tolerance.notes}\n                                      </Text>\n                                    )}\n                                  </View>\n                                ))}\n                              </View>\n                            )}\n                          </View>\n                        </View>\n                      )}\n                    </View>\n                  );\n                })}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Add/Edit Product Modal */}\n      <Modal visible={showAddModal && !showToleranceModal} animationType=\"slide\" transparent>\n        <KeyboardAvoidingView\n          behavior={Platform.OS === \"ios\" ? \"padding\" : undefined}\n          style={{ flex: 1 }}\n          keyboardVerticalOffset={Platform.OS === \"ios\" ? 0 : 0}\n        >\n          <Pressable\n            style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\n            onPress={Keyboard.dismiss}\n          >\n            <Pressable onPress={(e) => e.stopPropagation()}>\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderTopLeftRadius: 24,\n                  borderTopRightRadius: 24,\n                  padding: 24,\n                  paddingBottom: insets.bottom + 24,\n                  maxHeight: \"90%\",\n                }}\n              >\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  {editingId ? \"Edit Product\" : \"Add Product Type\"}\n                </Text>\n                <Pressable onPress={() => setShowAddModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n\n              <ScrollView style={{ maxHeight: 500 }} keyboardShouldPersistTaps=\"handled\">\n                <View style={{ gap: 16 }}>\n                  {/* Product Type */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Product Type *\n                    </Text>\n                    <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}>\n                      {productTypes.map((type) => (\n                        <Pressable\n                          key={type}\n                          onPress={() => setProductType(type)}\n                          style={{\n                            backgroundColor: productType === type ? \"#3B82F6\" : \"#F3F4F6\",\n                            paddingVertical: 8,\n                            paddingHorizontal: 12,\n                            borderRadius: 8,\n                          }}\n                        >\n                          <Text\n                            style={{\n                              fontSize: 13,\n                              fontWeight: \"600\",\n                              color: productType === type ? \"#FFFFFF\" : \"#6B7280\",\n                            }}\n                          >\n                            {type}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n\n                  {/* Description */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Description *\n                    </Text>\n                    <TextInput\n                      value={description}\n                      onChangeText={setDescription}\n                      placeholder=\"Brief description of this product type...\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      selectionColor=\"#3B82F6\"\n                      multiline\n                      numberOfLines={2}\n                      textAlignVertical=\"top\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                        minHeight: 60,\n                      }}\n                    />\n                  </View>\n\n                  {/* Tolerances */}\n                  <View>\n                    <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 8 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\" }}>\n                        Tolerances\n                      </Text>\n                      <Pressable\n                        onPress={() => {\n                          setDimension(\"\");\n                          setMinValue(\"\");\n                          setMaxValue(\"\");\n                          setNotes(\"\");\n                          setEditingToleranceIndex(null);\n                          setShowToleranceModal(true);\n                        }}\n                        style={{\n                          backgroundColor: \"#10B981\",\n                          paddingHorizontal: 10,\n                          paddingVertical: 6,\n                          borderRadius: 6,\n                          flexDirection: \"row\",\n                          alignItems: \"center\",\n                          gap: 4,\n                        }}\n                      >\n                        <Ionicons name=\"add\" size={16} color=\"#FFFFFF\" />\n                        <Text style={{ color: \"#FFFFFF\", fontSize: 12, fontWeight: \"600\" }}>Add</Text>\n                      </Pressable>\n                    </View>\n\n                    {tolerances.length === 0 ? (\n                      <View\n                        style={{\n                          backgroundColor: \"#F9FAFB\",\n                          padding: 16,\n                          borderRadius: 8,\n                          alignItems: \"center\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      >\n                        <Text style={{ fontSize: 13, color: \"#9CA3AF\" }}>\n                          No tolerances added yet\n                        </Text>\n                      </View>\n                    ) : (\n                      <View style={{ gap: 8 }}>\n                        {tolerances.map((tolerance, index) => (\n                          <View\n                            key={index}\n                            style={{\n                              backgroundColor: \"#F9FAFB\",\n                              padding: 12,\n                              borderRadius: 8,\n                              borderWidth: 1,\n                              borderColor: \"#E5E7EB\",\n                            }}\n                          >\n                            <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                              <View style={{ flex: 1 }}>\n                                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\", marginBottom: 2 }}>\n                                  {tolerance.dimension}: {tolerance.min} to {tolerance.max}\n                                </Text>\n                                {tolerance.notes && (\n                                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                                    {tolerance.notes}\n                                  </Text>\n                                )}\n                              </View>\n                              <View style={{ flexDirection: \"row\", gap: 8 }}>\n                                <Pressable\n                                  onPress={() => handleEditTolerance(index)}\n                                  style={{ padding: 4 }}\n                                >\n                                  <Ionicons name=\"pencil\" size={16} color=\"#3B82F6\" />\n                                </Pressable>\n                                <Pressable\n                                  onPress={() => handleDeleteTolerance(index)}\n                                  style={{ padding: 4 }}\n                                >\n                                  <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                                </Pressable>\n                              </View>\n                            </View>\n                          </View>\n                        ))}\n                      </View>\n                    )}\n                  </View>\n                </View>\n              </ScrollView>\n\n              <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                <Pressable\n                  onPress={() => setShowAddModal(false)}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#F3F4F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleSaveProduct}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#3B82F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>\n                    {editingId ? \"Update\" : \"Save\"}\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n            </Pressable>\n          </Pressable>\n        </KeyboardAvoidingView>\n      </Modal>\n\n      {/* Add/Edit Tolerance Modal */}\n      <Modal visible={showToleranceModal} animationType=\"slide\" transparent>\n        <KeyboardAvoidingView\n          behavior={Platform.OS === \"ios\" ? \"padding\" : undefined}\n          style={{ flex: 1 }}\n          keyboardVerticalOffset={Platform.OS === \"ios\" ? 0 : 0}\n        >\n          <Pressable\n            style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\n            onPress={Keyboard.dismiss}\n          >\n            <Pressable onPress={(e) => e.stopPropagation()}>\n              <View\n                style={{\n                backgroundColor: \"#FFFFFF\",\n                borderTopLeftRadius: 24,\n                borderTopRightRadius: 24,\n                padding: 24,\n                paddingBottom: insets.bottom + 24,\n              }}\n            >\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  {editingToleranceIndex !== null ? \"Edit Tolerance\" : \"Add Tolerance\"}\n                </Text>\n                <Pressable onPress={() => setShowToleranceModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n\n              <View style={{ gap: 16 }}>\n                <View>\n                  <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                    Dimension *\n                  </Text>\n                  <TextInput\n                    value={dimension}\n                    onChangeText={setDimension}\n                    placeholder=\"e.g., Length, Width, Thickness\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    selectionColor=\"#3B82F6\"\n                    style={{\n                      backgroundColor: \"#F9FAFB\",\n                      borderRadius: 12,\n                      padding: 12,\n                      fontSize: 14,\n                      color: \"#111827\",\n                      borderWidth: 1,\n                      borderColor: \"#E5E7EB\",\n                    }}\n                  />\n                </View>\n\n                <View style={{ flexDirection: \"row\", gap: 12 }}>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Min Value *\n                    </Text>\n                    <TextInput\n                      value={minValue}\n                      onChangeText={setMinValue}\n                      placeholder=\"e.g., -1/8, 0\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      selectionColor=\"#3B82F6\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Max Value *\n                    </Text>\n                    <TextInput\n                      value={maxValue}\n                      onChangeText={setMaxValue}\n                      placeholder=\"e.g., +1/8, +1/4\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      selectionColor=\"#3B82F6\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n                </View>\n\n                <View>\n                  <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                    Notes (Optional)\n                  </Text>\n                  <TextInput\n                    value={notes}\n                    onChangeText={setNotes}\n                    placeholder=\"Additional details...\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    selectionColor=\"#3B82F6\"\n                    multiline\n                    numberOfLines={2}\n                    textAlignVertical=\"top\"\n                    style={{\n                      backgroundColor: \"#F9FAFB\",\n                      borderRadius: 12,\n                      padding: 12,\n                      fontSize: 14,\n                      color: \"#111827\",\n                      borderWidth: 1,\n                      borderColor: \"#E5E7EB\",\n                      minHeight: 60,\n                    }}\n                  />\n                </View>\n              </View>\n\n              <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                <Pressable\n                  onPress={() => setShowToleranceModal(false)}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#F3F4F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleAddTolerance}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#10B981\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>\n                    {editingToleranceIndex !== null ? \"Update\" : \"Add\"}\n                  </Text>\n                </Pressable>\n              </View>\n              </View>\n            </Pressable>\n          </Pressable>\n        </KeyboardAvoidingView>\n      </Modal>\n\n      {/* Add/Edit Sub-Product Modal */}\n      <Modal visible={showSubProductModal && !showToleranceModal} animationType=\"slide\" transparent>\n        <KeyboardAvoidingView\n          behavior={Platform.OS === \"ios\" ? \"padding\" : undefined}\n          style={{ flex: 1 }}\n          keyboardVerticalOffset={Platform.OS === \"ios\" ? 0 : 0}\n        >\n          <Pressable\n            style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\n            onPress={Keyboard.dismiss}\n          >\n            <Pressable onPress={(e) => e.stopPropagation()}>\n              <View\n                style={{\n                backgroundColor: \"#FFFFFF\",\n                borderTopLeftRadius: 24,\n                borderTopRightRadius: 24,\n                padding: 24,\n                paddingBottom: insets.bottom + 24,\n                maxHeight: \"90%\",\n              }}\n            >\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  {editingSubProductId ? \"Edit Sub-Product\" : \"Add Sub-Product\"}\n                </Text>\n                <Pressable onPress={() => setShowSubProductModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n\n              <ScrollView style={{ maxHeight: 500 }} keyboardShouldPersistTaps=\"handled\">\n                <View style={{ gap: 16 }}>\n                  {/* Sub-Product Name */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Sub-Product Name *\n                    </Text>\n                    <TextInput\n                      value={subProductName}\n                      onChangeText={setSubProductName}\n                      placeholder=\"e.g., 8048, 1048, 1247, 1250\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      selectionColor=\"#3B82F6\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  {/* Description */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Description\n                    </Text>\n                    <TextInput\n                      value={subProductDescription}\n                      onChangeText={setSubProductDescription}\n                      placeholder=\"Brief description...\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      selectionColor=\"#3B82F6\"\n                      multiline\n                      numberOfLines={2}\n                      textAlignVertical=\"top\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                        minHeight: 60,\n                      }}\n                    />\n                  </View>\n\n                  {/* Cross-Section Properties */}\n                  <View style={{ backgroundColor: \"#F0FDF4\", padding: 12, borderRadius: 12, borderWidth: 1, borderColor: \"#86EFAC\" }}>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#065F46\", marginBottom: 12 }}>\n                      Cross-Section Properties\n                    </Text>\n\n                    {/* Area (A) */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        A - Area (in)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Area of concrete in the cross-section\n                      </Text>\n                      <TextInput\n                        value={subProductArea}\n                        onChangeText={setSubProductArea}\n                        placeholder=\"e.g., 293, 373\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n\n                    {/* Effective Web Width (Bw) */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        B<Text style={{ fontSize: 10 }}>w</Text> - Effective Web Width (in)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Effective web width\n                      </Text>\n                      <TextInput\n                        value={subProductEffectiveWebWidth}\n                        onChangeText={setSubProductEffectiveWebWidth}\n                        placeholder=\"e.g., 24.5, 28.2\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n\n                    {/* Moment of Inertia (Ig) */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        I<Text style={{ fontSize: 10 }}>g</Text> - Moment of Inertia (in)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Moment of inertia of the cross-section\n                      </Text>\n                      <TextInput\n                        value={subProductMomentOfInertia}\n                        onChangeText={setSubProductMomentOfInertia}\n                        placeholder=\"e.g., 5107, 10780\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n\n                    {/* Distance to Bottom Fiber (Yb) */}\n                    <View>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        Y<Text style={{ fontSize: 10 }}>b</Text> - Distance to Bottom Fiber (in)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Distance from neutral axis to extreme bottom fiber\n                      </Text>\n                      <TextInput\n                        value={subProductDistanceToBottomFiber}\n                        onChangeText={setSubProductDistanceToBottomFiber}\n                        placeholder=\"e.g., 4.0, 6.0\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n                  </View>\n\n                  {/* Technical Specifications */}\n                  <View style={{ backgroundColor: \"#F0F9FF\", padding: 12, borderRadius: 12, borderWidth: 1, borderColor: \"#BFDBFE\" }}>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#1E40AF\", marginBottom: 12 }}>\n                      Strength Characteristics\n                    </Text>\n\n                    {/* Dead Load */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        Dead Load (psf)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Pounds per square foot\n                      </Text>\n                      <TextInput\n                        value={subProductDeadLoad}\n                        onChangeText={setSubProductDeadLoad}\n                        placeholder=\"e.g., 65, 80, 95\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                      {subProductDeadLoadPerLinearFoot !== null && (\n                        <View style={{ marginTop: 8, backgroundColor: \"#F0F9FF\", padding: 8, borderRadius: 6, borderWidth: 1, borderColor: \"#BFDBFE\" }}>\n                          <Text style={{ fontSize: 12, color: \"#1E40AF\", fontWeight: \"600\" }}>\n                            Per Linear Foot: {subProductDeadLoadPerLinearFoot.toFixed(1)} plf\n                          </Text>\n                          <Text style={{ fontSize: 10, color: \"#6B7280\", marginTop: 2 }}>\n                            Based on 4 ft (48 in) width\n                          </Text>\n                        </View>\n                      )}\n                    </View>\n\n                    {/* f'c - 28 Day Strength */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 6 }}>\n                        f'c - 28-Day Strength (psi)\n                      </Text>\n                      <TextInput\n                        value={subProductFc28Day}\n                        onChangeText={setSubProductFc28Day}\n                        placeholder=\"e.g., 5000, 6000\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"numeric\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n\n                    {/* f'ci - Release Strength */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 6 }}>\n                        f'ci - Release Strength (psi)\n                      </Text>\n                      <TextInput\n                        value={subProductFciRelease}\n                        onChangeText={setSubProductFciRelease}\n                        placeholder=\"e.g., 3500, 4000\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"numeric\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n\n                    {/* f'pu - Ultimate Tensile Strength of Strand */}\n                    <View style={{ marginBottom: 12 }}>\n                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\", marginBottom: 4 }}>\n                        f'<Text style={{ fontSize: 10 }}>pu</Text> - Ultimate Tensile Strength (ksi)\n                      </Text>\n                      <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 6 }}>\n                        Ultimate tensile strength of the strand\n                      </Text>\n                      <TextInput\n                        value={subProductFpu}\n                        onChangeText={setSubProductFpu}\n                        placeholder=\"e.g., 270\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        selectionColor=\"#3B82F6\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#FFFFFF\",\n                          borderRadius: 8,\n                          padding: 10,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n                  </View>\n\n                  {/* Tolerances */}\n                  <View>\n                    <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 8 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\" }}>\n                        Tolerances\n                      </Text>\n                      <Pressable\n                        onPress={() => {\n                          setDimension(\"\");\n                          setMinValue(\"\");\n                          setMaxValue(\"\");\n                          setNotes(\"\");\n                          setEditingToleranceIndex(null);\n                          setShowToleranceModal(true);\n                        }}\n                        style={{\n                          backgroundColor: \"#10B981\",\n                          paddingHorizontal: 10,\n                          paddingVertical: 6,\n                          borderRadius: 6,\n                          flexDirection: \"row\",\n                          alignItems: \"center\",\n                          gap: 4,\n                        }}\n                      >\n                        <Ionicons name=\"add\" size={16} color=\"#FFFFFF\" />\n                        <Text style={{ color: \"#FFFFFF\", fontSize: 12, fontWeight: \"600\" }}>Add</Text>\n                      </Pressable>\n                    </View>\n\n                    {subProductTolerances.length === 0 ? (\n                      <View\n                        style={{\n                          backgroundColor: \"#F9FAFB\",\n                          padding: 16,\n                          borderRadius: 8,\n                          alignItems: \"center\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      >\n                        <Text style={{ fontSize: 13, color: \"#9CA3AF\" }}>\n                          No tolerances added yet\n                        </Text>\n                      </View>\n                    ) : (\n                      <View style={{ gap: 8 }}>\n                        {subProductTolerances.map((tolerance, index) => (\n                          <View\n                            key={index}\n                            style={{\n                              backgroundColor: \"#F9FAFB\",\n                              padding: 12,\n                              borderRadius: 8,\n                              borderWidth: 1,\n                              borderColor: \"#E5E7EB\",\n                            }}\n                          >\n                            <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                              <View style={{ flex: 1 }}>\n                                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\", marginBottom: 2 }}>\n                                  {tolerance.dimension}: {tolerance.min} to {tolerance.max}\n                                </Text>\n                                {tolerance.notes && (\n                                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                                    {tolerance.notes}\n                                  </Text>\n                                )}\n                              </View>\n                              <View style={{ flexDirection: \"row\", gap: 8 }}>\n                                <Pressable\n                                  onPress={() => {\n                                    setDimension(tolerance.dimension);\n                                    setMinValue(tolerance.min);\n                                    setMaxValue(tolerance.max);\n                                    setNotes(tolerance.notes || \"\");\n                                    setEditingToleranceIndex(index);\n                                    setShowToleranceModal(true);\n                                  }}\n                                  style={{ padding: 4 }}\n                                >\n                                  <Ionicons name=\"pencil\" size={16} color=\"#3B82F6\" />\n                                </Pressable>\n                                <Pressable\n                                  onPress={() => setSubProductTolerances(subProductTolerances.filter((_, i) => i !== index))}\n                                  style={{ padding: 4 }}\n                                >\n                                  <Ionicons name=\"trash-outline\" size={16} color=\"#EF4444\" />\n                                </Pressable>\n                              </View>\n                            </View>\n                          </View>\n                        ))}\n                      </View>\n                    )}\n                  </View>\n                </View>\n              </ScrollView>\n\n              <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                <Pressable\n                  onPress={() => setShowSubProductModal(false)}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#F3F4F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleSaveSubProduct}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#10B981\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>\n                    {editingSubProductId ? \"Update\" : \"Save\"}\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n          </Pressable>\n        </Pressable>\n        </KeyboardAvoidingView>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'ProjectLibrary'>;\n\nexport default function ProjectLibraryScreen({ navigation }: Props) {\n  const projects = useProjectLibraryStore((s) => s.projects);\n  const searchProjects = useProjectLibraryStore((s) => s.searchProjects);\n  \n  const [searchQuery, setSearchQuery] = useState('');\n  \n  const filteredProjects = searchQuery ? searchProjects(searchQuery) : projects;\n  \n  // Calculate total piece count for a project\n  const getTotalPieceCount = (project: any) => {\n    return project.pieceCountByType.reduce((sum: number, item: any) => sum + item.count, 0);\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"flex-row items-center justify-between px-4 py-3 bg-white border-b border-gray-200\">\n        <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n          <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n        </Pressable>\n        <Text className=\"text-xl font-bold text-gray-900\">Project Library</Text>\n        <Pressable \n          onPress={() => navigation.navigate('ProjectLibraryAddEdit', {})}\n          className=\"p-2\"\n        >\n          <Ionicons name=\"add-circle\" size={28} color=\"#3B82F6\" />\n        </Pressable>\n      </View>\n\n      {/* Search Bar */}\n      <View className=\"px-4 py-3 bg-white border-b border-gray-200\">\n        <View className=\"flex-row items-center bg-gray-100 rounded-lg px-3 py-2 mb-3\">\n          <Ionicons name=\"search\" size={20} color=\"#6B7280\" />\n          <TextInput\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholder=\"Search by job # or name...\"\n            placeholderTextColor=\"#9CA3AF\"\n            cursorColor=\"#000000\"\n            className=\"flex-1 ml-2 text-base text-gray-900\"\n          />\n          {searchQuery.length > 0 && (\n            <Pressable onPress={() => setSearchQuery('')}>\n              <Ionicons name=\"close-circle\" size={20} color=\"#6B7280\" />\n            </Pressable>\n          )}\n        </View>\n\n        {/* Export/Import Button */}\n        <Pressable\n          onPress={() => navigation.navigate('ProjectLibraryExportImport')}\n          className=\"flex-row items-center justify-center bg-blue-50 border border-blue-200 rounded-lg py-2 px-3\"\n        >\n          <Ionicons name=\"cloud-upload-outline\" size={18} color=\"#3B82F6\" />\n          <Text className=\"text-blue-600 text-sm font-semibold ml-2\">\n            Export / Import\n          </Text>\n        </Pressable>\n      </View>\n\n      {/* Projects List */}\n      <ScrollView className=\"flex-1\">\n        {filteredProjects.length === 0 ? (\n          <View className=\"flex-1 items-center justify-center p-8 mt-12\">\n            <Ionicons name=\"folder-open-outline\" size={64} color=\"#9CA3AF\" />\n            <Text className=\"text-gray-500 text-base mt-4 text-center\">\n              {searchQuery ? 'No projects found' : 'No projects yet'}\n            </Text>\n            {!searchQuery && (\n              <Text className=\"text-gray-400 text-sm mt-2 text-center\">\n                Tap the + button to add your first project\n              </Text>\n            )}\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            {filteredProjects.map((project) => {\n              const totalPieces = getTotalPieceCount(project);\n              \n              return (\n                <Pressable\n                  key={project.id}\n                  onPress={() => navigation.navigate('ProjectLibraryDetail', { projectId: project.id })}\n                  className=\"bg-white rounded-xl p-4 border border-gray-200 active:bg-gray-50\"\n                >\n                  <View className=\"flex-row justify-between items-start mb-2\">\n                    <View className=\"flex-1\">\n                      <Text className=\"text-base font-bold text-blue-600 mb-1\">\n                        {project.jobNumber}\n                      </Text>\n                      <Text className=\"text-base font-semibold text-gray-900\">\n                        {project.jobName}\n                      </Text>\n                    </View>\n                    <Ionicons name=\"chevron-forward\" size={20} color=\"#3B82F6\" />\n                  </View>\n                  \n                  {project.location && (\n                    <View className=\"flex-row items-center mt-2\">\n                      <Ionicons name=\"location-outline\" size={14} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-600 ml-1\" numberOfLines={1}>\n                        {project.location}\n                      </Text>\n                    </View>\n                  )}\n                  \n                  <View className=\"flex-row items-center justify-between mt-3 pt-3 border-t border-gray-100\">\n                    <View className=\"flex-row items-center\">\n                      <Ionicons name=\"cube-outline\" size={16} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-600 ml-1\">\n                        {totalPieces} {totalPieces === 1 ? 'piece' : 'pieces'}\n                      </Text>\n                    </View>\n                    \n                    {project.projectManager && (\n                      <View className=\"flex-row items-center\">\n                        <Ionicons name=\"person-outline\" size={16} color=\"#6B7280\" />\n                        <Text className=\"text-sm text-gray-600 ml-1\">\n                          {project.projectManager}\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import React from 'react';\nimport { View, Text, Pressable, ScrollView, Alert, Linking, Platform } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'ProjectLibraryDetail'>;\n\nexport default function ProjectLibraryDetailScreen({ navigation, route }: Props) {\n  const { projectId } = route.params;\n  const getProjectById = useProjectLibraryStore((s) => s.getProjectById);\n  const deleteProject = useProjectLibraryStore((s) => s.deleteProject);\n  \n  const project = getProjectById(projectId);\n\n  if (!project) {\n    return (\n      <SafeAreaView className=\"flex-1 bg-gray-50 items-center justify-center\">\n        <Text className=\"text-gray-500\">Project not found</Text>\n      </SafeAreaView>\n    );\n  }\n\n  const totalPieceCount = project.pieceCountByType.reduce((sum, item) => sum + item.count, 0);\n\n  const handleOpenMaps = () => {\n    if (!project.location) return;\n\n    const address = encodeURIComponent(project.location);\n    const url = Platform.select({\n      ios: `maps://app?address=${address}`,\n      android: `geo:0,0?q=${address}`,\n      default: `https://www.google.com/maps/search/?api=1&query=${address}`,\n    });\n\n    Linking.canOpenURL(url).then((supported) => {\n      if (supported) {\n        Linking.openURL(url);\n      } else {\n        // Fallback to Google Maps web\n        Linking.openURL(`https://www.google.com/maps/search/?api=1&query=${address}`);\n      }\n    });\n  };\n\n  const handleDelete = () => {\n    Alert.alert(\n      'Delete Project',\n      `Are you sure you want to delete \"${project.jobNumber} - ${project.jobName}\"?`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Delete',\n          style: 'destructive',\n          onPress: () => {\n            deleteProject(projectId);\n            navigation.goBack();\n          },\n        },\n      ]\n    );\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"flex-row items-center justify-between px-4 py-3 bg-white border-b border-gray-200\">\n        <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n          <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n        </Pressable>\n        <Text className=\"text-lg font-bold text-gray-900\">Project Details</Text>\n        <View className=\"flex-row gap-2\">\n          <Pressable \n            onPress={() => navigation.navigate('ProjectLibraryAddEdit', { projectId })}\n            className=\"p-2\"\n          >\n            <Ionicons name=\"create-outline\" size={24} color=\"#3B82F6\" />\n          </Pressable>\n          <Pressable onPress={handleDelete} className=\"p-2\">\n            <Ionicons name=\"trash-outline\" size={24} color=\"#EF4444\" />\n          </Pressable>\n        </View>\n      </View>\n\n      <ScrollView className=\"flex-1\">\n        <View className=\"p-4 gap-4\">\n          {/* Job Number & Name Card */}\n          <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n            <Text className=\"text-sm font-semibold text-gray-500 mb-2\">JOB INFORMATION</Text>\n            <View className=\"gap-3\">\n              <View>\n                <Text className=\"text-xs text-gray-500 mb-1\">Job Number</Text>\n                <Text className=\"text-lg font-bold text-blue-600\">{project.jobNumber}</Text>\n              </View>\n              <View>\n                <Text className=\"text-xs text-gray-500 mb-1\">Job Name</Text>\n                <Text className=\"text-base font-semibold text-gray-900\">{project.jobName}</Text>\n              </View>\n            </View>\n          </View>\n\n          {/* Location Card */}\n          {project.location && (\n            <Pressable \n              onPress={handleOpenMaps}\n              className=\"bg-white rounded-xl p-4 border border-gray-200 active:bg-gray-50\"\n            >\n              <View className=\"flex-row items-center justify-between\">\n                <View className=\"flex-1\">\n                  <Text className=\"text-sm font-semibold text-gray-500 mb-2\">LOCATION</Text>\n                  <Text className=\"text-base text-gray-900 mb-1\">{project.location}</Text>\n                  <View className=\"flex-row items-center mt-1\">\n                    <Ionicons name=\"map-outline\" size={14} color=\"#3B82F6\" />\n                    <Text className=\"text-sm text-blue-600 ml-1 font-medium\">\n                      Open in Maps\n                    </Text>\n                  </View>\n                </View>\n                <Ionicons name=\"chevron-forward\" size={20} color=\"#3B82F6\" />\n              </View>\n            </Pressable>\n          )}\n\n          {/* Team Card */}\n          <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n            <Text className=\"text-sm font-semibold text-gray-500 mb-3\">TEAM</Text>\n            <View className=\"gap-3\">\n              {project.salesperson && (\n                <View className=\"flex-row items-center\">\n                  <View className=\"w-24\">\n                    <Text className=\"text-xs text-gray-500\">Salesperson</Text>\n                  </View>\n                  <Text className=\"text-base text-gray-900 flex-1\">{project.salesperson}</Text>\n                </View>\n              )}\n              {project.projectManager && (\n                <View className=\"flex-row items-center\">\n                  <View className=\"w-24\">\n                    <Text className=\"text-xs text-gray-500\">PM</Text>\n                  </View>\n                  <Text className=\"text-base text-gray-900 flex-1\">{project.projectManager}</Text>\n                </View>\n              )}\n              {project.assignedEngineer && (\n                <View className=\"flex-row items-center\">\n                  <View className=\"w-24\">\n                    <Text className=\"text-xs text-gray-500\">Engineer</Text>\n                  </View>\n                  <Text className=\"text-base text-gray-900 flex-1\">{project.assignedEngineer}</Text>\n                </View>\n              )}\n              {project.assignedDrafter && (\n                <View className=\"flex-row items-center\">\n                  <View className=\"w-24\">\n                    <Text className=\"text-xs text-gray-500\">Drafter</Text>\n                  </View>\n                  <Text className=\"text-base text-gray-900 flex-1\">{project.assignedDrafter}</Text>\n                </View>\n              )}\n              {!project.salesperson && !project.projectManager && !project.assignedEngineer && !project.assignedDrafter && (\n                <Text className=\"text-gray-400 text-sm italic\">No team members assigned</Text>\n              )}\n            </View>\n          </View>\n\n          {/* Piece Count Card */}\n          <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n            <View className=\"flex-row items-center justify-between mb-3\">\n              <Text className=\"text-sm font-semibold text-gray-500\">PIECE COUNT</Text>\n              <View className=\"bg-blue-100 px-3 py-1 rounded-full\">\n                <Text className=\"text-base font-bold text-blue-700\">\n                  {totalPieceCount} Total\n                </Text>\n              </View>\n            </View>\n            \n            {project.pieceCountByType.length > 0 ? (\n              <View className=\"gap-2\">\n                {project.pieceCountByType.map((item, index) => (\n                  <View \n                    key={index}\n                    className=\"flex-row items-center justify-between py-2 border-b border-gray-100 last:border-b-0\"\n                  >\n                    <View className=\"flex-row items-center flex-1\">\n                      <Ionicons name=\"cube-outline\" size={16} color=\"#6B7280\" />\n                      <Text className=\"text-base text-gray-900 ml-2\">{item.productType}</Text>\n                    </View>\n                    <Text className=\"text-base font-semibold text-gray-700\">{item.count}</Text>\n                  </View>\n                ))}\n              </View>\n            ) : (\n              <Text className=\"text-gray-400 text-sm italic\">No piece counts added</Text>\n            )}\n          </View>\n\n          {/* Metadata */}\n          <View className=\"bg-gray-100 rounded-xl p-3\">\n            <Text className=\"text-xs text-gray-500\">\n              Created {new Date(project.createdAt).toLocaleDateString()} by {project.createdBy}\n            </Text>\n            {project.updatedAt !== project.createdAt && (\n              <Text className=\"text-xs text-gray-500 mt-1\">\n                Last updated {new Date(project.updatedAt).toLocaleDateString()}\n              </Text>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","/**\n * Job Number Validation Utilities\n * \n * Job Number Rules:\n * - Must be exactly 6 digits\n * - 2nd and 3rd digits must match\n * - Format: XYYZZZ where Y's must be the same\n * \n * Valid examples: 255096, 144523, 366789\n * Invalid examples: 123456 (2nd3rd), 12345 (too short), 1234567 (too long)\n */\n\nexport interface JobNumberValidationResult {\n  isValid: boolean;\n  error?: string;\n  cleaned?: string; // Job number with letters removed\n}\n\n/**\n * Extract 6-digit job number from string (removes letters/prefixes)\n * E.g., \"E-255096\" -> \"255096\", \"Job 144523\" -> \"144523\"\n */\nexport function extractJobNumber(input: string): string {\n  // Remove all non-digit characters\n  const digitsOnly = input.replace(/\\D/g, '');\n  \n  // If we have more than 6 digits, try to find a valid 6-digit sequence\n  if (digitsOnly.length > 6) {\n    // Look for 6 consecutive digits where 2nd and 3rd match\n    for (let i = 0; i <= digitsOnly.length - 6; i++) {\n      const candidate = digitsOnly.substring(i, i + 6);\n      if (candidate[1] === candidate[2]) {\n        return candidate;\n      }\n    }\n    // If no valid sequence found, take first 6 digits\n    return digitsOnly.substring(0, 6);\n  }\n  \n  return digitsOnly;\n}\n\n/**\n * Validate job number format\n */\nexport function validateJobNumber(input: string): JobNumberValidationResult {\n  if (!input || !input.trim()) {\n    return {\n      isValid: false,\n      error: 'Job number is required',\n    };\n  }\n\n  const cleaned = extractJobNumber(input);\n\n  // Check if we have exactly 6 digits\n  if (cleaned.length !== 6) {\n    return {\n      isValid: false,\n      error: `Job number must be exactly 6 digits (found ${cleaned.length})`,\n      cleaned,\n    };\n  }\n\n  // Check if 2nd and 3rd digits match\n  const secondDigit = cleaned[1];\n  const thirdDigit = cleaned[2];\n\n  if (secondDigit !== thirdDigit) {\n    return {\n      isValid: false,\n      error: `Invalid format: 2nd and 3rd digits must match (found ${secondDigit} and ${thirdDigit})`,\n      cleaned,\n    };\n  }\n\n  return {\n    isValid: true,\n    cleaned,\n  };\n}\n\n/**\n * Format job number with optional prefix\n * E.g., \"255096\" -> \"255096\" or \"E-255096\" with prefix\n */\nexport function formatJobNumber(jobNumber: string, prefix?: string): string {\n  const cleaned = extractJobNumber(jobNumber);\n  if (prefix) {\n    return `${prefix}-${cleaned}`;\n  }\n  return cleaned;\n}\n\n/**\n * Get user-friendly validation message\n */\nexport function getValidationMessage(result: JobNumberValidationResult): string {\n  if (result.isValid) {\n    return '';\n  }\n\n  if (result.error) {\n    return result.error;\n  }\n\n  return 'Invalid job number format';\n}\n\n/**\n * Check if input is a valid job number format\n * Quick check without detailed error messages\n */\nexport function isValidJobNumber(input: string): boolean {\n  const cleaned = extractJobNumber(input);\n  return cleaned.length === 6 && cleaned[1] === cleaned[2];\n}\n","import React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput, Alert, KeyboardAvoidingView, Platform } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\nimport { useAuthStore } from '../state/authStore';\nimport { PieceCountByType } from '../types/project-library';\nimport { validateJobNumber, getValidationMessage } from '../utils/jobNumberValidation';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'ProjectLibraryAddEdit'>;\n\nexport default function ProjectLibraryAddEditScreen({ navigation, route }: Props) {\n  const { projectId, prefilledJobNumber, prefilledJobName, returnScreen } = route.params;\n  const isEditing = !!projectId;\n  \n  const currentUser = useAuthStore((s) => s.currentUser);\n  const getProjectById = useProjectLibraryStore((s) => s.getProjectById);\n  const addProject = useProjectLibraryStore((s) => s.addProject);\n  const updateProject = useProjectLibraryStore((s) => s.updateProject);\n  \n  const existingProject = projectId ? getProjectById(projectId) : null;\n  \n  const [jobNumber, setJobNumber] = useState(\n    existingProject?.jobNumber || prefilledJobNumber || ''\n  );\n  const [jobName, setJobName] = useState(\n    existingProject?.jobName || prefilledJobName || ''\n  );\n  const [location, setLocation] = useState(existingProject?.location || '');\n  const [salesperson, setSalesperson] = useState(existingProject?.salesperson || '');\n  const [projectManager, setProjectManager] = useState(existingProject?.projectManager || '');\n  const [assignedEngineer, setAssignedEngineer] = useState(existingProject?.assignedEngineer || '');\n  const [assignedDrafter, setAssignedDrafter] = useState(existingProject?.assignedDrafter || '');\n  const [pieceCountByType, setPieceCountByType] = useState<PieceCountByType[]>(\n    existingProject?.pieceCountByType || []\n  );\n  \n  // New piece count entry\n  const [newProductType, setNewProductType] = useState('');\n  const [newCount, setNewCount] = useState('');\n\n  const handleSave = () => {\n    if (!jobNumber.trim() || !jobName.trim()) {\n      Alert.alert('Required Fields', 'Job Number and Job Name are required.');\n      return;\n    }\n\n    // Validate job number format\n    const validation = validateJobNumber(jobNumber);\n    if (!validation.isValid) {\n      Alert.alert(\n        'Invalid Job Number',\n        `${validation.error}\\n\\nJob number must be:\\n Exactly 6 digits\\n 2nd and 3rd digits must match\\n\\nExample: 255096, 144523, 366789`,\n        [{ text: 'OK' }]\n      );\n      return;\n    }\n\n    if (!currentUser) {\n      Alert.alert('Error', 'You must be logged in');\n      return;\n    }\n\n    const projectData = {\n      jobNumber: validation.cleaned || jobNumber.trim(),\n      jobName: jobName.trim(),\n      location: location.trim() || undefined,\n      salesperson: salesperson.trim() || undefined,\n      projectManager: projectManager.trim() || undefined,\n      assignedEngineer: assignedEngineer.trim() || undefined,\n      assignedDrafter: assignedDrafter.trim() || undefined,\n      pieceCountByType,\n      createdBy: currentUser.email,\n    };\n\n    if (isEditing) {\n      updateProject(projectId, projectData);\n    } else {\n      addProject(projectData);\n    }\n\n    // Navigate back appropriately\n    if (returnScreen === 'current') {\n      // User came from another screen to create project, go back to that screen\n      navigation.goBack();\n    } else {\n      // Normal flow, go back to list\n      navigation.goBack();\n    }\n  };\n\n  const handleAddPieceCount = () => {\n    if (!newProductType.trim()) {\n      Alert.alert('Missing Product Type', 'Please enter a product type.');\n      return;\n    }\n\n    const count = parseInt(newCount);\n    if (!count || count < 1) {\n      Alert.alert('Invalid Count', 'Please enter a valid piece count.');\n      return;\n    }\n\n    setPieceCountByType([...pieceCountByType, { productType: newProductType.trim(), count }]);\n    setNewProductType('');\n    setNewCount('');\n  };\n\n  const handleRemovePieceCount = (index: number) => {\n    setPieceCountByType(pieceCountByType.filter((_, i) => i !== index));\n  };\n\n  const totalPieces = pieceCountByType.reduce((sum, item) => sum + item.count, 0);\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"flex-row items-center justify-between px-4 py-3 bg-white border-b border-gray-200\">\n        <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n          <Ionicons name=\"close\" size={24} color=\"#111827\" />\n        </Pressable>\n        <View className=\"flex-1 items-center\">\n          <Text className=\"text-lg font-bold text-gray-900\">\n            {isEditing ? 'Edit Project' : 'New Project'}\n          </Text>\n          {returnScreen === 'current' && !isEditing && (\n            <Text className=\"text-xs text-gray-500\">Creating from job entry</Text>\n          )}\n        </View>\n        <Pressable onPress={handleSave} className=\"p-2\">\n          <Text className=\"text-base font-semibold text-blue-600\">Save</Text>\n        </Pressable>\n      </View>\n\n      <KeyboardAvoidingView \n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n        className=\"flex-1\"\n      >\n        <ScrollView className=\"flex-1\" keyboardShouldPersistTaps=\"handled\">\n          <View className=\"p-4 gap-4\">\n            {/* Info banner when creating from another screen */}\n            {returnScreen === 'current' && !isEditing && (\n              <View className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-2\">\n                <View className=\"flex-row items-start\">\n                  <Ionicons name=\"information-circle\" size={20} color=\"#3B82F6\" style={{ marginRight: 8, marginTop: 2 }} />\n                  <View className=\"flex-1\">\n                    <Text className=\"text-sm font-semibold text-blue-900 mb-1\">\n                      Quick Project Creation\n                    </Text>\n                    <Text className=\"text-sm text-blue-700\">\n                      After saving, you'll return to your previous screen with the job information filled in.\n                    </Text>\n                  </View>\n                </View>\n              </View>\n            )}\n\n            {/* Job Information */}\n            <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n              <Text className=\"text-sm font-semibold text-gray-500 mb-3\">JOB INFORMATION</Text>\n              \n              <View className=\"gap-4\">\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                    Job Number <Text className=\"text-red-500\">*</Text>\n                  </Text>\n                  <TextInput\n                    value={jobNumber}\n                    onChangeText={setJobNumber}\n                    placeholder=\"6 digits (e.g., 255096)\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    keyboardType=\"number-pad\"\n                    maxLength={10}\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                  <Text className=\"text-xs text-gray-500 mt-1\">\n                    Format: 6 digits, 2nd and 3rd must match\n                  </Text>\n                </View>\n\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                    Job Name <Text className=\"text-red-500\">*</Text>\n                  </Text>\n                  <TextInput\n                    value={jobName}\n                    onChangeText={setJobName}\n                    placeholder=\"Enter job name\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Location</Text>\n                  <TextInput\n                    value={location}\n                    onChangeText={setLocation}\n                    placeholder=\"Enter project address\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    multiline\n                    numberOfLines={2}\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n              </View>\n            </View>\n\n            {/* Team */}\n            <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n              <Text className=\"text-sm font-semibold text-gray-500 mb-3\">TEAM</Text>\n              \n              <View className=\"gap-4\">\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Salesperson</Text>\n                  <TextInput\n                    value={salesperson}\n                    onChangeText={setSalesperson}\n                    placeholder=\"Enter salesperson name\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Project Manager</Text>\n                  <TextInput\n                    value={projectManager}\n                    onChangeText={setProjectManager}\n                    placeholder=\"Enter PM name\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Assigned Engineer</Text>\n                  <TextInput\n                    value={assignedEngineer}\n                    onChangeText={setAssignedEngineer}\n                    placeholder=\"Enter engineer name\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n\n                <View>\n                  <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Assigned Drafter</Text>\n                  <TextInput\n                    value={assignedDrafter}\n                    onChangeText={setAssignedDrafter}\n                    placeholder=\"Enter drafter name\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n                  />\n                </View>\n              </View>\n            </View>\n\n            {/* Piece Count by Type */}\n            <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n              <View className=\"flex-row items-center justify-between mb-3\">\n                <Text className=\"text-sm font-semibold text-gray-500\">PIECE COUNT BY TYPE</Text>\n                {totalPieces > 0 && (\n                  <View className=\"bg-blue-100 px-2 py-1 rounded\">\n                    <Text className=\"text-xs font-bold text-blue-700\">{totalPieces} Total</Text>\n                  </View>\n                )}\n              </View>\n\n              {/* Existing Piece Counts */}\n              {pieceCountByType.length > 0 && (\n                <View className=\"gap-2 mb-4\">\n                  {pieceCountByType.map((item, index) => (\n                    <View \n                      key={index}\n                      className=\"flex-row items-center justify-between bg-gray-50 rounded-lg p-3\"\n                    >\n                      <View className=\"flex-1\">\n                        <Text className=\"text-base font-medium text-gray-900\">{item.productType}</Text>\n                        <Text className=\"text-sm text-gray-600\">{item.count} pieces</Text>\n                      </View>\n                      <Pressable onPress={() => handleRemovePieceCount(index)} className=\"p-2\">\n                        <Ionicons name=\"trash-outline\" size={20} color=\"#EF4444\" />\n                      </Pressable>\n                    </View>\n                  ))}\n                </View>\n              )}\n\n              {/* Add New Piece Count */}\n              <View className=\"border-t border-gray-200 pt-3\">\n                <Text className=\"text-xs font-semibold text-gray-500 mb-2\">ADD PIECE COUNT</Text>\n                <View className=\"gap-3\">\n                  <TextInput\n                    value={newProductType}\n                    onChangeText={setNewProductType}\n                    placeholder=\"Product type (e.g., Beam, Column)\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base text-gray-900\"\n                  />\n                  <View className=\"flex-row gap-2\">\n                    <TextInput\n                      value={newCount}\n                      onChangeText={setNewCount}\n                      placeholder=\"Count\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      keyboardType=\"number-pad\"\n                      className=\"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-base text-gray-900\"\n                    />\n                    <Pressable\n                      onPress={handleAddPieceCount}\n                      className=\"bg-blue-600 rounded-lg px-4 py-2 justify-center items-center\"\n                    >\n                      <Text className=\"text-white font-semibold\">Add</Text>\n                    </Pressable>\n                  </View>\n                </View>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n      </KeyboardAvoidingView>\n    </SafeAreaView>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput, Alert, Share } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\nimport * as Clipboard from 'expo-clipboard';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'ProjectLibraryExportImport'>;\n\nexport default function ProjectLibraryExportImportScreen({ navigation }: Props) {\n  const projects = useProjectLibraryStore((s) => s.projects);\n  const exportProjects = useProjectLibraryStore((s) => s.exportProjects);\n  const importProjects = useProjectLibraryStore((s) => s.importProjects);\n  const clearAllProjects = useProjectLibraryStore((s) => s.clearAllProjects);\n\n  const [importData, setImportData] = useState('');\n  const [statusMessage, setStatusMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  const handleExport = async () => {\n    try {\n      const jsonData = exportProjects();\n      \n      // Copy to clipboard\n      await Clipboard.setStringAsync(jsonData);\n      \n      setStatusMessage({ type: 'success', text: 'Projects exported to clipboard!' });\n      \n      // Also offer to share\n      setTimeout(() => {\n        Share.share({\n          message: jsonData,\n          title: 'Project Library Export',\n        }).catch(() => {\n          // User cancelled share, that's okay\n        });\n      }, 500);\n    } catch (error) {\n      setStatusMessage({ type: 'error', text: `Export failed: ${error}` });\n    }\n  };\n\n  const handleImport = () => {\n    if (!importData.trim()) {\n      setStatusMessage({ type: 'error', text: 'Please paste JSON data to import' });\n      return;\n    }\n\n    const result = importProjects(importData);\n    \n    if (result.success) {\n      setStatusMessage({ type: 'success', text: result.message });\n      setImportData('');\n    } else {\n      setStatusMessage({ type: 'error', text: result.message });\n    }\n  };\n\n  const handlePasteFromClipboard = async () => {\n    try {\n      const clipboardContent = await Clipboard.getStringAsync();\n      setImportData(clipboardContent);\n      setStatusMessage({ type: 'success', text: 'Pasted from clipboard' });\n    } catch (error) {\n      setStatusMessage({ type: 'error', text: 'Failed to paste from clipboard' });\n    }\n  };\n\n  const handleClearAll = () => {\n    Alert.alert(\n      'Clear All Projects',\n      `Are you sure you want to delete all ${projects.length} projects? This action cannot be undone.`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Delete All',\n          style: 'destructive',\n          onPress: () => {\n            clearAllProjects();\n            setStatusMessage({ type: 'success', text: 'All projects cleared' });\n          },\n        },\n      ]\n    );\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"bg-white border-b border-gray-200 px-4 py-3\">\n        <View className=\"flex-row items-center justify-between\">\n          <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n            <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n          </Pressable>\n          <Text className=\"text-xl font-bold text-gray-900 flex-1 ml-2\">\n            Export / Import Projects\n          </Text>\n        </View>\n      </View>\n\n      <ScrollView className=\"flex-1\">\n        <View className=\"p-4 gap-6\">\n          {/* Status Message */}\n          {statusMessage && (\n            <View\n              className={`rounded-lg p-4 ${\n                statusMessage.type === 'success' ? 'bg-green-100' : 'bg-red-100'\n              }`}\n            >\n              <View className=\"flex-row items-center gap-2\">\n                <Ionicons\n                  name={statusMessage.type === 'success' ? 'checkmark-circle' : 'alert-circle'}\n                  size={20}\n                  color={statusMessage.type === 'success' ? '#065F46' : '#991B1B'}\n                />\n                <Text\n                  className={`flex-1 text-sm font-medium ${\n                    statusMessage.type === 'success' ? 'text-green-800' : 'text-red-800'\n                  }`}\n                >\n                  {statusMessage.text}\n                </Text>\n                <Pressable onPress={() => setStatusMessage(null)}>\n                  <Ionicons name=\"close\" size={20} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n            </View>\n          )}\n\n          {/* Export Section */}\n          <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n            <View className=\"flex-row items-center gap-3 mb-3\">\n              <View className=\"bg-blue-100 rounded-full p-2\">\n                <Ionicons name=\"arrow-up-circle\" size={24} color=\"#3B82F6\" />\n              </View>\n              <Text className=\"text-lg font-bold text-gray-900\">Export Projects</Text>\n            </View>\n\n            <Text className=\"text-sm text-gray-600 mb-4\">\n              Export all {projects.length} projects as JSON data. You can share this data or save it as a backup.\n            </Text>\n\n            <Pressable\n              onPress={handleExport}\n              disabled={projects.length === 0}\n              className={`rounded-lg py-3 items-center ${\n                projects.length === 0 ? 'bg-gray-300' : 'bg-blue-600'\n              }`}\n            >\n              <View className=\"flex-row items-center gap-2\">\n                <Ionicons name=\"share-outline\" size={20} color=\"#FFFFFF\" />\n                <Text className=\"text-white text-base font-semibold\">\n                  Export {projects.length} {projects.length === 1 ? 'Project' : 'Projects'}\n                </Text>\n              </View>\n            </Pressable>\n\n            {projects.length === 0 && (\n              <Text className=\"text-xs text-gray-500 mt-2 text-center\">\n                No projects to export\n              </Text>\n            )}\n          </View>\n\n          {/* Import Section */}\n          <View className=\"bg-white rounded-xl p-4 border border-gray-200\">\n            <View className=\"flex-row items-center gap-3 mb-3\">\n              <View className=\"bg-green-100 rounded-full p-2\">\n                <Ionicons name=\"arrow-down-circle\" size={24} color=\"#10B981\" />\n              </View>\n              <Text className=\"text-lg font-bold text-gray-900\">Import Projects</Text>\n            </View>\n\n            <Text className=\"text-sm text-gray-600 mb-4\">\n              Paste JSON data below to import projects. Existing projects (same job number) will be skipped.\n            </Text>\n\n            <TextInput\n              value={importData}\n              onChangeText={setImportData}\n              placeholder=\"Paste JSON data here...\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              multiline\n              numberOfLines={8}\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-sm text-gray-900 mb-3\"\n              style={{ minHeight: 150, textAlignVertical: 'top' }}\n            />\n\n            <View className=\"gap-2\">\n              <Pressable\n                onPress={handlePasteFromClipboard}\n                className=\"bg-gray-600 rounded-lg py-3 items-center\"\n              >\n                <View className=\"flex-row items-center gap-2\">\n                  <Ionicons name=\"clipboard-outline\" size={20} color=\"#FFFFFF\" />\n                  <Text className=\"text-white text-base font-semibold\">\n                    Paste from Clipboard\n                  </Text>\n                </View>\n              </Pressable>\n\n              <Pressable\n                onPress={handleImport}\n                disabled={!importData.trim()}\n                className={`rounded-lg py-3 items-center ${\n                  !importData.trim() ? 'bg-gray-300' : 'bg-green-600'\n                }`}\n              >\n                <View className=\"flex-row items-center gap-2\">\n                  <Ionicons name=\"download-outline\" size={20} color=\"#FFFFFF\" />\n                  <Text className=\"text-white text-base font-semibold\">\n                    Import Projects\n                  </Text>\n                </View>\n              </Pressable>\n            </View>\n          </View>\n\n          {/* Danger Zone */}\n          <View className=\"bg-white rounded-xl p-4 border-2 border-red-200\">\n            <View className=\"flex-row items-center gap-3 mb-3\">\n              <View className=\"bg-red-100 rounded-full p-2\">\n                <Ionicons name=\"warning\" size={24} color=\"#EF4444\" />\n              </View>\n              <Text className=\"text-lg font-bold text-red-900\">Danger Zone</Text>\n            </View>\n\n            <Text className=\"text-sm text-gray-600 mb-4\">\n              Permanently delete all projects from the library. This action cannot be undone.\n            </Text>\n\n            <Pressable\n              onPress={handleClearAll}\n              disabled={projects.length === 0}\n              className={`rounded-lg py-3 items-center border-2 ${\n                projects.length === 0\n                  ? 'bg-gray-100 border-gray-300'\n                  : 'bg-red-50 border-red-600'\n              }`}\n            >\n              <View className=\"flex-row items-center gap-2\">\n                <Ionicons\n                  name=\"trash-outline\"\n                  size={20}\n                  color={projects.length === 0 ? '#9CA3AF' : '#DC2626'}\n                />\n                <Text\n                  className={`text-base font-semibold ${\n                    projects.length === 0 ? 'text-gray-400' : 'text-red-600'\n                  }`}\n                >\n                  Clear All Projects\n                </Text>\n              </View>\n            </Pressable>\n          </View>\n\n          {/* Info Section */}\n          <View className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\n            <View className=\"flex-row items-start gap-3\">\n              <Ionicons name=\"information-circle\" size={24} color=\"#3B82F6\" />\n              <View className=\"flex-1\">\n                <Text className=\"text-sm font-semibold text-blue-900 mb-2\">\n                  How to use Export/Import\n                </Text>\n                <Text className=\"text-xs text-blue-800 mb-1\">\n                   Export creates a JSON backup of all your projects\n                </Text>\n                <Text className=\"text-xs text-blue-800 mb-1\">\n                   Share exported data via email, messages, or save to files\n                </Text>\n                <Text className=\"text-xs text-blue-800 mb-1\">\n                   Import merges new projects without duplicating existing ones\n                </Text>\n                <Text className=\"text-xs text-blue-800\">\n                   Use this to backup data or transfer between devices\n                </Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","// Daily Pour Schedule Types\n\nexport type PourDepartment = 'Precast' | 'Extruded' | 'Wall Panels' | 'Flexicore';\n\nexport type PourStatus = 'Scheduled' | 'In Progress' | 'Completed' | 'Delayed' | 'Cancelled';\n\n// Form/Bed definitions by department\nexport interface FormBed {\n  id: string;\n  name: string;\n  department: PourDepartment;\n  capacity?: string; // e.g., \"60 ft\", \"200 sq ft\"\n  isActive: boolean;\n  notes?: string;\n}\n\n// Individual pour entry for a form/bed\nexport interface PourEntry {\n  id: string;\n  formBedId: string;\n  formBedName: string;\n  department: PourDepartment;\n  \n  // Job details\n  jobNumber: string;\n  jobName?: string;\n  idNumber?: string; // ID number from production schedule\n  markNumbers?: string; // e.g., \"M1-M5\" or \"M1, M3, M7\"\n  pieceCount?: number;\n  \n  // Product details\n  productType?: string;\n  dimensions?: string; // e.g., \"8' x 4' x 6\"\n  \n  // Mix design\n  mixDesign?: string;\n  concreteYards?: number;\n  \n  // Scheduling\n  scheduledDate: number; // Date of the pour\n  scheduledTime?: string; // e.g., \"8:00 AM\"\n  status: PourStatus;\n  \n  // Progress tracking\n  setupStartTime?: number;\n  pourStartTime?: number;\n  pourEndTime?: number;\n  stripTime?: number;\n  \n  // Team\n  foreman?: string;\n  crew?: string[];\n  \n  // Notes\n  notes?: string;\n  issues?: string;\n  \n  // Metadata\n  createdBy: string;\n  createdAt: number;\n  updatedAt: number;\n}\n\n// Daily schedule overview\nexport interface DailySchedule {\n  id: string;\n  date: number; // Date of the schedule\n  department: PourDepartment;\n  pourEntries: PourEntry[];\n  totalYards?: number;\n  shift?: 'Day' | 'Night';\n  notes?: string;\n  createdBy: string;\n  createdAt: number;\n  updatedAt: number;\n}\n\n// Department configuration with forms/beds\nexport interface DepartmentConfig {\n  department: PourDepartment;\n  forms: FormBed[];\n  totalCapacity?: string;\n  notes?: string;\n}\n\n// Default form/bed configurations\nexport const DEFAULT_FORMS: Record<PourDepartment, string[]> = {\n  'Precast': ['BL1', 'BL3', 'BL4', 'BL6', 'FTE1', 'FTE2', 'FTW1', 'FTW2', 'Columns', 'STAD', 'STAIRS'],\n  'Extruded': ['1', '2', '3', '4', '5', '6'],\n  'Wall Panels': [], // User can add custom forms\n  'Flexicore': [], // User can add custom forms\n};\n","/**\n * EliPlan API Integration\n * \n * This service connects to EliPlan scheduling software to pull production schedules.\n * \n * SETUP INSTRUCTIONS:\n * 1. Obtain API credentials from EliPlan\n * 2. Add to .env file:\n *    EXPO_PUBLIC_ELIPLAN_API_URL=https://your-eliplan-instance.com/api\n *    EXPO_PUBLIC_ELIPLAN_API_KEY=your_api_key\n *    EXPO_PUBLIC_ELIPLAN_USERNAME=your_username (if using basic auth)\n *    EXPO_PUBLIC_ELIPLAN_PASSWORD=your_password (if using basic auth)\n * \n * API Documentation: Contact EliPlan support for API documentation\n */\n\n// EliPlan API response types\nexport interface EliPlanScheduleItem {\n  // Production order details\n  productionOrderId?: string;\n  jobNumber: string;\n  jobName?: string;\n  customerName?: string;\n  \n  // Product details\n  productCode?: string;\n  productDescription?: string;\n  markNumber?: string;\n  pieceCount?: number;\n  dimensions?: string;\n  \n  // Material details\n  concreteGrade?: string;\n  concreteVolume?: number; // in cubic yards or cubic meters\n  mixDesignId?: string;\n  \n  // Scheduling\n  scheduledDate: string; // ISO date string\n  scheduledStartTime?: string;\n  scheduledEndTime?: string;\n  department?: string;\n  workstation?: string; // form/bed identifier\n  \n  // Status\n  status?: string;\n  priority?: number;\n  \n  // Additional fields\n  foreman?: string;\n  notes?: string;\n  [key: string]: any; // Allow for custom fields\n}\n\nexport interface EliPlanApiResponse {\n  success: boolean;\n  data?: EliPlanScheduleItem[];\n  error?: string;\n  message?: string;\n  total?: number;\n  page?: number;\n}\n\n// Configuration\nconst ELIPLAN_CONFIG = {\n  baseUrl: process.env.EXPO_PUBLIC_ELIPLAN_API_URL || '',\n  apiKey: process.env.EXPO_PUBLIC_ELIPLAN_API_KEY || '',\n  username: process.env.EXPO_PUBLIC_ELIPLAN_USERNAME || '',\n  password: process.env.EXPO_PUBLIC_ELIPLAN_PASSWORD || '',\n};\n\n/**\n * Check if EliPlan integration is configured\n */\nexport function isEliPlanConfigured(): boolean {\n  return !!(ELIPLAN_CONFIG.baseUrl && (ELIPLAN_CONFIG.apiKey || ELIPLAN_CONFIG.username));\n}\n\n/**\n * Fetch production schedule from EliPlan for a specific date\n */\nexport async function fetchEliPlanSchedule(\n  date: Date,\n  options?: {\n    department?: string;\n    includeCompleted?: boolean;\n  }\n): Promise<EliPlanScheduleItem[]> {\n  if (!isEliPlanConfigured()) {\n    throw new Error('EliPlan API is not configured. Please add credentials to .env file.');\n  }\n\n  try {\n    // Format date for API (adjust format based on EliPlan's requirements)\n    const dateStr = date.toISOString().split('T')[0]; // YYYY-MM-DD format\n    \n    // Build query parameters\n    const params = new URLSearchParams({\n      date: dateStr,\n      ...(options?.department && { department: options.department }),\n      ...(options?.includeCompleted !== undefined && { \n        includeCompleted: options.includeCompleted.toString() \n      }),\n    });\n\n    // Build headers\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n    };\n\n    // Add authentication\n    if (ELIPLAN_CONFIG.apiKey) {\n      // API Key authentication\n      headers['Authorization'] = `Bearer ${ELIPLAN_CONFIG.apiKey}`;\n      // Some APIs use different header names:\n      // headers['X-API-Key'] = ELIPLAN_CONFIG.apiKey;\n    } else if (ELIPLAN_CONFIG.username && ELIPLAN_CONFIG.password) {\n      // Basic authentication\n      const credentials = btoa(`${ELIPLAN_CONFIG.username}:${ELIPLAN_CONFIG.password}`);\n      headers['Authorization'] = `Basic ${credentials}`;\n    }\n\n    // Make API request\n    // Note: Adjust the endpoint path based on EliPlan's actual API structure\n    const response = await fetch(\n      `${ELIPLAN_CONFIG.baseUrl}/schedule?${params.toString()}`,\n      {\n        method: 'GET',\n        headers,\n        // Add timeout\n        signal: AbortSignal.timeout(30000), // 30 second timeout\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`EliPlan API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data: EliPlanApiResponse = await response.json();\n\n    if (!data.success) {\n      throw new Error(data.error || data.message || 'Unknown error from EliPlan API');\n    }\n\n    return data.data || [];\n  } catch (error) {\n    console.error('Error fetching EliPlan schedule:', error);\n    throw error;\n  }\n}\n\n/**\n * Fetch schedule for a date range\n */\nexport async function fetchEliPlanScheduleRange(\n  startDate: Date,\n  endDate: Date,\n  options?: {\n    department?: string;\n    includeCompleted?: boolean;\n  }\n): Promise<EliPlanScheduleItem[]> {\n  if (!isEliPlanConfigured()) {\n    throw new Error('EliPlan API is not configured. Please add credentials to .env file.');\n  }\n\n  try {\n    const startStr = startDate.toISOString().split('T')[0];\n    const endStr = endDate.toISOString().split('T')[0];\n    \n    const params = new URLSearchParams({\n      startDate: startStr,\n      endDate: endStr,\n      ...(options?.department && { department: options.department }),\n      ...(options?.includeCompleted !== undefined && { \n        includeCompleted: options.includeCompleted.toString() \n      }),\n    });\n\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n    };\n\n    if (ELIPLAN_CONFIG.apiKey) {\n      headers['Authorization'] = `Bearer ${ELIPLAN_CONFIG.apiKey}`;\n    } else if (ELIPLAN_CONFIG.username && ELIPLAN_CONFIG.password) {\n      const credentials = btoa(`${ELIPLAN_CONFIG.username}:${ELIPLAN_CONFIG.password}`);\n      headers['Authorization'] = `Basic ${credentials}`;\n    }\n\n    const response = await fetch(\n      `${ELIPLAN_CONFIG.baseUrl}/schedule/range?${params.toString()}`,\n      {\n        method: 'GET',\n        headers,\n        signal: AbortSignal.timeout(30000),\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`EliPlan API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data: EliPlanApiResponse = await response.json();\n\n    if (!data.success) {\n      throw new Error(data.error || data.message || 'Unknown error from EliPlan API');\n    }\n\n    return data.data || [];\n  } catch (error) {\n    console.error('Error fetching EliPlan schedule range:', error);\n    throw error;\n  }\n}\n\n/**\n * Test connection to EliPlan API\n */\nexport async function testEliPlanConnection(): Promise<{ success: boolean; message: string }> {\n  if (!isEliPlanConfigured()) {\n    return {\n      success: false,\n      message: 'EliPlan API is not configured. Please add credentials to .env file.',\n    };\n  }\n\n  try {\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n    };\n\n    if (ELIPLAN_CONFIG.apiKey) {\n      headers['Authorization'] = `Bearer ${ELIPLAN_CONFIG.apiKey}`;\n    } else if (ELIPLAN_CONFIG.username && ELIPLAN_CONFIG.password) {\n      const credentials = btoa(`${ELIPLAN_CONFIG.username}:${ELIPLAN_CONFIG.password}`);\n      headers['Authorization'] = `Basic ${credentials}`;\n    }\n\n    // Test with a simple health check or today's date\n    const response = await fetch(\n      `${ELIPLAN_CONFIG.baseUrl}/health`, // or use a minimal endpoint\n      {\n        method: 'GET',\n        headers,\n        signal: AbortSignal.timeout(10000), // 10 second timeout for health check\n      }\n    );\n\n    if (response.ok) {\n      return {\n        success: true,\n        message: 'Successfully connected to EliPlan API',\n      };\n    } else {\n      return {\n        success: false,\n        message: `Connection failed: ${response.status} ${response.statusText}`,\n      };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      message: `Connection error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n    };\n  }\n}\n\n/**\n * Map EliPlan department names to our department types\n * Customize this based on how EliPlan names departments\n */\nexport function mapEliPlanDepartment(eliplanDept?: string): 'Precast' | 'Extruded' | 'Wall Panels' | 'Flexicore' | null {\n  if (!eliplanDept) return null;\n  \n  const dept = eliplanDept.toLowerCase().trim();\n  \n  if (dept.includes('precast')) return 'Precast';\n  if (dept.includes('extrud')) return 'Extruded';\n  if (dept.includes('wall') || dept.includes('panel')) return 'Wall Panels';\n  if (dept.includes('flexicore') || dept.includes('flexi')) return 'Flexicore';\n  \n  return null;\n}\n\n/**\n * Map EliPlan status to our status types\n */\nexport function mapEliPlanStatus(eliplanStatus?: string): 'Scheduled' | 'In Progress' | 'Completed' | 'Delayed' | 'Cancelled' {\n  if (!eliplanStatus) return 'Scheduled';\n  \n  const status = eliplanStatus.toLowerCase().trim();\n  \n  if (status.includes('progress') || status.includes('active')) return 'In Progress';\n  if (status.includes('complete') || status.includes('done')) return 'Completed';\n  if (status.includes('delay')) return 'Delayed';\n  if (status.includes('cancel')) return 'Cancelled';\n  \n  return 'Scheduled';\n}\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { PourEntry, DailySchedule, FormBed, PourDepartment, DEFAULT_FORMS } from '../types/pour-schedule';\nimport { fetchEliPlanSchedule, EliPlanScheduleItem, mapEliPlanDepartment, mapEliPlanStatus } from '../api/eliplan';\n\ninterface PourScheduleState {\n  // Data\n  pourEntries: PourEntry[];\n  schedules: DailySchedule[];\n  forms: FormBed[];\n  lastSyncTime: number | null;\n  \n  // Form/Bed Operations\n  addForm: (form: Omit<FormBed, 'id'>) => string;\n  updateForm: (id: string, updates: Partial<FormBed>) => void;\n  deleteForm: (id: string) => void;\n  getForm: (id: string) => FormBed | undefined;\n  getFormsByDepartment: (department: PourDepartment) => FormBed[];\n  \n  // Pour Entry Operations\n  addPourEntry: (entry: Omit<PourEntry, 'id' | 'createdAt' | 'updatedAt'>) => string;\n  updatePourEntry: (id: string, updates: Partial<PourEntry>) => void;\n  deletePourEntry: (id: string) => void;\n  getPourEntry: (id: string) => PourEntry | undefined;\n  \n  // Query Operations\n  getPourEntriesByDate: (date: number, department?: PourDepartment) => PourEntry[];\n  getPourEntriesByFormBed: (formBedId: string) => PourEntry[];\n  getPourEntriesByDateRange: (startDate: number, endDate: number) => PourEntry[];\n  \n  // Schedule Operations\n  getScheduleForDate: (date: number, department: PourDepartment) => DailySchedule | undefined;\n  getTotalYardsForDate: (date: number, department?: PourDepartment) => number;\n  \n  // EliPlan Sync\n  syncWithEliPlan: (date: Date, createdBy: string) => Promise<{ success: boolean; imported: number; error?: string }>;\n  \n  // Utility\n  clearAllData: () => void;\n  initializeDefaultForms: () => void;\n}\n\nexport const usePourScheduleStore = create<PourScheduleState>()(\n  persist(\n    (set, get) => ({\n      pourEntries: [],\n      schedules: [],\n      forms: [],\n      lastSyncTime: null,\n      \n      // Form/Bed Operations\n      addForm: (form) => {\n        const id = `form-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        const newForm: FormBed = {\n          ...form,\n          id,\n        };\n        \n        set((state) => ({\n          forms: [...state.forms, newForm],\n        }));\n        \n        return id;\n      },\n      \n      updateForm: (id, updates) => {\n        set((state) => ({\n          forms: state.forms.map((form) =>\n            form.id === id ? { ...form, ...updates } : form\n          ),\n        }));\n      },\n      \n      deleteForm: (id) => {\n        set((state) => ({\n          forms: state.forms.filter((form) => form.id !== id),\n        }));\n      },\n      \n      getForm: (id) => {\n        return get().forms.find((form) => form.id === id);\n      },\n      \n      getFormsByDepartment: (department) => {\n        return get().forms\n          .filter((form) => form.department === department && form.isActive)\n          .sort((a, b) => a.name.localeCompare(b.name));\n      },\n      \n      // Pour Entry Operations\n      addPourEntry: (entry) => {\n        const id = `pour-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        const newEntry: PourEntry = {\n          ...entry,\n          id,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n        \n        set((state) => ({\n          pourEntries: [...state.pourEntries, newEntry],\n        }));\n        \n        return id;\n      },\n      \n      updatePourEntry: (id, updates) => {\n        set((state) => ({\n          pourEntries: state.pourEntries.map((entry) =>\n            entry.id === id\n              ? { ...entry, ...updates, updatedAt: Date.now() }\n              : entry\n          ),\n        }));\n      },\n      \n      deletePourEntry: (id) => {\n        set((state) => ({\n          pourEntries: state.pourEntries.filter((entry) => entry.id !== id),\n        }));\n      },\n      \n      getPourEntry: (id) => {\n        return get().pourEntries.find((entry) => entry.id === id);\n      },\n      \n      // Query Operations\n      getPourEntriesByDate: (date, department) => {\n        const startOfDay = new Date(date);\n        startOfDay.setHours(0, 0, 0, 0);\n        const endOfDay = new Date(date);\n        endOfDay.setHours(23, 59, 59, 999);\n        \n        return get().pourEntries.filter((entry) => {\n          const entryDate = entry.scheduledDate;\n          const matchesDate = entryDate >= startOfDay.getTime() && entryDate <= endOfDay.getTime();\n          const matchesDepartment = department ? entry.department === department : true;\n          return matchesDate && matchesDepartment;\n        }).sort((a, b) => {\n          // Sort by scheduled time if available, otherwise by creation time\n          if (a.scheduledTime && b.scheduledTime) {\n            return a.scheduledTime.localeCompare(b.scheduledTime);\n          }\n          return a.createdAt - b.createdAt;\n        });\n      },\n      \n      getPourEntriesByFormBed: (formBedId) => {\n        return get().pourEntries\n          .filter((entry) => entry.formBedId === formBedId)\n          .sort((a, b) => b.scheduledDate - a.scheduledDate);\n      },\n      \n      getPourEntriesByDateRange: (startDate, endDate) => {\n        return get().pourEntries\n          .filter((entry) => entry.scheduledDate >= startDate && entry.scheduledDate <= endDate)\n          .sort((a, b) => a.scheduledDate - b.scheduledDate);\n      },\n      \n      // Schedule Operations\n      getScheduleForDate: (date, department) => {\n        const entries = get().getPourEntriesByDate(date, department);\n        \n        if (entries.length === 0) {\n          return undefined;\n        }\n        \n        const totalYards = entries.reduce((sum, entry) => sum + (entry.concreteYards || 0), 0);\n        \n        return {\n          id: `schedule-${date}-${department}`,\n          date,\n          department,\n          pourEntries: entries,\n          totalYards,\n          createdBy: entries[0]?.createdBy || 'system',\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n      },\n      \n      getTotalYardsForDate: (date, department) => {\n        const entries = get().getPourEntriesByDate(date, department);\n        return entries.reduce((sum, entry) => sum + (entry.concreteYards || 0), 0);\n      },\n      \n      // EliPlan Sync\n      syncWithEliPlan: async (date, createdBy) => {\n        try {\n          // Fetch data from EliPlan\n          const eliplanData = await fetchEliPlanSchedule(date);\n          \n          const state = get();\n          let imported = 0;\n          \n          // Process each EliPlan item\n          for (const item of eliplanData) {\n            // Map department\n            const department = mapEliPlanDepartment(item.department);\n            if (!department) {\n              console.warn(`Skipping item with unmapped department: ${item.department}`);\n              continue;\n            }\n            \n            // Find or create form/bed\n            let formBedId: string | undefined;\n            let formBedName = item.workstation || 'Unknown';\n            \n            // Try to find existing form\n            const existingForm = state.forms.find(\n              f => f.department === department && \n              f.name.toLowerCase() === formBedName.toLowerCase()\n            );\n            \n            if (existingForm) {\n              formBedId = existingForm.id;\n              formBedName = existingForm.name;\n            } else {\n              // Create new form if workstation is provided\n              if (item.workstation) {\n                formBedId = state.addForm({\n                  name: item.workstation,\n                  department,\n                  isActive: true,\n                  notes: 'Auto-created from EliPlan',\n                });\n              } else {\n                // Skip if no workstation specified\n                console.warn(`Skipping item without workstation: Job ${item.jobNumber}`);\n                continue;\n              }\n            }\n            \n            // Check if entry already exists for this job/date/form\n            const existingEntry = state.pourEntries.find(\n              e => e.jobNumber === item.jobNumber &&\n                   e.scheduledDate === new Date(item.scheduledDate).getTime() &&\n                   e.formBedId === formBedId\n            );\n            \n            if (existingEntry) {\n              // Update existing entry\n              state.updatePourEntry(existingEntry.id, {\n                jobName: item.jobName || item.customerName,\n                markNumbers: item.markNumber,\n                pieceCount: item.pieceCount,\n                productType: item.productDescription || item.productCode,\n                dimensions: item.dimensions,\n                mixDesign: item.concreteGrade || item.mixDesignId,\n                concreteYards: item.concreteVolume,\n                scheduledTime: item.scheduledStartTime,\n                status: mapEliPlanStatus(item.status),\n                foreman: item.foreman,\n                notes: item.notes ? `${item.notes} (Synced from EliPlan)` : 'Synced from EliPlan',\n              });\n            } else {\n              // Create new entry\n              state.addPourEntry({\n                formBedId,\n                formBedName,\n                department,\n                jobNumber: item.jobNumber,\n                jobName: item.jobName || item.customerName,\n                markNumbers: item.markNumber,\n                pieceCount: item.pieceCount,\n                productType: item.productDescription || item.productCode,\n                dimensions: item.dimensions,\n                mixDesign: item.concreteGrade || item.mixDesignId,\n                concreteYards: item.concreteVolume,\n                scheduledDate: new Date(item.scheduledDate).getTime(),\n                scheduledTime: item.scheduledStartTime,\n                status: mapEliPlanStatus(item.status),\n                foreman: item.foreman,\n                notes: item.notes ? `${item.notes} (Synced from EliPlan)` : 'Synced from EliPlan',\n                createdBy,\n              });\n              imported++;\n            }\n          }\n          \n          // Update sync time\n          set({ lastSyncTime: Date.now() });\n          \n          return {\n            success: true,\n            imported,\n          };\n        } catch (error) {\n          console.error('EliPlan sync error:', error);\n          return {\n            success: false,\n            imported: 0,\n            error: error instanceof Error ? error.message : 'Unknown sync error',\n          };\n        }\n      },\n      \n      // Utility\n      clearAllData: () => {\n        set({\n          pourEntries: [],\n          schedules: [],\n          forms: [],\n        });\n      },\n      \n      initializeDefaultForms: () => {\n        const state = get();\n        \n        if (state.forms.length === 0) {\n          const departments: PourDepartment[] = ['Precast', 'Extruded', 'Wall Panels', 'Flexicore'];\n          \n          departments.forEach((department) => {\n            const formNames = DEFAULT_FORMS[department];\n            \n            formNames.forEach((formName) => {\n              state.addForm({\n                name: formName,\n                department,\n                isActive: true,\n              });\n            });\n          });\n        } else {\n          // Migration: Add missing Extruded beds if they don't exist\n          const extrudedForms = state.forms.filter(f => f.department === 'Extruded');\n          const extrudedBedNumbers = ['1', '2', '3', '4', '5', '6'];\n          \n          extrudedBedNumbers.forEach((bedNum) => {\n            const exists = extrudedForms.some(f => f.name === bedNum);\n            if (!exists) {\n              state.addForm({\n                name: bedNum,\n                department: 'Extruded',\n                isActive: true,\n              });\n            }\n          });\n        }\n      },\n    }),\n    {\n      name: 'pour-schedule-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, Pressable, ScrollView, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { useJobAutocomplete, JobSuggestion } from '../utils/jobAutocomplete';\nimport { validateJobNumber, getValidationMessage, extractJobNumber } from '../utils/jobNumberValidation';\n\ninterface JobAutocompleteInputProps {\n  jobNumber: string;\n  jobName: string;\n  onJobNumberChange: (value: string) => void;\n  onJobNameChange: (value: string) => void;\n  onJobSelect?: (jobNumber: string, jobName: string) => void;\n  disabled?: boolean;\n  jobNumberLabel?: string;\n  jobNameLabel?: string;\n  required?: boolean;\n  theme?: 'light' | 'dark';\n  enableCreatePrompt?: boolean;\n}\n\nexport default function JobAutocompleteInput({\n  jobNumber,\n  jobName,\n  onJobNumberChange,\n  onJobNameChange,\n  onJobSelect,\n  disabled = false,\n  jobNumberLabel = \"Job #\",\n  jobNameLabel = \"Job Name\",\n  required = false,\n  theme = 'light',\n  enableCreatePrompt = true,\n}: JobAutocompleteInputProps) {\n  const navigation = useNavigation<NativeStackNavigationProp<RootStackParamList>>();\n  const { findByJobNumber, searchByJobName } = useJobAutocomplete();\n  \n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [suggestions, setSuggestions] = useState<JobSuggestion[]>([]);\n  const [focusedField, setFocusedField] = useState<'number' | 'name' | null>(null);\n  const [lastCheckedJobNumber, setLastCheckedJobNumber] = useState<string>('');\n  const [validationError, setValidationError] = useState<string>('');\n\n  // Validate job number on change\n  const handleJobNumberChange = (value: string) => {\n    onJobNumberChange(value);\n    \n    // Clear error as user types\n    if (validationError) {\n      setValidationError('');\n    }\n  };\n\n  // Validate job number format\n  const validateAndCheckJobNumber = (jobNum: string) => {\n    if (!jobNum.trim()) {\n      return;\n    }\n\n    const validation = validateJobNumber(jobNum);\n    \n    if (!validation.isValid) {\n      // Show validation error\n      setValidationError(validation.error || 'Invalid job number format');\n      \n      Alert.alert(\n        'Invalid Job Number',\n        `${validation.error}\\n\\nJob number must be:\\n Exactly 6 digits\\n 2nd and 3rd digits must match\\n\\nExample: 255096, 144523, 366789`,\n        [\n          {\n            text: 'OK',\n            onPress: () => {\n              // If we extracted some digits, offer to auto-correct\n              if (validation.cleaned && validation.cleaned.length > 0) {\n                // Focus back on the input\n              }\n            },\n          },\n        ]\n      );\n      return;\n    }\n\n    // Valid format, clear any errors\n    setValidationError('');\n    \n    // Check if job exists in library\n    checkJobNumberExists(validation.cleaned || jobNum);\n  };\n\n  // Reset last checked when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      // When returning from project creation, check if the job now exists\n      if (lastCheckedJobNumber && jobNumber.trim() === lastCheckedJobNumber) {\n        const project = findByJobNumber(lastCheckedJobNumber);\n        if (project && !jobName) {\n          // Project was created, auto-fill the name\n          onJobNameChange(project.jobName);\n          if (onJobSelect) {\n            onJobSelect(project.jobNumber, project.jobName);\n          }\n        }\n      }\n    }, [lastCheckedJobNumber, jobNumber, jobName])\n  );\n\n  // Check if job number exists and prompt to create if not\n  const checkJobNumberExists = (jobNum: string) => {\n    if (!enableCreatePrompt || !jobNum.trim() || jobNum === lastCheckedJobNumber) {\n      return;\n    }\n\n    const trimmed = jobNum.trim();\n    \n    // First validate format\n    const validation = validateJobNumber(trimmed);\n    if (!validation.isValid) {\n      // Validation already showed error in validateAndCheckJobNumber\n      return;\n    }\n    \n    const project = findByJobNumber(trimmed);\n    \n    if (!project) {\n      setLastCheckedJobNumber(trimmed);\n      \n      Alert.alert(\n        'Job Not Found',\n        `\"${trimmed}\" is not in the Project Library.\\n\\nWould you like to create a new project with this job number?`,\n        [\n          {\n            text: 'Not Now',\n            style: 'cancel',\n          },\n          {\n            text: 'Create Project',\n            onPress: () => {\n              // Navigate to create new project with pre-filled job number\n              navigation.navigate('ProjectLibraryAddEdit', { \n                prefilledJobNumber: trimmed,\n                prefilledJobName: jobName.trim() || undefined,\n                returnScreen: 'current',\n              });\n            },\n          },\n        ]\n      );\n    }\n  };\n\n  // Auto-populate job name when job number is entered\n  useEffect(() => {\n    if (focusedField === 'number' && jobNumber.trim()) {\n      const project = findByJobNumber(jobNumber);\n      if (project && project.jobName !== jobName) {\n        onJobNameChange(project.jobName);\n        setLastCheckedJobNumber(jobNumber.trim());\n        if (onJobSelect) {\n          onJobSelect(project.jobNumber, project.jobName);\n        }\n      }\n    }\n  }, [jobNumber, focusedField]);\n\n  // Show suggestions when typing job name\n  useEffect(() => {\n    if (focusedField === 'name' && jobName.trim().length >= 2) {\n      const results = searchByJobName(jobName);\n      if (results.length > 0) {\n        setSuggestions(results);\n        setShowSuggestions(true);\n      } else {\n        setShowSuggestions(false);\n      }\n    } else {\n      setShowSuggestions(false);\n    }\n  }, [jobName, focusedField]);\n\n  const handleSelectSuggestion = (suggestion: JobSuggestion) => {\n    onJobNumberChange(suggestion.jobNumber);\n    onJobNameChange(suggestion.jobName);\n    setShowSuggestions(false);\n    setFocusedField(null);\n    \n    if (onJobSelect) {\n      onJobSelect(suggestion.jobNumber, suggestion.jobName);\n    }\n  };\n\n  const isDark = theme === 'dark';\n  \n  const inputStyles = isDark ? {\n    backgroundColor: '#1F2937',\n    borderColor: '#374151',\n    textColor: '#FFFFFF',\n    placeholderColor: '#6B7280',\n  } : {\n    backgroundColor: '#F9FAFB',\n    borderColor: '#E5E7EB',\n    textColor: '#111827',\n    placeholderColor: '#9CA3AF',\n  };\n\n  const labelColor = isDark ? '#9CA3AF' : '#374151';\n\n  return (\n    <View>\n      {/* Job Number Input */}\n      <View className=\"mb-4\">\n        <Text style={{ fontSize: 14, fontWeight: '600', color: labelColor, marginBottom: 8 }}>\n          {jobNumberLabel} {required && <Text style={{ color: '#EF4444' }}>*</Text>}\n        </Text>\n        <TextInput\n          value={jobNumber}\n          onChangeText={handleJobNumberChange}\n          onFocus={() => setFocusedField('number')}\n          onBlur={() => {\n            setTimeout(() => {\n              setFocusedField(null);\n              // Validate and check if job number exists when user finishes typing\n              if (jobNumber.trim()) {\n                validateAndCheckJobNumber(jobNumber);\n              }\n            }, 300);\n          }}\n          placeholder=\"Enter 6-digit job number\"\n          placeholderTextColor={inputStyles.placeholderColor}\n          editable={!disabled}\n          keyboardType=\"number-pad\"\n          maxLength={10}\n          cursorColor=\"#000000\"\n          style={{\n            backgroundColor: inputStyles.backgroundColor,\n            borderWidth: 1,\n            borderColor: validationError ? '#EF4444' : inputStyles.borderColor,\n            borderRadius: 12,\n            padding: 12,\n            fontSize: 16,\n            color: inputStyles.textColor,\n          }}\n        />\n        {validationError && (\n          <View className=\"flex-row items-start mt-2\">\n            <Ionicons name=\"alert-circle\" size={16} color=\"#EF4444\" style={{ marginRight: 4, marginTop: 1 }} />\n            <Text style={{ fontSize: 12, color: '#EF4444', flex: 1 }}>\n              {validationError}\n            </Text>\n          </View>\n        )}\n        {!validationError && focusedField === 'number' && (\n          <Text style={{ fontSize: 11, color: labelColor, marginTop: 4, opacity: 0.6 }}>\n            Format: 6 digits, 2nd and 3rd must match (e.g., 255096)\n          </Text>\n        )}\n      </View>\n\n      {/* Job Name Input with Suggestions */}\n      <View className=\"mb-4\">\n        <Text style={{ fontSize: 14, fontWeight: '600', color: labelColor, marginBottom: 8 }}>\n          {jobNameLabel}\n        </Text>\n        <View className=\"relative\">\n          <TextInput\n            value={jobName}\n            onChangeText={onJobNameChange}\n            onFocus={() => setFocusedField('name')}\n            onBlur={() => setTimeout(() => setFocusedField(null), 200)}\n            placeholder=\"Enter or search job name\"\n            placeholderTextColor={inputStyles.placeholderColor}\n            editable={!disabled}\n            cursorColor=\"#000000\"\n            style={{\n              backgroundColor: inputStyles.backgroundColor,\n              borderWidth: 1,\n              borderColor: inputStyles.borderColor,\n              borderRadius: 12,\n              padding: 12,\n              fontSize: 16,\n              color: inputStyles.textColor,\n            }}\n          />\n          \n          {/* Suggestions Dropdown */}\n          {showSuggestions && suggestions.length > 0 && (\n            <View className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-60\">\n              <ScrollView keyboardShouldPersistTaps=\"handled\">\n                {suggestions.map((suggestion, index) => (\n                  <Pressable\n                    key={index}\n                    onPress={() => handleSelectSuggestion(suggestion)}\n                    className=\"px-3 py-3 border-b border-gray-100 active:bg-gray-50\"\n                  >\n                    <View className=\"flex-row items-center justify-between\">\n                      <View className=\"flex-1\">\n                        <Text className=\"text-sm font-bold text-blue-600 mb-1\">\n                          {suggestion.jobNumber}\n                        </Text>\n                        <Text className=\"text-base text-gray-900\">\n                          {suggestion.jobName}\n                        </Text>\n                      </View>\n                      <Ionicons name=\"arrow-forward\" size={16} color=\"#3B82F6\" />\n                    </View>\n                  </Pressable>\n                ))}\n              </ScrollView>\n            </View>\n          )}\n        </View>\n        \n        {focusedField === 'name' && jobName.trim().length >= 1 && jobName.trim().length < 2 && (\n          <Text style={{ fontSize: 12, color: labelColor, marginTop: 4, opacity: 0.7 }}>\n            Type at least 2 characters to see suggestions\n          </Text>\n        )}\n      </View>\n    </View>\n  );\n}\n","import { View, Text, Pressable, ScrollView, TextInput, Modal, Alert } from \"react-native\";\nimport { SafeAreaView, useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { usePourScheduleStore } from \"../state/pourScheduleStore\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { useState, useEffect, useLayoutEffect } from \"react\";\nimport { PourDepartment, PourEntry, PourStatus } from \"../types/pour-schedule\";\nimport { isEliPlanConfigured } from \"../api/eliplan\";\nimport JobAutocompleteInput from \"../components/JobAutocompleteInput\";\nimport { Calendar, DateData } from 'react-native-calendars';\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"DailyPourSchedule\">;\n\nexport default function DailyPourScheduleScreen({ navigation, route }: Props) {\n  const insets = useSafeAreaInsets();\n  const currentUser = useAuthStore((s) => s.currentUser);\n  const forms = usePourScheduleStore((s) => s.forms);\n  const getFormsByDepartment = usePourScheduleStore((s) => s.getFormsByDepartment);\n  const getPourEntriesByDate = usePourScheduleStore((s) => s.getPourEntriesByDate);\n  const addPourEntry = usePourScheduleStore((s) => s.addPourEntry);\n  const updatePourEntry = usePourScheduleStore((s) => s.updatePourEntry);\n  const deletePourEntry = usePourScheduleStore((s) => s.deletePourEntry);\n  const getTotalYardsForDate = usePourScheduleStore((s) => s.getTotalYardsForDate);\n  const initializeDefaultForms = usePourScheduleStore((s) => s.initializeDefaultForms);\n  const syncWithEliPlan = usePourScheduleStore((s) => s.syncWithEliPlan);\n  const lastSyncTime = usePourScheduleStore((s) => s.lastSyncTime);\n\n  // Initialize forms on mount (always run to ensure migrations)\n  useEffect(() => {\n    initializeDefaultForms();\n  }, []);\n\n  // Get initial date and department from navigation params (if coming from scanner)\n  const initialDate = route.params?.date ? new Date(route.params.date).getTime() : Date.now();\n  const initialDepartment = route.params?.department as PourDepartment | null;\n\n  const [selectedDate, setSelectedDate] = useState(initialDate);\n  const [viewingDepartment, setViewingDepartment] = useState<PourDepartment | null>(initialDepartment);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [editingPourId, setEditingPourId] = useState<string | null>(null);\n  const [showDatePickerModal, setShowDatePickerModal] = useState(false);\n  const [dateInputText, setDateInputText] = useState(\"\");\n  \n  // Department for adding/scanning (user must select first)\n  const [activeDepartment, setActiveDepartment] = useState<PourDepartment | null>(initialDepartment);\n  \n  // Form state for pour entry\n  const [selectedDepartment, setSelectedDepartment] = useState<PourDepartment>(initialDepartment || \"Precast\");\n  const [selectedFormBedId, setSelectedFormBedId] = useState(\"\");\n  const [jobNumber, setJobNumber] = useState(\"\");\n  const [jobName, setJobName] = useState(\"\");\n  const [idNumber, setIdNumber] = useState(\"\");\n  const [markNumbers, setMarkNumbers] = useState(\"\");\n  const [pieceCount, setPieceCount] = useState(\"\");\n  const [productType, setProductType] = useState(\"\");\n  const [dimensions, setDimensions] = useState(\"\");\n  const [mixDesign, setMixDesign] = useState(\"\");\n  const [concreteYards, setConcreteYards] = useState(\"\");\n  const [scheduledTime, setScheduledTime] = useState(\"\");\n  const [status, setStatus] = useState<PourStatus>(\"Scheduled\");\n  const [foreman, setForeman] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  // Update header back button based on viewing department\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerLeft: () => (\n        <Pressable \n          onPress={() => {\n            if (viewingDepartment) {\n              // If viewing a department, go back to department selector\n              setViewingDepartment(null);\n            } else {\n              // If on department selector, go back to previous screen\n              navigation.goBack();\n            }\n          }} \n          style={{ marginLeft: 4 }}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n        </Pressable>\n      ),\n    });\n  }, [navigation, viewingDepartment]);\n\n  // Listen for route params changes to handle back navigation\n  useEffect(() => {\n    if (route.params?.department === undefined && viewingDepartment !== null) {\n      setViewingDepartment(null);\n    }\n  }, [route.params]);\n  const departments: PourDepartment[] = [\"Precast\", \"Extruded\", \"Wall Panels\", \"Flexicore\"];\n\n  const getDepartmentColor = (dept: PourDepartment) => {\n    switch (dept) {\n      case \"Precast\": return { bg: \"#EFF6FF\", color: \"#1E40AF\", accent: \"#3B82F6\" };\n      case \"Extruded\": return { bg: \"#F0FDF4\", color: \"#166534\", accent: \"#10B981\" };\n      case \"Wall Panels\": return { bg: \"#FEF3C7\", color: \"#92400E\", accent: \"#F59E0B\" };\n      case \"Flexicore\": return { bg: \"#FCE7F3\", color: \"#831843\", accent: \"#EC4899\" };\n    }\n  };\n\n  const getStatusColor = (st: PourStatus) => {\n    switch (st) {\n      case \"Scheduled\": return { bg: \"#EFF6FF\", text: \"#1E40AF\" };\n      case \"In Progress\": return { bg: \"#FEF3C7\", text: \"#92400E\" };\n      case \"Completed\": return { bg: \"#F0FDF4\", text: \"#166534\" };\n      case \"Delayed\": return { bg: \"#FEF2F2\", text: \"#991B1B\" };\n      case \"Cancelled\": return { bg: \"#F3F4F6\", text: \"#6B7280\" };\n    }\n  };\n\n  const handleAddPour = () => {\n    if (!selectedFormBedId || !jobNumber.trim()) {\n      Alert.alert(\"Error\", \"Form/Bed and Job Number are required\");\n      return;\n    }\n\n    const selectedForm = forms.find(f => f.id === selectedFormBedId);\n    if (!selectedForm) {\n      Alert.alert(\"Error\", \"Selected form/bed not found\");\n      return;\n    }\n\n    if (!currentUser) {\n      Alert.alert(\"Error\", \"You must be logged in\");\n      return;\n    }\n\n    const pourData: Omit<PourEntry, 'id' | 'createdAt' | 'updatedAt'> = {\n      formBedId: selectedFormBedId,\n      formBedName: selectedForm.name,\n      department: selectedForm.department,\n      jobNumber: jobNumber.trim(),\n      jobName: jobName.trim() || undefined,\n      idNumber: idNumber.trim() || undefined,\n      markNumbers: markNumbers.trim() || undefined,\n      pieceCount: 1,\n      productType: productType.trim() || undefined,\n      dimensions: dimensions.trim() || undefined,\n      mixDesign: mixDesign.trim() || undefined,\n      concreteYards: concreteYards ? parseFloat(concreteYards) : undefined,\n      scheduledDate: selectedDate,\n      scheduledTime: scheduledTime.trim() || undefined,\n      status,\n      foreman: foreman.trim() || undefined,\n      notes: notes.trim() || undefined,\n      createdBy: currentUser.email,\n    };\n\n    if (editingPourId) {\n      updatePourEntry(editingPourId, pourData);\n    } else {\n      addPourEntry(pourData);\n    }\n\n    resetForm();\n    setShowAddModal(false);\n  };\n\n  const resetForm = () => {\n    setEditingPourId(null);\n    setSelectedFormBedId(\"\");\n    setJobNumber(\"\");\n    setJobName(\"\");\n    setIdNumber(\"\");\n    setMarkNumbers(\"\");\n    setPieceCount(\"\");\n    setProductType(\"\");\n    setDimensions(\"\");\n    setMixDesign(\"\");\n    setConcreteYards(\"\");\n    setScheduledTime(\"\");\n    setStatus(\"Scheduled\");\n    setForeman(\"\");\n    setNotes(\"\");\n  };\n\n  const handleEditPour = (pour: PourEntry) => {\n    setEditingPourId(pour.id);\n    setSelectedDepartment(pour.department);\n    setSelectedFormBedId(pour.formBedId);\n    setJobNumber(pour.jobNumber);\n    setJobName(pour.jobName || \"\");\n    setIdNumber(pour.idNumber || \"\");\n    setMarkNumbers(pour.markNumbers || \"\");\n    setPieceCount(pour.pieceCount?.toString() || \"\");\n    setProductType(pour.productType || \"\");\n    setDimensions(pour.dimensions || \"\");\n    setMixDesign(pour.mixDesign || \"\");\n    setConcreteYards(pour.concreteYards?.toString() || \"\");\n    setScheduledTime(pour.scheduledTime || \"\");\n    setStatus(pour.status);\n    setForeman(pour.foreman || \"\");\n    setNotes(pour.notes || \"\");\n    setShowAddModal(true);\n  };\n\n  const handleDeletePour = (pourId: string) => {\n    Alert.alert(\"Delete Pour Entry\", \"Are you sure you want to delete this pour entry?\", [\n      { text: \"Cancel\", style: \"cancel\" },\n      {\n        text: \"Delete\",\n        style: \"destructive\",\n        onPress: () => deletePourEntry(pourId),\n      },\n    ]);\n  };\n\n  const changeDate = (days: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(newDate.getDate() + days);\n    setSelectedDate(newDate.getTime());\n  };\n\n  const getDateLabel = () => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    const selected = new Date(selectedDate);\n    selected.setHours(0, 0, 0, 0);\n    \n    const diffTime = selected.getTime() - today.getTime();\n    const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === -1) return 'Yesterday';\n    if (diffDays === 1) return 'Tomorrow';\n    return null; // No label for other dates\n  };\n\n  const openDatePicker = () => {\n    // Pre-fill with current selected date in MM/DD/YYYY format\n    const currentDate = new Date(selectedDate);\n    const formatted = `${(currentDate.getMonth() + 1).toString().padStart(2, '0')}/${currentDate.getDate().toString().padStart(2, '0')}/${currentDate.getFullYear()}`;\n    setDateInputText(formatted);\n    setShowDatePickerModal(true);\n  };\n\n  const handleDateSubmit = () => {\n    // Parse date in MM/DD/YYYY format\n    const parts = dateInputText.split('/');\n    if (parts.length !== 3) {\n      Alert.alert('Invalid Date', 'Please enter date in MM/DD/YYYY format');\n      return;\n    }\n\n    const month = parseInt(parts[0]) - 1; // Month is 0-indexed\n    const day = parseInt(parts[1]);\n    const year = parseInt(parts[2]);\n\n    if (isNaN(month) || isNaN(day) || isNaN(year)) {\n      Alert.alert('Invalid Date', 'Please enter valid numbers for date');\n      return;\n    }\n\n    if (month < 0 || month > 11 || day < 1 || day > 31 || year < 1900 || year > 2100) {\n      Alert.alert('Invalid Date', 'Please enter a valid date');\n      return;\n    }\n\n    const newDate = new Date(year, month, day);\n    setSelectedDate(newDate.getTime());\n    setShowDatePickerModal(false);\n  };\n\n  const setQuickDate = (daysOffset: number) => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    today.setDate(today.getDate() + daysOffset);\n    setSelectedDate(today.getTime());\n    setShowDatePickerModal(false);\n  };\n\n  const handleCalendarDayPress = (day: DateData) => {\n    // Convert selected date to timestamp\n    const newDate = new Date(day.year, day.month - 1, day.day);\n    setSelectedDate(newDate.getTime());\n    setShowDatePickerModal(false);\n  };\n\n  const handleSyncWithEliPlan = async () => {\n    if (!isEliPlanConfigured()) {\n      Alert.alert(\n        \"EliPlan Not Configured\",\n        \"To enable EliPlan sync, add your API credentials to the .env file:\\n\\n\" +\n        \"EXPO_PUBLIC_ELIPLAN_API_URL=your_api_url\\n\" +\n        \"EXPO_PUBLIC_ELIPLAN_API_KEY=your_api_key\\n\\n\" +\n        \"Contact your administrator or EliPlan support for credentials.\",\n        [{ text: \"OK\" }]\n      );\n      return;\n    }\n\n    if (!currentUser) {\n      Alert.alert(\"Error\", \"You must be logged in to sync\");\n      return;\n    }\n\n    setIsSyncing(true);\n    try {\n      const result = await syncWithEliPlan(new Date(selectedDate), currentUser.email);\n      \n      if (result.success) {\n        Alert.alert(\n          \"Sync Successful\",\n          `Imported ${result.imported} pour ${result.imported === 1 ? 'entry' : 'entries'} from EliPlan`,\n          [{ text: \"OK\" }]\n        );\n      } else {\n        Alert.alert(\"Sync Failed\", result.error || \"Unknown error occurred\");\n      }\n    } catch (error) {\n      Alert.alert(\n        \"Sync Error\",\n        error instanceof Error ? error.message : \"Failed to connect to EliPlan\"\n      );\n    } finally {\n      setIsSyncing(false);\n    }\n  };\n\n  const todayEntries = getPourEntriesByDate(selectedDate);\n  const totalYards = getTotalYardsForDate(selectedDate);\n\n  // Debug: Get all entries\n  const allEntriesInStore = usePourScheduleStore((s) => s.pourEntries);\n\n  // If no department selected, show department selector\n  if (!viewingDepartment) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n        <ScrollView style={{ flex: 1 }}>\n          <View style={{ padding: 12 }}>\n            <View style={{ marginBottom: 12, flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\" }}>\n              <View style={{ flex: 1 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"700\", color: \"#111827\", marginBottom: 2 }}>\n                  Daily Pour Schedule\n                </Text>\n                <Text style={{ fontSize: 13, color: \"#6B7280\" }}>\n                  Select a department to view and manage\n                </Text>\n              </View>\n              <Pressable\n                onPress={() => navigation.navigate(\"ScheduleSearch\")}\n                style={{ backgroundColor: \"#3B82F6\", borderRadius: 10, padding: 12, marginLeft: 8 }}\n              >\n                <Ionicons name=\"search\" size={22} color=\"#FFFFFF\" />\n              </Pressable>\n            </View>\n\n            <View style={{ marginBottom: 12 }}>\n              <Text style={{ fontSize: 12, fontWeight: \"600\", color: \"#6B7280\", marginBottom: 6 }}>\n                Schedule Date\n              </Text>\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n                <Pressable onPress={() => changeDate(-1)} style={{ backgroundColor: \"#FFFFFF\", borderRadius: 8, padding: 8, borderWidth: 1, borderColor: \"#E5E7EB\" }}>\n                  <Ionicons name=\"chevron-back\" size={18} color=\"#111827\" />\n                </Pressable>\n                <View style={{ flex: 1, marginHorizontal: 8, alignItems: \"center\" }}>\n                  <Pressable onPress={openDatePicker}>\n                    <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\" }}>\n                      {new Date(selectedDate).toLocaleDateString(\"en-US\", { weekday: \"short\", month: \"short\", day: \"numeric\" })}\n                    </Text>\n                  </Pressable>\n                  {getDateLabel() && (\n                    <Pressable onPress={() => setSelectedDate(Date.now())}>\n                      <Text style={{ fontSize: 11, color: \"#3B82F6\", fontWeight: \"500\" }}>{getDateLabel()}</Text>\n                    </Pressable>\n                  )}\n                </View>\n                <Pressable onPress={() => changeDate(1)} style={{ backgroundColor: \"#FFFFFF\", borderRadius: 8, padding: 8, borderWidth: 1, borderColor: \"#E5E7EB\" }}>\n                  <Ionicons name=\"chevron-forward\" size={18} color=\"#111827\" />\n                </Pressable>\n              </View>\n            </View>\n\n            <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\", marginBottom: 8 }}>Select Department</Text>\n            <View style={{ gap: 8 }}>\n              {departments.map((dept) => {\n                const deptEntries = todayEntries.filter(e => e.department === dept);\n                const deptYards = deptEntries.reduce((sum, e) => sum + (e.concreteYards || 0), 0);\n                const colors = getDepartmentColor(dept);\n                const deptForms = getFormsByDepartment(dept);\n\n                return (\n                  <Pressable\n                    key={dept}\n                    onPress={() => {\n                      setViewingDepartment(dept);\n                      setSelectedDepartment(dept);\n                      setActiveDepartment(dept);\n                    }}\n                    style={{ backgroundColor: \"#FFFFFF\", borderRadius: 10, padding: 12, borderWidth: 1.5, borderColor: \"#E5E7EB\" }}\n                  >\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 8 }}>\n                      <Text style={{ fontSize: 17, fontWeight: \"700\", color: colors.color }}>{dept}</Text>\n                      <Ionicons name=\"chevron-forward\" size={20} color={colors.accent} />\n                    </View>\n                    <View style={{ flexDirection: \"row\", gap: 14 }}>\n                      <View>\n                        <Text style={{ fontSize: 10, color: \"#6B7280\", marginBottom: 1 }}>Forms</Text>\n                        <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\" }}>{deptForms.length}</Text>\n                      </View>\n                      <View>\n                        <Text style={{ fontSize: 10, color: \"#6B7280\", marginBottom: 1 }}>Pours Today</Text>\n                        <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\" }}>{deptEntries.length}</Text>\n                      </View>\n                      <View>\n                        <Text style={{ fontSize: 10, color: \"#6B7280\", marginBottom: 1 }}>Yards</Text>\n                        <Text style={{ fontSize: 15, fontWeight: \"600\", color: colors.accent }}>{deptYards.toFixed(1)}</Text>\n                      </View>\n                    </View>\n                  </Pressable>\n                );\n              })}\n            </View>\n          </View>\n        </ScrollView>\n      </SafeAreaView>\n    );\n  }\n\n  // Show only selected department\n  const departmentEntries = todayEntries.filter(e => e.department === viewingDepartment);\n  const departmentYards = getTotalYardsForDate(selectedDate, viewingDepartment);\n  const deptColors = getDepartmentColor(viewingDepartment);\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 10 }}>\n          {/* Compact Header */}\n          <View style={{ marginBottom: 8 }}>\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n              <Text style={{ fontSize: 18, fontWeight: \"700\", color: deptColors.color }}>\n                {viewingDepartment}\n              </Text>\n              <View style={{ flexDirection: \"row\", gap: 6, alignItems: \"center\" }}>\n                <View style={{ backgroundColor: \"#FFFFFF\", borderRadius: 6, paddingHorizontal: 8, paddingVertical: 4, borderWidth: 1, borderColor: \"#E5E7EB\" }}>\n                  <Text style={{ fontSize: 10, color: \"#6B7280\" }}>Pours</Text>\n                  <Text style={{ fontSize: 16, fontWeight: \"700\", color: \"#111827\", textAlign: \"center\" }}>\n                    {departmentEntries.length}\n                  </Text>\n                </View>\n                <View style={{ backgroundColor: \"#FFFFFF\", borderRadius: 6, paddingHorizontal: 8, paddingVertical: 4, borderWidth: 1, borderColor: \"#E5E7EB\" }}>\n                  <Text style={{ fontSize: 10, color: \"#6B7280\" }}>Yards</Text>\n                  <Text style={{ fontSize: 16, fontWeight: \"700\", color: deptColors.accent, textAlign: \"center\" }}>\n                    {departmentYards.toFixed(1)}\n                  </Text>\n                </View>\n              </View>\n            </View>\n          </View>\n\n          {/* Compact Date Selector */}\n          <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 8, backgroundColor: \"#FFFFFF\", borderRadius: 8, padding: 8, borderWidth: 1, borderColor: \"#E5E7EB\" }}>\n            <Pressable onPress={() => changeDate(-1)} style={{ padding: 4 }}>\n              <Ionicons name=\"chevron-back\" size={20} color=\"#111827\" />\n            </Pressable>\n            <View style={{ alignItems: \"center\" }}>\n              <Pressable onPress={openDatePicker}>\n                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\" }}>\n                  {new Date(selectedDate).toLocaleDateString(\"en-US\", { weekday: \"short\", month: \"short\", day: \"numeric\" })}\n                </Text>\n              </Pressable>\n              {getDateLabel() && (\n                <Pressable onPress={() => setSelectedDate(Date.now())}>\n                  <Text style={{ fontSize: 10, color: \"#3B82F6\", fontWeight: \"500\" }}>{getDateLabel()}</Text>\n                </Pressable>\n              )}\n            </View>\n            <Pressable onPress={() => changeDate(1)} style={{ padding: 4 }}>\n              <Ionicons name=\"chevron-forward\" size={20} color=\"#111827\" />\n            </Pressable>\n          </View>\n\n          {/* Compact Action Buttons */}\n          <View style={{ flexDirection: \"row\", gap: 6, marginBottom: 10 }}>\n            <Pressable\n              onPress={() => {\n                resetForm();\n                setShowAddModal(true);\n              }}\n              style={{\n                flex: 1,\n                backgroundColor: \"#3B82F6\",\n                borderRadius: 8,\n                padding: 10,\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              <Ionicons name=\"add-circle\" size={18} color=\"#FFFFFF\" />\n              <Text style={{ color: \"#FFFFFF\", fontSize: 13, fontWeight: \"600\", marginLeft: 4 }}>\n                Add Piece\n              </Text>\n            </Pressable>\n\n            <Pressable\n              onPress={() => navigation.navigate(\"ScheduleScanner\", { \n                date: new Date(selectedDate).toISOString(),\n                department: viewingDepartment,\n              })}\n              style={{\n                flex: 1,\n                backgroundColor: \"#8B5CF6\",\n                borderRadius: 8,\n                padding: 10,\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              <Ionicons name=\"scan\" size={18} color=\"#FFFFFF\" />\n              <Text style={{ color: \"#FFFFFF\", fontSize: 13, fontWeight: \"600\", marginLeft: 4 }}>\n                Scan\n              </Text>\n            </Pressable>\n          </View>\n\n          {/* Forms & Pours List */}\n          {(() => {\n            const deptForms = getFormsByDepartment(viewingDepartment);\n            const deptEntries = todayEntries.filter(e => e.department === viewingDepartment);\n            const colors = getDepartmentColor(viewingDepartment);\n\n            if (deptForms.length === 0) {\n              return (\n                <View style={{ padding: 20, alignItems: \"center\", backgroundColor: \"#FFFFFF\", borderRadius: 10 }}>\n                  <Ionicons name=\"construct-outline\" size={28} color=\"#9CA3AF\" />\n                  <Text style={{ fontSize: 13, color: \"#6B7280\", marginTop: 6 }}>\n                    No forms configured for this department\n                  </Text>\n                </View>\n              );\n            }\n\n            return (\n              <View style={{ gap: 6 }}>\n                {deptForms.map((form) => {\n                  const formPours = deptEntries.filter(e => e.formBedId === form.id);\n                  \n                  return (\n                    <View\n                      key={form.id}\n                      style={{\n                        backgroundColor: \"#FFFFFF\",\n                        borderRadius: 8,\n                        padding: 8,\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    >\n                      {/* Form Header - More Compact */}\n                      <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: formPours.length > 0 ? 6 : 0 }}>\n                        <View style={{ flex: 1 }}>\n                          <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#111827\" }}>\n                            {form.name}\n                          </Text>\n                          {form.capacity && (\n                            <Text style={{ fontSize: 11, color: \"#6B7280\" }}>\n                              Cap: {form.capacity}\n                            </Text>\n                          )}\n                        </View>\n                        <View style={{\n                          backgroundColor: formPours.length > 0 ? colors.bg : \"#F3F4F6\",\n                          paddingHorizontal: 8,\n                          paddingVertical: 3,\n                          borderRadius: 6,\n                        }}>\n                          <Text style={{ fontSize: 11, fontWeight: \"600\", color: formPours.length > 0 ? colors.color : \"#6B7280\" }}>\n                            {formPours.length}\n                          </Text>\n                        </View>\n                      </View>\n\n                      {/* Pour Entries - Ultra Compact */}\n                      {formPours.length > 0 && (\n                        <View style={{ gap: 4 }}>\n                          {formPours.map((pour) => {\n                            const statusColors = getStatusColor(pour.status);\n                            \n                            return (\n                              <View\n                                key={pour.id}\n                                style={{\n                                  backgroundColor: \"#F9FAFB\",\n                                  borderRadius: 6,\n                                  padding: 8,\n                                  borderWidth: 1,\n                                  borderColor: \"#E5E7EB\",\n                                }}\n                              >\n                                <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\n                                  <View style={{ flex: 1 }}>\n                                    {/* Job # and Status on one line */}\n                                    <View style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6, marginBottom: 3 }}>\n                                      <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#111827\" }}>\n                                        #{pour.jobNumber}\n                                      </Text>\n                                      <View style={{ backgroundColor: statusColors.bg, paddingHorizontal: 5, paddingVertical: 1, borderRadius: 4 }}>\n                                        <Text style={{ fontSize: 9, fontWeight: \"600\", color: statusColors.text }}>\n                                          {pour.status}\n                                        </Text>\n                                      </View>\n                                    </View>\n                                    {/* Job Name if exists */}\n                                    {pour.jobName && (\n                                      <Text style={{ fontSize: 12, color: \"#374151\", marginBottom: 2 }}>\n                                        {pour.jobName}\n                                      </Text>\n                                    )}\n                                    {/* Compact details row */}\n                                    <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 6 }}>\n                                      {pour.markNumbers && (\n                                        <Text style={{ fontSize: 11, color: \"#6B7280\" }}>\n                                          {pour.markNumbers}\n                                        </Text>\n                                      )}\n                                      {pour.idNumber && (\n                                        <Text style={{ fontSize: 11, color: \"#6B7280\" }}>\n                                          ID: {pour.idNumber}\n                                        </Text>\n                                      )}\n                                      {pour.concreteYards && (\n                                        <Text style={{ fontSize: 11, color: colors.accent, fontWeight: \"600\" }}>\n                                          {pour.concreteYards}yd\n                                        </Text>\n                                      )}\n                                      {pour.scheduledTime && (\n                                        <Text style={{ fontSize: 11, color: \"#6B7280\" }}>\n                                          {pour.scheduledTime}\n                                        </Text>\n                                      )}\n                                    </View>\n                                  </View>\n                                  {/* Action buttons - smaller */}\n                                  <View style={{ flexDirection: \"row\", gap: 6 }}>\n                                    <Pressable onPress={() => handleEditPour(pour)} style={{ padding: 2 }}>\n                                      <Ionicons name=\"pencil\" size={14} color=\"#3B82F6\" />\n                                    </Pressable>\n                                    <Pressable onPress={() => handleDeletePour(pour.id)} style={{ padding: 2 }}>\n                                      <Ionicons name=\"trash-outline\" size={14} color=\"#EF4444\" />\n                                    </Pressable>\n                                  </View>\n                                </View>\n                              </View>\n                            );\n                          })}\n                        </View>\n                      )}\n                    </View>\n                  );\n                })}\n              </View>\n            );\n          })()}\n        </View>\n      </ScrollView>\n\n      {/* Add/Edit Pour Modal */}\n      <Modal visible={showAddModal} animationType=\"slide\" transparent>\n        <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}>\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderTopLeftRadius: 24,\n              borderTopRightRadius: 24,\n              padding: 24,\n              paddingBottom: insets.bottom + 24,\n              maxHeight: \"90%\",\n            }}\n          >\n              <View style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 24 }}>\n                <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                  {editingPourId ? \"Edit Piece\" : \"Add Piece\"}\n                </Text>\n                <Pressable onPress={() => setShowAddModal(false)}>\n                  <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n                </Pressable>\n              </View>\n\n              <ScrollView style={{ maxHeight: 500 }} keyboardShouldPersistTaps=\"handled\">\n                <View style={{ gap: 16 }}>\n                  {/* Form/Bed Selection */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Form/Bed *\n                    </Text>\n                    <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}>\n                      {getFormsByDepartment(selectedDepartment).map((form) => (\n                        <Pressable\n                          key={form.id}\n                          onPress={() => setSelectedFormBedId(form.id)}\n                          style={{\n                            backgroundColor: selectedFormBedId === form.id ? \"#10B981\" : \"#F3F4F6\",\n                            paddingVertical: 8,\n                            paddingHorizontal: 12,\n                            borderRadius: 8,\n                          }}\n                        >\n                          <Text\n                            style={{\n                              fontSize: 13,\n                              fontWeight: \"600\",\n                              color: selectedFormBedId === form.id ? \"#FFFFFF\" : \"#6B7280\",\n                            }}\n                          >\n                            {form.name}\n                          </Text>\n                        </Pressable>\n                      ))}\n                    </View>\n                  </View>\n\n                  {/* Job Number & Name with Autocomplete */}\n                  <JobAutocompleteInput\n                    jobNumber={jobNumber}\n                    jobName={jobName}\n                    onJobNumberChange={setJobNumber}\n                    onJobNameChange={setJobName}\n                    required={true}\n                  />\n\n                  {/* ID Number */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      ID #\n                    </Text>\n                    <TextInput\n                      value={idNumber}\n                      onChangeText={setIdNumber}\n                      placeholder=\"ID number\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  {/* Mark Numbers */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Mark #s\n                    </Text>\n                    <TextInput\n                      value={markNumbers}\n                      onChangeText={setMarkNumbers}\n                      placeholder=\"e.g., M1-M5\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  {/* Dimensions */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Dimensions\n                    </Text>\n                    <TextInput\n                      value={dimensions}\n                      onChangeText={setDimensions}\n                      placeholder=\"e.g., 8x4x6\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  {/* Row: Mix Design & Concrete Yards */}\n                  <View style={{ flexDirection: \"row\", gap: 12 }}>\n                    <View style={{ flex: 1 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                        Mix Design\n                      </Text>\n                      <TextInput\n                        value={mixDesign}\n                        onChangeText={setMixDesign}\n                        placeholder=\"e.g., 6000 PSI\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        style={{\n                          backgroundColor: \"#F9FAFB\",\n                          borderRadius: 12,\n                          padding: 12,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n                    <View style={{ flex: 1 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                        Concrete (yds)\n                      </Text>\n                      <TextInput\n                        value={concreteYards}\n                        onChangeText={setConcreteYards}\n                        placeholder=\"0.0\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        keyboardType=\"decimal-pad\"\n                        style={{\n                          backgroundColor: \"#F9FAFB\",\n                          borderRadius: 12,\n                          padding: 12,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n                  </View>\n\n                  {/* Row: Scheduled Time & Status */}\n                  <View style={{ flexDirection: \"row\", gap: 12 }}>\n                    <View style={{ flex: 1 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                        Scheduled Time\n                      </Text>\n                      <TextInput\n                        value={scheduledTime}\n                        onChangeText={setScheduledTime}\n                        placeholder=\"e.g., 8:00 AM\"\n                        placeholderTextColor=\"#9CA3AF\"\n                        cursorColor=\"#000000\"\n                        style={{\n                          backgroundColor: \"#F9FAFB\",\n                          borderRadius: 12,\n                          padding: 12,\n                          fontSize: 14,\n                          color: \"#111827\",\n                          borderWidth: 1,\n                          borderColor: \"#E5E7EB\",\n                        }}\n                      />\n                    </View>\n                    <View style={{ flex: 1 }}>\n                      <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                        Status\n                      </Text>\n                      <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 6 }}>\n                        {([\"Scheduled\", \"In Progress\", \"Completed\"] as PourStatus[]).map((st) => (\n                          <Pressable\n                            key={st}\n                            onPress={() => setStatus(st)}\n                            style={{\n                              backgroundColor: status === st ? \"#6366F1\" : \"#F3F4F6\",\n                              paddingVertical: 6,\n                              paddingHorizontal: 10,\n                              borderRadius: 8,\n                            }}\n                          >\n                            <Text\n                              style={{\n                                fontSize: 11,\n                                fontWeight: \"600\",\n                                color: status === st ? \"#FFFFFF\" : \"#6B7280\",\n                              }}\n                            >\n                              {st}\n                            </Text>\n                          </Pressable>\n                        ))}\n                      </View>\n                    </View>\n                  </View>\n\n                  {/* Foreman */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Foreman\n                    </Text>\n                    <TextInput\n                      value={foreman}\n                      onChangeText={setForeman}\n                      placeholder=\"Enter foreman name\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                      }}\n                    />\n                  </View>\n\n                  {/* Notes */}\n                  <View>\n                    <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                      Notes\n                    </Text>\n                    <TextInput\n                      value={notes}\n                      onChangeText={setNotes}\n                      placeholder=\"Additional notes...\"\n                      placeholderTextColor=\"#9CA3AF\"\n                      cursorColor=\"#000000\"\n                      multiline\n                      numberOfLines={3}\n                      textAlignVertical=\"top\"\n                      style={{\n                        backgroundColor: \"#F9FAFB\",\n                        borderRadius: 12,\n                        padding: 12,\n                        fontSize: 14,\n                        color: \"#111827\",\n                        borderWidth: 1,\n                        borderColor: \"#E5E7EB\",\n                        minHeight: 80,\n                      }}\n                    />\n                  </View>\n                </View>\n              </ScrollView>\n\n              <View style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}>\n                <Pressable\n                  onPress={() => setShowAddModal(false)}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#F3F4F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#6B7280\", fontSize: 16, fontWeight: \"600\" }}>Cancel</Text>\n                </Pressable>\n                <Pressable\n                  onPress={handleAddPour}\n                  style={{\n                    flex: 1,\n                    backgroundColor: \"#3B82F6\",\n                    paddingVertical: 12,\n                    borderRadius: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\" }}>\n                    {editingPourId ? \"Update\" : \"Add\"}\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n        </View>\n      </Modal>\n\n      {/* Date Picker Modal */}\n      <Modal visible={showDatePickerModal} animationType=\"slide\" transparent>\n        <View style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"center\", alignItems: \"center\" }}>\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 24,\n              padding: 24,\n              width: \"85%\",\n              maxWidth: 400,\n            }}\n          >\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 20 }}>\n              <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                Select Date\n              </Text>\n              <Pressable onPress={() => setShowDatePickerModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n\n            {/* Quick Date Buttons */}\n            <View style={{ flexDirection: \"row\", gap: 8, marginBottom: 20 }}>\n              <Pressable\n                onPress={() => setQuickDate(-1)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\" }}>Yesterday</Text>\n              </Pressable>\n              <Pressable\n                onPress={() => setQuickDate(0)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#3B82F6\",\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#FFFFFF\" }}>Today</Text>\n              </Pressable>\n              <Pressable\n                onPress={() => setQuickDate(1)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\" }}>Tomorrow</Text>\n              </Pressable>\n            </View>\n\n            {/* Calendar Picker */}\n            <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n              Or select from calendar:\n            </Text>\n            <Calendar\n              current={new Date(selectedDate).toISOString().split('T')[0]}\n              onDayPress={handleCalendarDayPress}\n              markedDates={{\n                [new Date(selectedDate).toISOString().split('T')[0]]: {\n                  selected: true,\n                  selectedColor: '#3B82F6',\n                },\n              }}\n              theme={{\n                backgroundColor: '#ffffff',\n                calendarBackground: '#ffffff',\n                textSectionTitleColor: '#6B7280',\n                selectedDayBackgroundColor: '#3B82F6',\n                selectedDayTextColor: '#ffffff',\n                todayTextColor: '#3B82F6',\n                dayTextColor: '#111827',\n                textDisabledColor: '#D1D5DB',\n                monthTextColor: '#111827',\n                textMonthFontWeight: '600',\n                textDayFontSize: 15,\n                textMonthFontSize: 17,\n              }}\n              style={{\n                borderRadius: 12,\n                marginBottom: 20,\n              }}\n            />\n\n            {/* Manual Date Input */}\n            <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n              Or type a date:\n            </Text>\n            <TextInput\n              value={dateInputText}\n              onChangeText={setDateInputText}\n              placeholder=\"MM/DD/YYYY\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              keyboardType=\"numbers-and-punctuation\"\n              style={{\n                backgroundColor: \"#F9FAFB\",\n                borderWidth: 1,\n                borderColor: \"#D1D5DB\",\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 16,\n                color: \"#111827\",\n                marginBottom: 20,\n              }}\n            />\n\n            {/* Action Buttons */}\n            <View style={{ flexDirection: \"row\", gap: 12 }}>\n              <Pressable\n                onPress={() => setShowDatePickerModal(false)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 14,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#374151\" }}>Cancel</Text>\n              </Pressable>\n              <Pressable\n                onPress={handleDateSubmit}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#3B82F6\",\n                  borderRadius: 8,\n                  padding: 14,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#FFFFFF\" }}>Go to Date</Text>\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n","import React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput, Modal } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { usePourScheduleStore } from '../state/pourScheduleStore';\nimport { PourEntry, PourDepartment, PourStatus } from '../types/pour-schedule';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'ScheduleSearch'>;\n\ninterface SearchResult {\n  entry: PourEntry;\n  scheduledDate: Date;\n  status: 'scheduled' | 'in-progress' | 'poured';\n  daysFromNow: number;\n}\n\ntype JobNameSearchType = 'equals' | 'contains';\n\nexport default function ScheduleSearchScreen({ navigation }: Props) {\n  const allEntries = usePourScheduleStore((s) => s.pourEntries);\n  \n  const [jobNumber, setJobNumber] = useState('');\n  const [jobName, setJobName] = useState('');\n  const [jobNameSearchType, setJobNameSearchType] = useState<JobNameSearchType>('contains');\n  const [markNumber, setMarkNumber] = useState('');\n  const [idNumber, setIdNumber] = useState('');\n  \n  // Advanced filters\n  const [showFilters, setShowFilters] = useState(false);\n  const [selectedDepartments, setSelectedDepartments] = useState<Set<PourDepartment>>(new Set());\n  const [selectedStatuses, setSelectedStatuses] = useState<Set<'scheduled' | 'in-progress' | 'poured'>>(new Set());\n  const [dateRangeEnabled, setDateRangeEnabled] = useState(false);\n  const [startDate, setStartDate] = useState<Date | null>(null);\n  const [endDate, setEndDate] = useState<Date | null>(null);\n  const [showDatePicker, setShowDatePicker] = useState<'start' | 'end' | null>(null);\n  \n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\n  const [hasSearched, setHasSearched] = useState(false);\n\n  const allDepartments: PourDepartment[] = ['Precast', 'Extruded', 'Wall Panels', 'Flexicore'];\n\n  const toggleDepartment = (dept: PourDepartment) => {\n    const newSet = new Set(selectedDepartments);\n    if (newSet.has(dept)) {\n      newSet.delete(dept);\n    } else {\n      newSet.add(dept);\n    }\n    setSelectedDepartments(newSet);\n  };\n\n  const toggleStatus = (status: 'scheduled' | 'in-progress' | 'poured') => {\n    const newSet = new Set(selectedStatuses);\n    if (newSet.has(status)) {\n      newSet.delete(status);\n    } else {\n      newSet.add(status);\n    }\n    setSelectedStatuses(newSet);\n  };\n\n  const clearFilters = () => {\n    setSelectedDepartments(new Set());\n    setSelectedStatuses(new Set());\n    setDateRangeEnabled(false);\n    setStartDate(null);\n    setEndDate(null);\n  };\n\n  const getFilterCount = () => {\n    let count = 0;\n    if (selectedDepartments.size > 0) count++;\n    if (selectedStatuses.size > 0) count++;\n    if (dateRangeEnabled && (startDate || endDate)) count++;\n    return count;\n  };\n\n  const handleSearch = () => {\n    // Check if at least one field has input\n    const hasInput = jobNumber.trim() || jobName.trim() || markNumber.trim() || idNumber.trim();\n    \n    if (!hasInput) {\n      setSearchResults([]);\n      setHasSearched(false);\n      return;\n    }\n\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const todayTime = today.getTime();\n\n    // Search through all entries\n    const results: SearchResult[] = [];\n\n    allEntries.forEach(entry => {\n      let matches = true;\n\n      // Check job number (if provided)\n      if (jobNumber.trim()) {\n        const query = jobNumber.trim().toLowerCase();\n        if (!entry.jobNumber.toLowerCase().includes(query)) {\n          matches = false;\n        }\n      }\n\n      // Check job name (if provided)\n      if (jobName.trim() && matches) {\n        const query = jobName.trim().toLowerCase();\n        const entryJobName = (entry.jobName || '').toLowerCase();\n        \n        if (jobNameSearchType === 'equals') {\n          if (entryJobName !== query) {\n            matches = false;\n          }\n        } else { // contains\n          if (!entryJobName.includes(query)) {\n            matches = false;\n          }\n        }\n      }\n\n      // Check mark number (if provided)\n      if (markNumber.trim() && matches) {\n        const query = markNumber.trim().toLowerCase();\n        const entryMarkNumbers = (entry.markNumbers || '').toLowerCase();\n        if (!entryMarkNumbers.includes(query)) {\n          matches = false;\n        }\n      }\n\n      // Check ID number (if provided)\n      if (idNumber.trim() && matches) {\n        const query = idNumber.trim().toLowerCase();\n        const entryIdNumber = (entry.idNumber || '').toLowerCase();\n        if (!entryIdNumber.includes(query)) {\n          matches = false;\n        }\n      }\n\n      // Apply advanced filters if any are active\n      if (matches) {\n        const entryDate = new Date(entry.scheduledDate);\n        entryDate.setHours(0, 0, 0, 0);\n        const entryTime = entryDate.getTime();\n\n        const daysDiff = Math.floor((entryTime - todayTime) / (1000 * 60 * 60 * 24));\n\n        let status: 'scheduled' | 'in-progress' | 'poured';\n        if (entryTime < todayTime) {\n          status = 'poured';\n        } else if (entryTime === todayTime) {\n          status = 'in-progress';\n        } else {\n          status = 'scheduled';\n        }\n\n        // Department filter\n        if (selectedDepartments.size > 0 && !selectedDepartments.has(entry.department)) {\n          matches = false;\n        }\n\n        // Status filter\n        if (selectedStatuses.size > 0 && !selectedStatuses.has(status)) {\n          matches = false;\n        }\n\n        // Date range filter\n        if (dateRangeEnabled && matches) {\n          if (startDate) {\n            const start = new Date(startDate);\n            start.setHours(0, 0, 0, 0);\n            if (entryTime < start.getTime()) {\n              matches = false;\n            }\n          }\n          if (endDate && matches) {\n            const end = new Date(endDate);\n            end.setHours(0, 0, 0, 0);\n            if (entryTime > end.getTime()) {\n              matches = false;\n            }\n          }\n        }\n\n        if (matches) {\n          results.push({\n            entry,\n            scheduledDate: entryDate,\n            status,\n            daysFromNow: daysDiff,\n          });\n        }\n      }\n    });\n\n    // Sort by date (closest first)\n    results.sort((a, b) => Math.abs(a.daysFromNow) - Math.abs(b.daysFromNow));\n\n    setSearchResults(results);\n    setHasSearched(true);\n  };\n\n  const handleClear = () => {\n    setJobNumber('');\n    setJobName('');\n    setJobNameSearchType('contains');\n    setMarkNumber('');\n    setIdNumber('');\n    setSearchResults([]);\n    setHasSearched(false);\n    clearFilters();\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'scheduled':\n        return { bg: '#DBEAFE', text: '#1E40AF', label: 'Scheduled' };\n      case 'in-progress':\n        return { bg: '#FEF3C7', text: '#92400E', label: 'Today' };\n      case 'poured':\n        return { bg: '#D1FAE5', text: '#065F46', label: 'Poured' };\n      default:\n        return { bg: '#F3F4F6', text: '#6B7280', label: status };\n    }\n  };\n\n  const getDateLabel = (result: SearchResult) => {\n    if (result.daysFromNow === 0) {\n      return 'Today';\n    } else if (result.daysFromNow === 1) {\n      return 'Tomorrow';\n    } else if (result.daysFromNow === -1) {\n      return 'Yesterday';\n    } else if (result.daysFromNow > 0) {\n      return `In ${result.daysFromNow} days`;\n    } else {\n      return `${Math.abs(result.daysFromNow)} days ago`;\n    }\n  };\n\n  const navigateToDate = (result: SearchResult) => {\n    navigation.navigate('DailyPourSchedule', {\n      date: result.scheduledDate.toISOString(),\n      department: result.entry.department,\n    });\n  };\n\n  return (\n    <SafeAreaView className=\"flex-1 bg-gray-50\">\n      {/* Header */}\n      <View className=\"bg-white border-b border-gray-200 px-4 py-3\">\n        <View className=\"flex-row items-center justify-between mb-3\">\n          <Pressable onPress={() => navigation.goBack()} className=\"p-2\">\n            <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n          </Pressable>\n          <Text className=\"text-xl font-bold text-gray-900 flex-1 ml-2\">\n            Search Schedule\n          </Text>\n          <Pressable onPress={handleClear} className=\"px-3 py-2\">\n            <Text className=\"text-sm font-semibold text-gray-600\">Clear</Text>\n          </Pressable>\n        </View>\n      </View>\n\n      <ScrollView className=\"flex-1\">\n        {/* Advanced Filters Toggle */}\n        <View className=\"bg-white border-b border-gray-200 px-4 py-3\">\n          <Pressable\n            onPress={() => setShowFilters(!showFilters)}\n            className=\"flex-row items-center justify-between\"\n          >\n            <View className=\"flex-row items-center gap-2\">\n              <Ionicons name=\"options-outline\" size={20} color=\"#3B82F6\" />\n              <Text className=\"text-base font-semibold text-gray-900\">\n                Advanced Filters\n              </Text>\n              {getFilterCount() > 0 && (\n                <View className=\"bg-blue-600 rounded-full px-2 py-0.5\">\n                  <Text className=\"text-white text-xs font-bold\">{getFilterCount()}</Text>\n                </View>\n              )}\n            </View>\n            <Ionicons\n              name={showFilters ? 'chevron-up' : 'chevron-down'}\n              size={20}\n              color=\"#6B7280\"\n            />\n          </Pressable>\n\n          {showFilters && (\n            <View className=\"mt-4 gap-4\">\n              {/* Department Filter */}\n              <View>\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Department</Text>\n                <View className=\"flex-row flex-wrap gap-2\">\n                  {allDepartments.map((dept) => (\n                    <Pressable\n                      key={dept}\n                      onPress={() => toggleDepartment(dept)}\n                      className={`px-3 py-2 rounded-lg border ${\n                        selectedDepartments.has(dept)\n                          ? 'bg-blue-600 border-blue-600'\n                          : 'bg-white border-gray-300'\n                      }`}\n                    >\n                      <Text\n                        className={`text-sm font-medium ${\n                          selectedDepartments.has(dept) ? 'text-white' : 'text-gray-700'\n                        }`}\n                      >\n                        {dept}\n                      </Text>\n                    </Pressable>\n                  ))}\n                </View>\n              </View>\n\n              {/* Status Filter */}\n              <View>\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Status</Text>\n                <View className=\"flex-row flex-wrap gap-2\">\n                  <Pressable\n                    onPress={() => toggleStatus('scheduled')}\n                    className={`px-3 py-2 rounded-lg border ${\n                      selectedStatuses.has('scheduled')\n                        ? 'bg-blue-600 border-blue-600'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text\n                      className={`text-sm font-medium ${\n                        selectedStatuses.has('scheduled') ? 'text-white' : 'text-gray-700'\n                      }`}\n                    >\n                      Scheduled\n                    </Text>\n                  </Pressable>\n                  <Pressable\n                    onPress={() => toggleStatus('in-progress')}\n                    className={`px-3 py-2 rounded-lg border ${\n                      selectedStatuses.has('in-progress')\n                        ? 'bg-blue-600 border-blue-600'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text\n                      className={`text-sm font-medium ${\n                        selectedStatuses.has('in-progress') ? 'text-white' : 'text-gray-700'\n                      }`}\n                    >\n                      Today\n                    </Text>\n                  </Pressable>\n                  <Pressable\n                    onPress={() => toggleStatus('poured')}\n                    className={`px-3 py-2 rounded-lg border ${\n                      selectedStatuses.has('poured')\n                        ? 'bg-blue-600 border-blue-600'\n                        : 'bg-white border-gray-300'\n                    }`}\n                  >\n                    <Text\n                      className={`text-sm font-medium ${\n                        selectedStatuses.has('poured') ? 'text-white' : 'text-gray-700'\n                      }`}\n                    >\n                      Poured\n                    </Text>\n                  </Pressable>\n                </View>\n              </View>\n\n              {/* Date Range Filter */}\n              <View>\n                <View className=\"flex-row items-center justify-between mb-2\">\n                  <Text className=\"text-sm font-semibold text-gray-700\">Date Range</Text>\n                  <Pressable\n                    onPress={() => setDateRangeEnabled(!dateRangeEnabled)}\n                    className={`px-3 py-1 rounded-full ${\n                      dateRangeEnabled ? 'bg-blue-600' : 'bg-gray-300'\n                    }`}\n                  >\n                    <Text className={`text-xs font-semibold ${dateRangeEnabled ? 'text-white' : 'text-gray-600'}`}>\n                      {dateRangeEnabled ? 'ON' : 'OFF'}\n                    </Text>\n                  </Pressable>\n                </View>\n                {dateRangeEnabled && (\n                  <View className=\"flex-row gap-2\">\n                    <Pressable\n                      onPress={() => {\n                        const today = new Date();\n                        const thirtyDaysAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);\n                        setStartDate(thirtyDaysAgo);\n                        setEndDate(today);\n                      }}\n                      className=\"flex-1 bg-gray-100 border border-gray-300 rounded-lg py-2 items-center\"\n                    >\n                      <Text className=\"text-xs text-gray-600 font-medium\">Last 30 Days</Text>\n                    </Pressable>\n                    <Pressable\n                      onPress={() => {\n                        const today = new Date();\n                        const nextThirtyDays = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000);\n                        setStartDate(today);\n                        setEndDate(nextThirtyDays);\n                      }}\n                      className=\"flex-1 bg-gray-100 border border-gray-300 rounded-lg py-2 items-center\"\n                    >\n                      <Text className=\"text-xs text-gray-600 font-medium\">Next 30 Days</Text>\n                    </Pressable>\n                  </View>\n                )}\n                {dateRangeEnabled && (startDate || endDate) && (\n                  <View className=\"mt-2 bg-blue-50 border border-blue-200 rounded-lg p-2\">\n                    <Text className=\"text-xs text-blue-800\">\n                      {startDate ? startDate.toLocaleDateString() : 'No start'}  {endDate ? endDate.toLocaleDateString() : 'No end'}\n                    </Text>\n                  </View>\n                )}\n              </View>\n\n              {/* Clear Filters Button */}\n              {getFilterCount() > 0 && (\n                <Pressable\n                  onPress={clearFilters}\n                  className=\"bg-gray-100 border border-gray-300 rounded-lg py-2 items-center\"\n                >\n                  <Text className=\"text-gray-700 text-sm font-semibold\">Clear All Filters</Text>\n                </Pressable>\n              )}\n            </View>\n          )}\n        </View>\n\n        {/* Search Fields */}\n        <View className=\"bg-white border-b border-gray-200 p-4 gap-4\">\n          {/* Job Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Job Number</Text>\n            <TextInput\n              value={jobNumber}\n              onChangeText={setJobNumber}\n              placeholder=\"Enter job number\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              keyboardType=\"number-pad\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Job Name */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Job Name</Text>\n            <TextInput\n              value={jobName}\n              onChangeText={setJobName}\n              placeholder=\"Enter job name\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n            <View className=\"flex-row gap-2 mt-2\">\n              <Pressable\n                onPress={() => setJobNameSearchType('equals')}\n                className={`flex-1 rounded-lg py-2 border ${\n                  jobNameSearchType === 'equals' \n                    ? 'bg-blue-600 border-blue-600' \n                    : 'bg-white border-gray-300'\n                }`}\n              >\n                <Text className={`text-center text-sm font-semibold ${\n                  jobNameSearchType === 'equals' ? 'text-white' : 'text-gray-700'\n                }`}>\n                  Equals\n                </Text>\n              </Pressable>\n              <Pressable\n                onPress={() => setJobNameSearchType('contains')}\n                className={`flex-1 rounded-lg py-2 border ${\n                  jobNameSearchType === 'contains' \n                    ? 'bg-blue-600 border-blue-600' \n                    : 'bg-white border-gray-300'\n                }`}\n              >\n                <Text className={`text-center text-sm font-semibold ${\n                  jobNameSearchType === 'contains' ? 'text-white' : 'text-gray-700'\n                }`}>\n                  Contains\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n\n          {/* Mark Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">Mark Number</Text>\n            <TextInput\n              value={markNumber}\n              onChangeText={setMarkNumber}\n              placeholder=\"e.g., M1, H105\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* ID Number */}\n          <View>\n            <Text className=\"text-sm font-semibold text-gray-700 mb-2\">ID Number</Text>\n            <TextInput\n              value={idNumber}\n              onChangeText={setIdNumber}\n              placeholder=\"Enter ID number\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              className=\"bg-gray-50 border border-gray-300 rounded-lg px-3 py-3 text-base text-gray-900\"\n            />\n          </View>\n\n          {/* Search Button */}\n          <Pressable\n            onPress={handleSearch}\n            className=\"bg-blue-600 rounded-lg py-3 items-center\"\n          >\n            <Text className=\"text-white text-base font-semibold\">Search</Text>\n          </Pressable>\n        </View>\n\n        {/* Results */}\n        {!hasSearched ? (\n          <View className=\"items-center justify-center p-8 mt-12\">\n            <Ionicons name=\"search-outline\" size={64} color=\"#9CA3AF\" />\n            <Text className=\"text-gray-500 text-base mt-4 text-center font-semibold\">\n              Search for Pieces\n            </Text>\n            <Text className=\"text-gray-400 text-sm mt-2 text-center px-4\">\n              Fill in one or more fields above and tap Search to find pieces\n            </Text>\n          </View>\n        ) : searchResults.length === 0 ? (\n          <View className=\"items-center justify-center p-8 mt-12\">\n            <Ionicons name=\"document-text-outline\" size={64} color=\"#9CA3AF\" />\n            <Text className=\"text-gray-500 text-base mt-4 text-center font-semibold\">\n              No Matches Found\n            </Text>\n            <Text className=\"text-gray-400 text-sm mt-2 text-center px-4\">\n              No pieces match your search criteria\n            </Text>\n          </View>\n        ) : (\n          <View className=\"p-4 gap-3\">\n            <Text className=\"text-sm font-semibold text-gray-500 mb-1\">\n              Found {searchResults.length} {searchResults.length === 1 ? 'result' : 'results'}\n            </Text>\n\n            {searchResults.map((result, index) => {\n              const statusInfo = getStatusColor(result.status);\n              \n              return (\n                <Pressable\n                  key={`${result.entry.id}-${index}`}\n                  onPress={() => navigateToDate(result)}\n                  className=\"bg-white rounded-xl p-4 border border-gray-200 active:bg-gray-50\"\n                >\n                  {/* Header with Job Number and Status */}\n                  <View className=\"flex-row items-center justify-between mb-3\">\n                    <Text className=\"text-lg font-bold text-blue-600\">\n                      {result.entry.jobNumber}\n                    </Text>\n                    <View style={{ backgroundColor: statusInfo.bg }} className=\"px-3 py-1 rounded-full\">\n                      <Text style={{ color: statusInfo.text }} className=\"text-xs font-bold\">\n                        {statusInfo.label}\n                      </Text>\n                    </View>\n                  </View>\n\n                  {/* Job Name */}\n                  {result.entry.jobName && (\n                    <Text className=\"text-base font-semibold text-gray-900 mb-2\">\n                      {result.entry.jobName}\n                    </Text>\n                  )}\n\n                  {/* Details Grid */}\n                  <View className=\"gap-2 mb-3\">\n                    {result.entry.idNumber && (\n                      <View className=\"flex-row items-center\">\n                        <Ionicons name=\"key-outline\" size={14} color=\"#6B7280\" />\n                        <Text className=\"text-sm text-gray-600 ml-2\">\n                          ID: {result.entry.idNumber}\n                        </Text>\n                      </View>\n                    )}\n                    \n                    {result.entry.markNumbers && (\n                      <View className=\"flex-row items-center\">\n                        <Ionicons name=\"bookmark-outline\" size={14} color=\"#6B7280\" />\n                        <Text className=\"text-sm text-gray-600 ml-2\">\n                          Mark: {result.entry.markNumbers}\n                        </Text>\n                      </View>\n                    )}\n\n                    <View className=\"flex-row items-center\">\n                      <Text className=\"text-sm text-gray-600\">\n                        Form: {result.entry.formBedName}\n                      </Text>\n                    </View>\n\n                    <View className=\"flex-row items-center\">\n                      <Ionicons name=\"business-outline\" size={14} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-600 ml-2\">\n                        {result.entry.department}\n                      </Text>\n                    </View>\n                  </View>\n\n                  {/* Date Information */}\n                  <View className=\"border-t border-gray-100 pt-3 flex-row items-center justify-between\">\n                    <View className=\"flex-row items-center\">\n                      <Ionicons name=\"calendar-outline\" size={16} color=\"#6B7280\" />\n                      <Text className=\"text-sm text-gray-700 ml-2 font-medium\">\n                        {result.scheduledDate.toLocaleDateString('en-US', {\n                          weekday: 'short',\n                          month: 'short',\n                          day: 'numeric',\n                          year: 'numeric',\n                        })}\n                      </Text>\n                    </View>\n                    <Text className=\"text-xs font-semibold text-gray-500\">\n                      {getDateLabel(result)}\n                    </Text>\n                  </View>\n\n                  {/* Tap to navigate hint */}\n                  <View className=\"flex-row items-center justify-center mt-2 pt-2 border-t border-gray-100\">\n                    <Text className=\"text-xs text-blue-600 font-medium\">\n                      Tap to view in schedule\n                    </Text>\n                    <Ionicons name=\"chevron-forward\" size={14} color=\"#3B82F6\" style={{ marginLeft: 4 }} />\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        )}\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","/**\n * Schedule Scanner Screen\n *\n * Uses native camera to capture paper schedules and AI to parse them\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, Pressable, ActivityIndicator, Alert, ScrollView, Image } from 'react-native';\nimport { SafeAreaView, useSafeAreaInsets } from 'react-native-safe-area-context';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport type { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { parseScheduleImage, ParsedScheduleEntry } from '../api/schedule-scanner';\n\ntype ScannerNavigationProp = NativeStackNavigationProp<RootStackParamList, 'ScheduleScanner'>;\ntype ScannerRouteProp = RouteProp<RootStackParamList, 'ScheduleScanner'>;\n\nexport default function ScheduleScannerScreen() {\n  const navigation = useNavigation<ScannerNavigationProp>();\n  const route = useRoute<ScannerRouteProp>();\n  const insets = useSafeAreaInsets();\n\n  const [capturedImage, setCapturedImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [parsedEntries, setParsedEntries] = useState<ParsedScheduleEntry[]>([]);\n  const [showResults, setShowResults] = useState(false);\n\n  const selectedDate = route.params?.date ? new Date(route.params.date) : new Date();\n  const selectedDepartment = route.params?.department;\n\n  const handleCapture = async () => {\n    try {\n      console.log('[Scanner Screen] Starting capture...');\n\n      // Request camera permissions\n      const { status } = await ImagePicker.requestCameraPermissionsAsync();\n\n      if (status !== 'granted') {\n        Alert.alert(\n          'Camera Permission Required',\n          'Please grant camera permission to scan schedules.',\n          [{ text: 'OK' }]\n        );\n        return;\n      }\n\n      // Launch native camera\n      const result = await ImagePicker.launchCameraAsync({\n        mediaTypes: ['images'],\n        allowsEditing: false,\n        quality: 1, // Maximum quality\n        exif: true,\n      });\n\n      if (result.canceled) {\n        console.log('[Scanner Screen] User canceled camera');\n        return;\n      }\n\n      const photo = result.assets[0];\n      if (photo?.uri) {\n        console.log('[Scanner Screen] Photo captured, URI:', photo.uri);\n        setCapturedImage(photo.uri);\n        setIsProcessing(true);\n\n        try {\n          console.log('[Scanner Screen] Starting AI parsing...');\n          // Parse the image with AI\n          const parseResult = await parseScheduleImage(photo.uri, {\n            date: selectedDate,\n          });\n\n          console.log('[Scanner Screen] Parse result:', parseResult);\n          setIsProcessing(false);\n\n          if (parseResult.success && parseResult.entries.length > 0) {\n            console.log('[Scanner Screen] Successfully parsed', parseResult.entries.length, 'entries');\n            setParsedEntries(parseResult.entries);\n            setShowResults(true);\n          } else {\n            console.error('[Scanner Screen] No entries found or parse failed:', parseResult.error);\n            Alert.alert(\n              'No Data Found',\n              parseResult.error || 'Could not extract schedule entries from the image. Please try again with better lighting or a clearer photo.',\n              [\n                { text: 'Retry', onPress: () => { setCapturedImage(null); setIsProcessing(false); } },\n                { text: 'Cancel', onPress: () => navigation.goBack() },\n              ]\n            );\n          }\n        } catch (parseError) {\n          console.error('[Scanner Screen] Parse error:', parseError);\n          setIsProcessing(false);\n          setCapturedImage(null);\n\n          const errorMessage = parseError instanceof Error ? parseError.message : 'Unknown error';\n          Alert.alert(\n            'Processing Error',\n            `Failed to process image: ${errorMessage}`,\n            [\n              { text: 'Retry', onPress: handleCapture },\n              { text: 'Cancel', onPress: () => navigation.goBack() },\n            ]\n          );\n        }\n      }\n    } catch (error) {\n      console.error('[Scanner Screen] Capture error:', error);\n      setIsProcessing(false);\n      setCapturedImage(null);\n\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      Alert.alert(\n        'Camera Error',\n        `Failed to capture image: ${errorMessage}`,\n        [{ text: 'OK' }]\n      );\n    }\n  };\n\n  const handleImportEntries = () => {\n    try {\n      console.log('[Scanner Screen] Importing', parsedEntries.length, 'entries');\n      console.log('[Scanner Screen] Date:', selectedDate.toISOString());\n      console.log('[Scanner Screen] Department:', selectedDepartment);\n\n      navigation.navigate('ScheduleReview', {\n        entries: parsedEntries,\n        date: selectedDate.toISOString(),\n        department: selectedDepartment,\n      });\n    } catch (error) {\n      console.error('[Scanner Screen] Navigation error:', error);\n      Alert.alert(\n        'Navigation Error',\n        'Failed to navigate to review screen. Please try again.',\n        [{ text: 'OK' }]\n      );\n    }\n  };\n\n  const handleRetake = () => {\n    setCapturedImage(null);\n    setShowResults(false);\n    setParsedEntries([]);\n  };\n\n  // Initial screen - prompt to take photo\n  if (!capturedImage && !showResults) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n        <View style={{ flex: 1 }}>\n          {/* Header */}\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingHorizontal: 16, paddingVertical: 12, borderBottomWidth: 1, borderBottomColor: '#1f2937' }}>\n            <Pressable onPress={() => navigation.goBack()}>\n              <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\n            </Pressable>\n            <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600' }}>Scan Schedule</Text>\n            <View style={{ width: 24 }} />\n          </View>\n\n          {/* Instructions */}\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: 32 }}>\n            <Ionicons name=\"camera-outline\" size={96} color=\"#3b82f6\" style={{ marginBottom: 24 }} />\n\n            <Text style={{ color: '#fff', fontSize: 24, fontWeight: '700', textAlign: 'center', marginBottom: 16 }}>\n              Take a Photo of Your Schedule\n            </Text>\n\n            <Text style={{ color: '#9ca3af', fontSize: 16, textAlign: 'center', marginBottom: 32, lineHeight: 24 }}>\n              Use your phone's native camera for the sharpest results. Frame the Position through Cutback columns.\n            </Text>\n\n            {/* Tips */}\n            <View style={{ backgroundColor: '#1f2937', borderRadius: 12, padding: 20, marginBottom: 32, width: '100%' }}>\n              <Text style={{ color: '#3b82f6', fontSize: 16, fontWeight: '600', marginBottom: 12 }}>\n                Tips for Best Results:\n              </Text>\n              <View style={{ gap: 8 }}>\n                <Text style={{ color: '#d1d5db', fontSize: 14 }}>\n                   Get as close as possible to the schedule\n                </Text>\n                <Text style={{ color: '#d1d5db', fontSize: 14 }}>\n                   Hold phone steady and wait for focus\n                </Text>\n                <Text style={{ color: '#d1d5db', fontSize: 14 }}>\n                   Use flash in low light conditions\n                </Text>\n                <Text style={{ color: '#d1d5db', fontSize: 14 }}>\n                   Frame Position through Cutback columns\n                </Text>\n              </View>\n            </View>\n\n            {/* Capture Button */}\n            <Pressable\n              onPress={handleCapture}\n              style={{ backgroundColor: '#3b82f6', paddingHorizontal: 32, paddingVertical: 16, borderRadius: 12, width: '100%', alignItems: 'center' }}\n            >\n              <View style={{ flexDirection: 'row', alignItems: 'center', gap: 8 }}>\n                <Ionicons name=\"camera\" size={24} color=\"#fff\" />\n                <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600' }}>\n                  Open Camera\n                </Text>\n              </View>\n            </Pressable>\n          </View>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Processing State\n  if (isProcessing) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: 32 }}>\n          {capturedImage && (\n            <Image\n              source={{ uri: capturedImage }}\n              style={{ width: '100%', height: 300, borderRadius: 12, marginBottom: 32 }}\n              resizeMode=\"contain\"\n            />\n          )}\n          <ActivityIndicator size=\"large\" color=\"#3b82f6\" />\n          <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600', marginTop: 16, textAlign: 'center' }}>\n            Analyzing Schedule...\n          </Text>\n          <Text style={{ color: '#9ca3af', fontSize: 14, marginTop: 8, textAlign: 'center' }}>\n            Extracting entries from image\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Results View\n  if (showResults && parsedEntries.length > 0) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n        <View style={{ flex: 1 }}>\n          {/* Header */}\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingHorizontal: 16, paddingVertical: 12, borderBottomWidth: 1, borderBottomColor: '#1f2937' }}>\n            <Pressable onPress={handleRetake}>\n              <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\n            </Pressable>\n            <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600' }}>Scan Results</Text>\n            <View style={{ width: 24 }} />\n          </View>\n\n          <ScrollView style={{ flex: 1 }} contentContainerStyle={{ padding: 16 }}>\n            {/* Preview Image */}\n            {capturedImage && (\n              <View style={{ marginBottom: 16 }}>\n                <Image\n                  source={{ uri: capturedImage }}\n                  style={{ width: '100%', height: 200, borderRadius: 12 }}\n                  resizeMode=\"contain\"\n                />\n              </View>\n            )}\n\n            {/* Results Summary */}\n            <View style={{ backgroundColor: '#1f2937', borderRadius: 12, padding: 16, marginBottom: 16 }}>\n              <Text style={{ color: '#3b82f6', fontSize: 18, fontWeight: '700', marginBottom: 8 }}>\n                Found {parsedEntries.length} {parsedEntries.length === 1 ? 'Entry' : 'Entries'}\n              </Text>\n              <Text style={{ color: '#9ca3af', fontSize: 14 }}>\n                Review the entries below and import to your schedule\n              </Text>\n            </View>\n\n            {/* Entries List */}\n            {parsedEntries.map((entry, index) => (\n              <View key={index} style={{ backgroundColor: '#1f2937', borderRadius: 12, padding: 16, marginBottom: 12 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 8 }}>\n                  <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>\n                    Entry {index + 1}\n                  </Text>\n                  {entry.position && (\n                    <Text style={{ color: '#3b82f6', fontSize: 14, fontWeight: '600' }}>\n                      Position {entry.position}\n                    </Text>\n                  )}\n                </View>\n\n                {entry.jobNumber && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Job: {entry.jobNumber}\n                  </Text>\n                )}\n                {entry.markNumber && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Mark: {entry.markNumber}\n                  </Text>\n                )}\n                {entry.idNumber && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     ID: {entry.idNumber}\n                  </Text>\n                )}\n                {entry.length1 && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Length 1: {entry.length1}\n                  </Text>\n                )}\n                {entry.length2 && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Length 2: {entry.length2}\n                  </Text>\n                )}\n                {entry.width !== undefined && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Width: {entry.width}\"\n                  </Text>\n                )}\n                {entry.angle !== undefined && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14, marginBottom: 4 }}>\n                     Angle: {entry.angle}\n                  </Text>\n                )}\n                {entry.cutback && (\n                  <Text style={{ color: '#d1d5db', fontSize: 14 }}>\n                     Cutback: {entry.cutback}\n                  </Text>\n                )}\n              </View>\n            ))}\n          </ScrollView>\n\n          {/* Action Buttons */}\n          <View style={{ padding: 16, borderTopWidth: 1, borderTopColor: '#1f2937', gap: 12 }}>\n            <Pressable\n              onPress={handleImportEntries}\n              style={{ backgroundColor: '#3b82f6', paddingVertical: 16, borderRadius: 12, alignItems: 'center' }}\n            >\n              <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>\n                Import {parsedEntries.length} {parsedEntries.length === 1 ? 'Entry' : 'Entries'}\n              </Text>\n            </Pressable>\n\n            <Pressable\n              onPress={handleRetake}\n              style={{ backgroundColor: '#374151', paddingVertical: 16, borderRadius: 12, alignItems: 'center' }}\n            >\n              <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>\n                Retake Photo\n              </Text>\n            </Pressable>\n          </View>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return null;\n}\n","/**\n * Schedule Scanner using AI Vision\n *\n * Uses camera to capture paper schedules and AI to parse them into structured data\n */\n\nimport { extractJobNumber } from '../utils/jobNumberValidation';\n\n/**\n * Compress an image blob for faster upload\n * Reduces resolution and quality while maintaining readability for OCR\n *\n * Note: On React Native, image compression is handled by expo-image-picker\n * with the quality parameter, so we just pass through the blob\n */\nasync function compressImage(blob: Blob): Promise<Blob> {\n  // Check if we're in a web environment\n  const isWeb = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n  // On React Native, skip compression - expo-image-picker already handles it\n  if (!isWeb) {\n    console.log('[Schedule Scanner] Skipping compression on React Native (handled by expo-image-picker)');\n    return blob;\n  }\n\n  // Web environment - use canvas compression\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    img.onload = () => {\n      // Target max dimension: 1600px (higher quality for better OCR accuracy)\n      const maxDimension = 1600;\n      let width = img.width;\n      let height = img.height;\n\n      // Calculate scaling factor\n      if (width > height && width > maxDimension) {\n        height = (height * maxDimension) / width;\n        width = maxDimension;\n      } else if (height > maxDimension) {\n        width = (width * maxDimension) / height;\n        height = maxDimension;\n      }\n\n      // Set canvas size\n      canvas.width = width;\n      canvas.height = height;\n\n      // Draw and compress\n      if (ctx) {\n        ctx.drawImage(img, 0, 0, width, height);\n        canvas.toBlob(\n          (compressedBlob) => {\n            if (compressedBlob) {\n              resolve(compressedBlob);\n            } else {\n              reject(new Error('Failed to compress image'));\n            }\n          },\n          'image/jpeg',\n          0.85 // 85% quality - higher quality for better OCR accuracy\n        );\n      } else {\n        reject(new Error('Failed to get canvas context'));\n      }\n    };\n\n    img.onerror = () => reject(new Error('Failed to load image for compression'));\n    img.src = URL.createObjectURL(blob);\n  });\n}\n\nexport interface ParsedScheduleEntry {\n  formBed?: string; // User-assigned only, not from AI\n  position?: number; // Position number from Pos column (sequential: 1, 2, 3...)\n  jobNumber: string;\n  jobName?: string;\n  idNumber?: string; // ID column from schedule\n  markNumber?: string; // Single mark (M1, M2, etc)\n  length1?: string; // Length 1 in feet'-inch fraction\" format\n  length2?: string; // Length 2 in feet'-inch fraction\" format\n  width?: number; // Width in inches\n  angle?: number; // Angle in degrees\n  cutback?: string; // Cutback in feet'-inch fraction\" format\n  productType?: string;\n  concreteYards?: number;\n  mixDesign?: string;\n  scheduledTime?: string;\n  notes?: string;\n  department?: string;\n  confidence?: number; // 0-1 score of parsing confidence\n}\n\nexport interface ScheduleParseResult {\n  success: boolean;\n  entries: ParsedScheduleEntry[];\n  date?: string;\n  rawText?: string;\n  error?: string;\n}\n\n/**\n * Parse a schedule image using AI vision\n */\nexport async function parseScheduleImage(\n  imageUri: string,\n  options?: {\n    date?: Date;\n    department?: string;\n  }\n): Promise<ScheduleParseResult> {\n  try {\n    console.log('[Schedule Scanner] Starting image conversion...');\n\n    // Convert and compress image to base64\n    let base64Image: string;\n\n    try {\n      // First check if imageUri is already base64\n      if (imageUri.startsWith('data:image')) {\n        console.log('[Schedule Scanner] Image is already base64 data URI');\n        base64Image = imageUri.split(',')[1] || imageUri;\n      } else {\n        // Fetch and convert image\n        console.log('[Schedule Scanner] Fetching image from:', imageUri.substring(0, 100));\n        const response = await fetch(imageUri);\n        if (!response.ok) {\n          throw new Error(`Failed to fetch image: ${response.status}`);\n        }\n\n        const blob = await response.blob();\n        console.log('[Schedule Scanner] Original blob size:', blob.size, 'type:', blob.type);\n\n        // Skip compression entirely - just convert to base64\n        // Compression was causing issues in deployed environment\n        console.log('[Schedule Scanner] Converting to base64 without compression...');\n\n        base64Image = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            try {\n              const base64 = reader.result as string;\n              const base64Data = base64.split(',')[1] || base64;\n              console.log('[Schedule Scanner] Base64 conversion complete, length:', base64Data.length);\n              resolve(base64Data);\n            } catch (err) {\n              reject(new Error(`Base64 conversion error: ${err}`));\n            }\n          };\n          reader.onerror = () => reject(new Error('FileReader error'));\n          reader.readAsDataURL(blob);\n        });\n      }\n    } catch (fetchError) {\n      console.error('[Schedule Scanner] Fetch/conversion error:', fetchError);\n      throw new Error(`Failed to load image: ${fetchError instanceof Error ? fetchError.message : 'Unknown error'}`);\n    }\n\n    // Create prompt for AI to parse the schedule\n    const prompt = `You are a PRECISION OCR system for a precast concrete plant's production schedule. Your task is MAXIMUM ACCURACY data extraction.\n\n${options?.date ? `Expected Date: ${options.date.toLocaleDateString()}` : ''}\n${options?.department ? `Department: ${options.department}` : ''}\n\n CRITICAL: YOUR RESPONSE WILL BE REJECTED IF:\n1. Number of entries  highest Position number\n2. Any ID numbers are duplicated\n3. You made assumptions or corrections instead of reading exactly what's printed\n\n\nCRITICAL ACCURACY REQUIREMENTS:\n\n\n ZERO TOLERANCE FOR ERRORS:\n- Every digit, letter, and symbol must be EXACTLY as printed\n- Do NOT make assumptions, inferences, or corrections\n- Do NOT auto-complete patterns (job numbers, marks, IDs are often non-sequential)\n- When uncertain about a character, examine it 3 times before deciding\n- IGNORE all handwritten notes, highlighter marks, pen marks - ONLY read printed text\n\n\nEXTRACTION METHOD (READ THIS CAREFULLY):\n\n\nSTEP 1: COUNT ROWS  ABSOLUTELY CRITICAL - DO THIS FIRST\n- Look at the \"Pos\" (Position) column on the far left\n- Find the HIGHEST position number visible (e.g., if highest is 15, you need 15 entries)\n- This is your target count - you MUST extract EXACTLY this many rows\n- NUMBER OF ENTRIES IN YOUR JSON = HIGHEST POSITION NUMBER (no exceptions)\n- If you cannot see all rows clearly, adjust photo or increase confidence threshold\n\nSTEP 2: EXTRACT EACH ROW LEFT TO RIGHT\nFor EACH row from position 1 to the highest position, read across the columns in this exact order:\n\n\n Column 1: POSITION (Pos)                                     \n  Sequential number: 1, 2, 3, 4...                          \n  This is your row counter                                   \n\n\n\n Column 2: JOB NUMBER                                         \n  May have letter prefix (E, D, etc.) - REMOVE the letters  \n  Extract ONLY the numeric digits                            \n  Examples:                                                  \n   - \"E255096\"  \"255096\"                                     \n   - \"255096\"  \"255096\"                                      \n   - \"D123456\"  \"123456\"                                     \n  Typically 5-6 digits                                       \n  DO NOT assume all rows have same job number               \n\n\n\n Column 3: MARK NUMBER                                        \n  Format: Letter(s) + Number                                 \n  Examples: H1, H2, M1, M2, DT1, G1                         \n  Read EXACTLY as printed - case sensitive                   \n  DO NOT assume sequential (might jump: H1, H3, H5...)      \n\n\n\n Column 4: ID NUMBER  MOST CRITICAL - UNIQUE VALUES    \n  Usually 6-7 digits                                         \n  EVERY DIGIT MATTERS - this is the most critical data       \n  Read digit by digit, left to right, VERY SLOWLY            \n  Triple-check each digit:                                   \n   - Is it a 1 or 7? Look at the shape carefully             \n   - Is it a 0 or 8? Check if it's closed or open            \n   - Is it a 3 or 8? Look at the curves                      \n   - Is it a 5 or 6? Check the top and bottom                \n   - Is it a 2 or Z? Numbers only, no letters                \n   CRITICAL RULE: Every ID number MUST be DIFFERENT        \n  If you see duplicate IDs, you MADE AN ERROR - go back     \n  Check each ID against all others before finalizing         \n  DO NOT assume sequential or patterns - read what's there  \n  DO NOT auto-correct or fix what looks \"wrong\"             \n  When in doubt, mark lower confidence - never guess         \n  This field WILL BE VALIDATED - duplicates = rejection      \n\n\n\n Column 5: LENGTH 1                                           \n  Format: feet'-inches fraction\"                             \n  Examples:                                                  \n   - \"28'-6 1/2\\\"\" (28 feet, 6 and a half inches)            \n   - \"30'-0\\\"\" (30 feet, 0 inches)                           \n   - \"25'-3 3/4\\\"\" (25 feet, 3 and three-quarters inches)    \n  Keep exact spacing and formatting                          \n\n\n\n Column 6: LENGTH 2                                           \n  Same format as LENGTH 1                                    \n  Often identical to LENGTH 1, but NOT always                \n  Read independently - don't copy from LENGTH 1              \n\n\n\n Column 7: WIDTH                                              \n  Number in inches (no units shown, just number)             \n  Examples: 48, 24, 12, 36                                   \n  Extract as integer number                                  \n\n\n\n Column 8: ANGLE                                              \n  Number in degrees (no degree symbol, just number)          \n  Usually 0, but can be 2, 5, etc.                          \n  Extract as number                                          \n\n\n\n Column 9: CUTBACK                                            \n  Format: feet'-inches fraction\" or \"feet inches\"            \n  Examples:                                                  \n   - \"0'-6\\\"\" (0 feet, 6 inches)                             \n   - \"1'-3 1/2\\\"\" (1 foot, 3 and a half inches)              \n   - \"0 ft 6 in\" (alternative format)                         \n  Keep exact formatting as shown                             \n\n\n\nCONFIDENCE SCORING:\n\n\nFor each entry, assign confidence 0.0 to 1.0:\n 1.0 = Crystal clear, 100% certain\n 0.9 = Very clear, high confidence\n 0.8 = Clear but minor ambiguity\n 0.7 = Readable but some blur or uncertainty\n 0.6 = Difficult to read, made best guess\n <0.6 = Very uncertain\n\n\nDATA VALIDATION RULES:\n\n\nFIELDS THAT CAN HAVE IDENTICAL VALUES (across multiple rows):\n Job Number - multiple pieces can have same job\n Mark Number - marks can repeat\n Length 1 - lengths can be identical\n Length 2 - lengths can be identical\n Width - widths can be identical\n Angle - angles can be identical\n Cutback - cutbacks can be identical\n\nFIELD THAT MUST BE UNIQUE:\n ID NUMBER - EVERY ID MUST BE DIFFERENT\n   If you see duplicate IDs, you made a reading error. Go back and read more carefully.\n\n\nQUALITY CHECKS BEFORE SUBMITTING (DO NOT SKIP):\n\n\nMANDATORY CHECKS - YOUR RESPONSE WILL BE REJECTED IF ANY FAIL:\n\n CRITICAL #1: Count the entries in your JSON array\n    Does this number = the highest Position number you saw?\n    If not, you're missing entries - find them and add them\n\n CRITICAL #2: Check all ID numbers for duplicates\n    List out all ID numbers\n    Are there any duplicates?\n    If yes, you made a reading error - go back and reread each ID very carefully\n\n All ID numbers have 6-7 digits?\n All job numbers are numeric only (letters removed)?\n All mark numbers have letter + number format?\n All measurements use correct format with feet' and inches\"?\n Did you read each row independently without copying patterns?\n Did you extract EXACTLY what's printed (no corrections or assumptions)?\n\nBEFORE YOU RETURN YOUR RESPONSE:\n- Count your entries one more time\n- Scan all IDs for duplicates one more time\n- If either check fails, FIX IT NOW\n\n\nOUTPUT FORMAT:\n\n\nReturn ONLY valid JSON (no markdown, no explanation):\n\n{\n  \"date\": \"date from schedule header if visible, or null\",\n  \"entries\": [\n    {\n      \"position\": 1,\n      \"jobNumber\": \"255096\",\n      \"markNumber\": \"H1\",\n      \"idNumber\": \"1234567\",\n      \"length1\": \"28'-6 1/2\\\"\",\n      \"length2\": \"28'-6 1/2\\\"\",\n      \"width\": 48,\n      \"angle\": 0,\n      \"cutback\": \"0'-6\\\"\",\n      \"confidence\": 0.95\n    }\n  ]\n}\n\nUse null for any field that is truly blank or unreadable.\n\nBEGIN EXTRACTION NOW:`;\n\n    console.log('[Schedule Scanner] Starting API call...');\n\n    // For deployed web builds, use our Firebase Cloud Function proxy\n    const isWeb = typeof window !== 'undefined';\n\n    const apiUrl = isWeb\n      ? 'https://us-central1-precast-qc-tools-web-app.cloudfunctions.net/openaiVisionProxy'\n      : (typeof process !== 'undefined' && process.env?.OPENAI_BASE_URL)\n        ? `${process.env.OPENAI_BASE_URL}/chat/completions`\n        : 'https://api.openai.com.proxy.vibecodeapp.com/v1/chat/completions';\n\n    const apiKey = isWeb ? 'not-needed-for-cloud-function' : 'vibecode-proxy-key';\n\n    console.log('[Schedule Scanner] Platform:', isWeb ? 'web' : 'native');\n    console.log('[Schedule Scanner] API URL:', apiUrl);\n\n    const requestBody = {\n      model: 'gpt-4o',\n      messages: [\n        {\n          role: 'user',\n          content: [\n            { type: 'text', text: prompt },\n            {\n              type: 'image_url',\n              image_url: {\n                url: `data:image/jpeg;base64,${base64Image}`,\n                detail: 'high',\n              },\n            },\n          ],\n        },\n      ],\n      temperature: 0,\n      max_tokens: 8000,\n    };\n\n    const fetchOptions: RequestInit = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(requestBody),\n    };\n\n    // Add Authorization header only for non-web platforms\n    if (!isWeb) {\n      (fetchOptions.headers as Record<string, string>)['Authorization'] = `Bearer ${apiKey}`;\n    }\n\n    const response = await fetch(apiUrl, fetchOptions);\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('[Schedule Scanner] API Error:', response.status, errorText);\n      throw new Error(`API request failed: ${response.status} ${errorText}`);\n    }\n\n    const result = await response.json();\n\n    // Parse the response\n    const content = result.choices?.[0]?.message?.content;\n    if (!content) {\n      throw new Error('No response from AI');\n    }\n\n    console.log('[Schedule Scanner] Successfully parsed schedule image');\n\n    // Extract JSON from response (in case there's extra text)\n    let jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    const jsonStr = jsonMatch ? jsonMatch[0] : content;\n    \n    const parsed = JSON.parse(jsonStr);\n\n    // Clean and extract job numbers from entries\n    let cleanedEntries = (parsed.entries || []).map((entry: any) => ({\n      ...entry,\n      jobNumber: entry.jobNumber ? extractJobNumber(entry.jobNumber) : '', // Remove letters/prefixes\n    }));\n\n    // VALIDATION: Log warnings but don't block\n    console.log('[Schedule Scanner] Validation checks:');\n\n    // 1. Check if we have the correct number of entries based on highest position\n    if (cleanedEntries.length > 0) {\n      const positions: number[] = [];\n      for (const entry of cleanedEntries) {\n        if (entry.position && typeof entry.position === 'number') {\n          positions.push(entry.position);\n        }\n      }\n\n      if (positions.length > 0) {\n        const highestPosition = Math.max(...positions);\n        console.log(`[Schedule Scanner] Entry count: ${cleanedEntries.length}, Highest position: ${highestPosition}`);\n\n        if (cleanedEntries.length !== highestPosition) {\n          console.warn(\n            `[Schedule Scanner] WARNING: Entry count mismatch! Found ${cleanedEntries.length} entries but highest Position is ${highestPosition}`\n          );\n        }\n      }\n    }\n\n    // 2. Check for duplicate ID numbers\n    const idNumbers: string[] = [];\n    for (const entry of cleanedEntries) {\n      if (entry.idNumber && typeof entry.idNumber === 'string' && entry.idNumber.trim() !== '') {\n        idNumbers.push(entry.idNumber.trim());\n      }\n    }\n\n    if (idNumbers.length > 0) {\n      const idSet = new Set(idNumbers);\n      console.log(`[Schedule Scanner] Total IDs: ${idNumbers.length}, Unique IDs: ${idSet.size}`);\n\n      if (idSet.size !== idNumbers.length) {\n        // Find duplicates\n        const duplicates: string[] = [];\n        const seen = new Set<string>();\n        for (const id of idNumbers) {\n          if (seen.has(id)) {\n            if (!duplicates.includes(id)) {\n              duplicates.push(id);\n            }\n          }\n          seen.add(id);\n        }\n\n        console.warn(`[Schedule Scanner] WARNING: Duplicate ID numbers found: ${duplicates.join(', ')}`);\n      }\n    }\n\n    return {\n      success: true,\n      entries: cleanedEntries,\n      date: parsed.date,\n      rawText: content,\n    };\n  } catch (error) {\n    console.error('Schedule parsing error:', error);\n    return {\n      success: false,\n      entries: [],\n      error: error instanceof Error ? error.message : 'Failed to parse schedule',\n    };\n  }\n}\n\n/**\n * Validate and clean parsed entries\n */\nexport function validateParsedEntries(\n  entries: ParsedScheduleEntry[]\n): { valid: ParsedScheduleEntry[]; invalid: ParsedScheduleEntry[] } {\n  const valid: ParsedScheduleEntry[] = [];\n  const invalid: ParsedScheduleEntry[] = [];\n\n  for (const entry of entries) {\n    // Must have at minimum: jobNumber\n    // formBed is optional since user will assign it\n    if (entry.jobNumber) {\n      valid.push(entry);\n    } else {\n      invalid.push(entry);\n    }\n  }\n\n  return { valid, invalid };\n}\n\n/**\n * Parse schedule using alternative method (for troubleshooting)\n * Extracts raw text first, then structures it\n */\nexport async function parseScheduleWithTextExtraction(\n  imageUri: string\n): Promise<ScheduleParseResult> {\n  try {\n    console.log('[Schedule Scanner] Starting text extraction method...');\n\n    // Convert and compress image to base64\n    let base64Image: string;\n\n    try {\n      const response = await fetch(imageUri);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch image: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      console.log('[Schedule Scanner] Original blob size:', blob.size);\n\n      // Compress image before converting to base64\n      const compressedBlob = await compressImage(blob);\n      console.log('[Schedule Scanner] Compressed blob size:', compressedBlob.size);\n\n      base64Image = await new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const base64 = reader.result as string;\n          const base64Data = base64.split(',')[1] || base64;\n          resolve(base64Data);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(compressedBlob);\n      });\n    } catch (fetchError) {\n      console.error('[Schedule Scanner] Fetch/conversion error:', fetchError);\n      if (imageUri.startsWith('data:')) {\n        base64Image = imageUri.split(',')[1] || imageUri;\n      } else {\n        throw new Error(`Failed to load image: ${fetchError instanceof Error ? fetchError.message : 'Unknown error'}`);\n      }\n    }\n\n    // Step 1: Extract text\n    const extractPrompt = `Extract all text from this production schedule image.\nMaintain the layout and structure as much as possible. Return plain text.`;\n\n    console.log('[Schedule Scanner] Step 1: Extracting text...');\n\n    // For deployed web builds, use our Firebase Cloud Function proxy\n    const isWeb = typeof window !== 'undefined';\n\n    const apiUrl = isWeb\n      ? 'https://us-central1-precast-qc-tools-web-app.cloudfunctions.net/openaiVisionProxy'\n      : (typeof process !== 'undefined' && process.env?.OPENAI_BASE_URL)\n        ? `${process.env.OPENAI_BASE_URL}/chat/completions`\n        : 'https://api.openai.com.proxy.vibecodeapp.com/v1/chat/completions';\n\n    const apiKey = isWeb ? 'not-needed-for-cloud-function' : 'vibecode-proxy-key';\n\n    const extractRequestBody = {\n      model: 'gpt-4o',\n      messages: [\n        {\n          role: 'user',\n          content: [\n            { type: 'text', text: extractPrompt },\n            {\n              type: 'image_url',\n              image_url: {\n                url: `data:image/jpeg;base64,${base64Image}`,\n                detail: 'high',\n              },\n            },\n          ],\n        },\n      ],\n      temperature: 0,\n      max_tokens: 4000,\n    };\n\n    const extractFetchOptions: RequestInit = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(extractRequestBody),\n    };\n\n    if (!isWeb) {\n      (extractFetchOptions.headers as Record<string, string>)['Authorization'] = `Bearer ${apiKey}`;\n    }\n\n    const extractResponse = await fetch(apiUrl, extractFetchOptions);\n\n    if (!extractResponse.ok) {\n      const errorText = await extractResponse.text();\n      console.error('[Schedule Scanner] Extract API Error:', extractResponse.status, errorText);\n      throw new Error(`API request failed: ${extractResponse.status} ${errorText}`);\n    }\n\n    const extractResult = await extractResponse.json();\n    const extractedText = extractResult.choices?.[0]?.message?.content || '';\n\n    // Step 2: Structure the text\n    const structurePrompt = `Parse this production schedule text into structured JSON. Create ONE entry per individual piece.\n\n${extractedText}\n\nReturn JSON with this structure:\n{\n  \"date\": \"date if visible\",\n  \"entries\": [\n    {\n      \"jobNumber\": \"job number\",\n      \"idNumber\": \"ID from ID column\",\n      \"markNumber\": \"single mark like M1, M2\",\n      \"concreteYards\": number,\n      \"confidence\": 0-1\n    }\n  ]\n}\n\nIMPORTANT: Create separate entries for each piece, extract ID numbers from ID column. DO NOT include formBed field.`;\n\n    console.log('[Schedule Scanner] Step 2: Structuring data...');\n\n    const structureRequestBody = {\n      model: 'gpt-4o',\n      messages: [{ role: 'user', content: structurePrompt }],\n      temperature: 0.1,\n      max_tokens: 2000,\n    };\n\n    const structureFetchOptions: RequestInit = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(structureRequestBody),\n    };\n\n    if (!isWeb) {\n      (structureFetchOptions.headers as Record<string, string>)['Authorization'] = `Bearer ${apiKey}`;\n    }\n\n    const structureResponse = await fetch(apiUrl, structureFetchOptions);\n\n    if (!structureResponse.ok) {\n      const errorText = await structureResponse.text();\n      console.error('[Schedule Scanner] Structure API Error:', structureResponse.status, errorText);\n      throw new Error(`API request failed: ${structureResponse.status} ${errorText}`);\n    }\n\n    const structureResult = await structureResponse.json();\n    const content = structureResult.choices?.[0]?.message?.content || '{}';\n    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    const jsonStr = jsonMatch ? jsonMatch[0] : content;\n    const parsed = JSON.parse(jsonStr);\n\n    return {\n      success: true,\n      entries: parsed.entries || [],\n      date: parsed.date,\n      rawText: extractedText,\n    };\n  } catch (error) {\n    console.error('Text extraction parsing error:', error);\n    return {\n      success: false,\n      entries: [],\n      error: error instanceof Error ? error.message : 'Failed to parse schedule',\n    };\n  }\n}\n","/**\n * Schedule Review Screen\n * \n * Review and edit AI-parsed schedule entries before importing\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, Pressable, ScrollView, TextInput, Alert, Modal } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport type { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { ParsedScheduleEntry } from '../api/schedule-scanner';\nimport { usePourScheduleStore } from '../state/pourScheduleStore';\nimport { useProjectLibraryStore } from '../state/projectLibraryStore';\nimport JobAutocompleteInput from '../components/JobAutocompleteInput';\n\ntype ReviewNavigationProp = NativeStackNavigationProp<RootStackParamList, 'ScheduleReview'>;\ntype ReviewRouteProp = RouteProp<RootStackParamList, 'ScheduleReview'>;\n\nexport default function ScheduleReviewScreen() {\n  const navigation = useNavigation<ReviewNavigationProp>();\n  const route = useRoute<ReviewRouteProp>();\n  \n  const addPourEntry = usePourScheduleStore((s) => s.addPourEntry);\n  const forms = usePourScheduleStore((s) => s.forms);\n  const getFormsByDepartment = usePourScheduleStore((s) => s.getFormsByDepartment);\n  \n  // Project Library integration\n  const projects = useProjectLibraryStore((s) => s.projects);\n  const addProject = useProjectLibraryStore((s) => s.addProject);\n  \n  const [entries, setEntries] = useState<ParsedScheduleEntry[]>(route.params.entries);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null);\n  const [showBulkAssignModal, setShowBulkAssignModal] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(new Date(route.params.date));\n  \n  // Get the department from route params (passed from scanner)\n  const suggestedDepartment = route.params.department;\n  \n  // Filter forms to show only from suggested department if provided\n  const availableForms = suggestedDepartment \n    ? forms.filter(f => f.department === suggestedDepartment && f.isActive)\n    : forms.filter(f => f.isActive);\n\n  const handleUpdateEntry = (index: number, field: keyof ParsedScheduleEntry, value: any) => {\n    const updated = [...entries];\n    updated[index] = { ...updated[index], [field]: value };\n    setEntries(updated);\n  };\n\n  const handleBulkAssignBed = (bedName: string) => {\n    const updated = entries.map(entry => ({ ...entry, formBed: bedName }));\n    setEntries(updated);\n    setShowBulkAssignModal(false);\n    \n    Alert.alert(\n      'Beds Assigned ',\n      `All ${entries.length} pieces assigned to ${bedName}.\\n\\nNext: Click \"Import All\" button below to save these entries.`,\n      [{ text: 'Got it' }]\n    );\n  };\n\n  const handleRemoveEntry = (index: number) => {\n    Alert.alert(\n      'Remove Entry',\n      'Are you sure you want to remove this entry?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Remove',\n          style: 'destructive',\n          onPress: () => {\n            const updated = entries.filter((_, i) => i !== index);\n            setEntries(updated);\n            if (selectedIndex === index) {\n              setSelectedIndex(null);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const handleImportAll = () => {\n    if (entries.length === 0) {\n      Alert.alert('No Entries', 'There are no entries to import.');\n      return;\n    }\n\n    // Check if all entries have formBed assigned\n    const missingForms = entries.filter(e => !e.formBed || !e.formBed.trim());\n    if (missingForms.length > 0) {\n      Alert.alert(\n        'Missing Form/Bed Assignments',\n        `${missingForms.length} ${missingForms.length === 1 ? 'entry needs' : 'entries need'} a Form/Bed assigned. Please assign forms to all entries before importing.`,\n        [{ text: 'OK' }]\n      );\n      return;\n    }\n\n    // Check for job numbers not in Project Library\n    const existingJobNumbers = new Set(projects.map(p => p.jobNumber));\n    const missingJobNumbers = new Set<string>();\n    const missingJobDetails: { jobNumber: string; jobName?: string }[] = [];\n\n    entries.forEach(entry => {\n      if (!existingJobNumbers.has(entry.jobNumber)) {\n        if (!missingJobNumbers.has(entry.jobNumber)) {\n          missingJobNumbers.add(entry.jobNumber);\n          missingJobDetails.push({\n            jobNumber: entry.jobNumber,\n            jobName: entry.jobName,\n          });\n        }\n      }\n    });\n\n    // If there are missing job numbers, prompt user\n    if (missingJobDetails.length > 0) {\n      const jobList = missingJobDetails\n        .map(j => `   ${j.jobNumber}${j.jobName ? ` (${j.jobName})` : ''}`)\n        .join('\\n');\n\n      Alert.alert(\n        'Job(s) Not Found',\n        `The following job ${missingJobDetails.length === 1 ? 'number is' : 'numbers are'} not in the Project Library:\\n\\n${jobList}\\n\\nDo you want to create ${missingJobDetails.length === 1 ? 'it' : 'them'}?`,\n        [\n          {\n            text: 'No',\n            style: 'cancel',\n            onPress: () => {\n              // User can stay on review screen to edit entries\n            },\n          },\n          {\n            text: 'Yes, Create',\n            onPress: () => {\n              // Create the missing projects\n              missingJobDetails.forEach(job => {\n                addProject({\n                  jobNumber: job.jobNumber,\n                  jobName: job.jobName || `Job ${job.jobNumber}`,\n                  location: '',\n                  salesperson: '',\n                  projectManager: '',\n                  assignedEngineer: '',\n                  assignedDrafter: '',\n                  pieceCountByType: [],\n                  createdBy: 'Scanner',\n                });\n              });\n\n              // Now proceed with import\n              proceedWithImport();\n            },\n          },\n        ]\n      );\n      return;\n    }\n\n    // No missing jobs, proceed directly\n    proceedWithImport();\n  };\n\n  const proceedWithImport = () => {\n    let imported = 0;\n    const debugInfo: string[] = [];\n    \n    // Normalize the selected date to midnight to avoid timezone/time issues\n    const normalizedDate = new Date(selectedDate);\n    normalizedDate.setHours(0, 0, 0, 0);\n    const scheduledDateTimestamp = normalizedDate.getTime();\n    \n    entries.forEach((entry) => {\n      // Find the form to get proper department\n      const form = forms.find(f => f.name === entry.formBed || f.id === entry.formBed);\n      const department = form?.department || \"Precast\";\n      \n      debugInfo.push(\n        `Entry: Job ${entry.jobNumber}\\n` +\n        `  formBed: \"${entry.formBed}\"\\n` +\n        `  form found: ${form ? 'YES' : 'NO'}\\n` +\n        `  formBedId: \"${form?.id || entry.formBed}\"\\n` +\n        `  formBedName: \"${form?.name || entry.formBed}\"\\n` +\n        `  department: \"${department}\"\\n` +\n        `  scheduledDate: ${scheduledDateTimestamp} (${normalizedDate.toLocaleString()})`\n      );\n      \n      addPourEntry({\n        formBedId: form?.id || entry.formBed || '',\n        formBedName: form?.name || entry.formBed || '',\n        department: department,\n        scheduledDate: scheduledDateTimestamp,\n        scheduledTime: entry.scheduledTime || undefined,\n        jobNumber: entry.jobNumber,\n        jobName: entry.jobName || undefined,\n        idNumber: entry.idNumber || undefined,\n        markNumbers: entry.markNumber || undefined, // Single mark\n        pieceCount: 1, // Always 1 since we have individual entries\n        productType: entry.productType || undefined,\n        concreteYards: entry.concreteYards || undefined,\n        mixDesign: entry.mixDesign || undefined,\n        notes: entry.notes || undefined,\n        status: \"Scheduled\",\n        foreman: undefined,\n        createdBy: \"Scanner\",\n      });\n      imported++;\n    });\n\n    if (__DEV__) {\n      console.log('Import Debug Info:\\n' + debugInfo.join('\\n\\n'));\n    }\n\n    const dateStr = normalizedDate.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      year: 'numeric'\n    });\n    const deptStr = suggestedDepartment || 'schedule';\n\n    Alert.alert(\n      'Import Successful! ',\n      `${imported} ${imported === 1 ? 'piece' : 'pieces'} imported to:\\n\\n` +\n      ` Date: ${dateStr}\\n` +\n      (suggestedDepartment ? ` Department: ${suggestedDepartment}\\n\\n` : '\\n') +\n      `You'll be taken to the schedule to view your entries.`,\n      [\n        {\n          text: 'View Schedule',\n          onPress: () => {\n            navigation.navigate('DailyPourSchedule', {\n              date: selectedDate.toISOString(),\n              department: suggestedDepartment || undefined,\n            });\n          },\n        },\n      ]\n    );\n  };\n\n  // Render edit form for selected entry\n  const renderEditForm = () => {\n    if (selectedIndex === null) return null;\n    const entry = entries[selectedIndex];\n\n    return (\n      <View style={{ flex: 1, backgroundColor: '#111827', padding: 16 }}>\n        <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 }}>\n          <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600' }}>\n            Edit Entry\n          </Text>\n          <Pressable\n            onPress={() => setSelectedIndex(null)}\n            style={{ padding: 8 }}\n          >\n            <Ionicons name=\"close\" size={24} color=\"#9ca3af\" />\n          </Pressable>\n        </View>\n\n        <ScrollView>\n          <View style={{ gap: 16 }}>\n            {/* Form / Bed Picker - REQUIRED */}\n            <View style={{ backgroundColor: '#374151', padding: 12, borderRadius: 8, marginBottom: 4 }}>\n              <View style={{ flexDirection: 'row', alignItems: 'center', marginBottom: 8 }}>\n                <Ionicons name=\"layers\" size={20} color=\"#60a5fa\" style={{ marginRight: 8 }} />\n                <Text style={{ color: '#60a5fa', fontSize: 14, fontWeight: '600' }}>\n                  Assign Current Form/Bed\n                </Text>\n              </View>\n              <Text style={{ color: '#9ca3af', fontSize: 12 }}>\n                Where is this piece actually being poured today?\n              </Text>\n            </View>\n\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Select Form / Bed *</Text>\n              <View style={{ backgroundColor: '#1f2937', borderRadius: 8, padding: 12, maxHeight: 200 }}>\n                <ScrollView nestedScrollEnabled>\n                  {availableForms.map((form) => (\n                    <Pressable\n                      key={form.id}\n                      onPress={() => handleUpdateEntry(selectedIndex, 'formBed', form.name)}\n                      style={{\n                        padding: 12,\n                        backgroundColor: entry.formBed === form.name ? '#3b82f6' : '#374151',\n                        borderRadius: 8,\n                        marginBottom: 8,\n                      }}\n                    >\n                      <Text style={{ color: '#fff', fontSize: 14, fontWeight: entry.formBed === form.name ? '600' : '400' }}>\n                        {form.name} ({form.department})\n                      </Text>\n                    </Pressable>\n                  ))}\n                </ScrollView>\n              </View>\n              {entry.formBed && (\n                <View style={{ backgroundColor: '#065f46', padding: 10, borderRadius: 8, marginTop: 8, flexDirection: 'row', alignItems: 'center' }}>\n                  <Ionicons name=\"checkmark-circle\" size={18} color=\"#10b981\" style={{ marginRight: 8 }} />\n                  <Text style={{ color: '#10b981', fontSize: 13, fontWeight: '600' }}>\n                    Assigned to: {entry.formBed}\n                  </Text>\n                </View>\n              )}\n              {!entry.formBed && (\n                <View style={{ backgroundColor: '#78350f', padding: 10, borderRadius: 8, marginTop: 8, flexDirection: 'row', alignItems: 'center' }}>\n                  <Ionicons name=\"alert-circle\" size={18} color=\"#f59e0b\" style={{ marginRight: 8 }} />\n                  <Text style={{ color: '#f59e0b', fontSize: 13 }}>\n                    Required: Select a form/bed above\n                  </Text>\n                </View>\n              )}\n            </View>\n\n            {/* Job Number & Name with Autocomplete */}\n            <View>\n              <JobAutocompleteInput\n                jobNumber={entry.jobNumber}\n                jobName={entry.jobName || ''}\n                onJobNumberChange={(text) => handleUpdateEntry(selectedIndex, 'jobNumber', text)}\n                onJobNameChange={(text) => handleUpdateEntry(selectedIndex, 'jobName', text)}\n                required={true}\n                jobNumberLabel=\"Job Number\"\n                jobNameLabel=\"Job Name\"\n                theme=\"dark\"\n              />\n            </View>\n\n            {/* ID Number */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>ID Number</Text>\n              <TextInput\n                value={entry.idNumber || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'idNumber', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"ID from schedule\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Mark Number (Single) */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Mark Number</Text>\n              <TextInput\n                value={entry.markNumber || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'markNumber', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., M1, M2\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Length 1 */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Length 1</Text>\n              <TextInput\n                value={entry.length1 || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'length1', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 28'-6 1/2 inches\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Length 2 */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Length 2</Text>\n              <TextInput\n                value={entry.length2 || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'length2', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 28'-6 1/2 inches\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Width */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Width (inches)</Text>\n              <TextInput\n                value={entry.width?.toString() || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'width', parseFloat(text) || undefined)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 48\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n                keyboardType=\"decimal-pad\"\n              />\n            </View>\n\n            {/* Angle */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Angle (degrees)</Text>\n              <TextInput\n                value={entry.angle?.toString() || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'angle', parseFloat(text) || undefined)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 0\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n                keyboardType=\"decimal-pad\"\n              />\n            </View>\n\n            {/* Cutback */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Cutback</Text>\n              <TextInput\n                value={entry.cutback || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'cutback', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 0 ft 6 in\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Product Type */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Product Type</Text>\n              <TextInput\n                value={entry.productType || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'productType', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., Beam, Slab\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Concrete Yards */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Concrete Yards</Text>\n              <TextInput\n                value={entry.concreteYards?.toString() || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'concreteYards', parseFloat(text) || 0)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"0.0\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n                keyboardType=\"decimal-pad\"\n              />\n            </View>\n\n            {/* Mix Design */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Mix Design</Text>\n              <TextInput\n                value={entry.mixDesign || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'mixDesign', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 6000 PSI\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Scheduled Time */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Scheduled Time</Text>\n              <TextInput\n                value={entry.scheduledTime || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'scheduledTime', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16 }}\n                placeholder=\"e.g., 8:00 AM\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n              />\n            </View>\n\n            {/* Notes */}\n            <View>\n              <Text style={{ color: '#9ca3af', fontSize: 14, marginBottom: 8 }}>Notes</Text>\n              <TextInput\n                value={entry.notes || ''}\n                onChangeText={(text) => handleUpdateEntry(selectedIndex, 'notes', text)}\n                style={{ backgroundColor: '#1f2937', color: '#fff', padding: 12, borderRadius: 8, fontSize: 16, height: 80 }}\n                placeholder=\"Additional notes\"\n                placeholderTextColor=\"#6b7280\"\n                cursorColor=\"#000000\"\n                multiline\n                textAlignVertical=\"top\"\n              />\n            </View>\n\n            {/* Confidence */}\n            {entry.confidence !== undefined && (\n              <View style={{ backgroundColor: '#1f2937', padding: 12, borderRadius: 8 }}>\n                <Text style={{ color: '#9ca3af', fontSize: 14 }}>\n                  AI Confidence: <Text style={{ color: entry.confidence > 0.7 ? '#10b981' : '#f59e0b', fontWeight: '600' }}>\n                    {Math.round(entry.confidence * 100)}%\n                  </Text>\n                </Text>\n              </View>\n            )}\n          </View>\n        </ScrollView>\n\n        {/* Done Button */}\n        <Pressable\n          onPress={() => setSelectedIndex(null)}\n          style={{ backgroundColor: '#3b82f6', padding: 16, borderRadius: 12, alignItems: 'center', marginTop: 16 }}\n        >\n          <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>\n            Done Editing\n          </Text>\n        </Pressable>\n      </View>\n    );\n  };\n\n  // If editing an entry, show edit form\n  if (selectedIndex !== null) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }} edges={['top', 'left', 'right']}>\n        {renderEditForm()}\n      </SafeAreaView>\n    );\n  }\n\n  // Main list view\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n      {/* Header */}\n      <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: 16, borderBottomWidth: 1, borderBottomColor: '#374151' }}>\n        <Pressable onPress={() => navigation.goBack()}>\n          <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\n        </Pressable>\n        <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600' }}>\n          Review Entries\n        </Text>\n        <View style={{ width: 24 }} />\n      </View>\n\n      {/* Entry Count */}\n      <View style={{ padding: 16, paddingBottom: 8 }}>\n        {suggestedDepartment && (\n          <View style={{ backgroundColor: '#1f2937', padding: 12, borderRadius: 8, marginBottom: 12, borderWidth: 1, borderColor: '#3b82f6' }}>\n            <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n              <Ionicons name=\"business\" size={18} color=\"#60a5fa\" style={{ marginRight: 8 }} />\n              <Text style={{ color: '#60a5fa', fontSize: 14, fontWeight: '600' }}>\n                Importing to: {suggestedDepartment}\n              </Text>\n            </View>\n            <Text style={{ color: '#9ca3af', fontSize: 12, marginTop: 4 }}>\n              Only showing forms from this department\n            </Text>\n          </View>\n        )}\n        <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600', marginBottom: 4 }}>\n          {entries.length} {entries.length === 1 ? 'piece' : 'pieces'} scanned\n        </Text>\n        <Text style={{ color: '#9ca3af', fontSize: 14 }}>\n          Assign current Form/Bed for each piece\n        </Text>\n        {entries.filter(e => !e.formBed).length > 0 && (\n          <View style={{ backgroundColor: '#374151', padding: 12, borderRadius: 8, marginTop: 8, flexDirection: 'row', alignItems: 'center' }}>\n            <Ionicons name=\"alert-circle\" size={20} color=\"#f59e0b\" style={{ marginRight: 8 }} />\n            <Text style={{ color: '#f59e0b', fontSize: 13, flex: 1 }}>\n              {entries.filter(e => !e.formBed).length} {entries.filter(e => !e.formBed).length === 1 ? 'piece needs' : 'pieces need'} bed assignment\n            </Text>\n          </View>\n        )}\n      </View>\n\n      {/* Pour Date Selector */}\n      <View style={{ paddingHorizontal: 16, paddingBottom: 8 }}>\n        <View style={{ backgroundColor: '#1f2937', borderRadius: 12, padding: 14 }}>\n          <View style={{ flexDirection: 'row', alignItems: 'center', marginBottom: 8 }}>\n            <Ionicons name=\"calendar\" size={18} color=\"#60a5fa\" style={{ marginRight: 8 }} />\n            <Text style={{ color: '#60a5fa', fontSize: 14, fontWeight: '600' }}>\n              Pour Date\n            </Text>\n          </View>\n          <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between' }}>\n            <Pressable\n              onPress={() => {\n                const newDate = new Date(selectedDate);\n                newDate.setDate(newDate.getDate() - 1);\n                setSelectedDate(newDate);\n              }}\n              style={{ padding: 8, backgroundColor: '#374151', borderRadius: 8 }}\n            >\n              <Ionicons name=\"chevron-back\" size={20} color=\"#fff\" />\n            </Pressable>\n\n            <Text style={{ color: '#fff', fontSize: 15, fontWeight: '600', flex: 1, textAlign: 'center' }}>\n              {selectedDate.toLocaleDateString('en-US', { \n                weekday: 'short',\n                month: 'short', \n                day: 'numeric',\n                year: 'numeric'\n              })}\n            </Text>\n\n            <Pressable\n              onPress={() => {\n                const newDate = new Date(selectedDate);\n                newDate.setDate(newDate.getDate() + 1);\n                setSelectedDate(newDate);\n              }}\n              style={{ padding: 8, backgroundColor: '#374151', borderRadius: 8 }}\n            >\n              <Ionicons name=\"chevron-forward\" size={20} color=\"#fff\" />\n            </Pressable>\n          </View>\n          <Pressable\n            onPress={() => setSelectedDate(new Date())}\n            style={{ marginTop: 8, alignItems: 'center' }}\n          >\n            <Text style={{ color: '#60a5fa', fontSize: 13 }}>\n              Today\n            </Text>\n          </Pressable>\n        </View>\n      </View>\n\n      {/* Bulk Assign Button */}\n      <View style={{ paddingHorizontal: 16, paddingBottom: 8 }}>\n        <Pressable\n          onPress={() => setShowBulkAssignModal(true)}\n          style={{ backgroundColor: '#8B5CF6', padding: 14, borderRadius: 12, flexDirection: 'row', alignItems: 'center', justifyContent: 'center' }}\n        >\n          <Ionicons name=\"copy\" size={20} color=\"#fff\" style={{ marginRight: 8 }} />\n          <Text style={{ color: '#fff', fontSize: 15, fontWeight: '600' }}>\n            Assign All to Same Bed\n          </Text>\n        </Pressable>\n      </View>\n\n      {/* Entry List */}\n      <ScrollView style={{ flex: 1, padding: 16, paddingTop: 8 }}>\n        {entries.map((entry, index) => (\n          <View key={index} style={{ backgroundColor: '#1f2937', padding: 16, borderRadius: 12, marginBottom: 12 }}>\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: 12 }}>\n              <View style={{ flex: 1 }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center', marginBottom: 4 }}>\n                  {entry.formBed ? (\n                    <>\n                      <Ionicons name=\"checkmark-circle\" size={18} color=\"#10b981\" style={{ marginRight: 6 }} />\n                      <Text style={{ color: '#10b981', fontSize: 16, fontWeight: '600' }}>\n                        {entry.formBed}\n                      </Text>\n                    </>\n                  ) : (\n                    <>\n                      <Ionicons name=\"alert-circle\" size={18} color=\"#f59e0b\" style={{ marginRight: 6 }} />\n                      <Text style={{ color: '#f59e0b', fontSize: 16, fontWeight: '600' }}>\n                        Bed Not Assigned\n                      </Text>\n                    </>\n                  )}\n                </View>\n                <Text style={{ color: '#3b82f6', fontSize: 15, fontWeight: '600', marginBottom: 2 }}>\n                  Job {entry.jobNumber}{entry.markNumber ? `  ${entry.markNumber}` : ''}\n                </Text>\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                  {entry.idNumber ? `ID: ${entry.idNumber}` : `Piece ${index + 1}`}\n                </Text>\n              </View>\n              <View style={{ flexDirection: 'row', gap: 8 }}>\n                <Pressable\n                  onPress={() => setSelectedIndex(index)}\n                  style={{ padding: 8, backgroundColor: entry.formBed ? '#374151' : '#78350f', borderRadius: 8 }}\n                >\n                  <Ionicons name={entry.formBed ? \"create-outline\" : \"add-circle\"} size={20} color={entry.formBed ? \"#3b82f6\" : \"#f59e0b\"} />\n                </Pressable>\n                <Pressable\n                  onPress={() => handleRemoveEntry(index)}\n                  style={{ padding: 8, backgroundColor: '#374151', borderRadius: 8 }}\n                >\n                  <Ionicons name=\"trash-outline\" size={20} color=\"#ef4444\" />\n                </Pressable>\n              </View>\n            </View>\n\n            <View style={{ gap: 4 }}>\n              {entry.markNumber && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Mark: {entry.markNumber}\n                </Text>\n              )}\n              {entry.jobName && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   {entry.jobName}\n                </Text>\n              )}\n              {entry.length1 && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Length 1: {entry.length1}\n                </Text>\n              )}\n              {entry.length2 && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Length 2: {entry.length2}\n                </Text>\n              )}\n              {entry.width !== undefined && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Width: {entry.width}\"\n                </Text>\n              )}\n              {entry.angle !== undefined && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Angle: {entry.angle}\n                </Text>\n              )}\n              {entry.cutback && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   Cutback: {entry.cutback}\n                </Text>\n              )}\n              {entry.concreteYards && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   {entry.concreteYards} yd\n                </Text>\n              )}\n              {entry.mixDesign && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   {entry.mixDesign}\n                </Text>\n              )}\n              {entry.scheduledTime && (\n                <Text style={{ color: '#9ca3af', fontSize: 13 }}>\n                   {entry.scheduledTime}\n                </Text>\n              )}\n            </View>\n\n            {entry.confidence !== undefined && (\n              <View style={{ marginTop: 8, paddingTop: 8, borderTopWidth: 1, borderTopColor: '#374151' }}>\n                <Text style={{ color: entry.confidence > 0.7 ? '#10b981' : '#f59e0b', fontSize: 12 }}>\n                  {Math.round(entry.confidence * 100)}% confidence\n                </Text>\n              </View>\n            )}\n          </View>\n        ))}\n\n        {entries.length === 0 && (\n          <View style={{ alignItems: 'center', padding: 32 }}>\n            <Ionicons name=\"document-outline\" size={64} color=\"#374151\" style={{ marginBottom: 16 }} />\n            <Text style={{ color: '#9ca3af', fontSize: 16, textAlign: 'center' }}>\n              No entries to review\n            </Text>\n          </View>\n        )}\n      </ScrollView>\n\n      {/* Action Buttons */}\n      {entries.length > 0 && (\n        <View style={{ padding: 16, borderTopWidth: 1, borderTopColor: '#374151', gap: 12 }}>\n          <Pressable\n            onPress={handleImportAll}\n            style={{ backgroundColor: '#10b981', padding: 16, borderRadius: 12, alignItems: 'center' }}\n          >\n            <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>\n              Import All {entries.length} {entries.length === 1 ? 'Entry' : 'Entries'}\n            </Text>\n          </Pressable>\n        </View>\n      )}\n\n      {/* Bulk Assign Modal */}\n      <Modal\n        visible={showBulkAssignModal}\n        animationType=\"slide\"\n        transparent\n        onRequestClose={() => setShowBulkAssignModal(false)}\n      >\n        <View style={{ flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'flex-end' }}>\n          <View style={{ backgroundColor: '#111827', borderTopLeftRadius: 24, borderTopRightRadius: 24, maxHeight: '70%' }}>\n            {/* Modal Header */}\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: 20, borderBottomWidth: 1, borderBottomColor: '#374151' }}>\n              <View>\n                <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600', marginBottom: 4 }}>\n                  Assign All to Same Bed\n                </Text>\n                <Text style={{ color: '#9ca3af', fontSize: 14 }}>\n                  {entries.length} pieces will be assigned\n                </Text>\n              </View>\n              <Pressable onPress={() => setShowBulkAssignModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#9ca3af\" />\n              </Pressable>\n            </View>\n\n            {/* Form/Bed List */}\n            <ScrollView style={{ padding: 16 }}>\n              {availableForms.map((form) => (\n                <Pressable\n                  key={form.id}\n                  onPress={() => handleBulkAssignBed(form.name)}\n                  style={{ backgroundColor: '#1f2937', padding: 16, borderRadius: 12, marginBottom: 12, borderWidth: 2, borderColor: '#374151' }}\n                >\n                  <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <View>\n                      <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600', marginBottom: 4 }}>\n                        {form.name}\n                      </Text>\n                      <Text style={{ color: '#9ca3af', fontSize: 14 }}>\n                        {form.department}{form.capacity ? `  ${form.capacity}` : ''}\n                      </Text>\n                    </View>\n                    <Ionicons name=\"arrow-forward\" size={20} color=\"#3b82f6\" />\n                  </View>\n                </Pressable>\n              ))}\n            </ScrollView>\n\n            {/* Cancel Button */}\n            <View style={{ padding: 16, borderTopWidth: 1, borderTopColor: '#374151' }}>\n              <Pressable\n                onPress={() => setShowBulkAssignModal(false)}\n                style={{ backgroundColor: '#374151', padding: 14, borderRadius: 12, alignItems: 'center' }}\n              >\n                <Text style={{ color: '#9ca3af', fontSize: 16, fontWeight: '600' }}>\n                  Cancel\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n","/**\n * Product Tag Scanner using AI Vision\n *\n * Uses camera to capture product tags and AI to parse specific fields\n */\n\n/**\n * Compress an image blob for faster upload\n * Reduces resolution and quality while maintaining readability for OCR\n */\nasync function compressImage(blob: Blob): Promise<Blob> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    img.onload = () => {\n      // Target max dimension: 1600px (higher quality for better OCR accuracy)\n      const maxDimension = 1600;\n      let width = img.width;\n      let height = img.height;\n\n      // Calculate scaling factor\n      if (width > height && width > maxDimension) {\n        height = (height * maxDimension) / width;\n        width = maxDimension;\n      } else if (height > maxDimension) {\n        width = (width * maxDimension) / height;\n        height = maxDimension;\n      }\n\n      // Set canvas size\n      canvas.width = width;\n      canvas.height = height;\n\n      // Draw and compress\n      if (ctx) {\n        ctx.drawImage(img, 0, 0, width, height);\n        canvas.toBlob(\n          (compressedBlob) => {\n            if (compressedBlob) {\n              resolve(compressedBlob);\n            } else {\n              reject(new Error('Failed to compress image'));\n            }\n          },\n          'image/jpeg',\n          0.85 // 85% quality - higher quality for better OCR accuracy\n        );\n      } else {\n        reject(new Error('Failed to get canvas context'));\n      }\n    };\n\n    img.onerror = () => reject(new Error('Failed to load image for compression'));\n    img.src = URL.createObjectURL(blob);\n  });\n}\n\nexport interface ProductTagData {\n  projectName?: string;\n  projectNumber?: string;\n  markNumber?: string;\n  idNumber?: string;\n  span?: {\n    feet: number;\n    inches: number;\n  };\n  pourDate?: string;\n  strandPattern?: string;\n  productWidth?: number; // Width extracted from \"8 x 48\" pattern\n  slippageIdentifier?: string;\n  camberCalculator?: string;\n}\n\nexport interface ProductTagParseResult {\n  success: boolean;\n  data?: ProductTagData;\n  rawText?: string;\n  error?: string;\n}\n\n/**\n * Parse a product tag image using AI vision\n * Extracts ALL product details from the tag\n */\nexport async function parseProductTag(\n  imageUri: string\n): Promise<ProductTagParseResult> {\n  try {\n    console.log('[Product Tag Scanner] Starting image conversion, URI:', imageUri);\n\n    // Convert and compress image to base64\n    let base64Image: string;\n\n    try {\n      // Try fetching the image first\n      const response = await fetch(imageUri);\n      console.log('[Product Tag Scanner] Fetch response status:', response.status);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch image: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      console.log('[Product Tag Scanner] Original blob size:', blob.size, 'type:', blob.type);\n\n      // Compress image before converting to base64\n      const compressedBlob = await compressImage(blob);\n      console.log('[Product Tag Scanner] Compressed blob size:', compressedBlob.size, 'reduction:',\n        Math.round((1 - compressedBlob.size / blob.size) * 100) + '%');\n\n      base64Image = await new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const base64 = reader.result as string;\n          console.log('[Product Tag Scanner] FileReader complete, data length:', base64.length);\n          // Remove data URL prefix\n          const base64Data = base64.split(',')[1] || base64;\n          resolve(base64Data);\n        };\n        reader.onerror = (error) => {\n          console.error('[Product Tag Scanner] FileReader error:', error);\n          reject(error);\n        };\n        reader.readAsDataURL(compressedBlob);\n      });\n    } catch (fetchError) {\n      console.error('[Product Tag Scanner] Fetch/conversion error:', fetchError);\n\n      // If imageUri is already a data URL, extract the base64 part\n      if (imageUri.startsWith('data:')) {\n        console.log('[Product Tag Scanner] Image is already a data URL, extracting base64...');\n        base64Image = imageUri.split(',')[1] || imageUri;\n      } else {\n        throw new Error(`Failed to load image: ${fetchError instanceof Error ? fetchError.message : 'Unknown error'}`);\n      }\n    }\n\n    console.log('[Product Tag Scanner] Base64 conversion complete, length:', base64Image.length);\n\n    // Create prompt for AI to parse the product tag - extract ALL fields\n    const prompt = `You are analyzing a product tag from a precast concrete hollow-core plank. Extract ALL the following information from the tag.\n\nFIELD EXTRACTION RULES (CRITICAL - FOLLOW EXACTLY):\n\n1. JOB NUMBER (Project Number):\n   - Usually a 6-digit number like \"255096\"\n   - Extract as-is, numeric only\n\n2. MARK NUMBER:\n   - Format like \"H105\", \"M1\", \"M2\", etc.\n   - Include the letter prefix (H, M, etc.)\n\n3. SPAN:\n   - Format like \"28'-5\\\"\" or \"33'-2.5\\\"\"\n   - First number is FEET\n   - Second number (after apostrophe) is INCHES as DECIMAL (e.g., 5\" means 5.0 inches, 2.5\" means 2.5 inches)\n   - Return as separate feet and inches values\n\n4. ID NUMBER:\n   - Usually a 7-digit number like \"1350951\"\n   - Extract as-is\n\n5. WIDTH (from \"8 x 48\" pattern):\n   - Look for pattern like \"8 x 48\" or \"8 X 48\"\n   - Extract ONLY the second number (48) - this is the width\n   - The first number (8) should be IGNORED for now\n\n6. STRAND PATTERN:\n   - Look for a 2-3 digit number like \"126\" or \"107\" or \"77\" or \"148\"\n   - ALWAYS append \"-70\" to this number\n   - Example: if you see \"126\", return \"126-70\"\n   - Example: if you see \"107\", return \"107-70\"\n\n7. POUR DATE:\n   - Format on tag is MM.DD.YYYY (e.g., \"09.12.2025\" means September 12th, 2025)\n   - Simply convert dots to forward slashes\n   - Example: \"09.12.2025\"  \"09/12/2025\" (September 12th, 2025)\n   - Example: \"12.09.2025\"  \"12/09/2025\" (December 9th, 2025)\n   - IMPORTANT: First number is MONTH, second is DAY, third is YEAR - just replace dots with slashes\n\n8. IGNORE THESE:\n   - Any \"E\" or \"D\" letter standing alone (skip it)\n   - Any \"#\" followed by numbers at the top (internal tracking)\n   - The first number in the \"8 x 48\" pattern (the height)\n\nLAYOUT EXAMPLE:\nThe tag typically shows:\n- Top: tracking number (ignore)\n- Job Number: 6 digits (255096)\n- Letter E or D (ignore)\n- Mark Number: letter+digits (H105)\n- Span: feet'inches\" format (28'-5\")\n- ID Number: 7 digits (1350951)\n- Size: \"8 x 48\" pattern (extract only 48)\n- Strand number: 2-3 digits (126)  convert to \"126-70\"\n- Pour Date: MM.DD.YYYY (09.12.2025)  convert to MM/DD/YYYY (09/12/2025)\n\nReturn ONLY a valid JSON object with this structure:\n{\n  \"projectNumber\": \"255096\",\n  \"markNumber\": \"H105\",\n  \"idNumber\": \"1350951\",\n  \"span\": {\n    \"feet\": 28,\n    \"inches\": 5.0\n  },\n  \"pourDate\": \"09/12/2025\",\n  \"strandPattern\": \"126-70\",\n  \"productWidth\": 48\n}\n\nIMPORTANT:\n- Return null for any field you cannot find\n- Be precise with numbers - don't guess\n- Always append \"-70\" to the strand pattern number\n- Pour date format: MM.DD.YYYY on tag  MM/DD/YYYY in output (just replace dots with slashes)\n- For span inches: if you see \"5\\\"\", that means 5.0 inches (decimal)\n- Extract ONLY the width (second number) from \"8 x 48\" pattern\n\nReturn ONLY the JSON, no other text.`;\n\n    console.log('[Product Tag Scanner] Starting API call...');\n\n    // For deployed web builds, use our Firebase Cloud Function proxy\n    // This avoids SSL certificate issues with the direct proxy URL\n    const isWeb = typeof window !== 'undefined';\n\n    const apiUrl = isWeb\n      ? 'https://us-central1-precast-qc-tools-web-app.cloudfunctions.net/openaiVisionProxy'\n      : (typeof process !== 'undefined' && process.env?.OPENAI_BASE_URL)\n        ? `${process.env.OPENAI_BASE_URL}/chat/completions`\n        : 'https://api.openai.com.proxy.vibecodeapp.com/v1/chat/completions';\n\n    const apiKey = isWeb ? 'not-needed-for-cloud-function' : 'vibecode-proxy-key';\n\n    console.log('[Product Tag Scanner] Platform:', isWeb ? 'web' : 'native');\n    console.log('[Product Tag Scanner] API URL:', apiUrl);\n    console.log('[Product Tag Scanner] Making fetch request...');\n\n    // Create abort controller for timeout\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\n\n    // Call OpenAI API using fetch\n    // For web, the Cloud Function handles the Authorization header\n    const requestBody = {\n      model: 'gpt-4o-mini', // Using mini for faster processing\n      messages: [\n        {\n          role: 'user',\n          content: [\n            { type: 'text', text: prompt },\n            {\n              type: 'image_url',\n              image_url: {\n                url: `data:image/jpeg;base64,${base64Image}`,\n                detail: 'high', // Changed to 'high' for better OCR accuracy\n              },\n            },\n          ],\n        },\n      ],\n      temperature: 0.1,\n      max_tokens: 300, // Reduced from 1000 for faster response\n    };\n\n    const fetchOptions: RequestInit = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(requestBody),\n      signal: controller.signal,\n    };\n\n    // Add Authorization header only for non-web platforms\n    if (!isWeb) {\n      (fetchOptions.headers as Record<string, string>)['Authorization'] = `Bearer ${apiKey}`;\n    }\n\n    const response = await fetch(apiUrl, fetchOptions);\n\n    clearTimeout(timeoutId);\n    console.log('[Product Tag Scanner] Fetch completed, status:', response.status);\n    console.log('[Product Tag Scanner] Response headers:', Object.fromEntries(response.headers.entries()));\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('[Product Tag Scanner] API Error:', response.status, errorText);\n\n      // Show alert to user on web\n      if (typeof window !== 'undefined') {\n        alert(`API Error (${response.status}): ${errorText.substring(0, 200)}`);\n      }\n\n      throw new Error(`API request failed: ${response.status} ${errorText}`);\n    }\n\n    const result = await response.json();\n    console.log('[Product Tag Scanner] Full API response:', JSON.stringify(result, null, 2));\n\n    // Parse the response\n    const content = result.choices?.[0]?.message?.content;\n    if (!content) {\n      throw new Error('No response from AI');\n    }\n\n    console.log('[Product Tag Scanner] Raw AI response:', content);\n\n    // Extract JSON from response (in case there's extra text)\n    let jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    const jsonStr = jsonMatch ? jsonMatch[0] : content;\n\n    const parsed = JSON.parse(jsonStr);\n\n    console.log('[Product Tag Scanner] Parsed data:', parsed);\n\n    return {\n      success: true,\n      data: parsed,\n      rawText: content,\n    };\n  } catch (error) {\n    console.error('Product tag parsing error:', error);\n\n    // Show detailed error to user on web for debugging\n    if (typeof window !== 'undefined') {\n      const errorMsg = error instanceof Error ? error.message : String(error);\n      alert(`Scanner Error: ${errorMsg}`);\n    }\n\n    // Handle timeout errors\n    if (error instanceof Error && error.name === 'AbortError') {\n      return {\n        success: false,\n        error: 'Request timed out after 30 seconds. Please try again.',\n      };\n    }\n\n    // Provide helpful error message for 401 errors\n    if (error instanceof Error && error.message.includes('401')) {\n      return {\n        success: false,\n        error: 'OpenAI API authentication failed. Please check your API key configuration.',\n      };\n    }\n\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to parse product tag',\n    };\n  }\n}\n\n/**\n * Format span for display (e.g., \"33'-2.5\\\"\")\n */\nexport function formatSpanForDisplay(feet: number, inches: number): string {\n  return `${feet}'-${inches}\"`;\n}\n\n/**\n * Parse span from display format back to feet and inches\n */\nexport function parseSpanFromDisplay(spanStr: string): { feet: number; inches: number } | null {\n  const match = spanStr.match(/^(\\d+)'-(\\d+(?:\\.\\d+)?)\"/);\n  if (match) {\n    return {\n      feet: parseInt(match[1], 10),\n      inches: parseFloat(match[2]),\n    };\n  }\n  return null;\n}\n","/**\n * Product Tag Scanner Screen\n *\n * Uses camera to capture product tags and AI to parse fields like span and pour date\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { View, Text, Pressable, ActivityIndicator, Alert, Image, Platform } from 'react-native';\nimport { SafeAreaView, useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { CameraView, CameraType, useCameraPermissions } from 'expo-camera';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport type { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { parseProductTag, ProductTagData } from '../api/product-tag-scanner';\n\ntype ScannerNavigationProp = NativeStackNavigationProp<RootStackParamList, 'ProductTagScanner'>;\ntype ScannerRouteProp = RouteProp<RootStackParamList, 'ProductTagScanner'>;\n\nexport default function ProductTagScannerScreen() {\n  const navigation = useNavigation<ScannerNavigationProp>();\n  const route = useRoute<ScannerRouteProp>();\n  const insets = useSafeAreaInsets();\n\n  const [permission, requestPermission] = useCameraPermissions();\n  const [facing, setFacing] = useState<CameraType>('back');\n  const [flash, setFlash] = useState(false);\n  const [capturedImage, setCapturedImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [zoom, setZoom] = useState(0);\n  const [cameraCompleted, setCameraCompleted] = useState(false);\n\n  const cameraRef = useRef<CameraView>(null);\n  const processingRef = useRef(false); // Persistent flag across re-renders\n  const { onDataScanned } = route.params;\n\n  // On web, auto-launch camera picker once when component mounts\n  useEffect(() => {\n    if (Platform.OS === 'web' && !processingRef.current) {\n      handleWebCapture();\n    }\n  }, []);\n\n  // Web-specific camera picker\n  const handleWebCapture = async () => {\n    // Prevent multiple launches - check ref first (persists across re-renders)\n    if (processingRef.current) {\n      console.log('[Scanner] Already processing (ref check), skipping camera launch');\n      return;\n    }\n\n    if (isProcessing || cameraCompleted) {\n      console.log('[Scanner] Already processing or completed, skipping camera launch');\n      return;\n    }\n\n    // Set flags IMMEDIATELY before launching to prevent multiple launches\n    processingRef.current = true; // Set ref flag first\n    setCameraCompleted(true);\n    setIsProcessing(true);\n\n    try {\n      console.log('[Scanner] Launching camera...');\n      // On web, use the image picker which will trigger the browser's file/camera picker\n      // Request base64 data to avoid blob URL fetch issues on iOS Safari\n      const result = await ImagePicker.launchCameraAsync({\n        mediaTypes: ['images'],\n        allowsEditing: false,\n        quality: 0.7, // Reduced from 1.0 for faster processing\n        exif: true,\n        base64: true, // Get base64 data directly\n      });\n\n      if (result.canceled) {\n        console.log('[Scanner] User canceled camera');\n        processingRef.current = false;\n        setCameraCompleted(false);\n        setIsProcessing(false);\n        navigation.goBack();\n        return;\n      }\n\n      const photo = result.assets[0];\n      if (photo?.uri) {\n        console.log('[Scanner] Photo captured:', photo.uri);\n        console.log('[Scanner] Has base64:', !!photo.base64);\n        setCapturedImage(photo.uri);\n\n        // Parse the image with AI\n        console.log('[Scanner] Parsing product tag...');\n        // If base64 is available, pass it directly, otherwise use URI\n        const imageData = photo.base64\n          ? `data:image/jpeg;base64,${photo.base64}`\n          : photo.uri;\n        console.log('[Scanner] Using image data type:', photo.base64 ? 'base64' : 'uri');\n        const parseResult = await parseProductTag(imageData);\n\n        setIsProcessing(false);\n\n        if (parseResult.success && parseResult.data) {\n          console.log('[Scanner] Successfully parsed data:', parseResult.data);\n          // Call the callback with the parsed data\n          onDataScanned(parseResult.data);\n          processingRef.current = false;\n          navigation.goBack();\n        } else {\n          console.log('[Scanner] Failed to parse data');\n          processingRef.current = false;\n          setCameraCompleted(false); // Allow retry\n          Alert.alert(\n            'No Data Found',\n            'Could not extract information from the product tag. Please try again with better lighting or a clearer photo.',\n            [\n              {\n                text: 'Retry',\n                onPress: () => {\n                  setCameraCompleted(false);\n                  setCapturedImage(null);\n                  handleWebCapture();\n                }\n              },\n              { text: 'Cancel', onPress: () => navigation.goBack() },\n            ]\n          );\n        }\n      }\n    } catch (error) {\n      console.error('[Scanner] Capture error:', error);\n      processingRef.current = false;\n      setIsProcessing(false);\n      setCameraCompleted(false);\n      Alert.alert('Error', 'Failed to capture or process image. Please try again.');\n      navigation.goBack();\n    }\n  };\n\n  // On web, show the processing state\n  if (Platform.OS === 'web') {\n    // Always show loading state on web (camera launches automatically)\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: 32 }}>\n          {capturedImage && (\n            <Image\n              source={{ uri: capturedImage }}\n              style={{ width: '100%', height: '50%', borderRadius: 12, marginBottom: 32, opacity: 0.5 }}\n              resizeMode=\"contain\"\n            />\n          )}\n          <ActivityIndicator size=\"large\" color=\"#3b82f6\" style={{ marginBottom: 16 }} />\n          <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600', marginBottom: 8 }}>\n            {capturedImage ? 'Reading Product Tag...' : 'Opening Camera...'}\n          </Text>\n          <Text style={{ color: '#9ca3af', fontSize: 14, textAlign: 'center' }}>\n            {capturedImage ? 'AI is extracting information from the tag' : 'Please allow camera access when prompted'}\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Request permission if not granted\n  if (!permission) {\n    return <View style={{ flex: 1, backgroundColor: '#000' }} />;\n  }\n\n  if (!permission.granted) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#1f2937' }}>\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: 20 }}>\n          <Ionicons name=\"camera-outline\" size={64} color=\"#9ca3af\" style={{ marginBottom: 16 }} />\n          <Text style={{ fontSize: 18, fontWeight: '600', color: '#fff', marginBottom: 8, textAlign: 'center' }}>\n            Camera Permission Required\n          </Text>\n          <Text style={{ fontSize: 14, color: '#9ca3af', marginBottom: 24, textAlign: 'center' }}>\n            We need camera access to scan product tags\n          </Text>\n          <Pressable\n            onPress={requestPermission}\n            style={{ backgroundColor: '#3b82f6', paddingHorizontal: 24, paddingVertical: 12, borderRadius: 8 }}\n          >\n            <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600' }}>Grant Permission</Text>\n          </Pressable>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  const handleCapture = async () => {\n    if (!cameraRef.current) return;\n\n    try {\n      const photo = await cameraRef.current.takePictureAsync({\n        quality: 0.7, // Reduced from 1.0 for faster processing\n        skipProcessing: false,\n      });\n\n      if (photo?.uri) {\n        setCapturedImage(photo.uri);\n        setIsProcessing(true);\n\n        // Parse the image with AI\n        const result = await parseProductTag(photo.uri);\n\n        setIsProcessing(false);\n\n        if (result.success && result.data) {\n          // Call the callback with the parsed data\n          onDataScanned(result.data);\n          navigation.goBack();\n        } else {\n          Alert.alert(\n            'No Data Found',\n            'Could not extract information from the product tag. Please try again with better lighting or a clearer photo.',\n            [\n              { text: 'Retry', onPress: () => setCapturedImage(null) },\n              { text: 'Cancel', onPress: () => navigation.goBack() },\n            ]\n          );\n        }\n      }\n    } catch (error) {\n      setIsProcessing(false);\n      Alert.alert('Error', 'Failed to capture or process image. Please try again.');\n      console.error('Capture error:', error);\n    }\n  };\n\n  const toggleFlash = () => setFlash(!flash);\n\n  const toggleCameraFacing = () => {\n    setFacing((current) => (current === 'back' ? 'front' : 'back'));\n  };\n\n  const handleZoomIn = () => {\n    setZoom((current) => Math.min(current + 0.1, 1));\n  };\n\n  const handleZoomOut = () => {\n    setZoom((current) => Math.max(current - 0.1, 0));\n  };\n\n  const resetZoom = () => {\n    setZoom(0);\n  };\n\n  // Camera View\n  if (!capturedImage && !isProcessing) {\n    return (\n      <View style={{ flex: 1, backgroundColor: '#000' }}>\n        <CameraView\n          ref={cameraRef}\n          style={{ flex: 1 }}\n          facing={facing}\n          enableTorch={flash}\n          autofocus=\"on\"\n          mode=\"picture\"\n          zoom={zoom}\n        >\n          {/* Top Bar */}\n          <View style={{ position: 'absolute', top: insets.top, left: 0, right: 0, zIndex: 10 }}>\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: 16 }}>\n              <Pressable\n                onPress={() => navigation.goBack()}\n                style={{ padding: 8, backgroundColor: 'rgba(0,0,0,0.5)', borderRadius: 20 }}\n              >\n                <Ionicons name=\"close\" size={24} color=\"#fff\" />\n              </Pressable>\n\n              <Text style={{ color: '#fff', fontSize: 16, fontWeight: '600', backgroundColor: 'rgba(0,0,0,0.5)', paddingHorizontal: 12, paddingVertical: 6, borderRadius: 8 }}>\n                Scan Product Tag\n              </Text>\n\n              <Pressable\n                onPress={toggleFlash}\n                style={{ padding: 8, backgroundColor: 'rgba(0,0,0,0.5)', borderRadius: 20 }}\n              >\n                <Ionicons name={flash ? 'flash' : 'flash-off'} size={24} color=\"#fff\" />\n              </Pressable>\n            </View>\n          </View>\n\n          {/* Instructions */}\n          <View style={{ position: 'absolute', top: insets.top + 80, left: 0, right: 0, zIndex: 10, paddingHorizontal: 32 }} pointerEvents=\"none\">\n            <View style={{ backgroundColor: 'rgba(0,0,0,0.85)', padding: 16, borderRadius: 12 }}>\n              <Text style={{ color: '#FFD700', fontSize: 15, fontWeight: '700', textAlign: 'center', marginBottom: 6 }}>\n                Position the product tag in frame\n              </Text>\n              <Text style={{ color: '#fff', fontSize: 13, textAlign: 'center', lineHeight: 18 }}>\n                Ensure text is clear and readable  Use flash if needed\n              </Text>\n            </View>\n          </View>\n\n          {/* Frame Guide */}\n          <View style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, justifyContent: 'center', alignItems: 'center', zIndex: 5, pointerEvents: 'none' }}>\n            <View style={{ width: '85%', height: '60%', borderWidth: 3, borderColor: '#3b82f6', borderRadius: 12, backgroundColor: 'transparent' }} />\n          </View>\n\n          {/* Zoom Controls */}\n          <View style={{ position: 'absolute', right: 16, top: '50%', transform: [{ translateY: -80 }], zIndex: 10, gap: 12 }}>\n            <Pressable\n              onPress={handleZoomIn}\n              style={{ width: 48, height: 48, borderRadius: 24, backgroundColor: 'rgba(0,0,0,0.7)', justifyContent: 'center', alignItems: 'center', borderWidth: 2, borderColor: zoom > 0 ? '#3b82f6' : 'rgba(255,255,255,0.3)' }}\n            >\n              <Ionicons name=\"add\" size={28} color=\"#fff\" />\n            </Pressable>\n\n            {/* Zoom Level Indicator */}\n            {zoom > 0 && (\n              <View style={{ width: 48, height: 48, borderRadius: 24, backgroundColor: 'rgba(0,0,0,0.85)', justifyContent: 'center', alignItems: 'center' }}>\n                <Text style={{ color: '#3b82f6', fontSize: 12, fontWeight: '700' }}>\n                  {(zoom * 10).toFixed(0)}x\n                </Text>\n              </View>\n            )}\n\n            <Pressable\n              onPress={handleZoomOut}\n              style={{ width: 48, height: 48, borderRadius: 24, backgroundColor: 'rgba(0,0,0,0.7)', justifyContent: 'center', alignItems: 'center', borderWidth: 2, borderColor: zoom > 0 ? '#3b82f6' : 'rgba(255,255,255,0.3)' }}\n            >\n              <Ionicons name=\"remove\" size={28} color=\"#fff\" />\n            </Pressable>\n\n            {/* Reset Zoom */}\n            {zoom > 0 && (\n              <Pressable\n                onPress={resetZoom}\n                style={{ width: 48, height: 48, borderRadius: 24, backgroundColor: 'rgba(0,0,0,0.7)', justifyContent: 'center', alignItems: 'center', borderWidth: 2, borderColor: '#f59e0b' }}\n              >\n                <Ionicons name=\"refresh\" size={24} color=\"#f59e0b\" />\n              </Pressable>\n            )}\n          </View>\n\n          {/* Bottom Controls */}\n          <View style={{ position: 'absolute', bottom: insets.bottom, left: 0, right: 0, zIndex: 10, paddingBottom: 40 }}>\n            <View style={{ flexDirection: 'row', justifyContent: 'space-around', alignItems: 'center', paddingHorizontal: 32 }}>\n              <View style={{ width: 64 }} />\n\n              <Pressable\n                onPress={handleCapture}\n                style={{ width: 72, height: 72, borderRadius: 36, backgroundColor: '#fff', justifyContent: 'center', alignItems: 'center', borderWidth: 4, borderColor: '#3b82f6' }}\n              >\n                <View style={{ width: 60, height: 60, borderRadius: 30, backgroundColor: '#3b82f6' }} />\n              </Pressable>\n\n              <Pressable\n                onPress={toggleCameraFacing}\n                style={{ width: 64, height: 64, borderRadius: 32, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', alignItems: 'center' }}\n              >\n                <Ionicons name=\"camera-reverse\" size={32} color=\"#fff\" />\n              </Pressable>\n            </View>\n          </View>\n        </CameraView>\n      </View>\n    );\n  }\n\n  // Processing State\n  if (isProcessing) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#111827' }}>\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: 32 }}>\n          {capturedImage && (\n            <Image\n              source={{ uri: capturedImage }}\n              style={{ width: '100%', height: '50%', borderRadius: 12, marginBottom: 32, opacity: 0.5 }}\n              resizeMode=\"contain\"\n            />\n          )}\n          <ActivityIndicator size=\"large\" color=\"#3b82f6\" style={{ marginBottom: 16 }} />\n          <Text style={{ color: '#fff', fontSize: 18, fontWeight: '600', marginBottom: 8 }}>\n            Reading Product Tag...\n          </Text>\n          <Text style={{ color: '#9ca3af', fontSize: 14, textAlign: 'center' }}>\n            AI is extracting information from the tag\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return null;\n}\n","import React, { useState } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useAuthStore } from \"../state/authStore\";\n\ninterface LoginScreenProps {\n  onLoginSuccess: (requiresPasswordChange: boolean) => void;\n  onRequestAccess: () => void;\n}\n\nexport default function LoginScreen({\n  onLoginSuccess,\n  onRequestAccess,\n}: LoginScreenProps) {\n  const insets = useSafeAreaInsets();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n\n  const login = useAuthStore((state) => state.login);\n\n  const handleLogin = async () => {\n    if (!email.trim()) {\n      setError(\"Please enter your email address\");\n      return;\n    }\n\n    if (!password) {\n      setError(\"Please enter your password\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const result = await login(email.trim(), password);\n\n      if (result.success) {\n        onLoginSuccess(result.requiresPasswordChange || false);\n      } else {\n        setError(result.error || \"Login failed. Please try again.\");\n        setPassword(\"\");\n      }\n    } catch (err) {\n      setError(\"An unexpected error occurred\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-gradient-to-br from-blue-500 to-blue-600\"\n      style={{ backgroundColor: \"#3B82F6\" }}\n    >\n      <View\n        className=\"flex-1 justify-center px-6\"\n        style={{ paddingTop: insets.top, paddingBottom: insets.bottom }}\n      >\n          {/* Logo/Icon */}\n          <View className=\"items-center mb-8\">\n            <View className=\"bg-white rounded-full p-6 shadow-lg\">\n              <Ionicons name=\"construct\" size={64} color=\"#3B82F6\" />\n            </View>\n\n            {/* Title */}\n            <Text className=\"text-white text-4xl font-bold mb-2 text-center mt-6\">\n              Precast Quality Tools\n            </Text>\n            <Text className=\"text-blue-100 text-base text-center\">\n              Sign in to continue\n            </Text>\n          </View>\n\n          {/* Login Card */}\n          <View className=\"bg-white rounded-2xl p-6 shadow-2xl\">\n            {/* Email Input */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Email Address\n              </Text>\n              <TextInput\n                className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 text-base text-gray-900\"\n                placeholder=\"your@email.com\"\n                placeholderTextColor=\"#9CA3AF\"\n                cursorColor=\"#000000\"\n                value={email}\n                onChangeText={(text) => {\n                  setEmail(text);\n                  setError(\"\");\n                }}\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n                autoComplete=\"email\"\n                textContentType=\"emailAddress\"\n                returnKeyType=\"next\"\n              />\n            </View>\n\n            {/* Password Input */}\n            <View className=\"mb-4\">\n              <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Password\n              </Text>\n              <View className=\"relative\">\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 pr-12 text-base text-gray-900\"\n                  placeholder=\"Enter password\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={password}\n                  onChangeText={(text) => {\n                    setPassword(text);\n                    setError(\"\");\n                  }}\n                  secureTextEntry={!showPassword}\n                  autoCapitalize=\"none\"\n                  autoCorrect={false}\n                  autoComplete=\"password\"\n                  textContentType=\"password\"\n                  onSubmitEditing={handleLogin}\n                  returnKeyType=\"go\"\n                />\n                <Pressable\n                  onPress={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-4 top-3.5\"\n                >\n                  <Ionicons\n                    name={showPassword ? \"eye-off-outline\" : \"eye-outline\"}\n                    size={22}\n                    color=\"#6B7280\"\n                  />\n                </Pressable>\n              </View>\n            </View>\n\n            {/* Error Message */}\n            {error ? (\n              <View className=\"bg-red-50 border border-red-200 rounded-xl p-3 mb-4\">\n                <Text className=\"text-red-700 text-sm\">{error}</Text>\n              </View>\n            ) : null}\n\n            {/* Login Button */}\n            <Pressable\n              onPress={handleLogin}\n              disabled={loading}\n              className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600 mb-3\"\n              style={{ opacity: loading ? 0.6 : 1 }}\n            >\n              <Text className=\"text-white text-base font-semibold\">\n                {loading ? \"Signing in...\" : \"Sign In\"}\n              </Text>\n            </Pressable>\n\n            {/* Request Access Link */}\n            <Pressable\n              onPress={onRequestAccess}\n              className=\"py-2 items-center active:opacity-70\"\n            >\n              <Text className=\"text-blue-600 text-sm font-medium\">\n                Request Access\n              </Text>\n            </Pressable>\n          </View>\n\n          {/* Footer */}\n          <Text className=\"text-blue-100 text-xs mt-8 text-center\">\n            For authorized use only\n          </Text>\n        </View>\n    </KeyboardAvoidingView>\n  );\n}\n","import React, { useState } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useAuthStore } from \"../state/authStore\";\n\ninterface RegistrationScreenProps {\n  onBack: () => void;\n  onSuccess: () => void;\n}\n\nexport default function RegistrationScreen({\n  onBack,\n  onSuccess,\n}: RegistrationScreenProps) {\n  const insets = useSafeAreaInsets();\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [company, setCompany] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const requestAccess = useAuthStore((state) => state.requestAccess);\n\n  const validateEmail = (email: string) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const handleSubmit = async () => {\n    // Validation\n    if (!firstName.trim()) {\n      setError(\"Please enter your first name\");\n      return;\n    }\n\n    if (!lastName.trim()) {\n      setError(\"Please enter your last name\");\n      return;\n    }\n\n    if (!company.trim()) {\n      setError(\"Please enter your company name\");\n      return;\n    }\n\n    if (!email.trim()) {\n      setError(\"Please enter your email address\");\n      return;\n    }\n\n    if (!validateEmail(email.trim())) {\n      setError(\"Please enter a valid email address\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const result = await requestAccess({\n        firstName: firstName.trim(),\n        lastName: lastName.trim(),\n        company: company.trim(),\n        email: email.trim().toLowerCase(),\n      });\n\n      if (result.success) {\n        onSuccess();\n      } else {\n        setError(result.error || \"Failed to submit request. Please try again.\");\n      }\n    } catch (err) {\n      setError(\"An unexpected error occurred\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-gradient-to-br from-blue-500 to-blue-600\"\n      style={{ backgroundColor: \"#3B82F6\" }}\n    >\n      <View\n        className=\"flex-1\"\n        style={{ paddingTop: insets.top, paddingBottom: insets.bottom }}\n      >\n          {/* Header */}\n          <View className=\"px-6 py-4\">\n            <Pressable\n              onPress={onBack}\n              className=\"flex-row items-center active:opacity-70\"\n            >\n              <Ionicons name=\"arrow-back\" size={24} color=\"#FFFFFF\" />\n              <Text className=\"text-white text-base font-medium ml-2\">\n                Back to Login\n              </Text>\n            </Pressable>\n          </View>\n\n          <ScrollView\n            className=\"flex-1 px-6\"\n            contentContainerStyle={{ paddingBottom: 40 }}\n            keyboardShouldPersistTaps=\"handled\"\n          >\n            {/* Logo/Icon */}\n            <View className=\"items-center mb-8 mt-4\">\n              <View className=\"bg-white rounded-full p-6 shadow-lg\">\n                <Ionicons name=\"person-add\" size={48} color=\"#3B82F6\" />\n              </View>\n\n              {/* Title */}\n              <Text className=\"text-white text-3xl font-bold mb-2 text-center mt-6\">\n                Request Access\n              </Text>\n              <Text className=\"text-blue-100 text-base text-center\">\n                Fill out the form to request access to Precast Quality Tools\n              </Text>\n            </View>\n\n            {/* Registration Card */}\n            <View className=\"bg-white rounded-2xl p-6 shadow-2xl\">\n              {/* First Name Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  First Name\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 text-base text-gray-900\"\n                  placeholder=\"John\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={firstName}\n                  onChangeText={(text) => {\n                    setFirstName(text);\n                    setError(\"\");\n                  }}\n                  autoCapitalize=\"words\"\n                  autoCorrect={false}\n                  returnKeyType=\"next\"\n                />\n              </View>\n\n              {/* Last Name Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Last Name\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 text-base text-gray-900\"\n                  placeholder=\"Doe\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={lastName}\n                  onChangeText={(text) => {\n                    setLastName(text);\n                    setError(\"\");\n                  }}\n                  autoCapitalize=\"words\"\n                  autoCorrect={false}\n                  returnKeyType=\"next\"\n                />\n              </View>\n\n              {/* Company Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Company\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 text-base text-gray-900\"\n                  placeholder=\"Acme Precast Inc.\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={company}\n                  onChangeText={(text) => {\n                    setCompany(text);\n                    setError(\"\");\n                  }}\n                  autoCapitalize=\"words\"\n                  autoCorrect={false}\n                  returnKeyType=\"next\"\n                />\n              </View>\n\n              {/* Email Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Email Address\n                </Text>\n                <TextInput\n                  className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 text-base text-gray-900\"\n                  placeholder=\"your@email.com\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  value={email}\n                  onChangeText={(text) => {\n                    setEmail(text);\n                    setError(\"\");\n                  }}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                  autoCorrect={false}\n                  onSubmitEditing={handleSubmit}\n                  returnKeyType=\"go\"\n                />\n              </View>\n\n              {/* Error Message */}\n              {error ? (\n                <View className=\"bg-red-50 border border-red-200 rounded-xl p-3 mb-4\">\n                  <Text className=\"text-red-700 text-sm\">{error}</Text>\n                </View>\n              ) : null}\n\n              {/* Info Message */}\n              <View className=\"bg-blue-50 border border-blue-200 rounded-xl p-3 mb-4\">\n                <Text className=\"text-blue-700 text-sm\">\n                  An admin will review your request and send login credentials\n                  to your email if approved.\n                </Text>\n              </View>\n\n              {/* Submit Button */}\n              <Pressable\n                onPress={handleSubmit}\n                disabled={loading}\n                className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n                style={{ opacity: loading ? 0.6 : 1 }}\n              >\n                <Text className=\"text-white text-base font-semibold\">\n                  {loading ? \"Submitting...\" : \"Submit Request\"}\n                </Text>\n              </Pressable>\n            </View>\n          </ScrollView>\n        </View>\n    </KeyboardAvoidingView>\n  );\n}\n","/**\n * Password validation utilities for Precast Quality Tools\n */\n\nexport interface PasswordValidation {\n  isValid: boolean;\n  errors: string[];\n  hasUpper: boolean;\n  hasLower: boolean;\n  hasNumber: boolean;\n  hasSpecial: boolean;\n}\n\n/**\n * Validate password requirements:\n * - At least 1 uppercase letter\n * - At least 1 lowercase letter\n * - At least 1 number\n * - At least 1 special character\n * - No length requirement\n */\nexport function validatePassword(password: string): PasswordValidation {\n  const hasUpper = /[A-Z]/.test(password);\n  const hasLower = /[a-z]/.test(password);\n  const hasNumber = /[0-9]/.test(password);\n  const hasSpecial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password);\n\n  const errors: string[] = [];\n\n  if (!hasUpper) {\n    errors.push('Password must contain at least one uppercase letter');\n  }\n  if (!hasLower) {\n    errors.push('Password must contain at least one lowercase letter');\n  }\n  if (!hasNumber) {\n    errors.push('Password must contain at least one number');\n  }\n  if (!hasSpecial) {\n    errors.push('Password must contain at least one special character');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    hasUpper,\n    hasLower,\n    hasNumber,\n    hasSpecial,\n  };\n}\n\n/**\n * Generate a temporary password that meets all requirements\n */\nexport function generateTemporaryPassword(): string {\n  const upper = 'ABCDEFGHJKLMNPQRSTUVWXYZ'; // Removed I, O for clarity\n  const lower = 'abcdefghijkmnopqrstuvwxyz'; // Removed l for clarity\n  const numbers = '23456789'; // Removed 0, 1 for clarity\n  const special = '!@#$%^&*';\n\n  // Ensure at least one of each type\n  const password = [\n    upper[Math.floor(Math.random() * upper.length)],\n    lower[Math.floor(Math.random() * lower.length)],\n    numbers[Math.floor(Math.random() * numbers.length)],\n    special[Math.floor(Math.random() * special.length)],\n  ];\n\n  // Add 4 more random characters from all sets\n  const allChars = upper + lower + numbers + special;\n  for (let i = 0; i < 4; i++) {\n    password.push(allChars[Math.floor(Math.random() * allChars.length)]);\n  }\n\n  // Shuffle the password\n  return password.sort(() => Math.random() - 0.5).join('');\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  Pressable,\n  ScrollView,\n  ActivityIndicator,\n  KeyboardAvoidingView,\n  Platform,\n  Keyboard,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useAuthStore, PendingRequest } from \"../state/authStore\";\nimport { generateTemporaryPassword } from \"../utils/passwordValidation\";\nimport ConfirmModal from \"../components/ConfirmModal\";\n\ninterface AdminApprovalScreenProps {\n  onBack: () => void;\n}\n\nexport default function AdminApprovalScreen({\n  onBack,\n}: AdminApprovalScreenProps) {\n  const insets = useSafeAreaInsets();\n  const [pendingRequests, setPendingRequests] = useState<PendingRequest[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedRequest, setSelectedRequest] = useState<string | null>(null);\n  const [tempPassword, setTempPassword] = useState(\"\");\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [showDenyModal, setShowDenyModal] = useState(false);\n  const [actionLoading, setActionLoading] = useState(false);\n\n  const getPendingRequests = useAuthStore((state) => state.getPendingRequests);\n  const approveRequest = useAuthStore((state) => state.approveRequest);\n  const denyRequest = useAuthStore((state) => state.denyRequest);\n\n  useEffect(() => {\n    loadRequests();\n  }, []);\n\n  const loadRequests = async () => {\n    setLoading(true);\n    const requests = await getPendingRequests();\n    setPendingRequests(requests);\n    setLoading(false);\n  };\n\n  const handleApprove = (requestId: string) => {\n    setSelectedRequest(requestId);\n    const newPassword = generateTemporaryPassword();\n    setTempPassword(newPassword);\n    setShowPasswordModal(true);\n  };\n\n  const confirmApprove = async () => {\n    if (!selectedRequest) return;\n\n    setActionLoading(true);\n    try {\n      await approveRequest(selectedRequest, tempPassword);\n      setShowPasswordModal(false);\n      setSelectedRequest(null);\n      setTempPassword(\"\");\n      loadRequests();\n    } catch (err) {\n      // Handle error\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleDeny = (requestId: string) => {\n    setSelectedRequest(requestId);\n    setShowDenyModal(true);\n  };\n\n  const confirmDeny = async () => {\n    if (!selectedRequest) return;\n\n    setActionLoading(true);\n    try {\n      await denyRequest(selectedRequest);\n      setShowDenyModal(false);\n      setSelectedRequest(null);\n      loadRequests();\n    } catch (err) {\n      // Handle error\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const formatDate = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n      hour: \"numeric\",\n      minute: \"2-digit\",\n    });\n  };\n\n  return (\n    <View className=\"flex-1 bg-white\" style={{ paddingTop: insets.top }}>\n      {/* Header */}\n      <View className=\"px-6 py-4 border-b border-gray-200\">\n        <Pressable\n          onPress={onBack}\n          className=\"flex-row items-center mb-3 active:opacity-70\"\n        >\n          <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n          <Text className=\"text-gray-900 text-base font-medium ml-2\">\n            Back\n          </Text>\n        </Pressable>\n        <Text className=\"text-gray-900 text-2xl font-bold\">\n          Access Requests\n        </Text>\n        <Text className=\"text-gray-600 text-sm mt-1\">\n          Review and approve pending access requests\n        </Text>\n      </View>\n\n      {/* Content */}\n      {loading ? (\n        <View className=\"flex-1 items-center justify-center\">\n          <ActivityIndicator size=\"large\" color=\"#3B82F6\" />\n        </View>\n      ) : pendingRequests.length === 0 ? (\n        <View className=\"flex-1 items-center justify-center px-6\">\n          <View className=\"bg-gray-100 rounded-full p-6 mb-4\">\n            <Ionicons name=\"checkmark-circle\" size={64} color=\"#10B981\" />\n          </View>\n          <Text className=\"text-gray-900 text-xl font-semibold mb-2\">\n            All Caught Up!\n          </Text>\n          <Text className=\"text-gray-600 text-base text-center\">\n            There are no pending access requests at this time.\n          </Text>\n        </View>\n      ) : (\n        <ScrollView className=\"flex-1 px-6 py-4\">\n          {pendingRequests.map((request) => (\n            <View\n              key={request.id}\n              className=\"bg-white border border-gray-200 rounded-2xl p-4 mb-4 shadow-sm\"\n            >\n              {/* User Info */}\n              <View className=\"flex-row items-start mb-3\">\n                <View className=\"bg-blue-100 rounded-full p-3 mr-3\">\n                  <Ionicons name=\"person\" size={24} color=\"#3B82F6\" />\n                </View>\n                <View className=\"flex-1\">\n                  <Text className=\"text-gray-900 text-lg font-semibold\">\n                    {request.firstName} {request.lastName}\n                  </Text>\n                  <Text className=\"text-gray-600 text-sm\">{request.email}</Text>\n                </View>\n              </View>\n\n              {/* Company */}\n              <View className=\"bg-gray-50 rounded-xl p-3 mb-3\">\n                <Text className=\"text-gray-600 text-xs font-semibold mb-1\">\n                  COMPANY\n                </Text>\n                <Text className=\"text-gray-900 text-base\">\n                  {request.company}\n                </Text>\n              </View>\n\n              {/* Timestamp */}\n              <Text className=\"text-gray-500 text-xs mb-3\">\n                Requested {formatDate(request.requestedAt)}\n              </Text>\n\n              {/* Actions */}\n              <View className=\"flex-row gap-3\">\n                <Pressable\n                  onPress={() => handleApprove(request.id)}\n                  className=\"flex-1 bg-green-500 rounded-xl py-3 items-center active:bg-green-600\"\n                >\n                  <Text className=\"text-white text-base font-semibold\">\n                    Approve\n                  </Text>\n                </Pressable>\n                <Pressable\n                  onPress={() => handleDeny(request.id)}\n                  className=\"flex-1 bg-red-500 rounded-xl py-3 items-center active:bg-red-600\"\n                >\n                  <Text className=\"text-white text-base font-semibold\">\n                    Deny\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n          ))}\n        </ScrollView>\n      )}\n\n      {/* Approve Modal */}\n      {showPasswordModal && (\n        <KeyboardAvoidingView\n          behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n          className=\"absolute inset-0\"\n          style={{ backgroundColor: \"rgba(0, 0, 0, 0.5)\" }}\n        >\n          <Pressable\n            onPress={() => {\n              if (!actionLoading) {\n                Keyboard.dismiss();\n                setShowPasswordModal(false);\n              }\n            }}\n            className=\"flex-1\"\n          >\n            <View className=\"flex-1 justify-center px-6\">\n              <Pressable onPress={(e) => e.stopPropagation()}>\n                <View className=\"bg-white rounded-2xl p-6 shadow-2xl\">\n                  <Text className=\"text-gray-900 text-xl font-bold mb-4\">\n                    Approve Access Request\n                  </Text>\n\n                  <Text className=\"text-gray-600 text-sm mb-4\">\n                    A temporary password has been generated. The user will be\n                    required to change it on first login.\n                  </Text>\n\n                  {/* Temporary Password Display */}\n                  <View className=\"mb-4\">\n                    <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                      Temporary Password\n                    </Text>\n                    <View className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5\">\n                      <Text className=\"text-gray-900 text-base font-mono\">\n                        {tempPassword}\n                      </Text>\n                    </View>\n                  </View>\n\n                  {/* Info */}\n                  <View className=\"bg-blue-50 border border-blue-200 rounded-xl p-3 mb-4\">\n                    <Text className=\"text-blue-700 text-xs\">\n                      The user will receive an email with their temporary\n                      password.\n                    </Text>\n                  </View>\n\n                  {/* Buttons */}\n                  <View className=\"flex-row gap-3\">\n                    <Pressable\n                      onPress={() => {\n                        if (!actionLoading) {\n                          setShowPasswordModal(false);\n                        }\n                      }}\n                      disabled={actionLoading}\n                      className=\"flex-1 bg-gray-200 rounded-xl py-3 items-center active:bg-gray-300\"\n                      style={{ opacity: actionLoading ? 0.5 : 1 }}\n                    >\n                      <Text className=\"text-gray-900 text-base font-semibold\">\n                        Cancel\n                      </Text>\n                    </Pressable>\n                    <Pressable\n                      onPress={confirmApprove}\n                      disabled={actionLoading}\n                      className=\"flex-1 bg-green-500 rounded-xl py-3 items-center active:bg-green-600\"\n                      style={{ opacity: actionLoading ? 0.6 : 1 }}\n                    >\n                      <Text className=\"text-white text-base font-semibold\">\n                        {actionLoading ? \"Approving...\" : \"Confirm\"}\n                      </Text>\n                    </Pressable>\n                  </View>\n                </View>\n              </Pressable>\n            </View>\n          </Pressable>\n        </KeyboardAvoidingView>\n      )}\n\n      {/* Deny Modal */}\n      <ConfirmModal\n        visible={showDenyModal}\n        title=\"Deny Access Request\"\n        message=\"Are you sure you want to deny this access request? This action cannot be undone.\"\n        confirmText=\"Deny\"\n        cancelText=\"Cancel\"\n        onConfirm={confirmDeny}\n        onCancel={() => setShowDenyModal(false)}\n        confirmStyle=\"destructive\"\n      />\n    </View>\n  );\n}\n","import React, { useState } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  Pressable,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView,\n} from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { validatePassword } from \"../utils/passwordValidation\";\n\ninterface ChangePasswordScreenProps {\n  onSuccess: () => void;\n}\n\nexport default function ChangePasswordScreen({\n  onSuccess,\n}: ChangePasswordScreenProps) {\n  const insets = useSafeAreaInsets();\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [showNewPassword, setShowNewPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const currentUser = useAuthStore((state) => state.currentUser);\n  const changePassword = useAuthStore((state) => state.changePassword);\n\n  const handleChangePassword = async () => {\n    // Validation\n    if (!newPassword) {\n      setError(\"Please enter a new password\");\n      return;\n    }\n\n    if (!confirmPassword) {\n      setError(\"Please confirm your password\");\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    // Validate password requirements\n    const validation = validatePassword(newPassword);\n    if (!validation.isValid) {\n      setError(validation.errors[0]);\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const result = await changePassword(newPassword);\n\n      if (result.success) {\n        onSuccess();\n      } else {\n        setError(result.error || \"Failed to change password\");\n      }\n    } catch (err) {\n      setError(\"An unexpected error occurred\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const validation = validatePassword(newPassword);\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      className=\"flex-1 bg-white\"\n    >\n      <View\n        className=\"flex-1\"\n        style={{ paddingTop: insets.top, paddingBottom: insets.bottom }}\n      >\n          <ScrollView\n            className=\"flex-1 px-6\"\n            contentContainerStyle={{ paddingTop: 40, paddingBottom: 40 }}\n            keyboardShouldPersistTaps=\"handled\"\n          >\n            {/* Header */}\n            <View className=\"items-center mb-8\">\n              <View className=\"bg-blue-100 rounded-full p-6 mb-4\">\n                <Ionicons name=\"lock-closed\" size={48} color=\"#3B82F6\" />\n              </View>\n              <Text className=\"text-gray-900 text-3xl font-bold mb-2 text-center\">\n                Change Password\n              </Text>\n              <Text className=\"text-gray-600 text-base text-center\">\n                Welcome, {currentUser?.firstName}! Please set a new password to\n                continue.\n              </Text>\n            </View>\n\n            {/* Password Requirements */}\n            <View className=\"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6\">\n              <Text className=\"text-gray-900 text-sm font-semibold mb-3\">\n                Password Requirements:\n              </Text>\n              <View className=\"space-y-2\">\n                <View className=\"flex-row items-center mb-2\">\n                  <Ionicons\n                    name={\n                      validation.hasUpper\n                        ? \"checkmark-circle\"\n                        : \"ellipse-outline\"\n                    }\n                    size={20}\n                    color={validation.hasUpper ? \"#10B981\" : \"#9CA3AF\"}\n                  />\n                  <Text\n                    className=\"text-gray-700 text-sm ml-2\"\n                    style={{\n                      color: validation.hasUpper ? \"#10B981\" : \"#6B7280\",\n                    }}\n                  >\n                    At least one uppercase letter\n                  </Text>\n                </View>\n                <View className=\"flex-row items-center mb-2\">\n                  <Ionicons\n                    name={\n                      validation.hasLower\n                        ? \"checkmark-circle\"\n                        : \"ellipse-outline\"\n                    }\n                    size={20}\n                    color={validation.hasLower ? \"#10B981\" : \"#9CA3AF\"}\n                  />\n                  <Text\n                    className=\"text-gray-700 text-sm ml-2\"\n                    style={{\n                      color: validation.hasLower ? \"#10B981\" : \"#6B7280\",\n                    }}\n                  >\n                    At least one lowercase letter\n                  </Text>\n                </View>\n                <View className=\"flex-row items-center mb-2\">\n                  <Ionicons\n                    name={\n                      validation.hasNumber\n                        ? \"checkmark-circle\"\n                        : \"ellipse-outline\"\n                    }\n                    size={20}\n                    color={validation.hasNumber ? \"#10B981\" : \"#9CA3AF\"}\n                  />\n                  <Text\n                    className=\"text-gray-700 text-sm ml-2\"\n                    style={{\n                      color: validation.hasNumber ? \"#10B981\" : \"#6B7280\",\n                    }}\n                  >\n                    At least one number\n                  </Text>\n                </View>\n                <View className=\"flex-row items-center\">\n                  <Ionicons\n                    name={\n                      validation.hasSpecial\n                        ? \"checkmark-circle\"\n                        : \"ellipse-outline\"\n                    }\n                    size={20}\n                    color={validation.hasSpecial ? \"#10B981\" : \"#9CA3AF\"}\n                  />\n                  <Text\n                    className=\"text-gray-700 text-sm ml-2\"\n                    style={{\n                      color: validation.hasSpecial ? \"#10B981\" : \"#6B7280\",\n                    }}\n                  >\n                    At least one special character\n                  </Text>\n                </View>\n              </View>\n            </View>\n\n            {/* Form */}\n            <View className=\"bg-white rounded-2xl\">\n              {/* New Password Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  New Password\n                </Text>\n                <View className=\"relative\">\n                  <TextInput\n                    className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 pr-12 text-base text-gray-900\"\n                    placeholder=\"Enter new password\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    value={newPassword}\n                    onChangeText={(text) => {\n                      setNewPassword(text);\n                      setError(\"\");\n                    }}\n                    secureTextEntry={!showNewPassword}\n                    autoCapitalize=\"none\"\n                    autoCorrect={false}\n                    autoComplete=\"password-new\"\n                    textContentType=\"newPassword\"\n                    returnKeyType=\"next\"\n                  />\n                  <Pressable\n                    onPress={() => setShowNewPassword(!showNewPassword)}\n                    className=\"absolute right-4 top-3.5\"\n                  >\n                    <Ionicons\n                      name={\n                        showNewPassword ? \"eye-off-outline\" : \"eye-outline\"\n                      }\n                      size={22}\n                      color=\"#6B7280\"\n                    />\n                  </Pressable>\n                </View>\n              </View>\n\n              {/* Confirm Password Input */}\n              <View className=\"mb-4\">\n                <Text className=\"text-sm font-semibold text-gray-700 mb-2\">\n                  Confirm Password\n                </Text>\n                <View className=\"relative\">\n                  <TextInput\n                    className=\"bg-gray-50 border border-gray-300 rounded-xl px-4 py-3.5 pr-12 text-base text-gray-900\"\n                    placeholder=\"Re-enter new password\"\n                    placeholderTextColor=\"#9CA3AF\"\n                    cursorColor=\"#000000\"\n                    value={confirmPassword}\n                    onChangeText={(text) => {\n                      setConfirmPassword(text);\n                      setError(\"\");\n                    }}\n                    secureTextEntry={!showConfirmPassword}\n                    autoCapitalize=\"none\"\n                    autoCorrect={false}\n                    autoComplete=\"password-new\"\n                    textContentType=\"newPassword\"\n                    onSubmitEditing={handleChangePassword}\n                    returnKeyType=\"go\"\n                  />\n                  <Pressable\n                    onPress={() =>\n                      setShowConfirmPassword(!showConfirmPassword)\n                    }\n                    className=\"absolute right-4 top-3.5\"\n                  >\n                    <Ionicons\n                      name={\n                        showConfirmPassword ? \"eye-off-outline\" : \"eye-outline\"\n                      }\n                      size={22}\n                      color=\"#6B7280\"\n                    />\n                  </Pressable>\n                </View>\n              </View>\n\n              {/* Error Message */}\n              {error ? (\n                <View className=\"bg-red-50 border border-red-200 rounded-xl p-3 mb-4\">\n                  <Text className=\"text-red-700 text-sm\">{error}</Text>\n                </View>\n              ) : null}\n\n              {/* Submit Button */}\n              <Pressable\n                onPress={handleChangePassword}\n                disabled={loading}\n                className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n                style={{ opacity: loading ? 0.6 : 1 }}\n              >\n                <Text className=\"text-white text-base font-semibold\">\n                  {loading ? \"Changing Password...\" : \"Change Password\"}\n                </Text>\n              </Pressable>\n            </View>\n          </ScrollView>\n        </View>\n    </KeyboardAvoidingView>\n  );\n}\n","import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { YardLocation, YardedPiece, YardSearchFilters } from '../types/yard-location';\nimport { PourDepartment } from '../types/pour-schedule';\n\ninterface YardLocationState {\n  // Data\n  yardLocations: YardLocation[];\n  yardedPieces: YardedPiece[];\n\n  // Yard Location Operations\n  addYardLocation: (location: Omit<YardLocation, 'id'>) => string;\n  updateYardLocation: (id: string, updates: Partial<YardLocation>) => void;\n  deleteYardLocation: (id: string) => void;\n  getYardLocation: (id: string) => YardLocation | undefined;\n  getAllActiveYardLocations: () => YardLocation[];\n\n  // Yarded Piece Operations\n  addYardedPiece: (piece: Omit<YardedPiece, 'id' | 'createdAt' | 'updatedAt'>) => string;\n  updateYardedPiece: (id: string, updates: Partial<YardedPiece>) => void;\n  deleteYardedPiece: (id: string) => void;\n  getYardedPiece: (id: string) => YardedPiece | undefined;\n  getYardedPieceByPourEntryId: (pourEntryId: string) => YardedPiece | undefined;\n\n  // Query Operations\n  getYardedPiecesByLocation: (locationId: string) => YardedPiece[];\n  getYardedPiecesByDepartment: (department: PourDepartment) => YardedPiece[];\n  getYardedPiecesByJobNumber: (jobNumber: string) => YardedPiece[];\n  searchYardedPieces: (filters: YardSearchFilters) => YardedPiece[];\n\n  // Ship Operations\n  markAsShipped: (pieceId: string, shippedBy: string) => void;\n  markAsUnshipped: (pieceId: string) => void;\n\n  // Utility\n  clearAllData: () => void;\n  initializeDefaultLocations: () => void;\n}\n\nexport const useYardLocationStore = create<YardLocationState>()(\n  persist(\n    (set, get) => ({\n      yardLocations: [],\n      yardedPieces: [],\n\n      // Yard Location Operations\n      addYardLocation: (location) => {\n        const id = `location-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        const newLocation: YardLocation = {\n          ...location,\n          id,\n        };\n\n        set((state) => ({\n          yardLocations: [...state.yardLocations, newLocation],\n        }));\n\n        return id;\n      },\n\n      updateYardLocation: (id, updates) => {\n        set((state) => ({\n          yardLocations: state.yardLocations.map((location) =>\n            location.id === id ? { ...location, ...updates } : location\n          ),\n        }));\n      },\n\n      deleteYardLocation: (id) => {\n        set((state) => ({\n          yardLocations: state.yardLocations.filter((location) => location.id !== id),\n        }));\n      },\n\n      getYardLocation: (id) => {\n        return get().yardLocations.find((location) => location.id === id);\n      },\n\n      getAllActiveYardLocations: () => {\n        return get().yardLocations\n          .filter((location) => location.isActive)\n          .sort((a, b) => a.name.localeCompare(b.name));\n      },\n\n      // Yarded Piece Operations\n      addYardedPiece: (piece) => {\n        const id = `yarded-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        const newPiece: YardedPiece = {\n          ...piece,\n          id,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n\n        set((state) => ({\n          yardedPieces: [...state.yardedPieces, newPiece],\n        }));\n\n        return id;\n      },\n\n      updateYardedPiece: (id, updates) => {\n        set((state) => ({\n          yardedPieces: state.yardedPieces.map((piece) =>\n            piece.id === id\n              ? { ...piece, ...updates, updatedAt: Date.now() }\n              : piece\n          ),\n        }));\n      },\n\n      deleteYardedPiece: (id) => {\n        set((state) => ({\n          yardedPieces: state.yardedPieces.filter((piece) => piece.id !== id),\n        }));\n      },\n\n      getYardedPiece: (id) => {\n        return get().yardedPieces.find((piece) => piece.id === id);\n      },\n\n      getYardedPieceByPourEntryId: (pourEntryId) => {\n        return get().yardedPieces.find((piece) => piece.pourEntryId === pourEntryId);\n      },\n\n      // Query Operations\n      getYardedPiecesByLocation: (locationId) => {\n        return get().yardedPieces\n          .filter((piece) => piece.yardLocationId === locationId && !piece.isShipped)\n          .sort((a, b) => b.yardedDate - a.yardedDate);\n      },\n\n      getYardedPiecesByDepartment: (department) => {\n        return get().yardedPieces\n          .filter((piece) => piece.department === department && !piece.isShipped)\n          .sort((a, b) => b.yardedDate - a.yardedDate);\n      },\n\n      getYardedPiecesByJobNumber: (jobNumber) => {\n        return get().yardedPieces\n          .filter((piece) => piece.jobNumber === jobNumber)\n          .sort((a, b) => b.yardedDate - a.yardedDate);\n      },\n\n      searchYardedPieces: (filters) => {\n        let pieces = get().yardedPieces;\n\n        // Filter by shipped status\n        if (!filters.includeShipped) {\n          pieces = pieces.filter((piece) => !piece.isShipped);\n        }\n\n        // Filter by department\n        if (filters.department) {\n          pieces = pieces.filter((piece) => piece.department === filters.department);\n        }\n\n        // Filter by job number\n        if (filters.jobNumber) {\n          const query = filters.jobNumber.toLowerCase();\n          pieces = pieces.filter((piece) =>\n            piece.jobNumber.toLowerCase().includes(query) ||\n            piece.jobName?.toLowerCase().includes(query)\n          );\n        }\n\n        // Filter by crane bay\n        if (filters.craneBay) {\n          pieces = pieces.filter((piece) => {\n            const location = get().getYardLocation(piece.yardLocationId);\n            return location?.craneBay === filters.craneBay;\n          });\n        }\n\n        // Filter by date range\n        if (filters.dateRange) {\n          pieces = pieces.filter((piece) =>\n            piece.pourDate >= filters.dateRange!.start &&\n            piece.pourDate <= filters.dateRange!.end\n          );\n        }\n\n        return pieces.sort((a, b) => b.yardedDate - a.yardedDate);\n      },\n\n      // Ship Operations\n      markAsShipped: (pieceId, shippedBy) => {\n        set((state) => ({\n          yardedPieces: state.yardedPieces.map((piece) =>\n            piece.id === pieceId\n              ? {\n                  ...piece,\n                  isShipped: true,\n                  shippedDate: Date.now(),\n                  shippedBy,\n                  updatedAt: Date.now(),\n                }\n              : piece\n          ),\n        }));\n      },\n\n      markAsUnshipped: (pieceId) => {\n        set((state) => ({\n          yardedPieces: state.yardedPieces.map((piece) =>\n            piece.id === pieceId\n              ? {\n                  ...piece,\n                  isShipped: false,\n                  shippedDate: undefined,\n                  shippedBy: undefined,\n                  updatedAt: Date.now(),\n                }\n              : piece\n          ),\n        }));\n      },\n\n      // Utility\n      clearAllData: () => {\n        set({\n          yardLocations: [],\n          yardedPieces: [],\n        });\n      },\n\n      initializeDefaultLocations: () => {\n        const state = get();\n\n        if (state.yardLocations.length === 0) {\n          // Add some default yard locations as examples\n          const craneBays = ['Crane Bay 1', 'Crane Bay 2', 'Crane Bay 3'];\n\n          craneBays.forEach((bay) => {\n            state.addYardLocation({\n              name: bay,\n              craneBay: bay,\n              isActive: true,\n            });\n          });\n        }\n      },\n    }),\n    {\n      name: 'yard-location-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n","import { View, Text, ScrollView, Pressable } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { PourDepartment } from \"../types/pour-schedule\";\nimport { useYardLocationStore } from \"../state/yardLocationStore\";\nimport { useEffect } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"YardMap\">;\n\nexport default function YardMapScreen({ navigation }: Props) {\n  const yardedPieces = useYardLocationStore((s) => s.yardedPieces);\n  const initializeDefaultLocations = useYardLocationStore((s) => s.initializeDefaultLocations);\n\n  // Initialize default locations on mount\n  useEffect(() => {\n    initializeDefaultLocations();\n  }, []);\n\n  const departments: PourDepartment[] = [\"Precast\", \"Extruded\", \"Wall Panels\", \"Flexicore\"];\n\n  const getDepartmentColor = (dept: PourDepartment) => {\n    switch (dept) {\n      case \"Precast\":\n        return { bg: \"#EFF6FF\", color: \"#1E40AF\", accent: \"#3B82F6\" };\n      case \"Extruded\":\n        return { bg: \"#F0FDF4\", color: \"#166534\", accent: \"#10B981\" };\n      case \"Wall Panels\":\n        return { bg: \"#FEF3C7\", color: \"#92400E\", accent: \"#F59E0B\" };\n      case \"Flexicore\":\n        return { bg: \"#FCE7F3\", color: \"#831843\", accent: \"#EC4899\" };\n    }\n  };\n\n  const getDepartmentStats = (dept: PourDepartment) => {\n    const pieces = yardedPieces.filter(\n      (p) => p.department === dept && !p.isShipped\n    );\n    return {\n      totalPieces: pieces.length,\n      uniqueJobs: new Set(pieces.map((p) => p.jobNumber)).size,\n    };\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 16 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 20 }}>\n            <Text style={{ fontSize: 28, fontWeight: \"700\", color: \"#111827\", marginBottom: 4 }}>\n              Yard Maps\n            </Text>\n            <Text style={{ fontSize: 14, color: \"#6B7280\" }}>\n              Track and locate yarded pieces by department\n            </Text>\n          </View>\n\n          {/* Placeholder Map Area */}\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 16,\n              padding: 20,\n              marginBottom: 24,\n              borderWidth: 2,\n              borderColor: \"#E5E7EB\",\n              borderStyle: \"dashed\",\n              minHeight: 200,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <Ionicons name=\"map-outline\" size={64} color=\"#9CA3AF\" />\n            <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#6B7280\", marginTop: 12 }}>\n              General Yard Map\n            </Text>\n            <Text style={{ fontSize: 13, color: \"#9CA3AF\", marginTop: 4, textAlign: \"center\" }}>\n              Visual yard map coming soon\n            </Text>\n          </View>\n\n          {/* Department Selection */}\n          <View style={{ marginBottom: 16 }}>\n            <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginBottom: 12 }}>\n              Select Yarding Department\n            </Text>\n            <View style={{ gap: 10 }}>\n              {departments.map((dept) => {\n                const colors = getDepartmentColor(dept);\n                const stats = getDepartmentStats(dept);\n\n                return (\n                  <Pressable\n                    key={dept}\n                    onPress={() => navigation.navigate(\"YardDepartment\", { department: dept })}\n                    style={{\n                      backgroundColor: \"#FFFFFF\",\n                      borderRadius: 12,\n                      padding: 16,\n                      borderWidth: 1.5,\n                      borderColor: \"#E5E7EB\",\n                      shadowColor: \"#000\",\n                      shadowOffset: { width: 0, height: 1 },\n                      shadowOpacity: 0.05,\n                      shadowRadius: 2,\n                      elevation: 1,\n                    }}\n                  >\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                      <View style={{ flex: 1 }}>\n                        <View style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 8 }}>\n                          <View\n                            style={{\n                              backgroundColor: colors.bg,\n                              padding: 8,\n                              borderRadius: 8,\n                              marginRight: 12,\n                            }}\n                          >\n                            <Ionicons name=\"cube\" size={24} color={colors.accent} />\n                          </View>\n                          <Text style={{ fontSize: 18, fontWeight: \"700\", color: colors.color }}>\n                            {dept}\n                          </Text>\n                        </View>\n                        <View style={{ flexDirection: \"row\", gap: 16, marginLeft: 48 }}>\n                          <View>\n                            <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 2 }}>\n                              Pieces in Yard\n                            </Text>\n                            <Text style={{ fontSize: 16, fontWeight: \"600\", color: colors.accent }}>\n                              {stats.totalPieces}\n                            </Text>\n                          </View>\n                          <View>\n                            <Text style={{ fontSize: 11, color: \"#6B7280\", marginBottom: 2 }}>\n                              Active Jobs\n                            </Text>\n                            <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\" }}>\n                              {stats.uniqueJobs}\n                            </Text>\n                          </View>\n                        </View>\n                      </View>\n                      <Ionicons name=\"chevron-forward\" size={24} color={colors.accent} />\n                    </View>\n                  </Pressable>\n                );\n              })}\n            </View>\n          </View>\n\n          {/* Quick Actions */}\n          <View style={{ marginTop: 8 }}>\n            <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginBottom: 12 }}>\n              Quick Actions\n            </Text>\n            <View style={{ gap: 10 }}>\n              <Pressable\n                onPress={() => navigation.navigate(\"YardSearch\")}\n                style={{\n                  backgroundColor: \"#3B82F6\",\n                  borderRadius: 12,\n                  padding: 16,\n                  flexDirection: \"row\",\n                  alignItems: \"center\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n                  <Ionicons name=\"search\" size={24} color=\"#FFFFFF\" />\n                  <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#FFFFFF\", marginLeft: 12 }}>\n                    Search Yard\n                  </Text>\n                </View>\n                <Ionicons name=\"chevron-forward\" size={20} color=\"#FFFFFF\" />\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, ScrollView, Pressable, TextInput, Modal } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { usePourScheduleStore } from \"../state/pourScheduleStore\";\nimport { useYardLocationStore } from \"../state/yardLocationStore\";\nimport { PourDepartment } from \"../types/pour-schedule\";\nimport { useState } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"YardDepartment\">;\n\nexport default function YardDepartmentScreen({ navigation, route }: Props) {\n  const { department } = route.params;\n  const [selectedDate, setSelectedDate] = useState(Date.now());\n  const [showDatePickerModal, setShowDatePickerModal] = useState(false);\n  const [dateInputText, setDateInputText] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const getPourEntriesByDate = usePourScheduleStore((s) => s.getPourEntriesByDate);\n  const getYardedPieceByPourEntryId = useYardLocationStore((s) => s.getYardedPieceByPourEntryId);\n\n  const getDepartmentColor = (dept: PourDepartment) => {\n    switch (dept) {\n      case \"Precast\":\n        return { bg: \"#EFF6FF\", color: \"#1E40AF\", accent: \"#3B82F6\" };\n      case \"Extruded\":\n        return { bg: \"#F0FDF4\", color: \"#166534\", accent: \"#10B981\" };\n      case \"Wall Panels\":\n        return { bg: \"#FEF3C7\", color: \"#92400E\", accent: \"#F59E0B\" };\n      case \"Flexicore\":\n        return { bg: \"#FCE7F3\", color: \"#831843\", accent: \"#EC4899\" };\n    }\n  };\n\n  const colors = getDepartmentColor(department as PourDepartment);\n\n  const changeDate = (days: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(newDate.getDate() + days);\n    setSelectedDate(newDate.getTime());\n  };\n\n  const getDateLabel = () => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const selected = new Date(selectedDate);\n    selected.setHours(0, 0, 0, 0);\n\n    const diffTime = selected.getTime() - today.getTime();\n    const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) return \"Today\";\n    if (diffDays === -1) return \"Yesterday\";\n    if (diffDays === 1) return \"Tomorrow\";\n    return null;\n  };\n\n  const openDatePicker = () => {\n    const currentDate = new Date(selectedDate);\n    const formatted = `${(currentDate.getMonth() + 1).toString().padStart(2, \"0\")}/${currentDate\n      .getDate()\n      .toString()\n      .padStart(2, \"0\")}/${currentDate.getFullYear()}`;\n    setDateInputText(formatted);\n    setShowDatePickerModal(true);\n  };\n\n  const handleDateSubmit = () => {\n    const parts = dateInputText.split(\"/\");\n    if (parts.length !== 3) {\n      return;\n    }\n\n    const month = parseInt(parts[0]) - 1;\n    const day = parseInt(parts[1]);\n    const year = parseInt(parts[2]);\n\n    if (\n      isNaN(month) ||\n      isNaN(day) ||\n      isNaN(year) ||\n      month < 0 ||\n      month > 11 ||\n      day < 1 ||\n      day > 31 ||\n      year < 1900 ||\n      year > 2100\n    ) {\n      return;\n    }\n\n    const newDate = new Date(year, month, day);\n    setSelectedDate(newDate.getTime());\n    setShowDatePickerModal(false);\n  };\n\n  const setQuickDate = (daysOffset: number) => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    today.setDate(today.getDate() + daysOffset);\n    setSelectedDate(today.getTime());\n    setShowDatePickerModal(false);\n  };\n\n  // Get pour entries for the selected date and department\n  const allEntries = getPourEntriesByDate(selectedDate, department as PourDepartment);\n\n  // Filter by search query\n  const filteredEntries = searchQuery.trim()\n    ? allEntries.filter(\n        (entry) =>\n          entry.jobNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          entry.jobName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          entry.idNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          entry.markNumbers?.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    : allEntries;\n\n  // Group by form/bed\n  const groupedByForm = filteredEntries.reduce((acc, entry) => {\n    if (!acc[entry.formBedId]) {\n      acc[entry.formBedId] = {\n        formBedName: entry.formBedName,\n        entries: [],\n      };\n    }\n    acc[entry.formBedId].entries.push(entry);\n    return acc;\n  }, {} as Record<string, { formBedName: string; entries: typeof filteredEntries }>);\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 16 }}>\n          {/* Header */}\n          <View style={{ marginBottom: 16 }}>\n            <View style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 8 }}>\n              <View\n                style={{\n                  backgroundColor: colors.bg,\n                  padding: 10,\n                  borderRadius: 10,\n                  marginRight: 12,\n                }}\n              >\n                <Ionicons name=\"cube\" size={28} color={colors.accent} />\n              </View>\n              <View style={{ flex: 1 }}>\n                <Text style={{ fontSize: 24, fontWeight: \"700\", color: colors.color }}>\n                  {department}\n                </Text>\n                <Text style={{ fontSize: 13, color: \"#6B7280\" }}>\n                  Select pieces to assign yard locations\n                </Text>\n              </View>\n            </View>\n          </View>\n\n          {/* Date Selector */}\n          <View\n            style={{\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              marginBottom: 16,\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 10,\n              padding: 12,\n              borderWidth: 1,\n              borderColor: \"#E5E7EB\",\n            }}\n          >\n            <Pressable onPress={() => changeDate(-1)} style={{ padding: 4 }}>\n              <Ionicons name=\"chevron-back\" size={22} color=\"#111827\" />\n            </Pressable>\n            <View style={{ alignItems: \"center\" }}>\n              <Pressable onPress={openDatePicker}>\n                <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\" }}>\n                  {new Date(selectedDate).toLocaleDateString(\"en-US\", {\n                    weekday: \"short\",\n                    month: \"short\",\n                    day: \"numeric\",\n                  })}\n                </Text>\n              </Pressable>\n              {getDateLabel() && (\n                <Pressable onPress={() => setSelectedDate(Date.now())}>\n                  <Text style={{ fontSize: 11, color: colors.accent, fontWeight: \"500\" }}>\n                    {getDateLabel()}\n                  </Text>\n                </Pressable>\n              )}\n            </View>\n            <Pressable onPress={() => changeDate(1)} style={{ padding: 4 }}>\n              <Ionicons name=\"chevron-forward\" size={22} color=\"#111827\" />\n            </Pressable>\n          </View>\n\n          {/* Search */}\n          <View\n            style={{\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 10,\n              padding: 12,\n              borderWidth: 1,\n              borderColor: \"#E5E7EB\",\n              marginBottom: 16,\n            }}\n          >\n            <Ionicons name=\"search\" size={20} color=\"#6B7280\" />\n            <TextInput\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholder=\"Search by job, ID, or mark number...\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              style={{\n                flex: 1,\n                marginLeft: 8,\n                fontSize: 14,\n                color: \"#111827\",\n              }}\n            />\n            {searchQuery.length > 0 && (\n              <Pressable onPress={() => setSearchQuery(\"\")}>\n                <Ionicons name=\"close-circle\" size={20} color=\"#6B7280\" />\n              </Pressable>\n            )}\n          </View>\n\n          {/* Pieces List */}\n          {filteredEntries.length === 0 ? (\n            <View\n              style={{\n                backgroundColor: \"#FFFFFF\",\n                borderRadius: 12,\n                padding: 32,\n                alignItems: \"center\",\n              }}\n            >\n              <Ionicons name=\"calendar-outline\" size={48} color=\"#9CA3AF\" />\n              <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#6B7280\", marginTop: 12 }}>\n                {searchQuery.trim() ? \"No pieces found\" : \"No pieces scheduled\"}\n              </Text>\n              <Text style={{ fontSize: 13, color: \"#9CA3AF\", marginTop: 4, textAlign: \"center\" }}>\n                {searchQuery.trim()\n                  ? \"Try a different search term\"\n                  : \"Select a different date to view scheduled pieces\"}\n              </Text>\n            </View>\n          ) : (\n            <View style={{ gap: 12 }}>\n              {Object.entries(groupedByForm).map(([formBedId, { formBedName, entries }]) => (\n                <View\n                  key={formBedId}\n                  style={{\n                    backgroundColor: \"#FFFFFF\",\n                    borderRadius: 12,\n                    padding: 12,\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                  }}\n                >\n                  {/* Form/Bed Header */}\n                  <View\n                    style={{\n                      flexDirection: \"row\",\n                      alignItems: \"center\",\n                      marginBottom: 12,\n                      paddingBottom: 8,\n                      borderBottomWidth: 1,\n                      borderBottomColor: \"#F3F4F6\",\n                    }}\n                  >\n                    <Ionicons name=\"layers-outline\" size={20} color={colors.accent} />\n                    <Text\n                      style={{\n                        fontSize: 15,\n                        fontWeight: \"600\",\n                        color: colors.color,\n                        marginLeft: 8,\n                        flex: 1,\n                      }}\n                    >\n                      {formBedName}\n                    </Text>\n                    <View\n                      style={{\n                        backgroundColor: colors.bg,\n                        paddingHorizontal: 10,\n                        paddingVertical: 4,\n                        borderRadius: 6,\n                      }}\n                    >\n                      <Text style={{ fontSize: 12, fontWeight: \"600\", color: colors.color }}>\n                        {entries.length}\n                      </Text>\n                    </View>\n                  </View>\n\n                  {/* Pieces */}\n                  <View style={{ gap: 8 }}>\n                    {entries.map((entry) => {\n                      const yardedPiece = getYardedPieceByPourEntryId(entry.id);\n                      const isYarded = !!yardedPiece;\n\n                      return (\n                        <Pressable\n                          key={entry.id}\n                          onPress={() =>\n                            navigation.navigate(\"YardProductSelection\", {\n                              pourEntryId: entry.id,\n                              department,\n                            })\n                          }\n                          style={{\n                            backgroundColor: isYarded ? \"#F0FDF4\" : \"#F9FAFB\",\n                            borderRadius: 8,\n                            padding: 12,\n                            borderWidth: 1,\n                            borderColor: isYarded ? \"#10B981\" : \"#E5E7EB\",\n                          }}\n                        >\n                          <View\n                            style={{\n                              flexDirection: \"row\",\n                              justifyContent: \"space-between\",\n                              alignItems: \"center\",\n                            }}\n                          >\n                            <View style={{ flex: 1 }}>\n                              <View\n                                style={{\n                                  flexDirection: \"row\",\n                                  alignItems: \"center\",\n                                  marginBottom: 4,\n                                }}\n                              >\n                                <Text\n                                  style={{ fontSize: 15, fontWeight: \"600\", color: \"#111827\" }}\n                                >\n                                  #{entry.jobNumber}\n                                </Text>\n                                {isYarded && (\n                                  <View\n                                    style={{\n                                      backgroundColor: \"#10B981\",\n                                      paddingHorizontal: 6,\n                                      paddingVertical: 2,\n                                      borderRadius: 4,\n                                      marginLeft: 8,\n                                    }}\n                                  >\n                                    <Text\n                                      style={{ fontSize: 10, fontWeight: \"600\", color: \"#FFFFFF\" }}\n                                    >\n                                      YARDED\n                                    </Text>\n                                  </View>\n                                )}\n                              </View>\n                              {entry.jobName && (\n                                <Text style={{ fontSize: 13, color: \"#374151\", marginBottom: 4 }}>\n                                  {entry.jobName}\n                                </Text>\n                              )}\n                              <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}>\n                                {entry.idNumber && (\n                                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                                    ID: {entry.idNumber}\n                                  </Text>\n                                )}\n                                {entry.markNumbers && (\n                                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                                    {entry.markNumbers}\n                                  </Text>\n                                )}\n                                {entry.dimensions && (\n                                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                                    {entry.dimensions}\n                                  </Text>\n                                )}\n                              </View>\n                            </View>\n                            <Ionicons\n                              name={isYarded ? \"checkmark-circle\" : \"chevron-forward\"}\n                              size={24}\n                              color={isYarded ? \"#10B981\" : colors.accent}\n                            />\n                          </View>\n                        </Pressable>\n                      );\n                    })}\n                  </View>\n                </View>\n              ))}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Date Picker Modal */}\n      <Modal visible={showDatePickerModal} animationType=\"slide\" transparent>\n        <View\n          style={{\n            flex: 1,\n            backgroundColor: \"rgba(0,0,0,0.5)\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 24,\n              padding: 24,\n              width: \"85%\",\n              maxWidth: 400,\n            }}\n          >\n            <View\n              style={{\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 20,\n              }}\n            >\n              <Text style={{ fontSize: 20, fontWeight: \"600\", color: \"#111827\" }}>\n                Select Date\n              </Text>\n              <Pressable onPress={() => setShowDatePickerModal(false)}>\n                <Ionicons name=\"close\" size={24} color=\"#6B7280\" />\n              </Pressable>\n            </View>\n\n            {/* Quick Date Buttons */}\n            <View style={{ flexDirection: \"row\", gap: 8, marginBottom: 20 }}>\n              <Pressable\n                onPress={() => setQuickDate(-1)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\" }}>\n                  Yesterday\n                </Text>\n              </Pressable>\n              <Pressable\n                onPress={() => setQuickDate(0)}\n                style={{\n                  flex: 1,\n                  backgroundColor: colors.accent,\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#FFFFFF\" }}>Today</Text>\n              </Pressable>\n              <Pressable\n                onPress={() => setQuickDate(1)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 12,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 13, fontWeight: \"600\", color: \"#374151\" }}>Tomorrow</Text>\n              </Pressable>\n            </View>\n\n            {/* Manual Date Input */}\n            <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n              Or enter a date:\n            </Text>\n            <TextInput\n              value={dateInputText}\n              onChangeText={setDateInputText}\n              placeholder=\"MM/DD/YYYY\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              keyboardType=\"numbers-and-punctuation\"\n              style={{\n                backgroundColor: \"#F9FAFB\",\n                borderWidth: 1,\n                borderColor: \"#D1D5DB\",\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 16,\n                color: \"#111827\",\n                marginBottom: 20,\n              }}\n            />\n\n            {/* Action Buttons */}\n            <View style={{ flexDirection: \"row\", gap: 12 }}>\n              <Pressable\n                onPress={() => setShowDatePickerModal(false)}\n                style={{\n                  flex: 1,\n                  backgroundColor: \"#F3F4F6\",\n                  borderRadius: 8,\n                  padding: 14,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#374151\" }}>Cancel</Text>\n              </Pressable>\n              <Pressable\n                onPress={handleDateSubmit}\n                style={{\n                  flex: 1,\n                  backgroundColor: colors.accent,\n                  borderRadius: 8,\n                  padding: 14,\n                  alignItems: \"center\",\n                }}\n              >\n                <Text style={{ fontSize: 15, fontWeight: \"600\", color: \"#FFFFFF\" }}>\n                  Go to Date\n                </Text>\n              </Pressable>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, ScrollView, Pressable, TextInput, Alert } from \"react-native\";\nimport { SafeAreaView, useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { usePourScheduleStore } from \"../state/pourScheduleStore\";\nimport { useYardLocationStore } from \"../state/yardLocationStore\";\nimport { useAuthStore } from \"../state/authStore\";\nimport { useState, useEffect } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"YardProductSelection\">;\n\nexport default function YardProductSelectionScreen({ navigation, route }: Props) {\n  const { pourEntryId, department } = route.params;\n  const insets = useSafeAreaInsets();\n\n  const currentUser = useAuthStore((s) => s.currentUser);\n  const getPourEntry = usePourScheduleStore((s) => s.getPourEntry);\n  const yardLocations = useYardLocationStore((s) => s.yardLocations);\n  const addYardLocation = useYardLocationStore((s) => s.addYardLocation);\n  const addYardedPiece = useYardLocationStore((s) => s.addYardedPiece);\n  const updateYardedPiece = useYardLocationStore((s) => s.updateYardedPiece);\n  const getYardedPieceByPourEntryId = useYardLocationStore((s) => s.getYardedPieceByPourEntryId);\n\n  const pourEntry = getPourEntry(pourEntryId);\n  const existingYardedPiece = getYardedPieceByPourEntryId(pourEntryId);\n\n  const [selectedLocationId, setSelectedLocationId] = useState(\n    existingYardedPiece?.yardLocationId || \"\"\n  );\n  const [craneBay, setCraneBay] = useState(\"\");\n  const [row, setRow] = useState(\"\");\n  const [position, setPosition] = useState(\"\");\n  const [notes, setNotes] = useState(existingYardedPiece?.notes || \"\");\n  const [showAddLocationForm, setShowAddLocationForm] = useState(false);\n\n  useEffect(() => {\n    if (existingYardedPiece) {\n      setSelectedLocationId(existingYardedPiece.yardLocationId);\n      setNotes(existingYardedPiece.notes || \"\");\n    }\n  }, [existingYardedPiece]);\n\n  if (!pourEntry) {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n        <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\", padding: 20 }}>\n          <Ionicons name=\"alert-circle-outline\" size={64} color=\"#EF4444\" />\n          <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\", marginTop: 16 }}>\n            Piece Not Found\n          </Text>\n          <Text\n            style={{\n              fontSize: 14,\n              color: \"#6B7280\",\n              marginTop: 8,\n              textAlign: \"center\",\n            }}\n          >\n            The piece you're trying to yard could not be found.\n          </Text>\n          <Pressable\n            onPress={() => navigation.goBack()}\n            style={{\n              backgroundColor: \"#3B82F6\",\n              borderRadius: 10,\n              paddingHorizontal: 24,\n              paddingVertical: 12,\n              marginTop: 20,\n            }}\n          >\n            <Text style={{ color: \"#FFFFFF\", fontSize: 15, fontWeight: \"600\" }}>Go Back</Text>\n          </Pressable>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  const handleAddCustomLocation = () => {\n    if (!craneBay.trim()) {\n      Alert.alert(\"Error\", \"Crane Bay is required\");\n      return;\n    }\n\n    const locationName = [\n      craneBay.trim(),\n      row.trim() ? `Row ${row.trim()}` : \"\",\n      position.trim() ? `Pos ${position.trim()}` : \"\",\n    ]\n      .filter(Boolean)\n      .join(\", \");\n\n    const locationId = addYardLocation({\n      name: locationName,\n      craneBay: craneBay.trim(),\n      row: row.trim() || undefined,\n      position: position.trim() || undefined,\n      isActive: true,\n    });\n\n    setSelectedLocationId(locationId);\n    setShowAddLocationForm(false);\n    setCraneBay(\"\");\n    setRow(\"\");\n    setPosition(\"\");\n  };\n\n  const handleAssignYardLocation = () => {\n    if (!selectedLocationId) {\n      Alert.alert(\"Error\", \"Please select a yard location\");\n      return;\n    }\n\n    if (!currentUser) {\n      Alert.alert(\"Error\", \"You must be logged in\");\n      return;\n    }\n\n    const location = yardLocations.find((l) => l.id === selectedLocationId);\n    if (!location) {\n      Alert.alert(\"Error\", \"Selected location not found\");\n      return;\n    }\n\n    if (existingYardedPiece) {\n      // Update existing\n      updateYardedPiece(existingYardedPiece.id, {\n        yardLocationId: selectedLocationId,\n        notes: notes.trim() || undefined,\n      });\n\n      Alert.alert(\"Success\", \"Yard location updated successfully\", [\n        { text: \"OK\", onPress: () => navigation.goBack() },\n      ]);\n    } else {\n      // Create new\n      addYardedPiece({\n        pourEntryId: pourEntry.id,\n        yardLocationId: selectedLocationId,\n        jobNumber: pourEntry.jobNumber,\n        jobName: pourEntry.jobName,\n        idNumber: pourEntry.idNumber,\n        markNumbers: pourEntry.markNumbers,\n        department: pourEntry.department,\n        formBedName: pourEntry.formBedName,\n        productType: pourEntry.productType,\n        dimensions: pourEntry.dimensions,\n        yardedDate: Date.now(),\n        yardedBy: currentUser.email,\n        pourDate: pourEntry.scheduledDate,\n        isShipped: false,\n        notes: notes.trim() || undefined,\n      });\n\n      Alert.alert(\"Success\", \"Piece assigned to yard location\", [\n        { text: \"OK\", onPress: () => navigation.goBack() },\n      ]);\n    }\n  };\n\n  const activeLocations = yardLocations.filter((l) => l.isActive).sort((a, b) => a.name.localeCompare(b.name));\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <ScrollView style={{ flex: 1 }}>\n        <View style={{ padding: 16 }}>\n          {/* Piece Details */}\n          <View\n            style={{\n              backgroundColor: \"#FFFFFF\",\n              borderRadius: 12,\n              padding: 16,\n              marginBottom: 20,\n              borderWidth: 1,\n              borderColor: \"#E5E7EB\",\n            }}\n          >\n            <Text style={{ fontSize: 12, color: \"#6B7280\", marginBottom: 8 }}>\n              ASSIGNING TO YARD\n            </Text>\n            <Text style={{ fontSize: 20, fontWeight: \"700\", color: \"#111827\", marginBottom: 8 }}>\n              Job #{pourEntry.jobNumber}\n            </Text>\n            {pourEntry.jobName && (\n              <Text style={{ fontSize: 15, color: \"#374151\", marginBottom: 8 }}>\n                {pourEntry.jobName}\n              </Text>\n            )}\n            <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}>\n              {pourEntry.idNumber && (\n                <View\n                  style={{\n                    backgroundColor: \"#F3F4F6\",\n                    paddingHorizontal: 10,\n                    paddingVertical: 4,\n                    borderRadius: 6,\n                  }}\n                >\n                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>ID: {pourEntry.idNumber}</Text>\n                </View>\n              )}\n              {pourEntry.markNumbers && (\n                <View\n                  style={{\n                    backgroundColor: \"#F3F4F6\",\n                    paddingHorizontal: 10,\n                    paddingVertical: 4,\n                    borderRadius: 6,\n                  }}\n                >\n                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>{pourEntry.markNumbers}</Text>\n                </View>\n              )}\n              {pourEntry.dimensions && (\n                <View\n                  style={{\n                    backgroundColor: \"#F3F4F6\",\n                    paddingHorizontal: 10,\n                    paddingVertical: 4,\n                    borderRadius: 6,\n                  }}\n                >\n                  <Text style={{ fontSize: 12, color: \"#6B7280\" }}>{pourEntry.dimensions}</Text>\n                </View>\n              )}\n              <View\n                style={{\n                  backgroundColor: \"#EFF6FF\",\n                  paddingHorizontal: 10,\n                  paddingVertical: 4,\n                  borderRadius: 6,\n                }}\n              >\n                <Text style={{ fontSize: 12, color: \"#3B82F6\", fontWeight: \"600\" }}>\n                  {pourEntry.formBedName}\n                </Text>\n              </View>\n            </View>\n          </View>\n\n          {/* Select Location */}\n          <View style={{ marginBottom: 20 }}>\n            <View\n              style={{\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 12,\n              }}\n            >\n              <Text style={{ fontSize: 18, fontWeight: \"600\", color: \"#111827\" }}>\n                Select Yard Location\n              </Text>\n              <Pressable\n                onPress={() => setShowAddLocationForm(!showAddLocationForm)}\n                style={{\n                  backgroundColor: showAddLocationForm ? \"#F3F4F6\" : \"#3B82F6\",\n                  borderRadius: 8,\n                  paddingHorizontal: 12,\n                  paddingVertical: 6,\n                  flexDirection: \"row\",\n                  alignItems: \"center\",\n                }}\n              >\n                <Ionicons\n                  name={showAddLocationForm ? \"close\" : \"add\"}\n                  size={18}\n                  color={showAddLocationForm ? \"#6B7280\" : \"#FFFFFF\"}\n                />\n                <Text\n                  style={{\n                    fontSize: 13,\n                    fontWeight: \"600\",\n                    color: showAddLocationForm ? \"#6B7280\" : \"#FFFFFF\",\n                    marginLeft: 4,\n                  }}\n                >\n                  {showAddLocationForm ? \"Cancel\" : \"Add New\"}\n                </Text>\n              </Pressable>\n            </View>\n\n            {/* Add New Location Form */}\n            {showAddLocationForm && (\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderRadius: 12,\n                  padding: 16,\n                  marginBottom: 12,\n                  borderWidth: 1,\n                  borderColor: \"#3B82F6\",\n                }}\n              >\n                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                  Crane Bay *\n                </Text>\n                <TextInput\n                  value={craneBay}\n                  onChangeText={setCraneBay}\n                  placeholder=\"e.g., Crane Bay 1\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  style={{\n                    backgroundColor: \"#F9FAFB\",\n                    borderRadius: 8,\n                    padding: 12,\n                    fontSize: 14,\n                    color: \"#111827\",\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                    marginBottom: 12,\n                  }}\n                />\n\n                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                  Row\n                </Text>\n                <TextInput\n                  value={row}\n                  onChangeText={setRow}\n                  placeholder=\"e.g., 38\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  style={{\n                    backgroundColor: \"#F9FAFB\",\n                    borderRadius: 8,\n                    padding: 12,\n                    fontSize: 14,\n                    color: \"#111827\",\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                    marginBottom: 12,\n                  }}\n                />\n\n                <Text style={{ fontSize: 14, fontWeight: \"600\", color: \"#374151\", marginBottom: 8 }}>\n                  Position\n                </Text>\n                <TextInput\n                  value={position}\n                  onChangeText={setPosition}\n                  placeholder=\"e.g., A\"\n                  placeholderTextColor=\"#9CA3AF\"\n                  cursorColor=\"#000000\"\n                  style={{\n                    backgroundColor: \"#F9FAFB\",\n                    borderRadius: 8,\n                    padding: 12,\n                    fontSize: 14,\n                    color: \"#111827\",\n                    borderWidth: 1,\n                    borderColor: \"#E5E7EB\",\n                    marginBottom: 12,\n                  }}\n                />\n\n                <Pressable\n                  onPress={handleAddCustomLocation}\n                  style={{\n                    backgroundColor: \"#3B82F6\",\n                    borderRadius: 8,\n                    padding: 12,\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={{ color: \"#FFFFFF\", fontSize: 14, fontWeight: \"600\" }}>\n                    Add Location\n                  </Text>\n                </Pressable>\n              </View>\n            )}\n\n            {/* Existing Locations */}\n            {activeLocations.length === 0 ? (\n              <View\n                style={{\n                  backgroundColor: \"#FFFFFF\",\n                  borderRadius: 12,\n                  padding: 20,\n                  alignItems: \"center\",\n                }}\n              >\n                <Ionicons name=\"location-outline\" size={40} color=\"#9CA3AF\" />\n                <Text style={{ fontSize: 14, color: \"#6B7280\", marginTop: 8 }}>\n                  No yard locations available\n                </Text>\n                <Text style={{ fontSize: 12, color: \"#9CA3AF\", marginTop: 4 }}>\n                  Add a new location above\n                </Text>\n              </View>\n            ) : (\n              <View style={{ gap: 8 }}>\n                {activeLocations.map((location) => (\n                  <Pressable\n                    key={location.id}\n                    onPress={() => setSelectedLocationId(location.id)}\n                    style={{\n                      backgroundColor: selectedLocationId === location.id ? \"#EFF6FF\" : \"#FFFFFF\",\n                      borderRadius: 10,\n                      padding: 14,\n                      borderWidth: 2,\n                      borderColor: selectedLocationId === location.id ? \"#3B82F6\" : \"#E5E7EB\",\n                      flexDirection: \"row\",\n                      alignItems: \"center\",\n                      justifyContent: \"space-between\",\n                    }}\n                  >\n                    <View style={{ flex: 1 }}>\n                      <Text\n                        style={{\n                          fontSize: 15,\n                          fontWeight: \"600\",\n                          color: selectedLocationId === location.id ? \"#1E40AF\" : \"#111827\",\n                        }}\n                      >\n                        {location.name}\n                      </Text>\n                      {location.notes && (\n                        <Text style={{ fontSize: 12, color: \"#6B7280\", marginTop: 2 }}>\n                          {location.notes}\n                        </Text>\n                      )}\n                    </View>\n                    {selectedLocationId === location.id && (\n                      <Ionicons name=\"checkmark-circle\" size={24} color=\"#3B82F6\" />\n                    )}\n                  </Pressable>\n                ))}\n              </View>\n            )}\n          </View>\n\n          {/* Notes */}\n          <View style={{ marginBottom: 20 }}>\n            <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginBottom: 8 }}>\n              Notes (Optional)\n            </Text>\n            <TextInput\n              value={notes}\n              onChangeText={setNotes}\n              placeholder=\"Add any notes about this piece...\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              multiline\n              numberOfLines={3}\n              textAlignVertical=\"top\"\n              style={{\n                backgroundColor: \"#FFFFFF\",\n                borderRadius: 10,\n                padding: 12,\n                fontSize: 14,\n                color: \"#111827\",\n                borderWidth: 1,\n                borderColor: \"#E5E7EB\",\n                minHeight: 80,\n              }}\n            />\n          </View>\n        </View>\n      </ScrollView>\n\n      {/* Bottom Action Button */}\n      <View\n        style={{\n          padding: 16,\n          paddingBottom: insets.bottom + 16,\n          backgroundColor: \"#FFFFFF\",\n          borderTopWidth: 1,\n          borderTopColor: \"#E5E7EB\",\n        }}\n      >\n        <Pressable\n          onPress={handleAssignYardLocation}\n          style={{\n            backgroundColor: \"#10B981\",\n            borderRadius: 12,\n            padding: 16,\n            alignItems: \"center\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n          }}\n        >\n          <Ionicons name=\"checkmark-circle\" size={24} color=\"#FFFFFF\" />\n          <Text style={{ color: \"#FFFFFF\", fontSize: 16, fontWeight: \"600\", marginLeft: 8 }}>\n            {existingYardedPiece ? \"Update Yard Location\" : \"Assign to Yard\"}\n          </Text>\n        </Pressable>\n      </View>\n    </SafeAreaView>\n  );\n}\n","import { View, Text, ScrollView, Pressable, TextInput } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../navigation/types\";\nimport { useYardLocationStore } from \"../state/yardLocationStore\";\nimport { PourDepartment } from \"../types/pour-schedule\";\nimport { useState } from \"react\";\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"YardSearch\">;\n\nexport default function YardSearchScreen({ navigation }: Props) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedDepartment, setSelectedDepartment] = useState<PourDepartment | null>(null);\n\n  const yardedPieces = useYardLocationStore((s) => s.yardedPieces);\n  const getYardLocation = useYardLocationStore((s) => s.getYardLocation);\n\n  const departments: PourDepartment[] = [\"Precast\", \"Extruded\", \"Wall Panels\", \"Flexicore\"];\n\n  const getDepartmentColor = (dept: PourDepartment) => {\n    switch (dept) {\n      case \"Precast\":\n        return { bg: \"#EFF6FF\", color: \"#1E40AF\", accent: \"#3B82F6\" };\n      case \"Extruded\":\n        return { bg: \"#F0FDF4\", color: \"#166534\", accent: \"#10B981\" };\n      case \"Wall Panels\":\n        return { bg: \"#FEF3C7\", color: \"#92400E\", accent: \"#F59E0B\" };\n      case \"Flexicore\":\n        return { bg: \"#FCE7F3\", color: \"#831843\", accent: \"#EC4899\" };\n    }\n  };\n\n  // Filter pieces\n  const filteredPieces = yardedPieces.filter((piece) => {\n    if (piece.isShipped) return false;\n\n    const matchesDepartment = selectedDepartment ? piece.department === selectedDepartment : true;\n\n    if (!searchQuery.trim()) return matchesDepartment;\n\n    const query = searchQuery.toLowerCase();\n    return (\n      matchesDepartment &&\n      (piece.jobNumber.toLowerCase().includes(query) ||\n        piece.jobName?.toLowerCase().includes(query) ||\n        piece.idNumber?.toLowerCase().includes(query) ||\n        piece.markNumbers?.toLowerCase().includes(query))\n    );\n  });\n\n  return (\n    <SafeAreaView style={{ flex: 1, backgroundColor: \"#F9FAFB\" }}>\n      <View style={{ flex: 1 }}>\n        {/* Header */}\n        <View\n          style={{\n            backgroundColor: \"#FFFFFF\",\n            padding: 16,\n            borderBottomWidth: 1,\n            borderBottomColor: \"#E5E7EB\",\n          }}\n        >\n          <View style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 12 }}>\n            <Pressable onPress={() => navigation.goBack()} style={{ marginRight: 12 }}>\n              <Ionicons name=\"arrow-back\" size={24} color=\"#111827\" />\n            </Pressable>\n            <Text style={{ fontSize: 20, fontWeight: \"700\", color: \"#111827\" }}>\n              Search Yard\n            </Text>\n          </View>\n\n          {/* Search Bar */}\n          <View\n            style={{\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              backgroundColor: \"#F3F4F6\",\n              borderRadius: 10,\n              padding: 12,\n            }}\n          >\n            <Ionicons name=\"search\" size={20} color=\"#6B7280\" />\n            <TextInput\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholder=\"Search by job number, ID, or mark...\"\n              placeholderTextColor=\"#9CA3AF\"\n              cursorColor=\"#000000\"\n              autoFocus\n              style={{\n                flex: 1,\n                marginLeft: 8,\n                fontSize: 15,\n                color: \"#111827\",\n              }}\n            />\n            {searchQuery.length > 0 && (\n              <Pressable onPress={() => setSearchQuery(\"\")}>\n                <Ionicons name=\"close-circle\" size={20} color=\"#6B7280\" />\n              </Pressable>\n            )}\n          </View>\n\n          {/* Department Filter */}\n          <ScrollView\n            horizontal\n            showsHorizontalScrollIndicator={false}\n            style={{ marginTop: 12 }}\n            contentContainerStyle={{ gap: 8 }}\n          >\n            <Pressable\n              onPress={() => setSelectedDepartment(null)}\n              style={{\n                backgroundColor: selectedDepartment === null ? \"#3B82F6\" : \"#FFFFFF\",\n                paddingHorizontal: 16,\n                paddingVertical: 8,\n                borderRadius: 20,\n                borderWidth: 1,\n                borderColor: selectedDepartment === null ? \"#3B82F6\" : \"#E5E7EB\",\n              }}\n            >\n              <Text\n                style={{\n                  fontSize: 13,\n                  fontWeight: \"600\",\n                  color: selectedDepartment === null ? \"#FFFFFF\" : \"#6B7280\",\n                }}\n              >\n                All\n              </Text>\n            </Pressable>\n            {departments.map((dept) => {\n              const colors = getDepartmentColor(dept);\n              const isSelected = selectedDepartment === dept;\n\n              return (\n                <Pressable\n                  key={dept}\n                  onPress={() => setSelectedDepartment(dept)}\n                  style={{\n                    backgroundColor: isSelected ? colors.accent : \"#FFFFFF\",\n                    paddingHorizontal: 16,\n                    paddingVertical: 8,\n                    borderRadius: 20,\n                    borderWidth: 1,\n                    borderColor: isSelected ? colors.accent : \"#E5E7EB\",\n                  }}\n                >\n                  <Text\n                    style={{\n                      fontSize: 13,\n                      fontWeight: \"600\",\n                      color: isSelected ? \"#FFFFFF\" : \"#6B7280\",\n                    }}\n                  >\n                    {dept}\n                  </Text>\n                </Pressable>\n              );\n            })}\n          </ScrollView>\n\n          {/* Results Count */}\n          <Text style={{ fontSize: 13, color: \"#6B7280\", marginTop: 12 }}>\n            {filteredPieces.length} {filteredPieces.length === 1 ? \"piece\" : \"pieces\"} found\n          </Text>\n        </View>\n\n        {/* Results */}\n        <ScrollView style={{ flex: 1 }}>\n          {filteredPieces.length === 0 ? (\n            <View style={{ alignItems: \"center\", justifyContent: \"center\", padding: 32, marginTop: 40 }}>\n              <Ionicons name=\"search-outline\" size={64} color=\"#9CA3AF\" />\n              <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#6B7280\", marginTop: 16 }}>\n                {searchQuery.trim() ? \"No pieces found\" : \"No pieces in yard\"}\n              </Text>\n              <Text style={{ fontSize: 13, color: \"#9CA3AF\", marginTop: 4, textAlign: \"center\" }}>\n                {searchQuery.trim()\n                  ? \"Try a different search term\"\n                  : \"Start by assigning pieces to yard locations\"}\n              </Text>\n            </View>\n          ) : (\n            <View style={{ padding: 16, gap: 10 }}>\n              {filteredPieces.map((piece) => {\n                const location = getYardLocation(piece.yardLocationId);\n                const colors = getDepartmentColor(piece.department);\n\n                return (\n                  <Pressable\n                    key={piece.id}\n                    onPress={() =>\n                      navigation.navigate(\"YardProductSelection\", {\n                        pourEntryId: piece.pourEntryId,\n                        department: piece.department,\n                      })\n                    }\n                    style={{\n                      backgroundColor: \"#FFFFFF\",\n                      borderRadius: 12,\n                      padding: 14,\n                      borderWidth: 1,\n                      borderColor: \"#E5E7EB\",\n                    }}\n                  >\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}>\n                      <View style={{ flex: 1 }}>\n                        <Text style={{ fontSize: 16, fontWeight: \"600\", color: \"#111827\", marginBottom: 4 }}>\n                          Job #{piece.jobNumber}\n                        </Text>\n                        {piece.jobName && (\n                          <Text style={{ fontSize: 14, color: \"#374151\", marginBottom: 4 }}>\n                            {piece.jobName}\n                          </Text>\n                        )}\n                      </View>\n                      <View\n                        style={{\n                          backgroundColor: colors.bg,\n                          paddingHorizontal: 10,\n                          paddingVertical: 4,\n                          borderRadius: 6,\n                          height: 28,\n                        }}\n                      >\n                        <Text style={{ fontSize: 12, fontWeight: \"600\", color: colors.color }}>\n                          {piece.department}\n                        </Text>\n                      </View>\n                    </View>\n\n                    <View style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8, marginBottom: 10 }}>\n                      {piece.idNumber && (\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>ID: {piece.idNumber}</Text>\n                      )}\n                      {piece.markNumbers && (\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>{piece.markNumbers}</Text>\n                      )}\n                      {piece.dimensions && (\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>{piece.dimensions}</Text>\n                      )}\n                    </View>\n\n                    {/* Location Info */}\n                    <View\n                      style={{\n                        flexDirection: \"row\",\n                        alignItems: \"center\",\n                        backgroundColor: \"#F0FDF4\",\n                        paddingHorizontal: 10,\n                        paddingVertical: 8,\n                        borderRadius: 8,\n                      }}\n                    >\n                      <Ionicons name=\"location\" size={16} color=\"#10B981\" />\n                      <Text\n                        style={{\n                          fontSize: 13,\n                          fontWeight: \"600\",\n                          color: \"#166534\",\n                          marginLeft: 6,\n                          flex: 1,\n                        }}\n                      >\n                        {location?.name || \"Unknown Location\"}\n                      </Text>\n                      <Ionicons name=\"chevron-forward\" size={18} color=\"#10B981\" />\n                    </View>\n\n                    {/* Dates */}\n                    <View style={{ flexDirection: \"row\", gap: 16, marginTop: 8 }}>\n                      <View>\n                        <Text style={{ fontSize: 10, color: \"#9CA3AF\", marginBottom: 2 }}>Poured</Text>\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                          {new Date(piece.pourDate).toLocaleDateString(\"en-US\", {\n                            month: \"short\",\n                            day: \"numeric\",\n                          })}\n                        </Text>\n                      </View>\n                      <View>\n                        <Text style={{ fontSize: 10, color: \"#9CA3AF\", marginBottom: 2 }}>Yarded</Text>\n                        <Text style={{ fontSize: 12, color: \"#6B7280\" }}>\n                          {new Date(piece.yardedDate).toLocaleDateString(\"en-US\", {\n                            month: \"short\",\n                            day: \"numeric\",\n                          })}\n                        </Text>\n                      </View>\n                    </View>\n                  </Pressable>\n                );\n              })}\n            </View>\n          )}\n        </ScrollView>\n      </View>\n    </SafeAreaView>\n  );\n}\n","import { StatusBar } from \"expo-status-bar\";\nimport { Pressable, View, Text, Platform } from \"react-native\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useState, useEffect } from \"react\";\nimport { RootStackParamList } from \"./src/navigation/types\";\nimport DashboardScreen from \"./src/screens/DashboardScreen\";\nimport CalculatorScreen from \"./src/screens/CalculatorScreen\";\nimport ResultsScreen from \"./src/screens/ResultsScreen\";\nimport HistoryScreen from \"./src/screens/HistoryScreen\";\nimport StrandPatternsScreen from \"./src/screens/StrandPatternsScreen\";\nimport ProductDetailsScreen from \"./src/screens/ProductDetailsScreen\";\nimport SlippageIdentifierScreen from \"./src/screens/SlippageIdentifierScreen\";\nimport SlippageSummaryScreen from \"./src/screens/SlippageSummaryScreen\";\nimport SlippageHistoryScreen from \"./src/screens/SlippageHistoryScreen\";\nimport EmailComposerScreen from \"./src/screens/EmailComposerScreen\";\nimport StressingCalculatorScreen from \"./src/screens/StressingCalculatorScreen\";\nimport StressingResultsScreen from \"./src/screens/StressingResultsScreen\";\nimport StrandLibraryScreen from \"./src/screens/StrandLibraryScreen\";\nimport AggregateGradationScreen from \"./src/screens/AggregateGradationScreen\";\nimport GradationTestScreen from \"./src/screens/GradationTestScreen\";\nimport GradationResultsScreen from \"./src/screens/GradationResultsScreen\";\nimport GradationHistoryScreen from \"./src/screens/GradationHistoryScreen\";\nimport GradationAdminScreen from \"./src/screens/GradationAdminScreen\";\nimport GradationAddEditAggregateScreen from \"./src/screens/GradationAddEditAggregateScreen\";\nimport AggregateLibraryScreen from \"./src/screens/AggregateLibraryScreen\";\nimport AggregateLibraryDetailScreen from \"./src/screens/AggregateLibraryDetailScreen\";\nimport AggregateLibraryAddEditScreen from \"./src/screens/AggregateLibraryAddEditScreen\";\nimport AdmixLibraryScreen from \"./src/screens/AdmixLibraryScreen\";\nimport AdmixLibraryDetailScreen from \"./src/screens/AdmixLibraryDetailScreen\";\nimport AdmixLibraryAddEditScreen from \"./src/screens/AdmixLibraryAddEditScreen\";\nimport ContactsScreen from \"./src/screens/ContactsScreen\";\nimport ContactDetailScreen from \"./src/screens/ContactDetailScreen\";\nimport ContactAddEditScreen from \"./src/screens/ContactAddEditScreen\";\nimport QualityLogDashboardScreen from \"./src/screens/QualityLogDashboardScreen\";\nimport QualityLogListScreen from \"./src/screens/QualityLogListScreen\";\nimport QualityLogDetailScreen from \"./src/screens/QualityLogDetailScreen\";\nimport QualityLogAddEditScreen from \"./src/screens/QualityLogAddEditScreen\";\nimport QualityLogMetricsScreen from \"./src/screens/QualityLogMetricsScreen\";\nimport QualityLogSearchScreen from \"./src/screens/QualityLogSearchScreen\";\nimport IssueCodeLibraryScreen from \"./src/screens/IssueCodeLibraryScreen\";\nimport ProductLibraryScreen from \"./src/screens/ProductLibraryScreen\";\nimport ProjectLibraryScreen from \"./src/screens/ProjectLibraryScreen\";\nimport ProjectLibraryDetailScreen from \"./src/screens/ProjectLibraryDetailScreen\";\nimport ProjectLibraryAddEditScreen from \"./src/screens/ProjectLibraryAddEditScreen\";\nimport ProjectLibraryExportImportScreen from \"./src/screens/ProjectLibraryExportImportScreen\";\nimport DailyPourScheduleScreen from \"./src/screens/DailyPourScheduleScreen\";\nimport ScheduleSearchScreen from \"./src/screens/ScheduleSearchScreen\";\nimport ScheduleScannerScreen from \"./src/screens/ScheduleScannerScreen\";\nimport ScheduleReviewScreen from \"./src/screens/ScheduleReviewScreen\";\nimport ProductTagScannerScreen from \"./src/screens/ProductTagScannerScreen\";\nimport LoginScreen from \"./src/screens/LoginScreen\";\nimport RegistrationScreen from \"./src/screens/RegistrationScreen\";\nimport AdminApprovalScreen from \"./src/screens/AdminApprovalScreen\";\nimport ChangePasswordScreen from \"./src/screens/ChangePasswordScreen\";\nimport YardMapScreen from \"./src/screens/YardMapScreen\";\nimport YardDepartmentScreen from \"./src/screens/YardDepartmentScreen\";\nimport YardProductSelectionScreen from \"./src/screens/YardProductSelectionScreen\";\nimport YardSearchScreen from \"./src/screens/YardSearchScreen\";\nimport { useAuthStore } from \"./src/state/authStore\";\nimport { useStrandLibraryStore } from \"./src/state/strandLibraryStore\";\nimport { useStrandPatternStore } from \"./src/state/strandPatternStore\";\nimport { useProductLibraryStore } from \"./src/state/productLibraryStore\";\nimport { useAggregateLibraryStore } from \"./src/state/aggregateLibraryStore\";\nimport { useAdmixLibraryStore } from \"./src/state/admixLibraryStore\";\nimport { useProjectLibraryStore } from \"./src/state/projectLibraryStore\";\nimport { useContactsStore } from \"./src/state/contactsStore\";\n\n/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThere are already environment keys in the project. \nBefore telling the user to add them, check if you already have access to the required keys through bash.\nDirectly access them with process.env.${key}\n\nCorrect usage:\nprocess.env.EXPO_PUBLIC_VIBECODE_{key}\n//directly access the key\n\nIncorrect usage:\nimport { OPENAI_API_KEY } from '@env';\n//don't use @env, its depreicated\n\nIncorrect usage:\nimport Constants from 'expo-constants';\nconst openai_api_key = Constants.expoConfig.extra.apikey;\n//don't use expo-constants, its depreicated\n\n*/\n\nconst Stack = createNativeStackNavigator<RootStackParamList>();\n\ntype AuthScreen =\n  | \"login\"\n  | \"registration\"\n  | \"changePassword\"\n  | \"adminApproval\"\n  | \"requestSuccess\";\n\n// App version: force reload\nexport default function App() {\n  const currentUser = useAuthStore((state) => state.currentUser);\n  const initializeAuth = useAuthStore((state) => state.initializeAuth);\n  const initializeStrandLibrary = useStrandLibraryStore((state) => state.initialize);\n  const initializeStrandPatterns = useStrandPatternStore((state) => state.initialize);\n  const initializeProducts = useProductLibraryStore((state) => state.initialize);\n  const initializeAggregates = useAggregateLibraryStore((state) => state.initialize);\n  const initializeAdmixes = useAdmixLibraryStore((state) => state.initialize);\n  const initializeProjects = useProjectLibraryStore((state) => state.initialize);\n  const initializeContacts = useContactsStore((state) => state.initialize);\n  const [currentScreen, setCurrentScreen] = useState<AuthScreen>(\"login\");\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Initialize Firebase auth and check authentication state on mount\n  useEffect(() => {\n    const init = async () => {\n      await initializeAuth();\n      setIsLoading(false);\n    };\n    init();\n  }, []);\n\n  // Initialize Firebase-backed stores only after user is authenticated\n  useEffect(() => {\n    if (currentUser && currentUser.status === 'approved') {\n      const initStores = async () => {\n        await Promise.all([\n          initializeStrandLibrary(),\n          initializeStrandPatterns(),\n          initializeProducts(),\n          initializeAggregates(),\n          initializeAdmixes(),\n          initializeProjects(),\n          initializeContacts(),\n        ]);\n      };\n      initStores();\n    }\n  }, [currentUser]);\n\n  // Handle successful login\n  const handleLoginSuccess = (requiresPasswordChange: boolean) => {\n    if (requiresPasswordChange) {\n      setCurrentScreen(\"changePassword\");\n    }\n    // If no password change required, currentUser will be set and main app renders\n  };\n\n  // Handle password change success\n  const handlePasswordChangeSuccess = () => {\n    // After password change, currentUser is already updated in the store\n    // The app will automatically render the main app\n  };\n\n  // Handle registration success\n  const handleRegistrationSuccess = () => {\n    setCurrentScreen(\"requestSuccess\");\n  };\n\n  // Show nothing while checking initial state\n  if (isLoading) {\n    return null;\n  }\n\n  // Show auth screens if not authenticated\n  if (!currentUser) {\n    return (\n      <GestureHandlerRootView className=\"flex-1\">\n        <SafeAreaProvider>\n          {currentScreen === \"login\" && (\n            <LoginScreen\n              onLoginSuccess={handleLoginSuccess}\n              onRequestAccess={() => setCurrentScreen(\"registration\")}\n            />\n          )}\n          {currentScreen === \"registration\" && (\n            <RegistrationScreen\n              onBack={() => setCurrentScreen(\"login\")}\n              onSuccess={handleRegistrationSuccess}\n            />\n          )}\n          {currentScreen === \"requestSuccess\" && (\n            <View\n              className=\"flex-1 items-center justify-center px-6\"\n              style={{ backgroundColor: \"#3B82F6\" }}\n            >\n              <View className=\"bg-white rounded-full p-6 mb-6\">\n                <Ionicons name=\"checkmark-circle\" size={64} color=\"#10B981\" />\n              </View>\n              <View className=\"bg-white rounded-2xl p-6 shadow-2xl max-w-md\">\n                <Text className=\"text-gray-900 text-2xl font-bold mb-2 text-center\">\n                  Request Submitted!\n                </Text>\n                <Text className=\"text-gray-600 text-base text-center mb-6\">\n                  Your access request has been submitted. An admin will review\n                  it and send you login credentials via email if approved.\n                </Text>\n                <Pressable\n                  onPress={() => setCurrentScreen(\"login\")}\n                  className=\"bg-blue-500 rounded-xl py-4 items-center active:bg-blue-600\"\n                >\n                  <Text className=\"text-white text-base font-semibold\">\n                    Back to Login\n                  </Text>\n                </Pressable>\n              </View>\n            </View>\n          )}\n          {currentScreen === \"adminApproval\" && (\n            <AdminApprovalScreen onBack={() => setCurrentScreen(\"login\")} />\n          )}\n          <StatusBar style=\"light\" />\n        </SafeAreaProvider>\n      </GestureHandlerRootView>\n    );\n  }\n\n  // Show password change screen if user has temporary password\n  if (currentUser.isTemporaryPassword) {\n    return (\n      <GestureHandlerRootView className=\"flex-1\">\n        <SafeAreaProvider>\n          <ChangePasswordScreen onSuccess={handlePasswordChangeSuccess} />\n          <StatusBar style=\"auto\" />\n        </SafeAreaProvider>\n      </GestureHandlerRootView>\n    );\n  }\n\n  // Show admin approval screen for admins\n  // (They can access it from the dashboard settings in future, but for now we'll add a way to get there)\n\n  // Show main app if authenticated and password is not temporary\n  return (\n    <GestureHandlerRootView className=\"flex-1\">\n      <SafeAreaProvider>\n        <NavigationContainer>\n          <Stack.Navigator\n            initialRouteName=\"Dashboard\"\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: \"#FFFFFF\",\n              },\n              headerTintColor: \"#111827\",\n              headerTitleStyle: {\n                fontWeight: \"600\",\n              },\n              headerShadowVisible: false,\n            }}\n          >\n            <Stack.Screen\n              name=\"Dashboard\"\n              component={DashboardScreen}\n              options={{\n                title: \"Precast Quality Tools\",\n                headerShown: true,\n              }}\n            />\n            <Stack.Screen\n              name=\"Calculator\"\n              component={CalculatorScreen}\n              options={({ navigation }) => ({\n                title: \"Camber Calculator\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable\n                      onPress={() => navigation.navigate(\"StrandPatterns\")}\n                    >\n                      <Ionicons name=\"albums-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"History\")}>\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"Results\"\n              component={ResultsScreen}\n              options={({ navigation }) => ({\n                title: \"Results\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"History\"\n              component={HistoryScreen}\n              options={({ navigation }) => ({\n                title: \"History\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"StrandPatterns\"\n              component={StrandPatternsScreen}\n              options={({ navigation }) => ({\n                title: \"Strand Patterns\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ProductDetails\"\n              component={ProductDetailsScreen}\n              options={({ navigation }) => ({\n                title: \"Product Details\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable\n                      onPress={() => navigation.navigate(\"StrandPatterns\")}\n                    >\n                      <Ionicons name=\"albums-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable\n                      onPress={() => navigation.navigate(\"SlippageHistory\")}\n                    >\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"SlippageIdentifier\"\n              component={SlippageIdentifierScreen}\n              options={({ navigation }) => ({\n                title: \"Slippage Identifier\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable\n                      onPress={() => navigation.navigate(\"SlippageHistory\")}\n                    >\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"SlippageSummary\"\n              component={SlippageSummaryScreen}\n              options={({ navigation }) => ({\n                title: \"Slippage Summary\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"SlippageHistory\"\n              component={SlippageHistoryScreen}\n              options={({ navigation }) => ({\n                title: \"Slippage History\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"EmailComposer\"\n              component={EmailComposerScreen}\n              options={{\n                title: \"Send Email Report\",\n                presentation: \"modal\",\n              }}\n            />\n            <Stack.Screen\n              name=\"StressingCalculator\"\n              component={StressingCalculatorScreen}\n              options={({ navigation }) => ({\n                title: \"Stressing Calculator\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"StrandLibrary\")}>\n                      <Ionicons name=\"library-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"StressingResults\"\n              component={StressingResultsScreen}\n              options={({ navigation }) => ({\n                title: \"Elongation Results\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"StrandLibrary\"\n              component={StrandLibraryScreen}\n              options={({ navigation }) => ({\n                title: \"Strand Library\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"AggregateGradation\"\n              component={AggregateGradationScreen}\n              options={({ navigation }) => ({\n                title: \"Aggregate Gradation\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"GradationAdmin\")}>\n                      <Ionicons name=\"settings-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"GradationHistory\")}>\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"GradationTest\"\n              component={GradationTestScreen}\n              options={({ navigation, route }) => ({\n                title: `Test: ${route.params?.aggregateName || 'Gradation'}`,\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"GradationAdmin\")}>\n                      <Ionicons name=\"settings-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"GradationHistory\")}>\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"GradationResults\"\n              component={GradationResultsScreen}\n              options={({ navigation }) => ({\n                title: \"Test Results\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"GradationAdmin\")}>\n                      <Ionicons name=\"settings-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"GradationHistory\")}>\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"GradationHistory\"\n              component={GradationHistoryScreen}\n              options={({ navigation }) => ({\n                title: \"Test Repository\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"GradationAdmin\")}>\n                      <Ionicons name=\"settings-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"GradationAdmin\"\n              component={GradationAdminScreen}\n              options={({ navigation }) => ({\n                title: \"Aggregate Configuration\",\n                headerRight: () => (\n                  <View className=\"flex-row gap-3 mr-1\">\n                    <Pressable onPress={() => navigation.navigate(\"GradationHistory\")}>\n                      <Ionicons name=\"time-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                    <Pressable onPress={() => navigation.navigate(\"Dashboard\")}>\n                      <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                    </Pressable>\n                  </View>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"GradationAddEditAggregate\"\n              component={GradationAddEditAggregateScreen}\n              options={{\n                title: \"Configure Aggregate\",\n              }}\n            />\n            <Stack.Screen\n              name=\"AggregateLibrary\"\n              component={AggregateLibraryScreen}\n              options={({ navigation }) => ({\n                title: \"Aggregate Library\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"AggregateLibraryDetail\"\n              component={AggregateLibraryDetailScreen}\n              options={({ navigation }) => ({\n                title: \"Aggregate Details\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"AggregateLibraryAddEdit\"\n              component={AggregateLibraryAddEditScreen}\n              options={({ route }) => ({\n                title: route.params?.aggregateId ? \"Edit Aggregate\" : \"Add Aggregate\",\n              })}\n            />\n            <Stack.Screen\n              name=\"AdmixLibrary\"\n              component={AdmixLibraryScreen}\n              options={({ navigation }) => ({\n                title: \"Admix Library\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"AdmixLibraryDetail\"\n              component={AdmixLibraryDetailScreen}\n              options={({ navigation }) => ({\n                title: \"Admixture Details\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"AdmixLibraryAddEdit\"\n              component={AdmixLibraryAddEditScreen}\n              options={({ route }) => ({\n                title: route.params?.admixId ? \"Edit Admixture\" : \"Add Admixture\",\n              })}\n            />\n            <Stack.Screen\n              name=\"Contacts\"\n              component={ContactsScreen}\n              options={({ navigation }) => ({\n                title: \"Contacts\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ContactDetail\"\n              component={ContactDetailScreen}\n              options={({ navigation }) => ({\n                title: \"Contact Details\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} className=\"mr-1\">\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ContactAddEdit\"\n              component={ContactAddEditScreen}\n              options={({ route }) => ({\n                title: route.params?.contactId ? \"Edit Contact\" : \"Add Contact\",\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogDashboard\"\n              component={QualityLogDashboardScreen}\n              options={({ navigation }) => ({\n                title: \"Quality Logs\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogList\"\n              component={QualityLogListScreen}\n              options={({ navigation, route }) => ({\n                title: `${route.params?.department} Logs`,\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogDetail\"\n              component={QualityLogDetailScreen}\n              options={({ navigation }) => ({\n                title: \"Log Details\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogAddEdit\"\n              component={QualityLogAddEditScreen}\n              options={({ route }) => ({\n                title: route.params?.logId ? \"Edit Log Entry\" : \"New Log Entry\",\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogMetrics\"\n              component={QualityLogMetricsScreen}\n              options={({ navigation }) => ({\n                title: \"Quality Metrics\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"QualityLogSearch\"\n              component={QualityLogSearchScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"IssueCodeLibrary\"\n              component={IssueCodeLibraryScreen}\n              options={({ navigation }) => ({\n                title: \"Issue Code Library\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ProductLibrary\"\n              component={ProductLibraryScreen}\n              options={({ navigation }) => ({\n                title: \"Product Library\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ProjectLibrary\"\n              component={ProjectLibraryScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"ProjectLibraryDetail\"\n              component={ProjectLibraryDetailScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"ProjectLibraryAddEdit\"\n              component={ProjectLibraryAddEditScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"ProjectLibraryExportImport\"\n              component={ProjectLibraryExportImportScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"DailyPourSchedule\"\n              component={DailyPourScheduleScreen}\n              options={({ navigation }) => ({\n                title: \"Daily Pour Schedule\",\n                headerBackVisible: true,\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"ScheduleSearch\"\n              component={ScheduleSearchScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"ScheduleScanner\"\n              component={ScheduleScannerScreen}\n              options={{\n                headerShown: false,\n                presentation: \"fullScreenModal\",\n              }}\n            />\n            <Stack.Screen\n              name=\"ScheduleReview\"\n              component={ScheduleReviewScreen}\n              options={{\n                presentation: \"modal\",\n              }}\n            />\n            <Stack.Screen\n              name=\"ProductTagScanner\"\n              component={ProductTagScannerScreen}\n              options={{\n                headerShown: false,\n                presentation: \"fullScreenModal\",\n              }}\n            />\n            <Stack.Screen\n              name=\"YardMap\"\n              component={YardMapScreen}\n              options={({ navigation }) => ({\n                title: \"Yard Maps\",\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"YardDepartment\"\n              component={YardDepartmentScreen}\n              options={({ navigation, route }) => ({\n                title: `${route.params?.department} Yard`,\n                headerRight: () => (\n                  <Pressable onPress={() => navigation.navigate(\"Dashboard\")} style={{ marginRight: 4 }}>\n                    <Ionicons name=\"home-outline\" size={24} color=\"#111827\" />\n                  </Pressable>\n                ),\n              })}\n            />\n            <Stack.Screen\n              name=\"YardProductSelection\"\n              component={YardProductSelectionScreen}\n              options={{\n                title: \"Assign Yard Location\",\n              }}\n            />\n            <Stack.Screen\n              name=\"YardSearch\"\n              component={YardSearchScreen}\n              options={{ headerShown: false }}\n            />\n          </Stack.Navigator>\n          <StatusBar style=\"auto\" />\n        </NavigationContainer>\n      </SafeAreaProvider>\n    </GestureHandlerRootView>\n  );\n}\n","import \"./global.css\";\nimport \"react-native-get-random-values\";\nimport { LogBox, Platform } from \"react-native\";\nLogBox.ignoreLogs([\"Expo AV has been deprecated\", \"Disconnected from Metro\"]);\n\n// Polyfill for web-only libraries (html2canvas, jspdf) on React Native\n// These libraries expect a browser environment, so we provide minimal mocks\nif (Platform.OS !== 'web' && typeof window !== 'undefined') {\n  // Create a mock location object that both window and document can share\n  const mockLocation = {\n    href: 'about:blank',\n    origin: 'about:blank',\n    protocol: 'about:',\n    host: '',\n    hostname: '',\n    port: '',\n    pathname: 'blank',\n    search: '',\n    hash: '',\n  };\n\n  // Mock window.location for html2canvas\n  if (!window.location) {\n    (window as any).location = mockLocation;\n  }\n\n  // Mock document object for html2canvas\n  if (!window.document) {\n    (window as any).document = {\n      createElement: () => ({\n        href: '',\n        hostname: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n      }),\n      location: mockLocation,\n    };\n  }\n}\n\n// Polyfill for latin1 encoding support (required by jspdf/fast-png)\n// Latin1 is essentially the first 256 Unicode characters\nif (typeof global.TextDecoder !== 'undefined') {\n  const OriginalTextDecoder = global.TextDecoder;\n\n  class PatchedTextDecoder extends OriginalTextDecoder {\n    private isLatin1: boolean = false;\n\n    constructor(label?: string, options?: TextDecoderOptions) {\n      const normalizedLabel = label?.toLowerCase().replace(/[-_]/g, '') || 'utf8';\n\n      // Check if this is a latin1 request\n      if (normalizedLabel === 'latin1' || normalizedLabel === 'iso88591') {\n        // Use utf-8 as the base decoder\n        super('utf-8', options);\n        this.isLatin1 = true;\n      } else {\n        super(label, options);\n        this.isLatin1 = false;\n      }\n    }\n\n    decode(input?: BufferSource, options?: TextDecodeOptions): string {\n      if (this.isLatin1 && input) {\n        // For Latin1, each byte maps directly to its Unicode codepoint\n        const bytes = new Uint8Array(\n          input instanceof ArrayBuffer ? input : input.buffer\n        );\n        let result = '';\n        for (let i = 0; i < bytes.length; i++) {\n          result += String.fromCharCode(bytes[i]);\n        }\n        return result;\n      }\n      return super.decode(input, options);\n    }\n  }\n\n  global.TextDecoder = PatchedTextDecoder as any;\n}\n\nimport { registerRootComponent } from \"expo\";\n\nimport App from \"./App\";\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"293\":\"829b2bc3\",\"389\":\"9b58149d\",\"627\":\"ad30e811\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [842], () => (__webpack_require__(68274)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","originalConsoleError","console","error","args","message","join","includes","log","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","firestore","getApps","length","initializeApp","getApp","getAuth","initializeFirestore","localCache","persistentLocalCache","tabManager","persistentMultipleTabManager","warn","getFirestore","getStorage","FirebaseSync","unsubscribe","constructor","collectionName","this","fetchAll","q","query","collection","getDocs","docs","doc","assign","data","subscribe","onUpdate","onSnapshot","querySnapshot","items","set","cleanData","removeUndefinedFields","docRef","setDoc","updatedAt","serverTimestamp","merge","obj","undefined","Array","isArray","item","cleaned","key","hasOwnProperty","value","delete","deleteDoc","cleanup","firebaseSync","useAggregateLibraryStore","create","get","aggregates","loading","initialized","initialize","async","reduce","acc","updatedItems","updatedAggregates","addAggregate","newAggregate","aggregate","createdAt","Date","now","state","_state$aggregates","_aggregate$id","_objectWithoutPropertiesLoose","_toPropertyKey","updateAggregate","updates","existing","updated","deleteAggregate","_state$aggregates2","getAggregate","getAllAggregates","values","sort","a","b","name","localeCompare","searchAggregates","allAggregates","lowerQuery","toLowerCase","filter","agg","source","stockpileNumber","colorFamily","isAggregateComplete","hasBasicInfo","type","dryRoddedUnitWeight","percentVoids","absorption","specificGravityBulkSSD","specificGravityBulkDry","specificGravityApparent","finenessModulus","checkAggregateComplete","toggleFavorite","isFavorite","getFavorites","trackAccess","lastAccessedAt","getRecentlyUsed","limit","slice","duplicateAggregate","toString","useAdmixLibraryStore","admixes","updatedAdmixes","addAdmix","newAdmix","admix","_state$admixes","_admix$id","updateAdmix","deleteAdmix","_state$admixes2","getAdmix","getAllAdmixes","searchAdmixes","allAdmixes","manufacturer","class","salesRepName","isAdmixComplete","specificGravity","checkAdmixComplete","duplicateAdmix","useContactsStore","contacts","updatedContacts","addContact","newContact","contact","_state$contacts","_contact$id","updateContact","deleteContact","_state$contacts2","getContact","getAllContacts","searchContacts","allContacts","company","role","email","isContactComplete","phone","checkContactComplete","duplicateContact","signOut","firebaseSignOut","USERS_COLLECTION","getUserProfile","userRef","uid","userSnap","getDoc","exists","user","firebaseUserToAppUser","firebaseUser","JSON","stringify","nameParts","split","String","firstName","lastName","status","isTemporaryPassword","Boolean","needsPasswordChange","getTime","toMillis","useAuthStore","persist","currentUser","users","pendingRequests","currentSession","isInitialized","initializeAuth","callback","profile","appUser","err","onAuthStateChanged","setCurrentUser","login","password","signInWithEmailAndPassword","errorMessage","firebaseSignIn","success","profileError","requiresPasswordChange","logout","requestAccess","fullName","authError","createUserWithEmailAndPassword","firebaseRegisterUser","Math","random","requestId","createUserProfile","approveRequest","temporaryPassword","approveError","updateDoc","approveUserAccess","denyRequest","rejectUserAccess","changePassword","updateUserProfile","updatedUser","getPendingRequests","requests","where","forEach","push","getPendingAccessRequests","requestedAt","storage","createJSONStorage","AsyncStorage","partialize","userToSave","toSave","onRehydrateStorage","removeItem","then","catch","importCollection","userId","count","i","batch","writeBatch","batchItems","docId","docData","importedAt","importedBy","Timestamp","fromMillis","commit","importYardLocations","yardData","yardLocations","yardedPieces","DataImportScreen","onBack","insets","useSafeAreaInsets","jsonInput","setJsonInput","useState","setLoading","importResult","setImportResult","_jsxs","View","className","children","_jsx","style","paddingTop","top","Pressable","onPress","Ionicons","size","color","Text","ScrollView","TextInput","onChangeText","placeholder","placeholderTextColor","cursorColor","multiline","numberOfLines","minHeight","textAlignVertical","editable","trim","alert","validation","jsonString","parse","valid","strandPatterns","products","strandLibrary","aggregateLibrary","admixLibrary","projects","qualityLogs","pourSchedules","validateImportData","confirm","result","counts","imported","importDataToFirebase","disabled","_Fragment","ActivityIndicator","tools","description","icon","bgColor","route","DashboardScreen","navigation","useNavigation","showSearch","setShowSearch","searchQuery","setSearchQuery","showDataImport","setShowDataImport","isAdmin","searchResults","performSearch","totalResults","contentContainerStyle","paddingBottom","bottom","flexDirection","flexWrap","marginHorizontal","tool","width","padding","comingSoon","navigate","handleToolPress","backgroundColor","borderRadius","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","opacity","alignItems","marginBottom","paddingHorizontal","paddingVertical","fontSize","fontWeight","textAlign","lineHeight","Modal","visible","animationType","presentationStyle","onRequestClose","autoFocus","aggregateId","admixId","contactId","defaultInputs","memberType","releaseStrength","concreteStrength","useCalculatorStore","history","currentInputs","addCalculation","record","updateCalculation","calc","removeCalculation","clearHistory","updateCurrentInputs","inputs","resetCurrentInputs","calculateModulusOfElasticity","unitWeight","pow","sqrt","calculateDeflection","load","span","modulusOfElasticity","momentOfInertia","spanInches","useStrandPatternStore","customPatterns","patterns","updatedPatterns","addPattern","newPattern","pattern","p","updatePattern","oldPattern","find","removePattern","clearAllPatterns","oldPatterns","Promise","all","getPatternById","getPatternByPatternId","patternId","getPatternsByPosition","position","useProductLibraryStore","updatedProducts","addProduct","substring","newProduct","product","updateProduct","oldProduct","updatedProduct","deleteProduct","getProduct","getProductByType","addSubProduct","productId","subProduct","subProductId","newSubProduct","subProducts","updateSubProduct","deleteSubProduct","getSubProduct","sp","addTolerance","tolerance","tolerances","updateTolerance","toleranceIndex","t","deleteTolerance","_","addSubProductTolerance","updateSubProductTolerance","deleteSubProductTolerance","getActiveProducts","isActive","getAllProductTypes","clearAllProducts","oldProducts","gcd","decimalToFraction","decimal","absDecimal","abs","wholePart","floor","fractionalPart","sixteenths","round","divisor","reducedNumerator","reducedDenominator","formatInchesWithFraction","fractionStr","toFixed","parseMeasurementInput","input","trimmed","decimalMatch","match","parseFloat","isNaN","mixedMatch","whole","parseInt","numerator","denominator","fractionMatch","formatSpanDisplay","decimalFeet","feet","remainingInches","wholeInches","fractionalInches","inchDisplay","useProjectLibraryStore","updatedProjects","addProject","newProject","projectInput","updateProject","oldProject","updatedProject","project","deleteProject","getProjectById","searchProjects","jobNumber","jobName","exportProjects","importProjects","jsonData","importedProjects","currentProjects","existingJobNumbers","Set","newProjects","has","projectsToAdd","clearAllProjects","oldProjects","useJobAutocomplete","s","findByJobNumber","useCallback","findByJobName","searchByJobName","aLower","bLower","startsWith","searchByJobNumber","CalculatorScreen","projectName","setProjectName","projectNumber","setProjectNumber","markNumber","setMarkNumber","idNumber","setIdNumber","spanFeet","setSpanFeet","setSpanInches","spanFraction","setSpanFraction","productWidth","setProductWidth","productSide","setProductSide","selectedProductId","setSelectedProductId","selectedSubProductId","setSelectedSubProductId","showProductModal","setShowProductModal","showProjectNameSuggestions","setShowProjectNameSuggestions","projectNameSuggestions","setProjectNameSuggestions","isAutoFilling","setIsAutoFilling","useEffect","timeoutId","setTimeout","clearTimeout","suggestions","strandPattern","setStrandPattern","topStrandPattern","setTopStrandPattern","showStrandModal","setShowStrandModal","showTopStrandModal","setShowTopStrandModal","errors","setErrors","selectedPattern","selectedProduct","selectedSubProduct","deadLoad","deadLoadPerLinearFoot","fullWidth","strandCoordinates","max","c","x","parsedWidth","isCutWidth","parseFraction","fraction","parts","KeyboardAvoidingView","behavior","keyboardShouldPersistTaps","onDataScanned","inches","matchingPattern","index","zIndex","onBlur","onFocus","left","right","marginTop","maxHeight","nestedScrollEnabled","suggestion","handleSelectProjectName","gap","flex","minWidth","keyboardType","fractions","nextIndex","indexOf","borderWidth","borderColor","selectionColor","handleContinue","validationErrors","spanInFeet","liveLoad","strandEValue","eValue","results","releaseModulusOfElasticity","modulusOfElasticity28Day","deadLoadDeflection","liveLoadDeflection","creepFactor","shrinkageFactor","longTermDeflection","initialDeflection","calculateLongTermDeflection","recommendedCamber","calculateRecommendedCamber","initialCamber","netInitialCamber","finalCamber","calculateCamber","timestamp","calculation","transparent","toLocaleString","area","STRAND_PATTERNS","strands","diameter","totalArea","getStrandPattern","ResultsScreen","useRoute","params","actualMeasured","setActualMeasured","actualMeasuredCamber","variance","Share","share","CamberDiagram","handleSaveMeasurement","measured","measurementDate","ResultRow","label","unit","showFraction","isLast","InputRow","displayValue","centerY","maxDeflection","scale","initialCamberY","finalCamberY","measuredCamberY","createCamberPath","camberY","Svg","Line","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","Path","d","fill","Circle","cx","cy","r","ConfirmModal","title","confirmText","cancelText","onConfirm","onCancel","confirmStyle","stopPropagation","memberTypes","HistoryScreen","showClearAllModal","setShowClearAllModal","deleteItemId","setDeleteItemId","showFilterModal","setShowFilterModal","filters","setFilters","tempFilters","setTempFilters","handleClearFilters","filteredHistory","useMemo","minSpan","maxSpan","activeFilterCount","handleOpenFilter","prev","format","text","horizontal","showsHorizontalScrollIndicator","val","handleApplyFilters","handleClearAll","PRODUCT_TYPES","StrandPatternsScreen","selectedDepartment","setSelectedDepartment","selectedProductType","setSelectedProductType","showAddModal","setShowAddModal","editingPattern","setEditingPattern","deleteConfirmId","setDeleteConfirmId","showClearConfirm","setShowClearConfirm","React","department","productType","detectedProductType","detectedDepartment","sortedPatterns","positionOrder","positionDiff","getPatternNumber","aNum","handleExportPatterns","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","toISOString","body","appendChild","click","removeChild","revokeObjectURL","handleImportPatterns","accept","onchange","file","target","files","reader","FileReader","onload","event","readAsText","handleCopyToClipboard","Clipboard","setStringAsync","Alert","handlePasteFromClipboard","clipboardText","getStringAsync","importedCount","handleBackToDepartments","dept","productTypes","handleBackToProductTypes","handleEditPattern","strand_3_8","strand_1_2","strand_0_6","pullingForce","requiredForce","handleAddPattern","PatternEditorModal","onClose","onSave","fullPatternData","patternData","patternNumber","setPatternNumber","setPullingForce","setName","setPosition","setStrand_3_8","setStrand_1_2","setStrand_0_6","strandSizes","setStrandSizes","setStrandCoordinates","coord","y","centroid","setCentroid","strandHeight","setStrandHeight","setEValue","setRequiredForce","parseFractionOrDecimal","calculateEValue","centroidValue","STRAND_AREAS","calculateTotalArea","count_3_8","count_1_2","count_0_6","getTotalStrandCount","totalCount","newSizes","updateStrandSize","validateStrandDesignations","designated_3_8","designated_1_2","designated_0_6","idx","maxLength","newCoords","handleSave","force","parsedCoordinates","every","xValue","yValue","ProductDetailsScreen","pourDate","setPourDate","setProductType","bottomPatterns","topPatterns","selectedStrandPattern","selectedTopStrandPattern","getSpanInFeet","config","CrossSection8048","showDimensions","highlightedStrand","activeStrands","slippages","showSlippageValues","bottomStrandSizes","topStrandCoordinates","topStrandSizes","ALL_STRAND_POSITIONS","isTop","displayWidth","displayHeight","xOffset","coreY","cores","coreX","visibleCores","core","coreRight","visibleStrands","strand","displayX","displayY","isHighlighted","svgWidth","svgHeight","keywayRadius","keywayPoints","clipPathId","substr","alignSelf","Defs","ClipPath","Rect","buildPlankPath","w","h","leftHasKeyway","path","point","Ellipse","rx","ry","clipPath","strandRadius","baseColor","darkColor","fillColor","strokeColor","diamondSize","points","Polygon","xSize","SvgText","textAnchor","slippageData","strandId","e1Display","leftExceedsOne","leftSlippage","e2Display","rightExceedsOne","rightSlippage","belowCrossSectionY","e1Y","e2Y","legendScale","baseSize","spacing","symbolSize","legendY","legendCenterX","G","CrossSection1048","CrossSection1247","CrossSection1250","CORE_WIDTH","CrossSection1648","slippage","CrossSection1650","SlippageIdentifierScreen","selectedTopPattern","activeStrandIndices","minX","min","maxX","fullProductWidth","activeIndices","cutPosition","initialSlippages","from","strandNum","strandSize","totalTopCount","setSlippages","updateSlippage","side","handleFocus","handleBlur","toggleExceedsOne","overflow","some","userRecordsSync","publishedRecordsSync","useSlippageHistoryStore","userRecords","publishedRecords","isLoading","isSyncing","addUserRecord","hasSlippages","stack","updateUserRecord","removeUserRecord","clearUserRecords","publishRecord","publishedBy","publishedRecord","publishedAt","removePublishedRecord","clearPublishedRecords","syncUserRecords","getState","allRecords","syncPublishedRecords","subscribeToPublishedRecords","jsPDF","html2canvas","librariesLoading","generateSlippagePDF","slippageStats","userEmail","userName","crossSectionImageUri","getStrandSize","strandPatternName","bottomStrands","topStrands","bottomStats","e1Raw","e2Raw","e1","e2","e1Exceeds","e2Exceeds","total","totalE1","sum","v","totalE2","totalBoth","anyE1Exceeds","anyE2Exceeds","avgE1","avgE2","avgBoth","anyExceeds","topStats","base64Image","isWebEnv","response","fetch","onloadend","readAsDataURL","fileInfo","FileSystem","getInfoAsync","base64","readAsStringAsync","encoding","Base64","maxSizeBytes","htmlContent","toLocaleDateString","spanFormatted","main","eighths","adjustedWholeInches","formatSpanForPDF","end1Value","end2Value","strandTotal","hasExceeds","Print","printAsync","html","tempDiv","innerHTML","images","querySelectorAll","img","complete","onerror","canvas","useCORS","allowTaint","logging","onclone","clonedDoc","clonedImages","pdf","imgData","toDataURL","pdfWidth","pdfHeight","imgWidth","imgHeight","heightLeft","addImage","addPage","save","existingTempDiv","querySelector","cleanupError","uri","printToFileAsync","printError","htmlWithoutImage","replace","retryError","jsPDFModule","html2canvasModule","default","SlippageSummaryScreen","showSaveModal","setShowSaveModal","showPublishModal","setShowPublishModal","saveSuccess","setSaveSuccess","publishSuccess","setPublishSuccess","isGeneratingPDF","setIsGeneratingPDF","crossSectionRef","useRef","isTopStrand","isBottomStrand","numericId","parsedValues","end1Raw","end2Raw","end1Exceeds","end2Exceeds","end1","end2","anyEnd1Exceeds","anyEnd2Exceeds","anyValueExceeds","end1Values","end2Values","allValues","totalSlippage","totalSlippageEnd1","totalSlippageEnd2","strandTotals","exceeds","totalAvgSlippage","totalAvgSlippageEnd1","totalAvgSlippageEnd2","ref","collapsable","isWeb","current","element","_nativeTag","_internalFiberInstanceHandleDEV","container","captureRef","quality","captureError","filePath","Sharing","isAvailableAsync","shareAsync","mimeType","dialogTitle","UTI","sharePDF","goBack","createdBy","handlePublish","SlippageHistoryScreen","activeTab","setActiveTab","currentRecords","canDelete","styles","scrollView","content","header","headerLeft","subtitle","clearButton","clearButtonText","tabContainer","tab","tabText","activeTabText","emptyState","emptyIcon","emptyTitle","emptyMessage","createButton","createButtonText","recordsList","calculateTotalSlippage","isPublished","handleRecordPress","recordCard","recordHeader","recordHeaderLeft","recordTitleRow","recordTitle","publishedBadge","publishedBadgeText","recordMetaRow","metaBadge","metaBadgeText","recordDate","recordCreator","recordPublished","deleteButton","recordDivider","recordDetails","recordDetailRow","recordDetailLeft","recordDetailText","totalSlippageCard","totalSlippageRow","totalSlippageLabel","totalSlippageValue","warningText","recordFooter","StyleSheet","justifyContent","marginLeft","hairlineWidth","marginVertical","maybeCompleteAuthSession","AZURE_AD_CONFIG","clientId","EXPO_PUBLIC_AZURE_AD_CLIENT_ID","tenantId","EXPO_PUBLIC_AZURE_AD_TENANT_ID","redirectUri","AuthSession","scheme","scopes","TOKEN_STORAGE_KEY","sendEmailViaGraphAPI","accessToken","storedToken","getItem","tokenData","expiresAt","getValidAccessToken","toRecipients","to","emailAddress","address","ccRecipients","cc","subject","contentType","saveToSentItems","method","headers","Authorization","ok","errorData","json","statusText","EmailComposerScreen","toEmail","setToEmail","ccEmail","setCcEmail","isSending","setIsSending","showPreview","setShowPreview","isMicrosoftAuthenticated","setIsMicrosoftAuthenticated","isCheckingAuth","setIsCheckingAuth","fromEmail","checkAuthStatus","authenticated","isAuthenticated","handleMicrosoftSignIn","discovery","authorizationEndpoint","tokenEndpoint","request","responseType","Code","usePKCE","promptAsync","tokenResponse","URLSearchParams","client_id","redirect_uri","grant_type","code_verifier","codeVerifier","tokens","error_description","access_token","refreshToken","refresh_token","expires_in","setItem","cancelError","authenticateWithMicrosoft","authCheckContainer","authCheckText","fieldContainer","fromContainer","verifiedBadge","verifiedText","autoCapitalize","autoCorrect","readOnlyField","readOnlyText","previewButton","previewButtonText","previewContainer","previewLabel","previewScroll","previewText","infoBox","infoText","sendButton","sendButtonDisabled","test","sendButtonText","cancelButton","cancelButtonText","authRequiredContainer","authRequiredTitle","authRequiredText","signInButton","signInButtonText","DEFAULT_STRANDS","elasticModulus","breakingStrength","grade","isDefault","useStrandLibraryStore","updatedStrands","seedDefaultStrands","addStrand","newStrand","updateStrand","oldStrand","removeStrand","getStrandById","getStrandsByDiameter","hasGrade250","grade250Strands","StressingCalculatorScreen","jackingForce","setJackingForce","bedLength","setBedLength","selectedStrandId","setSelectedStrandId","numberOfStrands","setNumberOfStrands","bedShortening","setBedShortening","frictionLoss","setFrictionLoss","anchorSetLoss","setAnchorSetLoss","showStrandPicker","setShowStrandPicker","selectedStrand","handleCalculate","TouchableWithoutFeedback","calculateTheoreticalElongation","formatValue","decimals","StressingResultsScreen","bedLengthInches","forcePerStrand","stressPerStrand","theoreticalElongation","totalElongation","StrandLibraryScreen","editingStrand","setEditingStrand","formName","setFormName","formDiameter","setFormDiameter","formArea","setFormArea","formElasticModulus","setFormElasticModulus","formBreakingStrength","setFormBreakingStrength","formGrade","setFormGrade","resetForm","defaultStrands","customStrands","handleAdd","handleEdit","showsVerticalScrollIndicator","strandData","STANDARD_SIEVES","DEFAULT_AGGREGATES","sieves","weightRetained","c33Lower","c33Upper","useAggregateGradationStore","testHistory","defaultAggregates","n","addTest","updateTest","deleteTest","clearAllTests","setDefaultAggregates","names","getTest","AggregateGradationScreen","aggregateList","entries","aggregateName","handleAggregateSelect","maxDecant","GradationTestScreen","formatDate","date","getMonth","padStart","getDate","getFullYear","setDate","sieveData","setSieveData","washedWeight","setWashedWeight","noProduction","setNoProduction","showCancelModal","setShowCancelModal","inputRefs","totalWeight","sieve","weight","handleDateShortcut","daysAgo","newDate","handleWeightChange","newSieveData","returnKeyType","onSubmitEditing","focus","handleSaveTest","calculatedSieves","row","cumulativeRetained","percentRetained","percentPassing","calculateTestData","aggregateType","fmSieves","calculateFinenessModulus","decant","washed","calculateDecant","passC33","passing","checkC33Compliance","testRecord","testId","handleCancel","handleConfirmCancel","GradationChart","chartData","showC33Limits","chartWidth","Dimensions","chartHeight","plotWidth","plotHeight","validData","minSize","maxSize","getX","logMin","log10","logMax","logSize","getY","percent","curvePoints","upperLimitPoints","lowerLimitPoints","yLabels","xLabels","Polyline","transform","borderStyle","GradationResultsScreen","showDeleteModal","setShowDeleteModal","reverse","isOutOfSpec","shareText","handleDelete","handleNewTest","handleConfirmDelete","GradationHistoryScreen","filterAggregate","setFilterAggregate","filterCompliance","setFilterCompliance","showClearModal","setShowClearModal","aggregateNames","filteredTests","formatTimestamp","diffMs","diffDays","handleTestPress","handleConfirmClear","GradationAdminScreen","expandedAggregate","setExpandedAggregate","aggregateToDelete","setAggregateToDelete","defaultAggregateNames","handleRestoreDefaults","isExpanded","toggleExpanded","handleDeleteAggregate","GradationAddEditAggregateScreen","isEdit","existingAggregate","setType","setMaxDecant","maxFM","setMaxFM","maxFinenessModulus","showAddSieveModal","setShowAddSieveModal","focusedField","setFocusedField","tempValues","setTempValues","setSieves","handleTypeChange","newType","getAvailableSieves","usedSieveNames","sieveName","handleSieveChange","field","fieldKey","newSieves","numValue","handleSieveFocus","currentValue","handleSieveBlur","tempValue","newTemp","getSieveDisplayValue","handleRemoveSieve","selectTextOnFocus","newSieve","panIndex","findIndex","insertIndex","splice","handleAddSieve","AggregateLibraryScreen","filterType","setFilterType","filterComplete","setFilterComplete","filteredAggregates","stats","fine","coarse","incomplete","handleAddNew","isComplete","handleAggregatePress","AggregateLibraryDetailScreen","renderField","renderSection","isEmpty","hasPhysical","moistureContent","hasSpecificGravity","hasPerformance","laAbrasion","soundness","deleteriousMaterials","organicImpurities","clayLumps","hasChemical","asrReactivity","chlorideContent","sulfateContent","hasProduction","costPerTon","costPerYard","lastTestDate","certifications","notes","toLocaleTimeString","handleToggleFavorite","duplicated","VoiceInputButton","onTranscriptionComplete","buttonSize","buttonColor","isRecording","setIsRecording","isTranscribing","setIsTranscribing","recording","setRecording","setError","stopRecording","stopAndUnloadAsync","Audio","setAudioModeAsync","allowsRecordingIOS","getURI","transcription","formData","FormData","append","localAudioUri","OPENAI_API_KEY","EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY","apiUrl","OPENAI_BASE_URL","errorText","transcribeAudio","handlePress","playsInSilentModeIOS","newRecording","createAsync","HIGH_QUALITY","startRecording","VoiceTextInput","_ref","required","enableVoiceInput","textInputProps","_excluded","ValidationWarnings","warnings","warning","severity","AggregateLibraryAddEditScreen","isEditing","setFinenessModulus","setDryRoddedUnitWeight","setPercentVoids","setAbsorption","setMoistureContent","setMaxSize","sgBulkSSD","setSgBulkSSD","sgBulkDry","setSgBulkDry","sgApparent","setSgApparent","setColorFamily","setSource","setStockpileNumber","setLaAbrasion","setSoundness","setDeleteriousMaterials","setOrganicImpurities","setClayLumps","setAsrReactivity","setChlorideContent","setSulfateContent","setCostPerTon","setCostPerYard","setLastTestDate","setCertifications","setNotes","validationWarnings","parseNumber","parsed","sgBulkOvenDry","validateAggregateData","renderTextInput","setValue","options","keyboardVerticalOffset","level","aggregateData","AdmixLibraryScreen","filterClass","setFilterClass","filteredAdmixes","classColors","bg","colors","handleAdmixPress","specificGravityDisplay","costPerGallon","AdmixLibraryDetailScreen","viewingPhotoIndex","setViewingPhotoIndex","handleOpenUrl","Linking","canOpenURL","openURL","hasOptionalData","dosageRateRecommendations","percentWater","hasDataSheets","technicalDataSheetUrl","safetyDataSheetUrl","hasSalesRepInfo","salesRepPhone","salesRepEmail","handleCallPhone","handleEmailSalesRep","photoUris","Image","resizeMode","formatPhoneNumber","digits","parseSpecificGravity","display","calculated","rangeMatch","lower","upper","single","PhotoAttachments","onPhotosChange","maxPhotos","pickImage","ImagePicker","requestMediaLibraryPermissionsAsync","requestPermissions","launchImageLibraryAsync","mediaTypes","allowsMultipleSelection","selectionLimit","canceled","assets","newUris","asset","takePhoto","requestCameraPermissionsAsync","launchCameraAsync","showPhotoOptions","removePhoto","AdmixLibraryAddEditScreen","existingAdmix","setManufacturer","admixClass","setAdmixClass","specificGravityInput","setSpecificGravityInput","setDosageRateRecommendations","setCostPerGallon","setPercentWater","setTechnicalDataSheetUrl","setSafetyDataSheetUrl","setSalesRepName","setSalesRepPhone","setSalesRepEmail","setPhotoUris","showContactPicker","setShowContactPicker","showQuickAddContact","setShowQuickAddContact","quickContactName","setQuickContactName","quickContactCompany","setQuickContactCompany","quickContactRole","setQuickContactRole","quickContactPhone","setQuickContactPhone","quickContactEmail","setQuickContactEmail","quickContactNotes","setQuickContactNotes","validateAdmixData","cls","filtered","sgParsed","admixData","handleSelectContact","handleQuickAddContact","ContactsScreen","filteredContacts","handleContactPress","ContactDetailScreen","handleSendEmail","ContactAddEditScreen","existingContact","setCompany","setRole","setPhone","setEmail","contactData","useQualityLogStore","logs","issueCodes","departments","addLog","newLog","updateLog","deleteLog","getLog","getLogsByDepartment","getLogsByDateRange","startDate","endDate","inRange","inDepartment","addIssueToLog","logId","issue","issueId","newIssue","issues","updateIssue","deleteIssue","resolveIssue","resolvedBy","actionTaken","resolvedAt","addProductionItem","itemId","newItem","productionItems","updateProductionItem","deleteProductionItem","addIssueCode","newCode","updateIssueCode","deleteIssueCode","getIssueCodeByCode","ic","getIssueCodesByDepartment","addDepartment","newDept","toggleDepartmentActive","getActiveDepartments","getMetrics","totalLogs","allIssues","flatMap","totalIssues","issuesByStatus","issuesBySeverity","codeCount","issueCode","issueTitle","issuesByCode","averageIssuesPerLog","criticalIssueCount","resolutionRate","clearAllData","initializeDefaultData","applicableProducts","codeData","QualityLogDashboardScreen","activeDepartments","departmentColors","Flexicore","Extruded","Precast","SafeAreaView","deptLogs","openIssues","criticalIssues","getDepartmentStats","QualityLogListScreen","onScrollBeginDrag","Keyboard","dismiss","statusColor","getStatusColor","overallStatus","month","day","year","pieceNumber","borderTopWidth","borderTopColor","QualityLogDetailScreen","showOptions","setShowOptions","weekday","formatTime","hour","minute","overallStatusColor","Good","severityColor","getSeverityColor","issueDescription","location","QualityLogAddEditScreen","existingLog","setProductionItems","setIssues","setOverallStatus","showProductionModal","setShowProductionModal","showIssueModal","setShowIssueModal","showIssueCodePicker","setShowIssueCodePicker","prodJobName","setProdJobName","prodJobNumber","setProdJobNumber","prodPieceNumber","setProdPieceNumber","prodProductType","setProdProductType","issueCodeId","setIssueCodeId","setIssueCode","setIssueTitle","setIssueDescription","issueStatus","setIssueStatus","issueSeverity","setIssueSeverity","issueLocation","setIssueLocation","availableIssueCodes","performSave","statusOption","borderTopLeftRadius","borderTopRightRadius","handleAddProductionItem","sev","stat","handleAddIssue","Number","selectIssueCode","QualityLogMetricsScreen","overallStats","deptIssues","deptCritical","QualityLogSearchScreen","setJobNumber","setJobName","setSearchResults","hasSearched","setHasSearched","handleClear","handleSearch","matches","matchedField","extrudedEntries","entry","entryMatches","codeStr","titleStr","itemMatches","deptColor","getDepartmentColor","IssueCodeLibraryScreen","showModal","setShowModal","setCode","setTitle","setDescription","setSeverity","setDepartment","selectedProducts","setSelectedProducts","performAdd","codeNum","isSelected","ProductLibraryScreen","editingId","setEditingId","expandedProductId","setExpandedProductId","expandedSubProductId","setExpandedSubProductId","showSubProductModal","setShowSubProductModal","editingSubProductId","setEditingSubProductId","currentProductId","setCurrentProductId","subProductName","setSubProductName","subProductDescription","setSubProductDescription","subProductTolerances","setSubProductTolerances","subProductArea","setSubProductArea","subProductEffectiveWebWidth","setSubProductEffectiveWebWidth","subProductMomentOfInertia","setSubProductMomentOfInertia","subProductDistanceToBottomFiber","setSubProductDistanceToBottomFiber","subProductDeadLoad","setSubProductDeadLoad","subProductDeadLoadPerLinearFoot","setSubProductDeadLoadPerLinearFoot","subProductFc28Day","setSubProductFc28Day","subProductFciRelease","setSubProductFciRelease","subProductFpu","setSubProductFpu","subProductCrossSectionComponent","setSubProductCrossSectionComponent","psfValue","setTolerances","showToleranceModal","setShowToleranceModal","editingToleranceIndex","setEditingToleranceIndex","dimension","setDimension","minValue","setMinValue","maxValue","setMaxValue","handleAddSubProduct","isSubExpanded","fc28Day","fciRelease","handleEditSubProduct","effectiveWebWidth","distanceToBottomFiber","fpu","crossSectionComponent","handleDeleteSubProduct","fontStyle","handleEditTolerance","handleDeleteTolerance","handleSaveProduct","handleAddTolerance","newTolerance","handleSaveSubProduct","ProjectLibraryScreen","filteredProjects","totalPieces","pieceCountByType","getTotalPieceCount","projectManager","ProjectLibraryDetailScreen","totalPieceCount","handleOpenMaps","encodeURIComponent","supported","salesperson","assignedEngineer","assignedDrafter","extractJobNumber","digitsOnly","candidate","validateJobNumber","isValid","secondDigit","thirdDigit","ProjectLibraryAddEditScreen","prefilledJobNumber","prefilledJobName","returnScreen","existingProject","setLocation","setSalesperson","setProjectManager","setAssignedEngineer","setAssignedDrafter","setPieceCountByType","newProductType","setNewProductType","newCount","setNewCount","projectData","marginRight","handleRemovePieceCount","handleAddPieceCount","ProjectLibraryExportImportScreen","importData","setImportData","statusMessage","setStatusMessage","clipboardContent","handleImport","DEFAULT_FORMS","ELIPLAN_CONFIG","EXPO_PUBLIC_ELIPLAN_API_URL","EXPO_PUBLIC_ELIPLAN_API_KEY","EXPO_PUBLIC_ELIPLAN_USERNAME","EXPO_PUBLIC_ELIPLAN_PASSWORD","isEliPlanConfigured","mapEliPlanDepartment","eliplanDept","mapEliPlanStatus","eliplanStatus","usePourScheduleStore","pourEntries","schedules","forms","lastSyncTime","addForm","form","newForm","updateForm","deleteForm","getForm","getFormsByDepartment","addPourEntry","newEntry","updatePourEntry","deletePourEntry","getPourEntry","getPourEntriesByDate","startOfDay","setHours","endOfDay","entryDate","scheduledDate","matchesDate","matchesDepartment","scheduledTime","getPourEntriesByFormBed","formBedId","getPourEntriesByDateRange","getScheduleForDate","totalYards","concreteYards","getTotalYardsForDate","syncWithEliPlan","eliplanData","dateStr","includeCompleted","credentials","btoa","signal","AbortSignal","timeout","fetchEliPlanSchedule","formBedName","workstation","existingForm","f","existingEntry","customerName","markNumbers","pieceCount","productDescription","productCode","dimensions","mixDesign","concreteGrade","mixDesignId","concreteVolume","scheduledStartTime","foreman","initializeDefaultForms","extrudedForms","bedNum","JobAutocompleteInput","onJobNumberChange","onJobNameChange","onJobSelect","jobNumberLabel","jobNameLabel","theme","enableCreatePrompt","showSuggestions","setShowSuggestions","setSuggestions","lastCheckedJobNumber","setLastCheckedJobNumber","validationError","setValidationError","useFocusEffect","checkJobNumberExists","jobNum","isDark","inputStyles","textColor","placeholderColor","labelColor","validateAndCheckJobNumber","handleSelectSuggestion","DailyPourScheduleScreen","initialDate","initialDepartment","selectedDate","setSelectedDate","viewingDepartment","setViewingDepartment","setIsSyncing","editingPourId","setEditingPourId","showDatePickerModal","setShowDatePickerModal","dateInputText","setDateInputText","activeDepartment","setActiveDepartment","selectedFormBedId","setSelectedFormBedId","setMarkNumbers","setPieceCount","setDimensions","setMixDesign","setConcreteYards","setScheduledTime","setStatus","setForeman","useLayoutEffect","setOptions","accent","changeDate","days","getDateLabel","today","selected","diffTime","openDatePicker","currentDate","formatted","setQuickDate","daysOffset","todayEntries","deptEntries","deptYards","deptForms","departmentEntries","departmentYards","deptColors","formPours","capacity","pour","statusColors","st","handleEditPour","handleDeletePour","pourId","handleAddPour","selectedForm","pourData","maxWidth","Calendar","onDayPress","markedDates","selectedColor","calendarBackground","textSectionTitleColor","selectedDayBackgroundColor","selectedDayTextColor","todayTextColor","dayTextColor","textDisabledColor","monthTextColor","textMonthFontWeight","textDayFontSize","textMonthFontSize","handleDateSubmit","ScheduleSearchScreen","allEntries","jobNameSearchType","setJobNameSearchType","showFilters","setShowFilters","selectedDepartments","setSelectedDepartments","selectedStatuses","setSelectedStatuses","dateRangeEnabled","setDateRangeEnabled","setStartDate","setEndDate","showDatePicker","setShowDatePicker","toggleStatus","newSet","add","clearFilters","getFilterCount","daysFromNow","toggleDepartment","thirtyDaysAgo","nextThirtyDays","todayTime","entryJobName","entryTime","daysDiff","start","end","statusInfo","navigateToDate","ScheduleScannerScreen","capturedImage","setCapturedImage","isProcessing","setIsProcessing","parsedEntries","setParsedEntries","showResults","setShowResults","handleCapture","allowsEditing","exif","photo","parseResult","imageUri","reject","base64Data","fetchError","prompt","requestBody","model","messages","image_url","detail","temperature","max_tokens","fetchOptions","choices","jsonMatch","jsonStr","cleanedEntries","positions","highestPosition","idNumbers","idSet","duplicates","seen","rawText","parseScheduleImage","parseError","handleImportEntries","handleRetake","borderBottomWidth","borderBottomColor","length1","length2","angle","cutback","ScheduleReviewScreen","setEntries","selectedIndex","setSelectedIndex","showBulkAssignModal","setShowBulkAssignModal","suggestedDepartment","availableForms","handleUpdateEntry","proceedWithImport","debugInfo","normalizedDate","scheduledDateTimestamp","formBed","renderEditForm","confidence","edges","handleRemoveEntry","handleImportAll","missingForms","missingJobNumbers","missingJobDetails","jobList","j","job","bedName","handleBulkAssignBed","parseProductTag","compressedBlob","ctx","getContext","maxDimension","drawImage","toBlob","src","compressImage","controller","AbortController","abort","fromEntries","errorMsg","ProductTagScannerScreen","permission","requestPermission","useCameraPermissions","facing","setFacing","flash","setFlash","zoom","setZoom","cameraCompleted","setCameraCompleted","processingRef","handleWebCapture","imageData","LoginScreen","onLoginSuccess","onRequestAccess","setPassword","showPassword","setShowPassword","handleLogin","autoComplete","textContentType","secureTextEntry","RegistrationScreen","onSuccess","setFirstName","setLastName","handleSubmit","validateEmail","validatePassword","hasUpper","hasLower","hasNumber","hasSpecial","AdminApprovalScreen","setPendingRequests","selectedRequest","setSelectedRequest","tempPassword","setTempPassword","showPasswordModal","setShowPasswordModal","showDenyModal","setShowDenyModal","actionLoading","setActionLoading","loadRequests","handleApprove","newPassword","numbers","special","allChars","generateTemporaryPassword","handleDeny","ChangePasswordScreen","setNewPassword","confirmPassword","setConfirmPassword","showNewPassword","setShowNewPassword","showConfirmPassword","setShowConfirmPassword","handleChangePassword","useYardLocationStore","addYardLocation","newLocation","updateYardLocation","deleteYardLocation","getYardLocation","getAllActiveYardLocations","addYardedPiece","piece","newPiece","updateYardedPiece","deleteYardedPiece","getYardedPiece","getYardedPieceByPourEntryId","pourEntryId","getYardedPiecesByLocation","locationId","yardLocationId","isShipped","yardedDate","getYardedPiecesByDepartment","getYardedPiecesByJobNumber","searchYardedPieces","pieces","includeShipped","craneBay","dateRange","markAsShipped","pieceId","shippedBy","shippedDate","markAsUnshipped","initializeDefaultLocations","bay","YardMapScreen","uniqueJobs","YardDepartmentScreen","filteredEntries","groupedByForm","isYarded","YardProductSelectionScreen","pourEntry","existingYardedPiece","selectedLocationId","setSelectedLocationId","setCraneBay","setRow","showAddLocationForm","setShowAddLocationForm","activeLocations","l","handleAddCustomLocation","locationName","handleAssignYardLocation","yardedBy","YardSearchScreen","filteredPieces","Stack","createNativeStackNavigator","LogBox","ignoreLogs","global","TextDecoder","OriginalTextDecoder","PatchedTextDecoder","isLatin1","normalizedLabel","super","decode","bytes","Uint8Array","ArrayBuffer","buffer","fromCharCode","registerRootComponent","initializeStrandLibrary","initializeStrandPatterns","initializeProducts","initializeAggregates","initializeAdmixes","initializeProjects","initializeContacts","currentScreen","setCurrentScreen","setIsLoading","init","initStores","handleLoginSuccess","handlePasswordChangeSuccess","handleRegistrationSuccess","GestureHandlerRootView","SafeAreaProvider","StatusBar","NavigationContainer","Navigator","initialRouteName","screenOptions","headerStyle","headerTintColor","headerTitleStyle","headerShadowVisible","Screen","component","headerShown","headerRight","presentation","headerBackVisible","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","mode","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","promises","u","miniCssF","g","globalThis","Function","window","prop","prototype","inProgress","dataWebpackPrefix","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","doneFns","parentNode","bind","head","Symbol","toStringTag","nmd","paths","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}